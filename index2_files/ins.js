﻿!function(i){var n={};function r(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return i[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}r.m=i,r.c=n,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=42)}([function(e,t,i){"use strict";i.d(t,"a",function(){return n});var n={Play:"play",Pause:"pause",Next:"next_video",NextSwipe:"next_video_swipe",Previous:"previous_video",PreviousSwipe:"previous_video_swipe",Skip:"skip",CancelSkip:"cancel_skip",SoundOn:"sound_on",SoundOff:"sound_off",ProgressBarSeeking:"seek",ReadMoreClick:"read_more_click",CloseFloater:"close_floater",InVideoAreaPlay:"video_area_play",InVideoAreaPause:"video_area_pause",FullScreen:"fullscreen",PlayAd:"play_ad",PauseAd:"pause_ad",SoundOnAd:"sound_on_ad",SoundOffAd:"sound_off_ad",SkipAd:"skip_ad"}},function(e,t,i){"use strict";i.d(t,"g",function(){return Vr}),i.d(t,"i",function(){return Ur}),i.d(t,"h",function(){return jr}),i.d(t,"j",function(){return Hr}),i.d(t,"k",function(){return Gr}),i.d(t,"r",function(){return y}),i.d(t,"m",function(){return b}),i.d(t,"l",function(){return zr}),i.d(t,"c",function(){return Wr}),i.d(t,"d",function(){return qr}),i.d(t,"a",function(){return Yr}),i.d(t,"q",function(){return Qr}),i.d(t,"f",function(){return Kr}),i.d(t,"p",function(){return Xr}),i.d(t,"o",function(){return Zr}),i.d(t,"n",function(){return ea}),i.d(t,"e",function(){return w}),i.d(t,"b",function(){return E});var cr=i(5),n=i(11),hr=i.n(n),r=0,a=1,o=2;function s(e){return e<420?r:e<560?a:o}function fr(e,t){for(var a,i=this,n=0,r=e,o=t,s=0;s<r.length;s++)r[s].index=s;function l(e){n=e}this.setup=function(){a=o.getHlsActive(),function(){for(var e=0;e<r.length;e++)r[e].f.sort(function(e,t){if(a){if("hls"==e.f&&"hls"!==t.f)return-1;if("hls"!==e.f&&"hls"==t.f)return 1}return e.h-t.h})}()},this.getPlaylist=function(){return r},this.getCurrentVideoIndex=function(){return n},this.forward=function(){l(n==r.length-1?0:n+1)},this.switchToVideoIndex=function(e){l(e)},this.backward=function(){l((0==n?r.length:n)-1)},this.getCurrentVideoObj=function(){return r[n]},this.getCurrentVideoUrl=function(){return this.getFileToPlay().p},this.getCurrentVideoFileName=function(){return r[n].id},this.getCurrentVideoPoster=function(){return this.getVideoPosterByIndex(n)},this.isCurrentVideoVertical=function(){return r[n].f[0].h>r[n].f[0].w},this.getVideoPosterByIndex=function(e){return r[e].p},this.getTotalVideos=function(){return r.length},this.getFileToPlay=function(){var e,t=this.getCurrentVideoObj(),i=null,n=o.getCurrentResolution(),r=!1;for(e=0;e<t.f.length&&(1080==t.f[e].h&&(t.f[e].h=480),!i||"hls"!=i.f||!a);e++)o.canPlayType(t.f[e].c)&&(i?t.f[e].h==i.h?i=t.f[e]:t.f[e].h>i.h&&t.f[e].h<=n?i=t.f[e]:i.h<=n&&t.f[e].h>n&&!r&&t.f[e].h<=n+180&&(i=t.f[e],r=!0):i=t.f[e]);if(!i)for(e=0;e<t.f.length;e++)o.canPlayType(t.f[e].c)&&(i=t.f[e]);return i},this.isPlaylistFinished=function(){return n==this.getTotalVideos()-1},this.getCurrentVideoDuration=function(){var e=this.getCurrentVideoObj();return e.dur?e.dur+1:0},this.getCurrentVideoTitle=function(){var e=this.getCurrentVideoObj();return e.t?e.t:""},this.getCurrentVideoLanguage2LettersCode=function(){var e=i.getCurrentVideoObj();return void 0!==e.l?e.l:""},this.getNextVideoIndex=function(){return n==r.length-1?0:n+1}}var pr=i(3),gr=i(12);function vr(e){var t=document.fullscreen||document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;return t||t&&t==e}function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var mr={bgSize:30,bg:"url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2aWV3Qm94PSIwIDAgMjguMDggMzAuNTYiPjxkZWZzPjxzdHlsZT4uY2xzLTF7aXNvbGF0aW9uOmlzb2xhdGU7fS5jbHMtMntmaWxsOiMzZGIxZTU7fS5jbHMtMywuY2xzLTR7bWl4LWJsZW5kLW1vZGU6bXVsdGlwbHk7fS5jbHMtM3tmaWxsOnVybCgjbGluZWFyLWdyYWRpZW50KTt9LmNscy00e2ZpbGw6dXJsKCNsaW5lYXItZ3JhZGllbnQtMik7fS5jbHMtNXtmaWxsOnVybCgjbGluZWFyLWdyYWRpZW50LTMpO308L3N0eWxlPjxsaW5lYXJHcmFkaWVudCBpZD0ibGluZWFyLWdyYWRpZW50IiB4MT0iNDcxLjk2IiB5MT0iOTY1Ljc2IiB4Mj0iNDc2LjQ0IiB5Mj0iOTY1Ljc2IiBncmFkaWVudFRyYW5zZm9ybT0idHJhbnNsYXRlKDk5MS45MiAtNDMwLjY3KSByb3RhdGUoOTApIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZmZmIi8+PHN0b3Agb2Zmc2V0PSIxIi8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImxpbmVhci1ncmFkaWVudC0yIiB4MT0iLTM0IiB5MT0iOTY1Ljc2IiB4Mj0iLTI5LjUyIiB5Mj0iOTY1Ljc2IiBncmFkaWVudFRyYW5zZm9ybT0ibWF0cml4KDAsIC0xLCAtMSwgMCwgOTkxLjkyLCAtNS4zMykiIHhsaW5rOmhyZWY9IiNsaW5lYXItZ3JhZGllbnQiLz48bGluZWFyR3JhZGllbnQgaWQ9ImxpbmVhci1ncmFkaWVudC0zIiB4MT0iMjMuMzUiIHkxPSIzNC45NSIgeDI9IjUxLjQzIiB5Mj0iMzQuOTUiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiM0MThmY2QiLz48c3RvcCBvZmZzZXQ9IjAuNTMiIHN0b3AtY29sb3I9IiMzZGJhZWIiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiMyMTQwODAiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48dGl0bGU+ZmluYWxfbG9hZGVyX2xvZ288L3RpdGxlPjxnIGNsYXNzPSJjbHMtMSI+PGcgaWQ9IkxheWVyXzYiIGRhdGEtbmFtZT0iTGF5ZXIgNiI+PHBhdGggY2xhc3M9ImNscy0yIiBkPSJNMjguMiwyNS45NWMtMS4yNC43Mi0xLjQ2LDIuNzItMS40NiwyLjcycy0zLjExLTEuNjUtMy4xNy0yLC40Ny0yLjc5LDEuNzUtMi4zOWExMC42NSwxMC42NSwwLDAsMSwyLjg3LDEuNzJaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjMuMzUgLTE5LjY3KSIvPjxwYXRoIGNsYXNzPSJjbHMtMiIgZD0iTTI4LjIsNDRjLTEuMjQtLjcyLTEuNDYtMi43Mi0xLjQ2LTIuNzJzLTMuMTEsMS42NS0zLjE3LDIsLjQ3LDIuNzksMS43NSwyLjM5QTEwLjY1LDEwLjY1LDAsMCwwLDI4LjIsNDRaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjMuMzUgLTE5LjY3KSIvPjxwYXRoIGNsYXNzPSJjbHMtMyIgZD0iTTI4LjIsNDRjLTEuMjQtLjcyLTEuNDYtMi43Mi0xLjQ2LTIuNzJzLTMuMTEsMS42NS0zLjE3LDIsLjQ3LDIuNzksMS43NSwyLjM5QTEwLjY1LDEwLjY1LDAsMCwwLDI4LjIsNDRaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjMuMzUgLTE5LjY3KSIvPjxwYXRoIGNsYXNzPSJjbHMtNCIgZD0iTTI4LjIsMjUuOTVjLTEuMjQuNzItMS40NiwyLjcyLTEuNDYsMi43MnMtMy4xMS0xLjY1LTMuMTctMiwuNDctMi43OSwxLjc1LTIuMzlhMTAuNjUsMTAuNjUsMCwwLDEsMi44NywxLjcyWiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTIzLjM1IC0xOS42NykiLz48cGF0aCBjbGFzcz0iY2xzLTUiIGQ9Ik01MS40MiwzNC45NWMuNTktLjI2LTE3LjA1LTE1LjI4LTIxLjk1LTE1LjI4aDBjLS43OC4wNi00LjU0LDMuNi01LjQ1LDQuNy0xLjEzLDEuMzctLjQyLDIuMjktLjQyLDIuMjl2MGMuNDItNi4wNywxNi45NCw4LjMyLDE2Ljk0LDguMzJTMjQsNDkuMzQsMjMuNTcsNDMuMjd2MHMtLjcxLjkyLjQyLDIuMjljLjkxLDEuMSw0LjY2LDQuNjQsNS40NSw0LjdoMEMzNC4zNyw1MC4yMiw1MiwzNS4yMSw1MS40MiwzNC45NVoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMy4zNSAtMTkuNjcpIi8+PC9nPjwvZz48L3N2Zz4=)",spinnerSize:60,em:2.813,border:2.813*.11},yr=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.playSpinner=!1,this.playerElement=e.getPlayerElement(),this.player=e}return function(e,t,i){t&&l(e.prototype,t),i&&l(e,i),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"resizeSpinner",value:function(e,t){if(this.isSpinnerExist()){var i=this.playerElement.getElementsByClassName("loader-bg"),n=this.playerElement.getElementsByClassName("loader-bg-image"),r=this.playerElement.getElementsByClassName("loader");i[0].style.setProperty("height",t+"px","important"),i[0].style.width=e+"px",n[0].style.left=(e-mr.bgSize)/2+"px",n[0].style.top=(t-mr.bgSize)/2+"px",r[0].style.left=e/2-mr.bgSize-9+"px",r[0].style.top=t/2-mr.bgSize-5+"px"}}},{key:"resizeBufferingSpinner",value:function(e,t){if(this.isBufferingSpinnerExist()){var i=this.playerElement.getElementsByClassName("loader-bg-transparent");i[0].style.setProperty("height",t+"px","important"),i[0].style.width=e+"px"}}},{key:"setSpinnerBgImgVisibility",value:function(e){var t=this.playerElement.querySelector(".loader-bg-image-transparent");t&&(t.style.visibility=e?"visible":"hidden")}},{key:"startSpinner",value:function(){if(!this.isSpinnerExist()&&(this.playSpinner=!0,this.playSpinner)){this.setLoaderBackground();var e=Object(cr.b)(this.playerElement);this.resizeSpinner(e.width,e.height)}}},{key:"startBufferingSpinner",value:function(){if(!this.isBufferingSpinnerExist()&&(this.playSpinner=!0,this.playSpinner)){this.setBufferingLoaderBackground();var e=Object(cr.b)(this.playerElement);this.resizeBufferingSpinner(e.width,e.height)}}},{key:"isSpinnerExist",value:function(){return 0<this.playerElement.getElementsByClassName("loader-bg").length}},{key:"isBufferingSpinnerExist",value:function(){return 0<this.playerElement.getElementsByClassName("loader-bg-transparent").length}},{key:"setLoaderBackground",value:function(){var e=document.createElement("div");e.className="loader-bg";var t=this.setLoaderBackgroundImage();e.appendChild(t);var i=document.createElement("div");i.className="loader",e.appendChild(i),this.playerElement.appendChild(e)}},{key:"setBufferingLoaderBackground",value:function(){var e=document.createElement("div");e.className="loader-bg-transparent";var t=this.setLoaderBufferingBackgroundImage();e.appendChild(t);var i=document.createElement("div");i.className="loader-transparent",e.appendChild(i),this.playerElement.appendChild(e)}},{key:"setLoaderBackgroundImage",value:function(){var e=document.createElement("div");return e.className="loader-bg-image",e}},{key:"setLoaderBufferingBackgroundImage",value:function(){var e=document.createElement("div");return e.className="loader-bg-image-transparent",e}},{key:"stopSpinner",value:function(){this.playSpinner=!1;for(var e=this.playerElement.getElementsByClassName("loader-bg"),t=0;t<e.length;t++)this.playerElement.removeChild(e[t])}},{key:"stopBufferingSpinner",value:function(){this.playSpinner=!1;for(var e=this.playerElement.getElementsByClassName("loader-bg-transparent"),t=0;t<e.length;t++)this.playerElement.removeChild(e[t])}}]),t}();var br=i(0);function wr(){var e,t,a,o,i,s,n,l,d,u,r,c,h,f,p,g,v,m,y,b,w,E,S,A=!1,T=0,L=0,C=[],k=this;function P(e){e.children[0].classList.add("trv-with-animation")}function x(e){e.children[0].classList.remove("trv-with-animation")}function O(e,t){i=setTimeout(function(){s=e,T=Date.now(),"right"==e?(w.style.visibility="visible",P(w),O("bottom",o/4*1e3)):"bottom"==e?(E.style.visibility="visible",P(E),O("left",o/4*1e3)):(b.style.visibility="visible",P(b))},t)}function I(){t=setInterval(function(){a--,h.innerText=N(m.getCurrentVideoLanguage2LettersCode())+" "+a},1e3),e=setTimeout(function(){R(),l.forward()},1e3*a)}function R(){!function(){A&&l.showControls();A=!1;var e=d.getElementsByClassName("trv-autoskip-style");e[0]&&d.removeChild(e[0]);var t=d.getElementsByClassName("trv-autoskip-container");if(t[0])t[0].style.visibility="hidden";else{var i=d.getElementsByClassName("trv-autoskip-container-compact");i[0]&&(i[0].style.visibility="hidden")}S&&(S.style.visibility="hidden",x(S));w&&(w.style.visibility="hidden",x(w));E&&(E.style.visibility="hidden",x(E));b&&(b.style.visibility="hidden",x(b))}(),M(),l.unsubscribe(pr.g,B),l.unsubscribe(Zr,F),l.unsubscribe(Xr,D),l.unsubscribe(Yr,R),l.unsubscribe(pr.c,_),y=!1,l.hideAutoSkip(),v=!1}function M(){clearTimeout(e),clearInterval(t),clearTimeout(i)}function D(){if(!y){y=!0;var e=d.getElementsByClassName("trv-autoskip-style")[0];e&&d.removeChild(e);var t=o/4*1e3-(L-T);"top"==s?O("right",t):"right"==s?O("bottom",t):"bottom"==s&&O("left",t),h&&I()}}function F(){if(y&&l.IsPlayerViewable()){y=!1,L=Date.now(),M(),clearTimeout(i);var e=document.createElement("style");e.className="trv-autoskip-style",e.innerText="top"==s?"#"+g+" .trv-autoskip-line-top > div {animation-play-state: paused !important;}":"right"==s?"#"+g+" .trv-autoskip-line-right > div {animation-play-state: paused !important;}":"bottom"==s?"#"+g+" .trv-autoskip-line-bottom > div {animation-play-state: paused !important;}":"#"+g+" .trv-autoskip-line-left > div {animation-play-state: paused !important;}",d.appendChild(e)}}this.initAutoSkipElements=function(e){c=e.getElementsByClassName("trv-autoskip-container")[0],r=e.getElementsByClassName("trv-autoskip-background")[0],p=e.getElementsByClassName("trv-autoskip-poster")[0],h=e.getElementsByClassName("autoskip-btn-blue")[0],f=e.getElementsByClassName("autoskip-btn-gray")[0],S=e.getElementsByClassName("trv-autoskip-line-top")[0],w=e.getElementsByClassName("trv-autoskip-line-right")[0],E=e.getElementsByClassName("trv-autoskip-line-bottom")[0],b=e.getElementsByClassName("trv-autoskip-line-left")[0]},this.initAutoSkip=function(e,t){u=(l=t).useVerticalSwiper(),d=t.getPlayerElement(),g=d.id,a=o=e,L=0,n=t.isMobile(),m=t.getPlaylist()},this.clearVerticalAutoskip=function(){var e;l&&(null!==(e=C)&&void 0!==e&&e.length&&(C.forEach(function(e){return cancelAnimationFrame(e)}),C=[]),function(){var e=Array.from(l.getPlayerElement().querySelectorAll(".trv-vertical-autoskip"));null!=e&&e.length&&e.map(function(e){return e.style.setProperty("visibility","hidden","important")});y=A=!1,l.isAutoSkipShown()&&l.hideAutoSkip();v=!1}())},this.fillAutoskipBtn=function(n){var r=l.getActiveSwipeVideo().querySelector(".up-next-fill"),a=null,o=null,s=0;r.style.width="0%",C.push(requestAnimationFrame(function e(t){if(l.getVideo().paused)return o=o||t,void C.push(requestAnimationFrame(e));o&&(s+=t-o,o=null);var i=(t-(a=a||t)-s)/(1e3*n);i<1?(r.style.width="".concat(100*i,"%"),C.push(requestAnimationFrame(e))):(r.style.width="100%",k.clearVerticalAutoskip(),l.getVerticalSwiper().next())}))},this.onBiddingSessionEndsCallback=function(){v&&!l.useVerticalSwiper()&&(this.showAutoSkip(),v=!1)},this.showAutoSkip=function(){var t=this;if(!A){if(l.isBiddingSessionRunning())return l.subscribe(pr.g,B),void(v=!0);if(l.unsubscribe(pr.g,B),l.subscribe(pr.c,_),this.isAutoSkipCompactMode()&&!A&&l.hideControls(),A=!0,u){var e=l.getActiveSwipeVideo(),i=e.querySelector(".trv-vertical-autoskip");if(i){var n=e.querySelector(".expanded");n&&n.classList.remove("expanded"),i.style.setProperty("visibility","visible","important"),this.fillAutoskipBtn(o)}}else{var r=m.getNextVideoIndex();p.src=m.getVideoPosterByIndex(r),this.isAutoSkipCompactMode()?this.setAutoSkipToCompactMode():this.setAutoSkipToExpandedMode(),d.addEventListener("onFullScreenChange",function(e){e.detail.isFullScreen||l.isVertical()?e.detail.isFullScreen&&t.setAutoSkipToExpandedMode():t.setAutoSkipToCompactMode()}),h.innerText=N(m.getCurrentVideoLanguage2LettersCode())+" "+a,f.innerText=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"en";return l.getTranslations().cancel[e]||"Cancel"}(m.getCurrentVideoLanguage2LettersCode()),T=Date.now(),O("right",o/4*1e3),s="top",c.style.visibility="visible",S.style.visibility="visible",P(S),I(),h.onclick=function(e){e.stopPropagation(),l.handlePlayerInteraction(br.a.Skip),l.setIgnorePlaylistEnd(),l.forward(),R()},f.onclick=function(e){e.stopPropagation(),l.handlePlayerInteraction(br.a.CancelSkip),R()},l.subscribe(Gr,function(){this.isAutoSkipCompactMode()?this.setAutoSkipToCompactMode():this.setAutoSkipToExpandedMode()}.bind(this)),l.subscribe(Yr,function(){R()}.bind(this)),l.subscribe(Zr,F),l.subscribe(Xr,D)}y=!0}},this.setAutoSkipToCompactMode=function(){c.className="trv-autoskip-container-compact",r.className="trv-autoskip-background-compact",h.className="autoskip-btn autoskip-btn-blue-compact autoskip-btn-compact",f.className="autoskip-btn autoskip-btn-gray-compact autoskip-btn-compact",p.className="trv-autoskip-poster-compact"},this.setAutoSkipToExpandedMode=function(){c.className="trv-autoskip-container",r.className="trv-autoskip-background",h.className="autoskip-btn autoskip-btn-blue",f.className="autoskip-btn autoskip-btn-gray",p.className="trv-autoskip-poster"},this.removeAutoSkip=function(){R()},this.isAutoSkipCompactMode=function(){return Object(cr.b)(d).width<400||n},this.canStartBiddingSession=function(){return!A},this.onAdStarted=function(){A&&R()};var B=this.onBiddingSessionEndsCallback.bind(this),_=this.onAdStarted.bind(this);function N(e){var t=0<arguments.length&&void 0!==e?e:"en";return l.getTranslations().nextVideoIn[t]||"Next video in"}}function Er(){this.promiseSubscribers=[],this.eventSubscribers=[],this.playerElement=null,this.eventsWithPromises=[Kr,pr.e],this.setPlayerElement=function(e){this.playerElement=e},this.subscribe=function(e,t){this.eventsWithPromises.includes(e)?this.subscribePromise(e,t):(this.eventSubscribers.push({eventName:e,callback:t}),this.playerElement.addEventListener(e,t))},this.removeSubscribers=function(){this.promiseSubscribers=[];for(var e=0;e<this.eventSubscribers.length;e++)this.playerElement.removeEventListener(this.eventSubscribers[e].eventName,this.eventSubscribers[e].callback)},this.subscribePromise=function(e,t){void 0===this.promiseSubscribers[e]&&(this.promiseSubscribers[e]=[]),this.promiseSubscribers[e].push(t)},this.DispatchPromiseEvent=function(a,o){return new Promise(function(e,t){var i=[];if(void 0!==this.promiseSubscribers[a]){for(var n=this.promiseSubscribers[a].length-1;0<=n;n--){var r=this.promiseSubscribers[a][n](o);r&&i.push(r)}i.length?Promise.all(i).then(function(){e()}).catch(function(){t()}):e()}else e()}.bind(this))},this.unsubscribe=function(e,t){this.playerElement.removeEventListener(e,t)}}function Sr(e){var t=this;this.subscribersService=e.getEventSubscribersService(),this.playerObject=e,this.getRoot=this.playerObject.shadowDomEnabled()?function(){return t.playerObject.getWrapperElement().parentElement}:null}Sr.prototype.on=function(e,t){this.subscribersService.subscribe(e,t)},Sr.prototype.off=function(e,t){this.subscribersService.unsubscribe(e,t)},Sr.prototype.play=function(){this.playerObject.play()},Sr.prototype.pause=function(){this.playerObject.pause()},Sr.prototype.forward=function(){this.playerObject.forward()},Sr.prototype.backwards=function(){this.playerObject.backward()},Sr.prototype.getWidgetId=function(){return this.playerObject.getWidgetId()},Sr.prototype.mute=function(){return this.playerObject.mute()},Sr.prototype.unmute=function(){return this.playerObject.unmute()},Sr.prototype.disableAutoskip=function(){return this.playerObject.disableAutoSkip()},Sr.prototype.setConsentString=function(e){this.playerObject.setConsentString(e)},Sr.prototype.setGdprApplies=function(e){this.playerObject.setGdprApplies(e)};var Ar=i(4);function d(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,i){return t&&d(e.prototype,t),i&&d(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}var c={mpeg4:function(e,t){var a=e.getVideo(),o=!1;this.currentSrc=t.p,this.type="mpeg4",this.loadVideoSource=function(r){return new Promise(function(e){o=!1;function t(){o=!0,clearInterval(i),a.removeEventListener("loadeddata",n),a.removeEventListener("loadedmetadata",n),a.currentTime=r,e()}var i=null,n=function(){t()};a.addEventListener("loadeddata",n),a.addEventListener("loadedmetadata",n),i=setInterval(function(){3<=a.readyState&&t()},500),a.src=this.currentSrc,a.load()}.bind(this))},this.isUrlDifferentThanCurrentUrl=function(e){return a.src&&0<a.src.length?-1==a.src.indexOf(e):!(a.currentSrc&&0<a.currentSrc.length)||-1==a.currentSrc.indexOf(e)},this.play=function(e){if(o)return a.play();this.loadVideoSource(e).then(function(){return a.play()}.bind(this))},this.destroy=function(){}},hls:function(i,n,e){var t=-1;i.getHlsActive(),this.player=i,this.hlsService=null,this.videoLoaded=!1,this.swiperKey=null!=e?e:"",this.type="hls",this.currentSrc=n.p,this.inLoading=!1,this.enableSavingModeAfterLoading=!1,this.disableSavingModeAfterLoading=!1,this.getSrc=function(){return this.currentSrc},this.getHlsService=function(){return this.hlsService},this.getSwiperKey=function(){return this.swiperKey},this.getVideoElement=function(){var e=this.player.getSwiperVideos();if(e.length){var t=e.find(function(e){return e.firstChild.src===n.p});return t?t.firstChild:this.player.getVideo()}return this.player.getVideo()},this.EnableSavingModeForContent=function(){this.hlsService&&(this.inLoading||this.getVideoElement().readyState<4?(this.enableSavingModeAfterLoading=!0,window.playerLog("saving mode pending")):this.enableSavingMode())},this.enableSavingMode=function(){window.playerLog("saving mode enabled to level "+this.hlsService.firstLevel),this.hlsService.autoLevelCapping=this.hlsService.firstLevel,this.hlsService.nextLoadLevel=this.hlsService.firstLevel,this.hlsService.startLevel=this.hlsService.firstLevel},this.disableSavingMode=function(){this.hlsService.currentLevel!=t&&(window.playerLog("saving mode disabled to level "+t),this.hlsService.autoLevelCapping=t,this.hlsService.nextLoadLevel=t,this.hlsService.startLevel=t)},this.DisableSavingModeForContent=function(){this.hlsService&&(window.playerLog("ready state",this.getVideoElement().readyState),this.inLoading||this.getVideoElement().readyState<4?(window.playerLog("disable saving mode pending"),this.disableSavingModeAfterLoading=!0):this.disableSavingMode())},this.calculateMaxLevel=function(e){!i.isSavingModeForContentRunning()&&this.hlsService&&(t=s(e),this.hlsService.autoLevelCapping=t,1==i.getFirstTimeHLSInit()&&i.setHLSCurrentLevel(t))},i.subscribe("windowResize",function(e){this.hlsService&&this.calculateMaxLevel(e.detail.playerWidth)}.bind(this)),this.setupHlsManager=function(){window.playerLog("setup hls manager");var e=i.getPlayerDimension(),t={startLevel:1==i.getFirstTimeHLSInit()?s(e.width):i.getHLSCurrentLevel(),maxMaxBufferLength:8,maxBufferLength:8,autoStartLoad:!1,testBandwidth:!1,debug:!1,overrideNative:!Object(Ar.a)()};this.hlsService=new hr.a(t),this.hlsService.on(hr.a.Events.LEVEL_SWITCHING,function(e,t){void 0!==t.level&&(window.playerLog("switching level "+t.level),i.setHLSCurrentLevel(t.level))}),this.calculateMaxLevel(e.width),i.isSavingModeForContentRunning()&&this.EnableSavingModeForContent(),i.setFirstTimeHLSInit(!1)},this.isUrlDifferentThanCurrentUrl=function(e){return this.currentSrc!==e&&(!(this.getVideoElement().src.includes("blob")&&this.hlsService&&this.hlsService.url)||-1==this.hlsService.url.indexOf(e))},this.loadVideoSource=function(i){return window.playerLog("load video source"),new Promise(function(t){this.hlsService||this.setupHlsManager(),!this.hlsService||this.videoLoaded||this.inLoading||(this.inLoading=!0,this.hlsService.once(hr.a.Events.MEDIA_ATTACHED,function(){window.playerLog("load video source media attached");var e=function(){window.playerLog("load video source manifest loaded"),this.hlsService.once(hr.a.Events.LEVEL_LOADED,function(){window.playerLog("load video source level loaded"),this.videoLoaded=!0,this.inLoading=!1,t()}.bind(this)),i?this.hlsService.startLoad(i):this.hlsService.startLoad(1)}.bind(this);this.hlsService.once(hr.a.Events.MANIFEST_LOADED,e),Object(Ar.a)()?(this.getVideoElement().src=this.currentSrc,this.videoLoaded=!0,this.inLoading=!1,t()):this.hlsService.loadSource(this.currentSrc)}.bind(this)),this.hlsService.attachMedia(this.getVideoElement()))}.bind(this))},this.checkSavingMode=function(){this.enableSavingModeAfterLoading&&(this.enableSavingModeAfterLoading=!1,this.enableSavingMode()),this.disableSavingModeAfterLoading&&(this.disableSavingModeAfterLoading=!1,this.disableSavingMode())},this.play=function(e){return 0,window.playerLog("hls play"),new Promise(function(e,t){window.playerLog("videoloaded",this.videoLoaded),this.videoLoaded?this.inLoading||this.getVideoElement().play().then(function(){this.checkSavingMode(),e()}.bind(this)).catch(function(e){window.playerLog("ERROR catch play 2",e),t()}):(window.playerLog("loadVideo"),this.loadVideoSource(0).then(function(){this.getVideoElement().play().then(function(){window.playerLog("then play"),this.player.setPlayerContentStatus(Ur),this.checkSavingMode(),e()}.bind(this)).catch(function(e){window.playerLog("ERROR catch play",e),t()})}.bind(this)))}.bind(this))},this.destroyHLSService=function(){this.inLoading=!1,this.currentSrc=null,this.videoLoaded=!1,window.playerLog("destroy hls service"),this.hlsService&&(i.setFirstTimeHLSInit(!0),this.hlsService.destroy(),this.hlsService=null)},this.destroy=function(){window.playerLog("Destroy hls manager"),this.destroyHLSService()},this.setupHlsManager()}},Tr=u(function e(t,i){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),new c[t.f](i,t,n)}),Lr=i(2),Cr={public:{comovid:[203,260,286,321,333,469,808,986,1001,1369,1446,2233]},private:{ad_geek:[597,828],tvbs:[2109,934,733]}};function kr(e){var t=e.elementToTrack,i=e.threshold,n=void 0===i?.4:i,r=e.callback,a={root:null,rootMargin:"0px",threshold:n};this.elementToTrack=t,this.delayTimeout=null,this.elementInView=null,this.callback=r,this.observer=new IntersectionObserver(this.onViewabilityCallback.bind(this),a),this.observer.observe(t)}kr.prototype.onViewabilityCallback=function(e,t){window.playerLog("viewability callback",e);var i=e[e.length-1];this.elementInView=i.isIntersecting,this.callback&&this.callback(e,t)},kr.prototype.isElementInView=function(){return this.elementInView},kr.prototype.StopObserving=function(){this.observer.unobserve(this.elementToTrack)};var h=i(9);function Pr(e){this.player=e,this.posterElement=this.player.getPlayerElements().player.poster,this.onClickBinding=this.onPosterClick.bind(this),this.video=this.player.getVideo(),this.player.subscribe("adStarted",function(){this.Hide()}.bind(this)),this.player.subscribe(Kr,function(){return new Promise(function(e){this.Show(),e()}.bind(this))}.bind(this)),this.postersCache={},0===Object.keys(this.postersCache).length&&this.loadPosters()}Pr.prototype.loadPosters=function(){var e=this;this.player.getPlaylistContent().map(function(t){t.p&&Object(h.b)(t.p).then(function(e){this.postersCache[t.p]=e}.bind(e))})},Pr.prototype.cachePoster=function(e,t,i,n){this.postersCache[e]=t,i.image=t,n(i)},Pr.prototype.Show=function(){this.load()},Pr.prototype.Hide=function(){this.hide()},Pr.prototype.load=function(){var e=this.player.getPlaylist(),t=e.getCurrentVideoPoster(),i=e.isCurrentVideoVertical();(function(i,n){var r={image:null,url:i};return new Promise(function(t,e){n.postersCache[i]?(r.image=n.postersCache[i],t(r)):Object(h.b)(i).then(function(e){n.cachePoster(i,e,r,t)}).catch(function(){i=i.replace("_2.","_1."),Object(h.b)(i).then(function(e){n.cachePoster(i,e,r,t)}).catch(function(){e()})}.bind(this))})})(t,this).then(function(e){this.show(e,i)}.bind(this)).catch(function(){})},Pr.prototype.show=function(e,t){(this.video.paused||this.video.ended||0<=this.video.currentTime)&&(e.image?(this.posterElement.innerHTML="",this.posterElement.appendChild(e.image),e.image.style.width="100%",e.image.style.height="100%",e.image.style.objectFit="cover"):this.posterElement.style.backgroundImage="url('"+e.url+"')",this.posterElement.style.visibility="visible",t?this.posterElement.style.setProperty("background-size","cover"):this.posterElement.style.setProperty("background-size","contain"),this.addPosterEvents(),this.player.getPlayerElement().dispatchEvent(new CustomEvent("onPosterShown")))},Pr.prototype.hide=function(){window.playerLog("hide poster"),this.posterElement.style.visibility="hidden",this.removePosterEvents(),this.player.getPlayerElement().dispatchEvent(new CustomEvent("onPosterHidden"))},Pr.prototype.onPosterClick=function(e){this.player.onTogglePlayPauseButtonCallback(e),this.removePosterEvents()},Pr.prototype.addPosterEvents=function(){this.posterElement.addEventListener("click",this.onClickBinding)},Pr.prototype.removePosterEvents=function(){this.posterElement.removeEventListener("click",this.onClickBinding)};var xr=i(13);function f(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Or=function(){function i(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.container=e,this.contextMenu=null,this.playerObj=t,this.init()}return function(e,t,i){t&&f(e.prototype,t),i&&f(e,i),Object.defineProperty(e,"prototype",{writable:!1})}(i,[{key:"init",value:function(){var t=this;this.container.addEventListener("contextmenu",function(e){return t.setContextMenu(e)})}},{key:"getOffsetsFixer",value:function(e){var t={y:0,x:0};if(e.target==this.container)return t;for(var i=e.target;i!=this.container;){if(i==this.container.querySelector(".mediaControls")||i==this.contextMenu){t={y:i.offsetTop,x:e.target.offsetLeft};break}i=i.parentNode}return t}},{key:"setContextMenu",value:function(e){if(e.preventDefault(),e.stopPropagation(),!(2===e.button&&(e.target.className&&e.target.className.includes("context")||e.target.closest(".trv-media-controls")||e.target.closest(".volume-container"))||this.playerObj.isAdPlaying()||this.playerObj.isPosterShown()||this.playerObj.isAutoSkipShown())){this.removeCurrentContextMenu();var t=document.createElement("div");t.id="context-menu",t.style.position="absolute",this.container.appendChild(t);var i=t.offsetWidth,n=t.offsetHeight,r=this.container.getBoundingClientRect(),a=e.clientX-r.left,o=e.clientY-r.top,s=this.getOffsetsFixer(e);a+=s.x,o+=s.y,a+i>r.width&&(a=r.width-i),o+n>r.height&&(o=r.height-n),a<0&&(a=0),o<0&&(o=0),t.style.left="".concat(a,"px"),t.style.top="".concat(o,"px"),t.appendChild(this.setContextMenuIconContainerElement()),t.appendChild(this.setContextMenuTextContainerElement()),this.setContextMenuEvents(t)}}},{key:"setContextMenuEvents",value:function(t){function i(){clearTimeout(r),r=null,r=setTimeout(e,1500)}var n=this,e=function(){window.removeEventListener("mousemove",i),t&&t.parentNode==n.container&&n.container.removeChild(t)},r=setTimeout(e,1500),a=t.style.backgroundColor;window.addEventListener("click",function e(){window.removeEventListener("click",e),window.removeEventListener("mousemove",i),t&&t.parentNode==n.container&&n.container.removeChild(t)}),window.addEventListener("mousemove",i),t.addEventListener("click",function(e){e.preventDefault(),window.open("https://truvid.com/terms/privacy-policy","_blank")});function o(e){t.style.backgroundColor="mouseenter"==e.type?"black":a}t.addEventListener("mouseenter",o),t.addEventListener("mouseleave",o)}},{key:"setContextMenuIconContainerElement",value:function(){var e=document.createElement("div"),t=document.createElement("div");return e.className="context-menu-icon-container",t.className="context-menu-icon",e.appendChild(t),e}},{key:"setContextMenuTextContainerElement",value:function(){var e=document.createElement("div"),t=document.createElement("div");return e.className="context-menu-text-container",t.className="context-menu-text",t.innerHTML='Powered by truvid<span style="font-size: 10px;line-height:15px;">&trade;</span>',e.appendChild(t),e}},{key:"removeCurrentContextMenu",value:function(){var e=this.container.querySelector("#context-menu");e&&e.parentNode==this.container&&this.container.removeChild(e)}}]),i}();function p(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ir=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.playerElements=this.player.getPlayerElements(),this.playerElement=this.player.getPlayerElement(),this.html="",this.volumeElements={},this.eventsRegistered=!1,this.displayInMobile=!1,this.volumeDrag=!1,this.setVolumeBarOnMouseDownEventCallback=this.setVolumeBarOnMouseDownEventCallback.bind(this),this.setVolumeBarDocumentOnMouseMoveEventCallback=this.setVolumeBarDocumentOnMouseMoveEventCallback.bind(this),this.setVolumeBarDocumentOnMouseUpEventCallback=this.setVolumeBarDocumentOnMouseUpEventCallback.bind(this),this.onVolumeButtonMouseEnter=this.onVolumeButtonMouseEnter.bind(this),this.onVolumeButtonMouseLeave=this.onVolumeButtonMouseLeave.bind(this)}return function(e,t,i){t&&p(e.prototype,t),i&&p(e,i),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"setVolumeByUIChoice",value:function(e){var t=this.volumeElements.volumeBar.getBoundingClientRect(),i=100-100*(e-t.top)/t.height;if(!isNaN(i)&&isFinite(i)){var n=(i=Math.max(0,Math.min(i,100)))/100;0<n&&this.playerElements.player.mediaVideo.muted&&this.player.toggleMute(),this.player.setVolume(n)}else this.removeVolumeBarDocumentOnMouseMoveEvent()}},{key:"setVolumeBarOnMouseDownEventCallback",value:function(e){e.stopPropagation(),this.setVolumeBarDocumentOnMouseMoveEvent(),this.volumeDrag=!0,this.playerElements.player.mediaVideo.muted&&this.player.toggleMute();var t=this.player.getApiObservable();t&&t.notify("click",{widgetId:this.player.getWidgetId(),video:this.playerElements.player.mediaVideo,clickedElement:"volume bar"}),this.setVolumeByUIChoice(e.y&&0<e.y?e.y:e.pageY)}},{key:"setVolumeBarOnMouseDownEvent",value:function(){var t=this;[this.volumeElements.volumeBar,this.volumeElements.volumeHandle,this.volumeElements.volumeContainer].forEach(function(e){return e.addEventListener("mousedown",t.setVolumeBarOnMouseDownEventCallback)})}},{key:"removeVolumeBarOnMouseDownEvent",value:function(){var t=this;[this.volumeElements.volumeBar,this.volumeElements.volumeHandle,this.volumeElements.volumeContainer].forEach(function(e){return e.removeEventListener("mousedown",t.setVolumeBarOnMouseDownEventCallback)})}},{key:"setVolumeBarDocumentOnMouseMoveEventCallback",value:function(e){this.volumeDrag&&this.setVolumeByUIChoice(e.y&&0<e.y?e.y:e.pageY)}},{key:"setVolumeBarDocumentOnMouseMoveEvent",value:function(){document.addEventListener("mousemove",this.setVolumeBarDocumentOnMouseMoveEventCallback)}},{key:"removeVolumeBarDocumentOnMouseMoveEvent",value:function(){document.removeEventListener("mousemove",this.setVolumeBarDocumentOnMouseMoveEventCallback)}},{key:"onVolumeButtonMouseEnter",value:function(){this.player.controlsShown()&&(this.volumeElements.volumeContainer.style.display="block")}},{key:"onVolumeButtonMouseLeave",value:function(){this.volumeDrag||(this.volumeElements.volumeContainer.style.display="none")}},{key:"setVolumeButtonEvents",value:function(){this.volumeElements.volumeContainer.addEventListener("mouseenter",this.onVolumeButtonMouseEnter),this.playerElements.player.volumeButton.addEventListener("mouseenter",this.onVolumeButtonMouseEnter),this.playerElements.player.volumeButton.addEventListener("mouseleave",this.onVolumeButtonMouseLeave),this.volumeElements.volumeContainer.addEventListener("mouseleave",this.onVolumeButtonMouseLeave)}},{key:"removeVolumeButtonEvents",value:function(){this.playerElements.player.volumeButton.removeEventListener("mouseenter",this.onVolumeButtonMouseEnter),this.volumeElements.volumeContainer.removeEventListener("mouseenter",this.onVolumeButtonMouseEnter),this.playerElements.player.volumeButton.removeEventListener("mouseleave",this.onVolumeButtonMouseLeave),this.volumeElements.volumeContainer.removeEventListener("mouseleave",this.onVolumeButtonMouseLeave)}},{key:"setVolumeBarDocumentOnMouseUpEventCallback",value:function(e){this.volumeDrag&&(this.volumeDrag=!1,this.setVolumeByUIChoice(e.y&&0<e.y?e.y:e.pageY),this.removeVolumeBarDocumentOnMouseMoveEvent())}},{key:"setVolumeBarDocumentOnMouseUpEvent",value:function(){this.playerElement.addEventListener("mouseup",this.setVolumeBarDocumentOnMouseUpEventCallback)}},{key:"removeVolumeBarDocumentOnMouseUpEvent",value:function(){this.playerElement.removeEventListener("mouseup",this.setVolumeBarDocumentOnMouseUpEventCallback)}},{key:"styleVolume",value:function(){var e;if(null!==(e=this.playerElements)&&void 0!==e&&e.player&&!this.player.useVerticalSwiper()){var t=this.playerElements.player.mediaVideo.muted,i=this.player.getIconsMap();this.playerElements.player.volumeButton.innerHTML=t?i.getIcon("mute"):i.getIcon("unmute");var n=100*this.playerElements.player.mediaVideo.volume;this.volumeElements.activeVolume&&(this.volumeElements.activeVolume.style.height=t?"0%":n+"%"),this.volumeElements.volumeHandle&&(this.volumeElements.volumeHandle.style.top=t?"100%":Math.abs(100-n)+"%")}}},{key:"init",value:function(){this.playerElements=this.player.getPlayerElements(),this.getElements(),this.isAllowed()&&(this.setVolumeButtonEvents(),this.setVolumeBarOnMouseDownEvent(),this.setVolumeBarDocumentOnMouseUpEvent(),this.eventsRegistered=!0)}},{key:"removeEvents",value:function(){this.eventsRegistered&&(this.removeVolumeButtonEvents(),this.removeVolumeBarOnMouseDownEvent(),this.removeVolumeBarDocumentOnMouseUpEvent(),this.removeVolumeBarDocumentOnMouseMoveEvent())}},{key:"isAllowed",value:function(){return!(this.player.isMobile()&&!this.displayInMobile)}},{key:"render",value:function(){return this.html=this.isAllowed()?'\n            <div class="volume-container">\n                <div style="position: relative;">\n                    <div class="volume-bar">\n                        <div class="active-volume"></div>\n                    </div>\n                </div>\n                <div class="button-holder">\n                    <div class="volumeHandle"></div>\n                </div>\n            </div>':"",this.html}},{key:"hide",value:function(){var e;null!==(e=this.volumeElements)&&void 0!==e&&e.volumeContainer&&(this.volumeElements.volumeContainer.style.display="none")}},{key:"getElements",value:function(){return this.volumeElements.volumeContainer=this.playerElement.querySelector(".volume-container"),this.volumeElements.volumeBar=this.playerElement.querySelector(".volume-bar"),this.volumeElements.activeVolume=this.playerElement.querySelector(".active-volume"),this.volumeElements.volumeHandle=this.playerElement.querySelector(".volumeHandle"),this.volumeElements}},{key:"destroy",value:function(){this.removeEvents(),this.html="",this.volumeElements={},this.eventsRegistered=!1}}]),t}(),Rr=i(19),Mr=i(10),Dr={cancel:{ar:"إلغاء",bs:"Otkaži",de:"Abbrechen",el:"Ακύρωση",en:"Cancel",es:"Cancelar",fr:"Annuler",he:"ביטול",id:"Batal",it:"Annulla",ja:"キャンセル",nl:"Annuleren",pl:"Anuluj",pt:"Cancelar",ro:"Anulează",ru:"Отмена",sr:"Откажи",tr:"İptal",zh:"取消"},nextVideoIn:{ar:"الفيديو التالي في",bs:"Sljedeći video za",de:"Nächstes Video in",el:"Επόμενο βίντεο σε",en:"Next video in",es:"Próximo video en",fr:"Vidéo suivante dans",he:"הסרטון הבא בעוד",id:"Video berikutnya dalam",it:"Prossimo video tra",ja:"次の動画まで",nl:"Volgende video over",pl:"Następne wideo za",pt:"Próximo vídeo em",ro:"Următorul videoclip în",ru:"Следующее видео через",sr:"Следећи видео за",tr:"Sonraki video",zh:"下一個影片在"},cta:{ar:"اقرأ المقال",bs:"Čitaj više",de:"Artikel Lesen",el:"Μάθε περισσότερα",en:"Read Article",es:"Lea el artículo",fr:"Lire l'article",he:"מעבר לכתבה",id:"Lihat Artikel",it:"leggi di più",ja:"記事を読む",nl:"lees artikel",pl:"Przeczytaj Artykuł",pt:"Leia mais",ro:"Citește articolul",ru:"Смотреть",sr:"Опширније",tr:"İçeriği oku",zh:"閱讀全文"}},g=i(33),Fr=i.n(g);function Br(e){return/[\u0590-\u05FF\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF]/.test(e)}function _r(e){return(_r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function Nr(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?v(Object(i),!0).forEach(function(e){m(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):v(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function m(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var Vr=1,Ur=2,jr=3,Hr="playerReady",Gr="playerResize",y="windowResize",b="resizeSwiper",zr="playerViewabilityChange",Wr="containerViewabilityChange",qr="containerViewabilityChangeVertical",Yr="onNewVideo",Qr="onVideoTimeUpdate",Kr="onNewVideoBeforeVideoChanged",Xr="onVideoPlay",Zr="onVideoPause",Jr="onPlayerDestroyed",$r="onVideoEnd",ea="onSoundOff",w=1;function E(){var a,e,o,s,l,d,u,c,h,f,p,i,t,g,v,n,r,m,y,b=this,w=400,E=5,S=1,A=1,T=!1,L=!1,C=!1,k=null,P=null,x=!1,O=0,I=0,R=!1,M=!1,D=null,F=!1,B=!1,_=!1,N=[],V=!1,U=!1,j=null,H=null,G={},z=!1,W=!1,q=!1,Y=!1,Q=0,K=null,X=null,Z=!1,J=!1,$=null,ee=gi(),te=!1,ie=!0,ne=!1,re=null,ae=0,oe=null,se=null,le=!0,de=null,ue=null,ce=0,he=!1,fe=null,pe=0,ge=0,ve="",me="",ye="",be=!1,we="",Ee=!1,Se=!1,Ae=!1,Te=!1,Le=null,Ce=-1,ke=!0,Pe=!1,xe=!1,Oe=!0,Ie=!1,Re=null,Me="",De=null,Fe=null,Be=null,_e=null,Ne=!0,Ve=!0,Ue=!1,je="",He="",Ge="",ze="",We=!0,qe=!1,Ye=!1,Qe=!1,Ke=!1,Xe="",Ze="",Je=1,$e=!0,et="",tt=!1,it=null,nt=!1,rt=null,at=null,ot=null,st=!1,lt=!1,dt=!1,ut=null,ct={},ht=void 0,ft=void 0,pt=void 0,gt=void 0,vt=void 0,mt=void 0,yt=void 0,bt=!0,wt=!1,Et=!1,St=!1,At=!1,Tt=!1,Lt=null,Ct=null,kt=!1,Pt=!1,xt=!1,Ot=A,It=null,Rt=!1,Mt=null,Dt=null,Ft=null,Bt=!1,_t=null;function Nt(e,t){k.dispatchEvent(new CustomEvent(e,{detail:t}))}function Vt(){M||Object(Ar.a)()?(Sn(),Q=Je,Object(Ar.a)()||It(b)):Xn(Je)}function Ut(){b.getAdsLib().onFloaterClosedByUserRequest(),b.getAdsLib().killBiddingSession(!0);var e=top.document.querySelector(".truvid_ima_container");if(e&&e.remove(),b.getAdsLib().resetImaManager(),b.getAdsLib().initializeAdManagers(),b.isAdPlaying()){var t,i,n=null===(t=b.getAdsLib().currentBidSession)||void 0===t?void 0:null===(i=t.getCurrentTruvidAd())||void 0===i?void 0:i.getAdManager();null!=n&&n.setAdsContainerVisibility&&n.setAdsContainerVisibility(!1)}}this.setAdPlayingOnMainVideo=function(e){At=e},this.shadowDomEnabled=function(){return st},this.getSellersJsonId=function(){return Ge},this.getSpinner=function(){return d},this.getIconsMap=function(){return at},this.getParentElement=function(){return De},this.getWrapperElement=function(){return Fe},this.resizeAds=function(){D&&D.onPlayerResize()},this.getDomainEngagementVPA=function(){return St},this.hasUsedCmp=function(){return Ke},this.setCmpUsed=function(){Ke=!0},this.setConsentString=function(e){ze=e},this.getConsentString=function(){return ze},this.getPersonalizedAdsAgreed=function(){return We},this.setPersonalizedAdsAgreed=function(e){We=e},this.setGdprApplies=function(e){qe=e},this.getGdprApplies=function(){return qe},this.getWidgetMacros=function(){return ut},this.tryPauseVerticalPlayerWhenOOV=function(e){if(!b.getIsFSModalOpened()&&!b.isAdPlaying()){var t=null!=e?e:this.isPlayerInView(),i=this.getActiveSwipeVideo();!t&&i?(Tt=!0,this.getVideo().pause(),this.hideAutoSkip(),k.dispatchEvent(new CustomEvent(pr.h,{detail:{oovBiddingIntervalSec:this.getVerticalSwiperOOVBiddingInterval()}}))):Tt&&i&&(Tt=!1,Object(Ar.a)()?this.getVideo().play():(g=yi[x[mi].p]).play(1).catch(function(e){console.log("play error")}))}},this.tryPauseContentWhenOOV=function(e){if(this.getPauseWhenOOV()){var t=null!=e?e:this.isPlayerInView();this.isAdPlaying()||t||!Fi()?!this.isAdPlaying()&&Tt&&this.play():(Tt=!0,this.pause(!1),k.dispatchEvent(new CustomEvent(pr.h,{detail:{oovBiddingIntervalSec:this.getOOVBiddingIntervalSec()}})))}},this.changeMobileUnmuteOnOov=function(e){this.mobileUnmuteBtnClicked()&&(e||this.IsFloaterOpen()?b.setVolume(A):b.setVolume(.01))},this.onPlayerViewabilityCallback=function(e){ne=!(!this.useVerticalSwiper()||!this.getIsFSModalOpened())||e[0].isIntersecting,window.playerLog("viewability change, viewable: "+ne),Ei()?this.tryPauseVerticalPlayerWhenOOV(ne):this.tryPauseContentWhenOOV(ne),this.changeMobileUnmuteOnOov(ne),k.dispatchEvent(new CustomEvent(zr,{detail:{isPlayerViewable:ne}}))},this.onContainerViewabilityCallback=function(e){this.dispatchEvent(Wr,e)},this.handlePlayerInteraction=function(e){q=q||!0,function(e){var t=this;if(function(e){if(Xe){var t=Ze+"?e="+Xe+"&ev="+e+"&s="+!!this.getCurrentVolume();navigator.sendBeacon(t,null)}}.call(this,e),e===br.a.NextSwipe||e===br.a.PreviousSwipe)return;setTimeout(function(){(function(e){var t,i,n,r=G.player.mediaVideo.muted,a=[br.a.SoundOn,br.a.SoundOnAd],o=[br.a.SoundOff,br.a.SoundOffAd],s=[br.a.CloseFloater].concat(o);this.isContainerInView()||$e||s.push(br.a.SkipAd);var l=null===(t=D)||void 0===t?void 0:null===(i=t.currentBidSession)||void 0===i?void 0:null===(n=i.getCurrentTruvidAd())||void 0===n?void 0:n.getIsGptOutstream();if(l&&![].concat(a,o).includes(e))return;{if((W=W||o.includes(e))&&!a.includes(e))return;W=!1}r&&!s.includes(e)&&(L&&e!==br.a.SoundOnAd?this.unmutePlayerOnAdEnd():this.unmutePlayerUponInteraction(l,!1))}).call(t,e)},0)}.call(this,e)},this.Show=function(){_e.style.height=null},this.Hide=function(){_e.style.height="0px"},this.isPlayerInView=function(){return r.isElementInView()},this.isContainerInView=function(){return m.isElementInView()},this.getPlayerStoppedOnPageVisibilityEvent=function(){return Pe},this.onTogglePlayPauseButtonCallback=function(e){cn(e)},this.getPlayContentTimeout=function(){return ht},this.getVerticalSwiperOOVBiddingInterval=function(){return pt},this.getPauseWhenOOV=function(){return gt},this.getOOVBiddingIntervalSec=function(){var e=f+c;return e&&vt?Math.min(pt,e):pt},this.getPlayerMacroActivationChance=function(){return mt},this.getBSlotEnabled=function(){return bt},this.StartBiddingSession=function(e){D&&D.startBiddingSession(e)},this.isResponsive=function(){return te},this.isVertical=function(){return kt},this.SetLoadVideoOnPlaylistChange=function(e){window.playerLog("SetLoadVideoOnPlaylistChange: "+e),Ve=e},this.getPlayerElements=function(){return G},this.getHeight=function(){return I},this.getWidth=function(){return O},this.getFirstTimeHLSInit=function(){return ke},this.setFirstTimeHLSInit=function(e){ke=e},this.getIsPageVisible=function(){return Oe},this.getPauseOnHiddenTab=function(){return xe},this.getPlayerPausedOnUserBehalf=function(){return Ie},this.setPlayerPausedOnUserBehalf=function(e){Ie=e},this.dispatchEvent=function(e,t){Nt(e,t)},this.DispatchPromiseEvent=function(e,t){return Le.DispatchPromiseEvent(e,t)},this.getVerticalSwiper=function(){return Mt},this.removeVerticalLogo=function(){if(Mt){Mt.kill();var e=Si().querySelector(".vertical-logo");e&&e.remove()}},this.recreateVerticalSwiper=function(e,t){this.removeVerticalLogo(),Mt=Li(e,t),Ti()},this.getShowFloaterOnClosedModal=function(){return Gt},this.setShowFloaterOnClosedModal=function(e){Gt=e},this.unmutePlayerUponInteraction=function(e,t){var i,n,r,a=this;window.playerLog("unmutePlayerUponInteraction"),(null===(i=D)||void 0===i?void 0:null===(n=i.currentBidSession)||void 0===n?void 0:null===(r=n.getCurrentTruvidAd())||void 0===r?void 0:r.getIsGptOutstream())&&!e||(this.unmute(),t||setTimeout(function(){return a.tryTriggerNewOpportunity()},200))},this.setMutedByUser=function(e){W=e},this.onAdEnd=function(){b.unsubscribe(pr.a,b.onAdEnd),setTimeout(function(){return b.StartBiddingSession({type:Mr.d})},1e3)},this.tryTriggerNewOpportunity=function(){!D||wt||Et||(wt=!0,this.isAdPlaying()?this.subscribe(pr.a,this.onAdEnd):this.isBiddingSessionRunning()?D.currentBidSession.restartLoadAdByPriority():(se===Ur||this.getPlayerElement().dispatchEvent(new CustomEvent(pr.h)),this.StartBiddingSession({type:Mr.d})))};this.setExitFSModalIcon=function(){!function(){var e=document.createElement("div");e.innerHTML=at.getIcon("back"),e.classList.add("trv-close-fs-modal"),b.getWrapperElement().parentElement.appendChild(e),e.addEventListener("click",function(){b.setIsFSModalOpened(!1)}),!0}()};var jt,Ht,Gt=!(this.removeVerticalBackBtn=function(){var e=top.document.querySelector(".trv-close-fs-modal");e&&(e.remove(),!1)});function zt(e){if(e){var t=document.createElement("div");t.className="back-blocker",b.getPlayerElement().appendChild(t);var i,n=0;top.document.addEventListener("touchstart",function(e){b.isAdPlaying()||(n=e.touches[0].clientX,i=function(e){var t=e.touches[0].clientX-n;50<Math.abs(t)&&function(e,t){t<50&&100<e&&b.setIsFSModalOpened(!1)}(t,n)},document.addEventListener("touchmove",i,{passive:!1}))}),document.addEventListener("touchend",function(){i&&(document.removeEventListener("touchmove",i),i=null)})}else{var r=document.querySelector(".back-blocker");r&&r.remove()}}function Wt(e){if(function(){var e=new URL(top.location.href),t=e.pathname;e.search.length,/\.\w+$/.test(t),e.searchParams.set("trv-modal","true"),history.pushState({fsModalOpen:!0},"",e.toString())}(),Gt=!b.isContainerInView(),Mt){Mt.kill();var t=Si().querySelector(".vertical-logo");t&&t.remove()}top.document.body.style.overflow="hidden";var i=top.document.createElement("div");i.classList.add("trv-fs-modal-bg");var n=b.getWrapperElement();n.classList.remove("trv-vertical"),top.document.body.appendChild(i),n.parentElement.classList.add("trv-fs-modal"),ee||n.parentElement.style.setProperty("align-content","center","important"),b.recreateVerticalSwiper(),b.hideVerticalSwipingArrows();var r=top.document.documentElement.lastChild;if(r&&r.classList.contains("trv-fs-modal")||r.after(n.parentElement),zt(!0),An(),Ut(),Object(Ar.a)()&&requestAnimationFrame(function(){setTimeout(function(){var e=b.getVideo();e.paused&&e.play()},500)}),xt){var a=G.player.mediaPlayer.getElementsByClassName("mobile-unmute-wrapper")[0];a&&(Hi(a),xt=!1,qt("soundOn"))}else{var o=G.player.mediaPlayer.getElementsByClassName("mobile-unmute-wrapper")[0];o&&Hi(o)}e&&e()}function qt(e){var t="trv-vertical-play-pause-indicator",i=b.getActiveSwipeVideo();if(i){var n=i.querySelector(".".concat(t));n&&(n.classList.remove(t),n.remove());var r=document.createElement("div");r.innerHTML=at.getIcon(e),r.classList.add(t),"soundOn"===e&&r.classList.add("sound-icon"),i.appendChild(r),setTimeout(function(){r.classList.add("fade"),setTimeout(function(){r.remove()},1e3)},0)}}this.showVerticalSwipingArrows=function(){jt.classList.remove("hidden"),Ht.classList.remove("hidden")};this.hideVerticalSwipingArrows=function(){jt.classList.add("hidden"),Ht.classList.add("hidden")};var Yt,Qt=!1;this.updateSoundIcon=function(){this.isMuted()?Ft.innerHTML=b.getIconsMap().getIcon("soundActionMute"):Ft.innerHTML=b.getIconsMap().getIcon("soundActionUnmute"),Yt=this.isMuted()};var Kt=!(this.updateSoundBtn=function(){!xt&&Ft&&(Ft.style.opacity=b.getIsFSModalOpened()?0:1,Qt||(Qt=!0,Ft.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),function(){var e=b.getVideo();if(e){var t=e.muted;b.getSwiperVideos().map(function(e){return e.firstChild.muted=!t})}}()})),Yt!==this.isMuted()&&this.updateSoundIcon()),!1});function Xt(t){t&&(requestAnimationFrame(function e(){var t=$t(),i=t.isAdPlaying,n=t.isModal;JSON.stringify($t())!==JSON.stringify(Jt)&&(Zt=!0,n!==Jt.isModal?(b.getSwiperVideos().map(function(e){return e.firstChild.pause()}),setTimeout(function(){b.isAdPlaying()||b.getVideo().play()},200)):i||i===Jt.isAdPlaying||setTimeout(function(){b.getVideo().play()},200)),i&&b.getSwiperVideos().some(function(e){return!e.firstChild.paused})&&b.getSwiperVideos().map(function(e){return e.firstChild.pause()}),Zt&&(function(){var e=$t();!e.isAdPlaying&&e.isModal?b.setExitFSModalIcon():b.removeVerticalBackBtn()}(),Zt=!1),Jt=$t(),requestAnimationFrame(e)}),window.addEventListener("popstate",function(e){b.getIsFSModalOpened()&&b.setIsFSModalOpened(!1)}),t.addEventListener("timeupdate",function(){if(t.currentTime&&t.duration&&1<t.currentTime)if(k.dispatchEvent(new CustomEvent(Qr,{detail:{currentTime:t.currentTime}})),b.updateSoundBtn(),b.tryPauseVerticalPlayerWhenOOV(),t.currentTime>=t.duration)b.getVerticalSwiper().next();else if(!i&&!b.isBiddingSessionRunning()&&!b.isAdPlaying()){var e=function(e){var t;if(null!==(t=_t)&&void 0!==t&&t.length){for(var i=0;i<_t.length;i++)if(_t[i].type===Mr.b&&_t[i].offset<=e)return _t.splice(i,1)[0];return null}}(t.currentTime);e&&b.StartBiddingSession(e)}}),t.addEventListener("click",function(e){if(Kt)if(e.preventDefault(),e.stopPropagation(),b.getIsFSModalOpened()){var t=yi[x[mi].p];if(!t)return;var i=t.getVideoElement();if(!i)return;i.paused?(!1,qt("play"),(g=g||yi[x[mi].p]).play(i.currentTime)):(!0,qt("pause"),gn(i))}else b.setIsFSModalOpened(!0)}))}var Zt=!1,Jt={};function $t(){return{isAdPlaying:b.isAdPlaying(),isModal:b.getIsFSModalOpened()}}function ei(){b.setDomainEngagementOccured(),top.document.removeEventListener("click",ei)}function ti(){li(),Ji()}function ii(){return new Promise(function(e){function t(){tt=!1,Ei()||(sr(!0),Pi()),k.dispatchEvent(new CustomEvent("onContentShown")),e()}if(se==jr)vn(),t();else if(se==Vr)window.playerLog("whenPlayingContentAllowed setCTPMode"),ni(),t();else{if(Ei())return;dr(G.player.mediaVideo).then(function(){se=Ur,yn(),t()}).catch(function(e){window.playerLog("ERROR whenPlayingContentAllowed Exception",e),Object(Lr.b)("whenPlayingContentAllowedplayVideoElementError",{wid:o},e),se=Vr,ni(),t()})}})}function ni(){Ei()||(window.playerLog("setCTPMode"),Re&&Re.Show(),vn(),se=Vr)}function ri(){Ie&&!(L&&Pe)||(se=Ur,tt=!1,L&&D?D.resumeAd():(G.player.mediaVideo.paused&&(ie=!0,ii()),function(){if(Pe){var e=b.isContainerInView();Pe=!1,e||k.dispatchEvent(new CustomEvent(zr,{detail:{isPlayerViewable:e}}))}}()))}this.stopVerticalAutoplay=function(){!0},this.setup=function(e,t){var i=this;!function(e){var t,i;x=di(e.playlistContent,!1),O=di(e.width,600),I=di(e.height,480),R=di(e.autoplay,!1),F=di(e.repeat,!1),B=di(e.repeatCounter,!1),null==e.repeatCounter&&e.repeat&&(Te=!0);$=e.widgetType,V=di(e.debugMessages,!1),U=di(e.startHidden&&0!=e.startHidden,!1),j=di(e.opportunityPixel,null),a=di(e.pixelPath,"#"),H=di(e.playerLoadPixel,null),J=di(e.isNetworkWidget,!1),(ee=gi())&&(di(e.mobileEnvironment,!1),di(e.mobileOS,!1));_=B,te=di(e.isResponsive,!1),te=!!kt||te,P=di(e.ads,null),oe=di(e.vastPath,null),R||(ie=!1);le=di(e.isNativeClickOpensNewWindow,!0),de=di(e.videoLinks,null),he=di(e.isFullscreen,!1),s=di(e.geoLocation,null),o=e.widgetId,ve=di(e.pageUrl,""),me=di(e.domain,""),ye=di(e.ip,""),l=e.apiObservable,we=e.subUserId,Ae=di(e.hideOnPlaylistComplete,!1),c=di(e.autoSkipDuration,0),f=di(e.autoSkipTimeToStopPlayer,0),p=0<f&&0<c,xe=di(e.pauseOnHiddenTab,!1),De=e.playerElement,Me=di(e.playerId,"br_video_player"),Be=di(e.floaterSettings,null),e.floaterSettings&&(h=null!==(i=e.floaterSettings.padding)&&void 0!==i?i:0);je=di(e.osVersion,""),He=di(e.osFamily,""),Ge=di(e.sellersJsonId,""),void 0===e.elemId||De||(De=document.getElementById(e.elemId.replace(/^#/,"")));Ye=di(e.fia,!1),Qe=di(e.playOnlyMp4,!1),Xe=di(e.clickPixel,""),Ze=di(e.clickPixelPath,""),Je=di(e.volume,.1),M=di(e.mute,!1),$e=di(e.turnOnSoundWhenSkipAdOOV,!0),et=di(e.cssLink,""),ut=di(e.widgetMacros,{}),ct=di(e.customConfigs,{}),ht=di(null!==(t=e.contentDelayTimeout)&&void 0!==t?t:ct.contentDisplayTimeoutSec,3),kt=di(e.isVertical,!1),Pt=di(e.continuePlayingAdOnFloaterClose,!1),xt=di(e.hasMobileUnmuteBtn,!0),Ot=di(e.mobileDefaultVolume,A),It=di(e.autoUnmute,null),gt=di(ct.pauseWhenOOV,!1),di(ct.verticalSwiperPrerollBeforePlaylist,!1),vt=di(ct.takeOOVIntervalMinimumWithAutoskip,!1),st=di(ct.shadowRootEnabled,void 0),bt=di(ct.bSlotEnabled,!0),yt=di(ct.perRequestActivationChance,!0),pt=di(ct.oovBiddingIntervalSec,20),Ct=di(ct.translationsJson,null),ft=di(ct.aiwaOptions,void 0),Et=di(ct.disableTriggerNewOpportunity,!1),St=di(ct.domainEngagementVPA,!1),Bt=di(ct.enableVerticalSwiper,!0),ft&&P&&(P.aiwaOptions=ft);mt=yt?void 0:Math.floor(100*Math.random())+1}(e),H&&!Se&&(Se=!0,Object(Lr.c)(H)),window.playerLog=V?function(){var e=arguments[0],t=di(arguments[1],""),i=di(Array.prototype.slice.call(arguments,2),""),n=new Date,r=n.toTimeString().split(" ")[0],a=String(n.getMilliseconds()).padStart(3,"0"),o=String(n.getDate()).padStart(2,"0"),s=String(n.getMonth()+1).padStart(2,"0"),l=n.getFullYear(),d="".concat(o,"-").concat(s,"-").concat(l);console.log("[".concat(d," ").concat(r,".").concat(a,"] ").concat(e," | ").concat(t),i)}:function(){},this.setMediaVideo(),function(){if(Object(cr.c)())if(te){window.frameElement.style.position="absolute",window.frameElement.style.width="100%",window.frameElement.style.height="100%",window.frameElement.id&&0<=window.frameElement.id.indexOf("google_ads_iframe")?(window.frameElement.style.top="0px",window.frameElement.style.left="0px",window.frameElement.parentElement.style.position="relative"):""==window.frameElement.parentElement.innerText&&(window.frameElement.parentElement.style.position="relative",window.frameElement.style.top="0px",window.frameElement.style.left="0px");var e=(I/O*100).toFixed(2);window.frameElement.parentElement.style.paddingBottom=e+"%",window.frameElement.parentElement.style.display="block",1!=window.frameElement.parentElement.offsetHeight&&1!=window.frameElement.parentElement.offsetWidth||(window.frameElement.parentElement.style.width="100%",window.frameElement.parentElement.style.height="100%"),window.frameElement.parentElement.parentElement&&1==window.frameElement.parentElement.parentElement.offsetHeight&&(window.frameElement.parentElement.parentElement.style.width="100%",window.frameElement.parentElement.parentElement.style.height="100%")}else window.frameElement.style.width=this.width+"px",window.frameElement.style.height=this.height+"px",window.frameElement.parentElement&&1==window.frameElement.parentElement.offsetHeight&&(window.frameElement.parentElement.style.width=this.width+"px",window.frameElement.parentElement.style.height=this.height+"px"),window.frameElement.parentElement.parentElement&&1==window.frameElement.parentElement.parentElement.offsetHeight&&(window.frameElement.parentElement.parentElement.style.width=this.width+"px",window.frameElement.parentElement.parentElement.style.height=this.height+"px")}(),De.parentElement&&(Ci(De.parentElement),De.parentElement.parentElement&&(Ci(De.parentElement.parentElement),De.parentElement.parentElement.parentElement&&Ci(De.parentElement.parentElement.parentElement))),function(){var e=k.getElementsByClassName("media-player")[0];(G={player:{mediaPlayer:e,mediaControls:e.getElementsByClassName("trv-media-controls")[0],mediaVideo:e.getElementsByClassName("media-video")[0],verticalVideoSwiper:e.getElementsByClassName("swipe-wrap")[0],progressBar:e.getElementsByClassName("trv-progress-bar")[0],progressBarPadding:e.getElementsByClassName("trv-progress-padding")[0],playProgressBar:e.getElementsByClassName("trv-play-progress")[0],hoverProgressBar:e.getElementsByClassName("trv-hover-progress")[0],progressButton:e.getElementsByClassName("trv-progressBtn")[0],bufferBar:e.getElementsByClassName("trv-buffered")[0],currentTime:e.getElementsByClassName("trv-currentTime")[0],vidDuration:e.getElementsByClassName("trv-duration")[0],volumeButton:e.getElementsByClassName("volume")[0],togglePlayPause:e.getElementsByClassName("togglePlayPause")[0],poster:e.getElementsByClassName("trv-poster")[0],posterImg:e.getElementsByClassName("trv-poster-img")[0],titleContainer:e.getElementsByClassName("videoTitle-container")[0],title:e.getElementsByClassName("videoTitle")[0],overlay:e.getElementsByClassName("trv-overlay")[0],truvidLogo:e.getElementsByClassName("BR")[0]}}).player=Nr(Nr({},G.player),rt.getElements()),G.player.fullScreen=e.getElementsByClassName("fullScreen")[0],b.useVerticalSwiper()&&((Ht=document.createElement("div")).innerHTML=at.getIcon("rightArrow"),Ht.classList.add("v-arrow"),Ht.classList.add("v-right-arrow"),Ht.onclick=function(e){e.preventDefault(),e.stopPropagation(),b.getIsFSModalOpened()||b.getVerticalSwiper().next()},(jt=document.createElement("div")).innerHTML=at.getIcon("rightArrow"),jt.classList.add("v-arrow"),jt.classList.add("v-left-arrow"),jt.onclick=function(e){e.preventDefault(),e.stopPropagation(),b.getIsFSModalOpened()||b.getVerticalSwiper().prev()},G.player.mediaPlayer.appendChild(jt),G.player.mediaPlayer.appendChild(Ht))}(),_i()||"floater"==$||Ei()?G.player.poster.style.display="none":Re=new Pr(b),Be&&(y=new xr.a(b,Nr(Nr({},Be),{},{useVerticalSwiper:Ei}))),this.setupViewability(),at=at||new Rr.a,G.player.togglePlayPause.innerHTML=at.getIcon(R?"pause":"play");var n=new Sr(this);void 0!==window.trv_players?window.trv_players.push(n):window.trv_players=[n],void 0!==window.onTruvidPlayerAdded&&"function"==typeof window.onTruvidPlayerAdded&&window.onTruvidPlayerAdded(n),Qe||(v=hr.a.isSupported()),Ei()?Ei()&&Object(Ar.a)()&&y&&(setTimeout(function(){return i.setIsFSModalOpened(!1)},500),y.isAvailableByUserPosition()&&setTimeout(function(){return y.toggle(!0,void 0,!0)},600)):Vt(),d=new yr(b),Lt=Nr(Nr({},{}),Dr),Ct&&(Lt=Nr(Nr({},Lt),Ct)),top.document.addEventListener("click",ei),ee&&(Ei()||(it=function(e,t){var i,n,r,a,o,s,l,d=1<arguments.length&&void 0!==t?t:{},u=null!==(i=d.threshold)&&void 0!==i?i:100,c=null!==(n=d.swipeLeft)&&void 0!==n?n:function(){},h=null!==(r=null!==(a=d.swipeUp)&&void 0!==a?a:d.swipeLeft)&&void 0!==r?r:function(){},f=null!==(o=d.swipeRight)&&void 0!==o?o:function(){},p=null!==(s=null!==(l=d.swipeDown)&&void 0!==l?l:d.swipeRight)&&void 0!==s?s:function(){},g=0,v=0,m=!1,y=!0,b=!1;function w(e){var t=e.touches[0];g=t.clientX,v=t.clientY,m=!0}function E(e){if(m&&y){var t=e.touches[0],i=t.clientX-g,n=t.clientY-v;b&&Math.abs(n)>Math.abs(i)?e.preventDefault():Math.abs(i)>Math.abs(n)&&e.preventDefault()}}function S(e){if(m&&y){var t=e.changedTouches[0],i=t.clientX-g,n=t.clientY-v;b&&Math.abs(n)>=u?0<n?p():h():!b&&Math.abs(i)>=u&&(0<i?f():c()),m=!1}}return{setGestureHandlers:function(){e.addEventListener("touchstart",w,{passive:!1}),e.addEventListener("touchmove",E,{passive:!1}),e.addEventListener("touchend",S,{passive:!1})},removeGestureHandlers:function(){e.removeEventListener("touchstart",w),e.removeEventListener("touchmove",E),e.removeEventListener("touchend",S)},setIsSwipesActive:function(e){y=e||b},setIsVerticalSwipe:function(e){b=e}}}(this.getPlayerElement(),{swipeLeft:function(){1<K.getTotalVideos()&&(window.playerLog("applyForwardSwipeEvent"),b.handlePlayerInteraction(br.a.NextSwipe),ji())},swipeRight:function(){1<K.getTotalVideos()&&(window.playerLog("applyBackwardSwipeEvent"),b.handlePlayerInteraction(br.a.PreviousSwipe),Ui())}})),Je<.1&&function(){var e=G.player.mediaPlayer;(Ft=document.createElement("div")).classList.add("mobile-unmute-wrapper"),Ei()&&Ft.classList.add("mobile-sound-action-btn");(kt?200<O:200<I)&&Ft.classList.add("large-unmute");(!Object(Ar.a)()||Object(Ar.a)()&&Ei())&&(Ft.innerHTML=Ei()?b.getIconsMap().getIcon("soundActionMute"):'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <rect width="24" height="24" rx="8" fill="black" fill-opacity="0.5"/>\n            <path d="M15.8096 7.89509C15.8096 7.60859 15.6982 7.33382 15.4997 7.13124C15.3013 6.92865 15.0321 6.81484 14.7515 6.81484C14.5226 6.81576 14.3001 6.89148 14.1165 7.03089L11.3356 9.16113L15.8096 13.05V7.89509Z" fill="#E0E2E6"/>\n            <path d="M17.7779 16.4247L6.77265 6.91855C6.68733 6.84406 6.57652 6.80722 6.4646 6.81613C6.35267 6.82504 6.2488 6.87898 6.17583 6.96608C6.10286 7.05317 6.06677 7.16629 6.0755 7.28055C6.08423 7.39481 6.13707 7.50084 6.22239 7.57533L8.67317 9.69261C8.52352 9.81333 8.40242 9.96692 8.31889 10.142C8.23535 10.317 8.19151 10.509 8.19063 10.7037V13.2963C8.19063 13.6401 8.32442 13.9698 8.56256 14.2129C8.8007 14.456 9.12369 14.5926 9.46047 14.5926H11.0139L14.1165 16.9691C14.3001 17.1086 14.5226 17.1843 14.7514 17.1852C15.0321 17.1852 15.3013 17.0714 15.4997 16.8688C15.6982 16.6662 15.8096 16.3914 15.8096 16.1049V15.8586L17.2276 17.0815C17.3043 17.1484 17.4019 17.1852 17.5028 17.1852C17.5893 17.1852 17.6737 17.1581 17.7447 17.1076C17.8157 17.0571 17.8699 16.9857 17.8999 16.9028C17.9298 16.8199 17.9342 16.7297 17.9124 16.6442C17.8906 16.5587 17.8437 16.4821 17.7779 16.4247Z" fill="#E0E2E6"/>\n            </svg>',e.appendChild(Ft),Ei()&&Ft.addEventListener("click",function(e){e.preventDefault(),Hi(Ft),Qt||b.setIsFSModalOpened(!0)}),xt=!0)}());var r=function(){this.setAdsQueue().then(function(){t&&"function"==typeof t&&t(),function(){return window.playerLog("startContent"),new Promise(function(e){_i()?e():ie?ii().then(function(){e()}.bind(this)).catch(function(e){window.playerLog("ERROR startContent",e),Object(Lr.b)("startContentwhenPlayingContentAllowedError",{wid:o},e)}):(window.playerLog("startContent setCTPMode"),ni(),e())}.bind(this))}().then(function(){this.onPlayerReady()}.bind(this))}.bind(this)).catch(function(e){window.playerLog("ERROR whenContentReady",e),Object(Lr.b)("whenContentReadyError",{wid:o},e)}.bind(this)),p&&this.initAutoSkip()}.bind(this);_i()?ui():(function(){var e=G.player.mediaPlayer,t=document.createElement("div");t.className="video-overlay",t.innerHTML='<div class="overlayBtnWrapper"><div class="overlay-backwards-wrapper"><svg class="small-nav small-nav-l overlay-backwards" stroke="#FFFFFF"><path d="m 11,20 L 6,25 L 11,30" stroke-width="2" fill="none" stroke-linecap="round"></path></svg></div><div class="overlay-play-wrapper"><div class="overlay-play-pause"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 1000 1000" enable-background="new 0 0 1000 1000" xml:space="preserve" fill="#FFFFFF"><g><path d="M500,990C229.8,990,10,770.2,10,500C10,229.8,229.8,10,500,10c270.2,0,490,219.8,490,490C990,770.2,770.2,990,500,990z M500,56.7C255.5,56.7,56.7,255.5,56.7,500c0,244.5,198.9,443.3,443.3,443.3S943.3,744.5,943.3,500C943.3,255.5,744.5,56.7,500,56.7z"/><path d="M348.3,220l420,280l-420,280V220z"/></g>\n</svg></div></div><div class="overlay-forward-wrapper"><svg class="small-nav small-nav-r overlay-forward" stroke="#FFFFFF"><path d="m 9,20 L 14,25 L 9,30" stroke-width="2" fill="none" stroke-linecap="round"></path></svg></div></div>',e.appendChild(t)}(),function(){var e=G.player.mediaPlayer;G.buttonsOverlay={overlay:e.getElementsByClassName("video-overlay")[0],overlayPlayButton:e.getElementsByClassName("overlay-play-pause")[0],overlayBackwardButton:e.getElementsByClassName("overlay-backwards")[0],overlayForwardButton:e.getElementsByClassName("overlay-forward")[0]}}(),this.setContentVideo(),Zi(),Ei()||function(){var e=G.player.mediaPlayer,t=document.createElement("div");t.innerHTML='<div class="links-overlay"><div class="links-button">'+Ii()+"</div></div>",e.appendChild(t.firstChild),e.getElementsByClassName("links-button")[0].onclick=function(){b.handlePlayerInteraction(br.a.ReadMoreClick),Oi()}}(),function(e){var t,i;void 0!==document.hidden?(t="hidden",i="visibilitychange"):void 0!==document.mozHidden?(t="mozHidden",i="mozvisibilitychange"):void 0!==document.webkitHidden&&(t="webkitHidden",i="webkitvisibilitychange"),void 0!==document[t]&&("hidden"==document.visibilityState&&e(!1),document.addEventListener(i,function(){e(!document[t])},!1))}(function(e){if(Oe=e){if(window.playerLog("Page in view"),xe){if(Ei()){var t,i=b.getActiveSwipeVideo();return void(null!=i&&null!==(t=i.firstChild)&&void 0!==t&&t.play&&i.firstChild.play())}ie=!0,ri()}dt&&(dt=!1,setTimeout(function(){return yn()},0))}else dt=se==Ur,window.playerLog("Page out of view"),xe&&(Pe=!(ie=!1),se==Ur&&oi(!0),Ei()&&Array.from(Ai().querySelectorAll("video")).map(function(e){e.pause(),e.currentTime=0}))})),r()},this.controlsShown=function(){return!!+G.player.mediaControls.style.opacity},this.setHLSCurrentLevel=function(e){Ce=e},this.getHLSCurrentLevel=function(){return n?0:Ce},this.initAutoSkip=function(){(u=new wr(this)).initAutoSkipElements(this.getPlayerElement()),this.subscribe(Qr,this.showAutoSkip)},this.setupViewability=function(){r=new kr({elementToTrack:k,callback:this.onPlayerViewabilityCallback.bind(this)}),m=new kr({elementToTrack:_e,callback:this.onContainerViewabilityCallback.bind(this)})},this.hasUserInteractionOccured=function(){return q},this.domainEngagementOccured=function(){return Y},this.setDomainEngagementOccured=function(){Y=!0},this.getHlsActive=function(){return v},this.getAdsLib=function(){return D},this.switchToVideoIndex=function(e){K&&(K.switchToVideoIndex(e),D&&(D.stopAd(),li()),lr(!1))},this.getEventSubscribersService=function(){return Le},this.removePlayerListeners=function(){ti()},this.showAutoSkip=function(){var e=G.player.mediaVideo;Ei()&&e.duration<=f+c||i||Math.round(e.currentTime)!==f||(i=!0,u.initAutoSkip(c,b),u.showAutoSkip())},this.hideAutoSkip=function(){i=!1,u&&u.clearVerticalAutoskip()},this.setIsAdPlaying=function(e){L=e,Ft&&(Ft.style.display=L||Dt?"none":"block"),z&&!e&&(z=!1,this.unmutePlayerUponInteraction(!1,!1))},this.isAdPlaying=function(){return L},this.isPosterShown=function(){return C},this.isAutoSkipShown=function(){return i},this.unmutePlayerOnAdEnd=function(){z=!0},this.ForcePlayingAdsOnlyOnFloater=function(){y&&y.ForcePlayingAdsOnlyOnFloater()},this.isSavingModeForContentRunning=function(){return n},this.EnableSavingModeForContent=function(){window.playerLog("setting saving mode to true"),n=!0;var e=Ei()?yi[x[mi].p]:g;void 0===e.EnableSavingModeForContent||L||se!=Ur||e.EnableSavingModeForContent()},this.DisableSavingModeForContent=function(){window.playerLog("setting saving mode to false"),n=!1;var e=Ei()?yi[x[mi].p]:g;e&&void 0!==e.DisableSavingModeForContent&&!L&&e.DisableSavingModeForContent()},this.subscribe=function(e,t){null==Le?N.push({eventName:e,callback:t}):Le.subscribe(e,t)},this.unsubscribe=function(e,t){Le.unsubscribe(e,t)},this.removeContentSource=function(){G.player.mediaVideo.src="",G.player.mediaVideo.load()};var ai=!(this.play=function(){ri()});function oi(e){D&&D.isAdLoading()?window.playerLog("pause denied, ad loading"):(se=jr,window.playerLog("pause video"),L&&D?D.pauseAd():(vn(),e&&li()))}function si(){L&&D&&D.skipAd()}function li(){D&&D.killBiddingSession()}function di(e,t){return void 0!==e?e:t}function ui(){b.useVerticalSwiper()||(ot&&ot.removeCurrentContextMenu(),Re&&Re.Hide(),G.buttonsOverlay&&(G.buttonsOverlay.overlay.firstChild.style.display="none"),G.player.mediaControls.style.display="none",k.getElementsByClassName("trv-overlay")[0].style.display="none",Bn(),hi())}function ci(){kt&&ee||(se===Ur||b.isBiddingSessionRunning()&&se===Vr)&&(d.startBufferingSpinner(),G.player.mediaVideo.addEventListener("timeupdate",fi))}function hi(){d.stopBufferingSpinner(),G.player.mediaVideo.removeEventListener("timeupdate",fi)}function fi(){d.stopBufferingSpinner(),G.player.mediaVideo.removeEventListener("timeupdate",fi)}function pi(e,t){d&&d.resizeBufferingSpinner(e,t)}function gi(){return!!navigator.userAgent.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini/i)}this.setProcessingAd=function(e){ai=e},this.getProcessingAd=function(){return ai},this.forcePlay=function(){Ie=!1,ri()},this.pause=function(e){oi(e)},this.pauseContentVideo=function(){gn(G.player.mediaVideo)},this.skip=function(){si()},this.startPendingAd=function(){window.playerLog("start pending ad","Start ad"),L=!0,D&&D.startPendingAd()},this.updateAdOnly=function(e){e},this.getPlaylist=function(){return K},this.playerState=function(){return L?D.advertisingState():{paused:G.player.mediaVideo.paused||G.player.mediaVideo.ended}},this.killBiddingSession=function(){li()},this.getOSFamily=function(){return He},this.getOSVersion=function(){return je},this.getContinuePlayingAdOnFloaterClose=function(){return Pt},this.isNetworkWidget=function(){return J},this.setCurrentVolume=function(e){0<e?An():Sn()},this.SetAllowStartingContentOnPlayRequest=function(e){ie=e},this.IsFloaterAvailable=function(){return y&&y.isAvailableToShow()},this.IsFloaterOpen=function(){return y&&y.IsFloaterOpen()},this.setPlayerContentStatus=function(e){window.playerLog("set new player content status "+e),se=e},this.isFullScreenState=function(){return vr(fe,G.player.mediaVideo)},this.isAdOnlyAvailable=function(){return!!y&&y.IsAvailableForAdOnly()},this.canPlayType=function(e){return!e||("application/vnd.apple.mpegURL"==e?v:0<G.player.mediaVideo.canPlayType(e).length)},this.getCurrentResolution=function(){return ue},this.getWidgetType=function(){return $},this.getSwiperVideoManagers=function(){return yi},this.getSwiperVideos=function(){return Array.from(this.getPlayerElement().querySelectorAll(".swipe-video"))},this.getActiveSwipeVideo=function(){var e,t;return null!==(e=null===(t=this.getVideo())||void 0===t?void 0:t.parentElement)&&void 0!==e?e:null},this.getVideo=function(){return G.player.mediaVideo},this.getOpportunityPixel=function(){return Mi(j)},this.getVastPath=function(){return oe},this.getPlayerContentStatus=function(){return se},this.isMediaPlayingIsDifferentThanContent=function(){return function(){{if(_i())return!0;var e=K.getFileToPlay().p;return!!g.isUrlDifferentThanCurrentUrl(e)||G.player.mediaVideo.paused&&se==Ur}}()},this.getCurrentVolume=function(){return 1==G.player.mediaVideo.muted?0:Q},this.isMuted=function(){return G.player.mediaVideo.muted},this.getPlayerDimension=function(){return this.getElementDimension(k)},this.getElementDimension=function(e){return Object(cr.b)(e)},this.getDuration=function(){return ce},this.getPlaylistContent=function(){return x},this.getSubUserId=function(){return we},this.getPageUrl=function(){return ve},this.getGeoLocation=function(){return s},this.getIp=function(){return ye},this.IsPlayerViewable=function(){return ne},this.getPlayerWidth=function(){return O},this.getPlayerHeight=function(){return I},this.getDomain=function(){return me},this.getWidgetId=function(){return o},this.getApiObservable=function(){return l},this.isMobile=function(){return ee},this.updateCurrentContentTimeState=function(){0<G.player.mediaVideo.currentTime&&(ae=G.player.mediaVideo.currentTime)},this.getCurrentVideoObj=function(){return K.getCurrentVideoObj()},this.saveContentState=function(e){!function(e){b.useVerticalSwiper()||_i()||(Ji(),ui(),e&&gn(G.player.mediaVideo),g.destroy())}(e)},this.toggleMute=function(){Tn()},this.getCurrentVideoUrl=function(){return K.getCurrentVideoUrl()},this.stopSpinner=function(){d.stopSpinner()},this.startSpinner=function(){d.isSpinnerExist()||(gn(G.player.mediaVideo),d.startSpinner())},this.resizeSpinner=function(e,t){pi(e,t)},this.restoreContentState=function(){L=!1,K&&Ne&&ir(K.getFileToPlay(),!0,!1)},this.SetAllowRestoringContent=function(e){Ne=e},this.getCurrentContentTime=function(){return _n()},this.isBiddingSessionRunning=function(){if(D)return null!==D.currentBidSession},this.setAdsQueue=function(){return new Promise(function(t){if(P&&!D)try{(D=new pr.d(P,b)).init().then(function(){this.subscribe(pr.c,function(){ui()}),t()}.bind(this)).catch(function(e){window.playerLog("ERROR loading ads library",e),Object(Lr.b)("errorinitads",{wid:o},e),t()})}catch(e){window.playerLog("ERROR setAdsQueue new ads",e),Object(Lr.b)("error new ads",{wid:o},e),window.playerLog(e)}else t()}.bind(this))},this.setMediaVideo=function(){var e=wi(),t=De.shadowRoot;this.shadowDomEnabled()&&(t?t.innerHTML="":(De.attachShadow({mode:"open"}),De.style.width="100%"));var i=document.createElement("style");i.textContent=" :host { all:revent; line-height: normal;  white-space: normal !important; }",this.shadowDomEnabled()&&De.shadowRoot.appendChild(i);var n=this.setupPlayerHtml(e.outerHTML);if(this.shadowDomEnabled()?De.shadowRoot.appendChild(n):De.appendChild(n),Ei()&&function(){var e,a=document.createElement("div");a.className="swipe-wrap",a.style.display="flex",a.style.width="100%",a.style.height="100%",a.style.transition="transform 0.3s ease-in-out";for(var t=function(e){var t=document.createElement("div");t.className="swipe-video";var i=wi(x[e]);if(!i)return"continue";t.innerHTML=i.outerHTML+function(e){var t=e.t,i=e.des;return'<div class="video-bottom">\n                    <div class="video-gradient" style="background: linear-gradient(180deg, rgba(0, 0, 0, 0.00) 38.74%, rgba(0, 0, 0, 0.40) 100%);width: 100%;height: 100%;pointer-events: none;position: absolute;"></div>\n                    <div class="video-details">\n                        <h2 style="font-family: arial !important; font-size: 16px !important; font-weight: 700 !important; line-height: normal !important; margin-bottom: 8px !important; margin-top: 0 !important; '.concat(Br(t)?"direction:rtl !important;":"",'">').concat(t,'</h2>\n                        <p style="font-family: arial !important; font-size: 14px !important; line-height: normal !important; margin-bottom: 0 !important; margin-top: 0 !important; ').concat(Br(i)?"direction:rtl !important;":"",'">').concat(i,"</p>\n                    </div>\n                </div>")}(x[e]),a.appendChild(t),function(e){var t=document.createElement("div");t.className="trv-vertical-autoskip",t.style="z-index:2 !important; box-sizing: border-box !important; padding-bottom: 16px !important;";var i="display:flex !important; font-size: 16px !important; font-weight: bold !important; border: none !important; border-radius: 6px !important; width: 40% !important; height: 42px !important; padding: 1px 6px !important;",n=document.createElement("button");n.className="trv-vertical-as-btn cancel",n.style=i,n.textContent="Cancel",n.onclick=function(e){e.stopPropagation(),e.preventDefault(),u&&u.clearVerticalAutoskip(),Object(Ar.a)()||b.handlePlayerInteraction(br.a.CancelSkip)};var r=document.createElement("button");r.className="trv-vertical-as-btn up-next",r.style=i;var a=document.createElement("span");a.textContent="Up Next",r.onclick=function(e){e.stopPropagation(),e.preventDefault(),b.getIsFSModalOpened()?Mt.next():b.setIsFSModalOpened(!0,function(){setTimeout(function(){Mt.next()},300)}),b.handlePlayerInteraction(br.a.Skip)},r.appendChild(a);var o=document.createElement("div");o.className="up-next-fill",t.appendChild(n),t.appendChild(r),r.insertBefore(o,r.firstChild);var s=e.querySelector(".video-bottom");s&&s.prepend(t)}(t),Xt(t.firstChild),t.querySelector("h2").onclick=function(){b.setIsFSModalOpened(!0)};var n=t.querySelector("p"),r=t.querySelector(".video-details");n.onclick=function(){r.classList.contains("expanded")?r.classList.remove("expanded"):(r.classList.add("expanded"),u&&u.clearVerticalAutoskip())}},i=0;i<x.length;i++)t(i);Si().appendChild(a),Mt=Li(),null!==(e=G)&&void 0!==e&&e.player||(G.player={},at=new Rr.a);G.player.mediaVideo=yi[x[mi].p].getVideoElement,Object.values(yi).map(function(e,t){Object(Ar.a)()?(e.getVideoElement().src=e.getSrc(),e.videoLoaded=!0,e.inLoading=!1):(e.getHlsService().loadSource(e.getSrc()),e.getHlsService().attachMedia(e.getVideoElement()),e.getHlsService().once(hr.a.Events.MANIFEST_LOADED,function(){e.getHlsService().once(hr.a.Events.LEVEL_LOADED,function(){e.videoLoaded=!0,e.inLoading=!1}),e.getHlsService().startLoad(1)}))}),Vt(),Ti(),window.addEventListener("orientationchange",function(){if(b.getIsFSModalOpened()){if(Mt){Mt.kill();var e=Si().querySelector(".vertical-logo");e&&e.remove()}var t=b.getWrapperElement().parentElement;setTimeout(function(){window.matchMedia("(orientation: landscape)").matches;b.recreateVerticalSwiper(t.offsetWidth,t.offsetHeight)},400)}}),setTimeout(function(){Kt=!0,Object(Ar.a)()?Object.values(yi)[0].getVideoElement().play():Object.values(yi)[0].play(1).catch(function(){console.log("asdfasdf")})},1e3)}(),et&&this.shadowDomEnabled()){var r=document.createElement("link");r.setAttribute("rel","stylesheet"),r.setAttribute("href",et),De.shadowRoot.appendChild(r)}};var vi,mi=0,yi={};function bi(e){var t=function(e){return document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled||e.webkitSupportsFullscreen||e.requestFullscreen||e.webkitRequestFullscreen||e.webkitEnterFullScreen||e.mozRequestFullScreen}(e);return(he=he&&t)?(G.player.fullScreen.style.display="inherit",G.player.fullScreen.innerHTML=at.getIcon("maximize")):G.player.fullScreen.style.display="none",he}function wi(e){var t=document.createElement("video");if(t.setAttribute("disableremoteplayback",""),t.setAttribute("webkit-playsinline",""),t.setAttribute("playsinline",""),Ei()?(t.setAttribute("muted",""),t.setAttribute("autoplay",""),t.setAttribute("webkit-playsinline",""),t.volume=0):M&&(t.setAttribute("muted",""),t.volume=0,window.playerLog("mute video")),t.preload="metadata",t.controls=!1,e){var i=e.f.find(function(e){return"hls"===e.f});if(!i)return console.error("The content is filtered out because it is not in hls format"),"";t.src=i.p,t.poster=e.p,yi["".concat(e.p)]=new Tr(i,b,e.p)}return t.className="media-video",t}function Ei(){return Bt&&kt&&gi()&&1<x.length}function Si(){return b.getPlayerElement().querySelector(".trv-video")}function Ai(){return b.getPlayerElement().querySelector(".swipe-wrap")}function Ti(){var e=document.createElement("div");e.classList.add("BR","vertical-logo","brpBtn","sprite-background"),e.title="Truvid.com",e.value="Truvid",Si().prepend(e)}function Li(e,t){var i;vi=0,e&&t&&(i={width:e,height:t});var n=Ai();n.style.setProperty("flex-direction",b.getIsFSModalOpened()?"column":"row","important");var r=Si(),a=!1;return new Fr.a(r,{playerObj:b,startSlide:mi,draggable:!0,autoStart:!1,continuous:!0,disableScroll:!1,stopPropagation:!0,dimensions:i,vertical:b.getIsFSModalOpened(),callback:function(e,t,i){vi=i,b.getIsFSModalOpened()&&!b.isMuted()&&(G.player.mediaVideo.muted=!0,a=!0)},transitionEnd:function(e,t){var i=t.querySelector("video");mi=e,G.player.mediaVideo=i,!1,a&&(a=!1,b.getSwiperVideos().map(function(e){return e.firstChild.muted=!1})),i.src,u&&u.clearVerticalAutoskip(),Array.from(n.querySelectorAll("video")).map(function(e){e.pause(),e.currentTime=0;var t=e.parentElement.querySelector(".video-details");t&&t.classList.remove("expanded")}),0<vi?nr():rr()}})}function Ci(e){e&&"BODY"!=e.tagName&&(e.offsetHeight<2||e.offsetWidth<2||e.id&&0<=e.id.indexOf("div-gpt-ad-")||e.id&&0<=e.id.indexOf("google_ads_iframe"))&&(te?(e.style.width="100%",e.style.height="100%"):(e.style.width=O+"px",e.style.height=I+"px"))}function ki(e){G.player.vidDuration.innerHTML=Object(gr.b)(e)}function Pi(){if(x){var e=G.player.mediaVideo.duration;ki(ce=e||K.getCurrentVideoDuration())}}function xi(){var e=K.getCurrentVideoObj(),t=de||e.lnks;if(t){var i=Vi(t,Math.floor(_n()));return i&&i.url?i:null}return null}function Oi(){var e=K.getCurrentVideoObj();if(Dn(e))return!1;var t=xi(),i=!1;if(t){var n;if(t.url=function(e){var t=new URL(e),i=t.searchParams,n={utm_source:"truvid",utm_medium:"truvid_player",utm_campaign:"truvid_article_recommendation_video"};for(var r in n)i.has(r)?i.set(r,n[r]):i.append(r,n[r]);return t.toString()}(t.url),e&&void 0!==e.pxl&&void 0!==e.pxl.ctacntclick&&""!=e.pxl.ctacntclick&&(Di(Bi(e.pxl.ctacntclick)),window.playerLog("notifyPixelsFire","native click")),le)l&&l.notify("click",{widgetId:o,video:G.player.mediaVideo,clickedElement:"native click",url:t.url}),k.dispatchEvent(new CustomEvent("videoLinkOpened",{detail:{videoTitle:K.getCurrentVideoTitle(),playerElementId:k.id,nativeClickURL:null===(n=xi())||void 0===n?void 0:n.url}})),i=!0,window.open(t.url,"_blank");else location.href=t.url;G.player.mediaVideo.paused||(i=!0,vn())}else if(x){var r=K.getCurrentVideoObj();r.lnks&&(t=Vi(r.lnks,Math.floor(_n())))&&t.url&&(void 0!==t.pxl&&""!=t.pxl&&Di(Bi(t.pxl)),le?(l&&l.notify("click",{widgetId:o,video:G.player.mediaVideo,clickedElement:"native click",url:t.url}),window.open(t.url,"_blank")):(l&&l.notify("click",{widgetId:o,video:G.player.mediaVideo,clickedElement:"native click",url:t.url}),location.href=t.url),G.player.mediaVideo.paused||(i=!0,vn()))}return i}function Ii(){var e="en";return x&&(e=K.getCurrentVideoLanguage2LettersCode()),Lt.cta[e]||"Read Article"}function Ri(){ue=Object(cr.b)(k).height}function Mi(e){for(var t=""+parseInt(99999999*Math.random(),10);8!==t.length;)t="0"+t;return e+"&cb="+t}function Di(e){if(e=Mi(e),"object"!==("undefined"==typeof window?"undefined":_r(window))||"undefined"==typeof Image){var t=new XMLHttpRequest;t.open("get",e,!0),t.send()}else{(new Image).src=e}}function Fi(){return se==Ur}function Bi(e){if(a)return a+"?e="+e}function _i(){return!x}function Ni(){if(x&&!T&&(T=!0,a&&x)){window.playerLog("fireContentImpression");var e=function(){if(a&&x){var e=K.getCurrentVideoObj();if(void 0!==e.pxl&&void 0!==e.pxl.cnt)return a+"?e="+e.pxl.cnt+"&cb="+(new Date).getTime()}return null}();e&&Object(Lr.c)(e)}}function Vi(e,t){for(var i=0;i<e.length;i++){if(e[i].startTime<=t&&null==e[i].endTime)return e[i];if(e[i].startTime<=t&&t<e[i].endTime)return e[i]}return!1}function Ui(){window.playerLog("applyBackward"),ot&&ot.removeCurrentContextMenu(),ar(),nr(),p&&Wn()}function ji(){window.playerLog("applyForward"),ot&&ot.removeCurrentContextMenu(),In(),Ue||(ar(),rr(),p&&Wn())}function Hi(e){b.setVolume(Ot),e.style.opacity="0",Ei()||setTimeout(function(){e.style.display="none"},300)}function Gi(){var e=K.getCurrentVideoObj().t,t=k.getElementsByClassName("videoTitle");t[0].setAttribute("title",e),t[0].textContent=e}function zi(e){for(var t=e.relatedTarget;null!=t;){if(t==this)return;t=t.parentNode}qi()}function Wi(){clearTimeout(X)}function qi(){(ee?_i():_i()||!e&&se!=Vr)||Fi()&&(Yi(),clearTimeout(X),X=setTimeout(function(){Fi()&&Qi()},3e3))}function Yi(e){be=!0,G.buttonsOverlay.overlay.style.display="block",G.buttonsOverlay.overlay.firstChild.style.display="flex",e||(G.buttonsOverlay.overlayPlayButton.style.display=se!==Ur?"block":"none"),G.player.mediaControls.style.display="block",G.player.overlay.style.display="block"}function Qi(){var e,t;null!==(e=rt)&&void 0!==e&&e.volumeDrag||(be=!1,G.buttonsOverlay.overlay.style.display="none",G.buttonsOverlay.overlay.firstChild.style.display="none",G.buttonsOverlay.overlayPlayButton.style.display="none",G.player.mediaControls.style.display="none",null!==(t=rt)&&void 0!==t&&t.isAllowed()&&rt.hide(),G.player.overlay.style.display="none")}function Ki(){At||(e=!0,qi())}function Xi(){(e=!1)||se==Vr||Fi()&&(clearTimeout(X),X=null,Qi())}function Zi(){Ei()?rn():(ee?it&&it.setGestureHandlers():(G.player.mediaControls.addEventListener("mouseenter",Wi),G.player.mediaControls.addEventListener("mouseout",zi),k.addEventListener("mouseenter",Ki),k.addEventListener("mousemove",Ki),k.addEventListener("mouseleave",Xi),ot=new Or(k,b)),G.player.volumeButton.addEventListener("click",bn),b.subscribe(xr.f,wn),G.player.mediaVideo.addEventListener("ended",On),G.player.mediaVideo.addEventListener("pause",Pn),G.player.mediaVideo.addEventListener("volumechange",kn),G.player.mediaVideo.addEventListener("play",Ln),G.player.mediaVideo.addEventListener("playing",Cn),G.player.mediaVideo.addEventListener("timeupdate",Rn),G.player.mediaVideo.addEventListener("waiting",ci),G.player.mediaVideo.addEventListener("stalled",ci),G.player.mediaVideo.addEventListener("playing",hi),G.player.mediaVideo.addEventListener("canplay",hi),G.player.mediaVideo.addEventListener("canplaythrough",hi),ee?G.player.progressBarPadding.addEventListener("click",Gn):(G.player.progressBarPadding.addEventListener("mouseup",Qn),G.player.progressBarPadding.addEventListener("mousemove",Kn),G.player.progressBarPadding.addEventListener("mousedown",qn),function(){var e=k.getElementsByClassName("trv-progress-bar")[0];e.addEventListener("mouseenter",Zn),e.addEventListener("mouseleave",Jn)}()),rt.init(),rt.styleVolume(),function(){var e=G.player.mediaPlayer.getElementsByClassName("togglePlayPause")[0],t=G.player.mediaPlayer.getElementsByClassName("overlay-play-wrapper")[0],i=G.player.mediaPlayer.getElementsByClassName("overlayBtnWrapper")[0],n=G.player.mediaPlayer.getElementsByClassName("video-overlay")[0];e.addEventListener("click",cn),t.addEventListener("click",cn),i.addEventListener("click",un),n.addEventListener("click",un)}(),G.player.mediaVideo.addEventListener("click",sn),G.player.overlay.addEventListener("click",sn),b.subscribe("onPosterShown",jn),b.subscribe("onPosterHidden",Hn),rn(),ee||G.player.mediaControls.querySelectorAll(".trv-control").forEach(function(e){e.addEventListener("mouseenter",function(e){return $i(e,!0)}),e.addEventListener("mouseleave",function(e){return $i(e,!1)})}),Ee||(Ee=!0,function(){fe=document.fullscreenEnabled?k:G.player.mediaVideo;bi(fe)&&(G.player.fullScreen.addEventListener("click",ln),document.addEventListener("fullscreenChange",an),document.addEventListener("fullscreenchange",an),document.addEventListener("mozfullscreenchange",an),document.addEventListener("webkitfullscreenchange",an),document.addEventListener("msfullscreenchange",an))}()),G.player.truvidLogo.addEventListener("click",en))}function Ji(){ee?it&&it.removeGestureHandlers():(G.player.mediaControls.removeEventListener("mouseenter",Wi),G.player.mediaControls.removeEventListener("mouseout",zi),k.removeEventListener("mouseenter",Ki),k.removeEventListener("mousemove",Ki),k.removeEventListener("mouseleave",Xi)),G.player.volumeButton.removeEventListener("click",bn),G.player.mediaVideo.removeEventListener("pause",Pn),b.unsubscribe(xr.f,wn),G.player.mediaVideo.removeEventListener("ended",On),G.player.mediaVideo.removeEventListener("play",Ln),G.player.mediaVideo.removeEventListener("playing",Cn),G.player.mediaVideo.removeEventListener("volumechange",kn),G.player.mediaVideo.removeEventListener("timeupdate",Rn),G.player.mediaVideo.removeEventListener("waiting",ci),G.player.mediaVideo.removeEventListener("stalled",ci),G.player.mediaVideo.removeEventListener("playing",hi),G.player.mediaVideo.removeEventListener("canplay",hi),G.player.mediaVideo.removeEventListener("canplaythrough",hi),ee?G.player.progressBarPadding.removeEventListener("click",Gn):(G.player.progressBarPadding.removeEventListener("mousedown",qn),G.player.progressBarPadding.removeEventListener("mouseup",Qn),G.player.progressBarPadding.removeEventListener("mousemove",Kn),function(){var e=k.getElementsByClassName("trv-progress-bar")[0];e.removeEventListener("mouseenter",Zn),e.removeEventListener("mouseleave",Jn)}()),b.unsubscribe("onPosterShown",jn),b.unsubscribe("onPosterHidden",Hn),b.unsubscribe(pr.f,tn),b.unsubscribe(pr.g,nn),rt.destroy(),function(){var e=G.player.mediaPlayer.getElementsByClassName("togglePlayPause")[0],t=G.player.mediaPlayer.getElementsByClassName("overlay-play-wrapper")[0],i=G.player.mediaPlayer.getElementsByClassName("overlayBtnWrapper")[0],n=G.player.mediaPlayer.getElementsByClassName("video-overlay")[0];e&&e.removeEventListener("click",un);t&&t.removeEventListener("click",un);i&&i.removeEventListener("click",un);n&&n.removeEventListener("click",un)}(),G.player.mediaVideo.removeEventListener("click",sn),G.player.overlay.removeEventListener("click",sn),G.player.truvidLogo.removeEventListener("click",en),ee||G.player.mediaControls.querySelectorAll(".trv-control").forEach(function(e){e.removeEventListener("mouseenter",function(e){return $i(e,!0)}),e.removeEventListener("mouseleave",function(e){return $i(e,!1)})})}function $i(e,t){e.target.classList.toggle("hovered",t)}function en(){l&&l.notify("click",{widgetId:o,video:G.player.mediaVideo,clickedElement:"truvid logo"}),window.open("https://truvid.com/library","_blank")}function tn(){b.getPlayerContentStatus()===Vr&&setTimeout(function(){ci();var e="none"===b.getPlayerElements().buttonsOverlay.overlayPlayButton.style.display;d.setSpinnerBgImgVisibility(e)},300)}function nn(){hi(),b.getPlayerContentStatus()===Vr&&(sr(!0),d.setSpinnerBgImgVisibility(!0),tt=!1)}function rn(){b.subscribe(pr.f,tn),b.subscribe(pr.g,nn)}function an(){vr(fe,G.player.mediaVideo)?(G.player.poster.style.backgroundSize="contain",G.player.mediaVideo.style.position="fixed",G.player.mediaControls.style.position="fixed",G.player.fullScreen.innerHTML=at.getIcon("minimize"),qi(),kt&&(b.unmute(),b.forcePlay(),ee&&(it&&it.setIsVerticalSwipe(!0),sr(!1)))):(G.player.poster.style.backgroundSize="cover",G.player.mediaVideo.style.position="",G.player.mediaControls.style.position="",G.player.fullScreen.innerHTML=at.getIcon("maximize"),it&&it.setIsVerticalSwipe(!1)),er(),k.dispatchEvent(new CustomEvent("onFullScreenChange",{detail:{isFullScreen:document.fullScreen||vr()}}))}function on(){pn(null),l&&l.notify("click",{widgetId:o,video:G.player.mediaVideo,clickedElement:"video click"});var e=!1;be?(Oi()&&(e=!0),ee?(be&&(se!=jr||e?e=!0:(se=Ur,tt=!1,ii())),qi(),e&&(Ie=!0,se=jr,li(),ii())):(se==Ur?se=jr:e||se!=jr?se==Vr&&(se=Ur,tt=!1):(se=Ur,tt=!1),se==jr&&li(),ii())):qi()}function sn(e){e.preventDefault(),e.stopPropagation(),pe++,he?1==pe&&setTimeout(function(){if(1==pe)on();else if(2==pe){xi()?on():ln()}pe=0}.bind(this),w):on(),k.dispatchEvent(new CustomEvent("click",{detail:{videoTitle:K.getCurrentVideoTitle(),playerElementId:k.id}}))}function ln(){b.handlePlayerInteraction(br.a.FullScreen),l&&l.notify("click",{widgetId:o,video:G.player.mediaVideo,clickedElement:"fullscreen"}),function(e){document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled?document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?document.cancelFullScreen?document.cancelFullScreen():document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen():e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):e.msRequestFullscreen&&e.msRequestFullscreen():e.webkitSupportsFullscreen&&(e.webkitDisplayingFullscreen?e.webkitExitFullscreen():e.webkitEnterFullscreen())}(fe)}function dn(){D&&D.initializeAdManagers(),G.player.mediaVideo.ended?dr(G.player.mediaVideo).then(function(){se=Ur,ie=!(tt=!1),yn(),qi(),k.dispatchEvent(new CustomEvent("onUserMediaPlay"))}).catch(function(e){window.playerLog("ERROR onUserMediaPlay setPlayPauseButtonsCallbackSingleClick",e),Object(Lr.b)("setPlayPauseButtonsCallbackSingleClickplayVideoElementErr",{wid:o},e)}):G.player.mediaVideo.paused?(se=Ur,dr(G.player.mediaVideo).then(function(){se=Ur,ie=!(tt=!1),yn(),qi(),k.dispatchEvent(new CustomEvent("onUserMediaPlay"))}).catch(function(e){window.playerLog("ERROR onUserMediaPlay restorePlayerState",e),Object(Lr.b)("setPlayPauseButtonsCallbackSingleClickplayVideoElementErr2",{wid:o},e)})):(se=jr,Ie=!0,gn(G.player.mediaVideo),se=jr,mn(),D&&D.killBiddingSession(),k.dispatchEvent(new CustomEvent("onUserMediaPause")))}function un(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];e.preventDefault(),e.stopPropagation(),function(e){var t=e.target,i=["forward","backward"];return Array.from(t.classList).some(function(t){return i.some(function(e){return t.includes(e)})})}(e)&&(t=!1),pn(e),he?1==++ge&&setTimeout(function(){1==ge?dn():xi()?on():t&&ln();ge=0}.bind(this),w):dn()}function cn(e){l&&l.notify("click",{widgetId:o,video:G.player.mediaVideo,clickedElement:"play pause click"}),un(e,!1)}function hn(e){return!e||e.target.closest(".overlayBtnWrapper")}function fn(e){return"togglePlayPause"===e.target.className||e.target.closest(".togglePlayPause")}function pn(e){se===Ur?hn(e)?b.handlePlayerInteraction(br.a.InVideoAreaPause):fn(e)&&b.handlePlayerInteraction(br.a.Pause):hn(e)?b.handlePlayerInteraction(br.a.InVideoAreaPlay):fn(e)&&b.handlePlayerInteraction(br.a.Play)}function gn(e){window.playerLog("pauseVideoElement"),e.paused||e.pause()}function vn(){se=jr,gn(G.player.mediaVideo),mn()}function mn(){if(!Ei()){Yi();var e=G.player.mediaPlayer.getElementsByClassName("togglePlayPause")[0];e.setAttribute("title","Play"),e.innerHTML=at.getIcon("play")}}function yn(){if(!Ei()){Qi();var e=G.player.mediaPlayer.getElementsByClassName("togglePlayPause")[0];e.setAttribute("title","Pause"),e.innerHTML=at.getIcon("pause"),G.player.mediaControls.style.display="none"}}function bn(){l&&l.notify("click",{widgetId:o,video:G.player.mediaVideo,clickedElement:"volume icon"}),Tn()}function wn(){!0}function En(){G.player.mediaVideo&&(G.player.mediaVideo.volume=0,G.player.mediaVideo.muted=!0)}function Sn(){En(),rt.styleVolume(),k.dispatchEvent(new CustomEvent("onMute",{detail:{volume:b.getCurrentVolume()}}))}function An(){b.setVolume(b.getVolume()||b.getDefaultVolume()),G.player.mediaVideo.muted=!1,Ei()&&b.getSwiperVideos().map(function(e){return e.firstChild.muted=!1}),rt.styleVolume(),k.dispatchEvent(new CustomEvent("onUnmute",{detail:{volume:b.getCurrentVolume()}}))}function Tn(){if(G.player.mediaVideo.muted){if(An(),b.handlePlayerInteraction(br.a.SoundOn),xt){var e=G.player.mediaPlayer.getElementsByClassName("mobile-unmute-wrapper")[0];e&&Hi(e)}}else Sn(),k.dispatchEvent(new CustomEvent(ea)),b.handlePlayerInteraction(br.a.SoundOff)}function Ln(){Ie=!1,k.dispatchEvent(new CustomEvent(Xr)),qi()}function Cn(){if(Re){var t=G.player.mediaVideo;t.addEventListener("timeupdate",function e(){!t.paused&&0<t.currentTime&&(t.removeEventListener("timeupdate",e),Re.Hide())})}se=Ur,sr(!(tt=!1)),ie=!0}function kn(){D&&D.onContentVolumeChange(),p&&Wn()}function Pn(){k.dispatchEvent(new CustomEvent(Zr)),G.player.mediaVideo.ended||se==Ur&&(se=jr,ii())}function xn(){G.player.bufferBar.style.width="0%",G.player.playProgressBar.style.width="0%",G.player.progressButton.style.transform="translateX(0) scale(".concat(nt?E:S,")")}function On(){D&&D.onVideoEnd(),window.playerLog("onVideoEnd"),k.dispatchEvent(new CustomEvent($r)),In(),Ue||(ae=0,x&&rr())}function In(){x?K.isPlaylistFinished()&&(window.playerLog("playlist finished"),0!=B&&0!=B||!Ae||Te||ur(),!1!==B&&B--):!1!==B&&B--,window.playerLog("decreaseRepeatCounter","Repeat counter",B)}function Rn(){!function(){var e;if(de){var t;e=Vi(de,Math.floor(_n())),null!==(t=e)&&void 0!==t&&t.url&&G.player.mediaVideo.currentTime?(re!=e.url&&Mn(),re=e.url,Fn()):(re=null,Bn())}if(x){var i=K.getCurrentVideoObj();i.lnks&&i.lnks.length&&((e=Vi(i.lnks,Math.floor(_n())))&&e.url?(re!=e.url&&Mn(),re=e.url,Fn()):(re=null,Bn()))}}(),function(){if(!Z){var e=Math.floor(G.player.mediaVideo.currentTime/G.player.mediaVideo.duration*100),t=G.player.mediaPlayer.clientWidth*e/100;G.player.playProgressBar.style.width=t+"px";var i=G.player.mediaPlayer.clientWidth,n=Math.min(e*i/100-2,i-20);G.player.progressButton.style.transform="translateX(".concat(n,"px) scale(").concat(nt?E:S,")")}}(),Nn(),$n(Object(cr.b)(k).width),0<G.player.mediaVideo.currentTime&&k.dispatchEvent(new CustomEvent(Qr,{detail:{currentTime:G.player.mediaVideo.currentTime}})),!ne&&Fi()&&b.getPauseWhenOOV()&&b.tryPauseContentWhenOOV()}function Mn(){var e=k.getElementsByClassName("links-button");e.length&&(e[0].classList.add("highlight"),setTimeout(function(){e[0].classList.remove("highlight"),setTimeout(function(){e[0].classList.add("highlight"),setTimeout(function(){e[0].classList.remove("highlight")},250)},100)},250))}function Dn(e){return e&&e.ctownid!==we&&!function(e,t){if(Cr.public.comovid.includes(e))return!0;for(var i in Cr.private){var n=Cr.private[i];if(n.includes(t)&&n.includes(e))return!0}return!1}(e.ctownid,we)}function Fn(){Dn(K.getCurrentVideoObj())||k.getElementsByClassName("links-overlay").length&&(k.getElementsByClassName("links-overlay")[0].style.display="block")}function Bn(){k.getElementsByClassName("links-overlay").length&&(k.getElementsByClassName("links-overlay")[0].style.display="none")}function _n(){return G.player.mediaVideo.currentTime}function Nn(){G.player.currentTime.innerHTML=Object(gr.b)(G.player.mediaVideo.currentTime)}function Vn(){G.player.mediaControls.style.opacity="0",G.player.mediaControls.style.pointerEvents="none"}function Un(){G.player.mediaControls.style.opacity="1",G.player.mediaControls.style.pointerEvents="auto"}function jn(){Yi(C=!0),Vn()}function Hn(){C=!1,Un()}function Gn(e){e.stopPropagation(),b.handlePlayerInteraction(br.a.ProgressBarSeeking),l&&l.notify("click",{widgetId:o,video:G.player.mediaVideo,clickedElement:"progress bar click"}),zn(Yn(e.pageX)),p&&Wn(),i&&u&&u.removeAutoSkip()}function zn(e){G.player.mediaVideo.currentTime=e,Nt("currentTimeChanged",{time:ae=e})}function Wn(){p=!1}function qn(e){b.handlePlayerInteraction(br.a.ProgressBarSeeking),Z=!0,l&&l.notify("click",{widgetId:o,video:G.player.mediaVideo,clickedElement:"progress bar click"}),window.playerLog("mouse down progress bar"),zn(Yn(e.pageX)),p&&Wn(),i&&u&&u.removeAutoSkip(),k.dispatchEvent(new CustomEvent("seek",{detail:{currentTime:G.player.mediaVideo.currentTime}})),Ie=!1,se==Vr&&ri()}function Yn(e){var t=100*(e-G.player.playProgressBar.getBoundingClientRect().left)/G.player.mediaPlayer.clientWidth;t=isFinite(t)?t:100,t=Math.max(Math.min(t,100),Math.max(0,t));var i=G.player.mediaPlayer.clientWidth,n=Math.min(t*i/100,i-20),r=G.player.mediaVideo.duration;r=r||K.getCurrentVideoDuration();var a=G.player.mediaPlayer.clientWidth*t/100;return G.player.playProgressBar.style.width=a+"px",G.player.progressButton.style.transform="translateX(".concat(n,"px) scale(").concat(nt?E:S,")"),r*t/100}function Qn(e){Z&&(Z=!1,zn(Yn(e.pageX)),p&&Wn(),i&&u&&u.removeAutoSkip())}function Kn(e){Z&&Yn(e.pageX),function(e){var t=100*(e-G.player.playProgressBar.getBoundingClientRect().left)/G.player.mediaPlayer.clientWidth;t=isFinite(t)?t:100,t=Math.max(Math.min(t,100),Math.max(0,t));var i=G.player.mediaPlayer.clientWidth*t/100;G.player.hoverProgressBar.style.width=i+"px"}(e.pageX)}function Xn(t){var e=100*(Q=t),i=100-e;G.player.activeVolume&&(G.player.activeVolume.style.height=e+"%"),G.player.volumeHandle&&(G.player.volumeHandle.style.top=Math.abs(i)+"%"),G.player.mediaVideo.volume=t,Ei()&&b.getSwiperVideos().map(function(e){return e.firstChild.volume=t}),0==G.player.mediaVideo.volume&&0==G.player.mediaVideo.muted&&Sn(),rt.styleVolume()}function Zn(){nt=!0,this.style.height="6px",this.style.marginTop="8px",G.player.hoverProgressBar.style.height="6px",G.player.playProgressBar.style.height="6px"}function Jn(){nt=!1,this.style.height="3px",this.style.marginTop="8px",G.player.hoverProgressBar.style.height="0px",G.player.hoverProgressBar.style.width="0px",G.player.playProgressBar.style.height="3px"}function $n(e){e<600?(G.player.title.style.visibility="hidden",G.player.titleContainer.style.display="none"):(G.player.title.style.visibility="visible",G.player.title.style.display="inline-block",G.player.title.style.width=e-250+"px",G.player.titleContainer.style.display="inline-flex")}function er(){window.playerLog("onWindowsResize"),Ri();var e=Object(cr.b)(k);$n(e.width),tr(e.width,e.height),pi(e.width,e.height),k.dispatchEvent(new CustomEvent("windowResize",{detail:{playerWidth:e.width,playerHeight:e.height}}))}function tr(){G.buttonsOverlay&&G.buttonsOverlay.overlayPlayButton&&(G.buttonsOverlay.overlayPlayButton.style.width="55px",G.buttonsOverlay.overlayPlayButton.style.height="55px")}function ir(i,n,r){return new Promise(function(t){if(_i())t();else{var e=function(e){e&&(window.playerLog("restore time "+ae),G.player.mediaVideo.currentTime=ae),n&&Zi(),ie&&se==Ur?dr(G.player.mediaVideo).then(function(){Re&&Re.Hide(),Ni(),yn()}).catch(function(e){window.playerLog("ERROR restorePlayerState",e),Object(Lr.b)("changePlayerSourceplayVideoElementErr",{wid:o},e),mn()}):mn(),G.player.mediaVideo.style.display="block",rt.styleVolume(),t()};g=g||Object.values(b.getSwiperVideoManagers()).find(function(e,t){return t==mi}),r||g.isUrlDifferentThanCurrentUrl(i.p)?Ei()?(g=yi[x[mi].p],Object(Ar.a)()?g.getVideoElement().play():g.play(1).catch(function(e){}),t()):(g.destroy(),g=new Tr(i,b),gn(G.player.mediaVideo),g.loadVideoSource(ae).then(function(){Pi(),ce=G.player.mediaVideo.duration,isNaN(ce)?ki(K.getCurrentVideoDuration()):ki(ce),e(!0)}).catch(function(e){Object(Lr.b)("changePlayerSourceplayloadVideoSourceErr",{wid:o},e)}).finally(function(){sr(!(tt=!1))})):e(!1)}})}function nr(){if(K){var e=or();K.backward(),Re&&Re.Show(),lr(e)}}function rr(){if(window.playerLog("forward"),K){var e=or();K.forward(),Re&&Re.Show(),lr(e)}}function ar(){t=!0}function or(){var e=K&&K.isPlaylistFinished()&&(!F||!(!1===B||0<=B));return e&&(0==B&&(B=_),k.dispatchEvent(new CustomEvent("playlistEnd"))),t?t=!1:e}function sr(e){var t;b.useVerticalSwiper()||(kt&&b.isFullScreenState()&&ee&&(e=!1),G.buttonsOverlay&&(G.buttonsOverlay.overlayBackwardButton&&(G.buttonsOverlay.overlayBackwardButton.style.visibility=e?"visible":"hidden"),G.buttonsOverlay.overlayForwardButton&&(G.buttonsOverlay.overlayForwardButton.style.visibility=e?"visible":"hidden")),null!==(t=rt)&&void 0!==t&&t.isAllowed()&&rt.hide(),it&&it.setIsSwipesActive(e))}function lr(i){K&&(tt&&!Ei()||(sr(!(tt=!0)),D&&D.killBiddingSession(),Le.DispatchPromiseEvent(Kr,{detail:{switchToCTP:i}}).then(function(){window.playerLog("event onNewVideoBeforeVideoChanged"),ae=0,T=!1;var e=K.getFileToPlay();xn(),Bn(),i&&(window.playerLog("switchToCTP loopEnds event onNewVideoBeforeVideoChanged"),se=Vr,mn(),k.dispatchEvent(new CustomEvent("loopEnds")));function t(){if(b.useVerticalSwiper())k.dispatchEvent(new CustomEvent(Yr,{detail:{fileToPlay:x[mi]}}));else{ce=K.getCurrentVideoDuration();var e=G.player.mediaVideo.duration;ki(e||K.getCurrentVideoDuration()),Gi(),Bn(),function(){var e=G.player.mediaPlayer.getElementsByClassName("links-button");e.length&&((e=e[0]).innerHTML=Ii())}(),k.dispatchEvent(new CustomEvent(Yr,{detail:{fileToPlay:K.getCurrentVideoObj()}}))}}Ei()||Ve?ir(e,!1,!0).then(function(){t()}):(G.player.mediaVideo.currentTime=0,Nn(),g.destroy(),g=new Tr(e,b),t())}).catch(function(e){window.playerLog("error afterLoadingVideo",e),Object(Lr.b)("onSwitchToNewVideoErr",{wid:o},e)})))}function dr(r){return window.playerLog("playVideoElement called"),new Promise(function(e,t){Ie=!1;function i(){r.removeEventListener("playing",i),window.playerLog("playing callback"),r.paused?(window.playerLog("video is not playing somehow"),t()):(Ni(),e())}try{r.addEventListener("playing",i),window.playerLog("play video element");var n=g.play(ae);n?n.then().catch(function(e){Object(Lr.b)("rejectCallbackErr",{wid:o},e),window.playerLog("reject while playing video"),r.removeEventListener("playing",i),t()}):setTimeout(function(){r.removeEventListener("playing",i),t()},5e3)}catch(e){document.querySelector(".general").innerHTML=e}})}function ur(){Ue=!0,window.playerLog("player destroyed"),En(),Le&&Le.removeSubscribers(),si(),li(),ti(),_e.style.display="none",k.dispatchEvent(new CustomEvent(Jr))}window.aaa=yi,this.getCurrentVideoDuration=function(){return ce},this.setupPlayerHtml=function(e){var t=document.createElement("div");t.className="trv-player-container","floater"!=$&&(t.style.position="relative",t.style.margin="0 auto",this.useVerticalSwiper()&&t.style.setProperty("display","block","important"));var i=document.createElement("div");i.className="trv-wrapper",kt&&i.classList.add("trv-vertical"),Fe=i;var n=(I/O*100).toFixed(2);t.appendChild(i);var r=document.createElement("div");r.id=Me,r.classList.add("trvd_video_player","trvdinstream"),_e=t,U&&(_e.style.height="0px"),function(e){k=e,Le=new Er,Le.setPlayerElement(k);for(var t=0;t<N.length;t++)Le.subscribe(N[t].eventName,N[t].callback);N=[]}(r),i.appendChild(r),i.style.overflow="hidden",i.style.position="relative",this.isResponsive()?(t.style.width="100%",i.style.paddingBottom=n+"%","in_stream"==$&&(O&&(t.style.maxWidth="".concat(O,"px")),I&&(t.style.maxHeight="".concat(I,"px"))),r.style.position="absolute"):"floater"!=$&&(i.style.height=I+"px"),rt=new Ir(this);var a='<div class="media-player" style="height:100%;">';if(Ei()?a+='<div id="slider" class="trv-video swipe" style="height:100%;">\n            </div>':(a+='<div class="trv-video">{{video_placeholder}}</div>',a+='<div class="trv-overlay"></div>'),a=(a+=rt.render())+'<div class="trv-media-controls"><div class="trv-progress-bar"><div class="trv-progress-padding"></div><div class="trv-buffered"></div><div class="trv-play-progress"></div><div class="trv-hover-progress"></div><div class="button-holder"><div class="trv-progressBtn"></div></div></div><div class="trv-bottom-controls"><div class="bottom-left"><div class="togglePlayPause trv-control" title="play">Play</div><div class="volume trv-control" title="volume">volume</div><div class="trv-info"><span class="trv-currentTime">00:00</span><span class="timeDivider">/</span><span class="trv-duration">00:00</span><div class="videoTitle-container"><span class="videoTitle"></span></div></div></div><div class="bottom-right"><div class="BR brpBtn sprite-background" title="Truvid.com">Truvid</div><div class="fullScreen trv-control" style="display:none;" title="Full Screen">fullScreen</div></div></div></div><div class="trv-poster"></div></div>'+function(e,t,i,n,r,a,o,s){function l(){return r<200}var d=mr,u={toggleDisplay:"all 0.5s cubic-bezier(0.23, 0.36, 0.45, 0.94)",overlay:"opacity 3s ease-in-out",controller:"opacity 0.2s ease-in-out",progressBar:"all 0.1s cubic-bezier(0.23, 0.36, 0.45, 0.94)",fadeOut:"opacity 0.2s ease-in-out"};e||(u.volumeBar="opacity 0.15s linear");var c='transparent url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABNoAAAAoCAYAAAAonpdLAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA25pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDphYzE1ODUxMS01M2M5LWQzNDYtOGZlNC1hZTI1ZmI5NTA4YzgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MEQ5RDQ5RDcwQ0UyMTFFOThFMTVFQThERTQzOThERDkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MEQ5RDQ5RDYwQ0UyMTFFOThFMTVFQThERTQzOThERDkiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MUQ3QUQ4Nzk3Q0I1MTFFNUIzMTRCMDIxQjZBMkU5NjUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MUQ3QUQ4N0E3Q0I1MTFFNUIzMTRCMDIxQjZBMkU5NjUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4FuWpAAAAxdUlEQVR42uxdB3wU1fY+m4QakF4EURAVYwMCiIgIiGIUFewoigg+LOhflKeiFCn6DD556rM8VEQEaVIFEVBBwK6wUoTQRERARCDSAoGU/3wzZ5LJsrM7bUuS8/1+55fN7pR7z87ee+53yvXl5+eTQCAQCAQCgUAgEAgEAoFAIHCHBFGBQCAQCAQCgUAgEAgEAoFA4B5CtAkEAoFAIBAIBAKBQCAQCAQeQIg2gUAgEAgEAoFAIBAIBAKBwAMI0SYQCAQCgUAgEAgEAoFAIBB4gCRRgUAgEAhKEnw+X8HLgL9AfsBfT4ENhgz397xr4fojGxwJBAKBQFC6MHDgQLunVFekqSINFamsyHFF/lZksyKrFcmxc7H09HTTz5q0aGO3bbW4bWcoUo3bst/Qtiw7F9u48lvRW+z1lqjI+egW67CCIocU+U2RtYr8WRL0FqgzIdoEAoFAUBLhY0nIz88/UfCmz1dG+ZPH/+ZLfwQCgUAgEJQC1FCktyLdFWnGNsVORQ4qUpY/B9FwRJHPFJmoyByDjRFJ1FakjyK3K3IRFXUoGgH7Z7kiHygyRZFs0Vvc6g1tuUqRXopcq0gV1tle0sgr/H8qaXzUz4pMV2SsIrtKit6EaBMIShAceBgcwcyT4MCL4BjBPC3R6n8oHcSDHuLhWYixHnRSKpElcN7LZQHskFMFEWWbN2+udOaZZ76RmJh4DwWPkis4Njc39/2tW7f2O/vssw+Ts4i6SPUnYkhNTZ2g/HnI7/cflpFZIBAIBIKYAdFDgxTpT1r01SRFHlPkR0WOBhxbV5F2itzKxMI2Rf6pyLwIta2SIs8q0o/bGQ5wLnZieYH7NZ4iQ2qJ3pyjgyIvKdJckY8VeUSRpYr8HnAciMoWilytCOzpZxQZo8gw1nmx1psQbQJB6UEKacx9e0XOVaQOv49w3Q2KLFPkQ0XWR7ANZxvagPbU4vf3KZJhaMOGCOvhekU6K3KeIlVJ81jsUeQnReaz7C3heoBRcJ0iXUgLma5JGkkDL912RRYpMleRX4qpHlCDNJEnycBJk7ivuTauVxBRtnfv3tTq1atP8vl8Z5Hm5cyjogSaz3i8grsaN258iXJej5o1a/rJWQSa4/6kpqbmh+lXMJie4/f7reTG3q3IJcq9uyvH+2X4FQhKDDBuP6lIW9KiN0aRxQiEc889NyIN2rBhQ9B74X0P7hm0v6HuKRDEEVLZjkL00BAmMY6GOH43aZFFkPqKDCYtOmuyIg+QFrXlFVqTRko1cmHHvqvInWxz/CF6i7neQJyNVuQh0kjGXqRFq5kBqbffsowgLWoQhNbNivQgLZqs2OqtgGjTa8qUG5/V0Jfkm6NIA18STVH+Pn+kWznLX4DUhykeyMjIQCjnFUEWXCAcJqekpGQEHA8y4h+k5VUHYrty/P9Eq3GLZjxoteZJ4zVF1jCRhAER4bPnkBbe+5UiPyiCcKhVHrYBhFY6EzvBFumnsuCZHMYkD7waP3nYhou5DRcoMkMRPLMgFfcwWYGJEZ6Xbor8V5G3FHmRvCXc4kEPpynyvCI3KrJAkY8UGc4TBoiaOqyjK9m4+FyRoeQt6RdpPagEF3+vZYMYAUAeFSXIwl7vrLPOSlq1atUjycnJz2G6NMyjekRZYERbQQQaSLkaNWosP3z48OBmzZq9tmXLlhy79/ewP9FckH+Tmpr6FH5Tfr9fDASBoHgDY/cXpNWwWapITx7HEcmxKxYNMiO2PCK8bPVXSDZBnOFqtnfxDN9LmhPTDuB4fZC0SK4p/BtACuBfHrTtJr5ueQ+uhWij7xRJI81JK3qLjd4qkuagx1qqK2mRbHYAG3YyX+N10hwbvbm/xVJvRXYdLTs260JeZDdlQgVhdZsrzc8eWnnR8TIyXpW4wXdggGAxBAb+viDHt2LSYWAQ6SfqjFv04wEeBFoD0rwqsxTZQlpILkimn/m9B/mYZXzOQDKPdrGDAaSRdtdbvJ6PB68fmFxx2waMcyMVWajIYkXOJM3TMpMHSEyg8EStJK02AAgoeLLqKbJOkWs8+i5irQcAIe0gWbN5AYFosvHcLkQ27uU+TyONWIeuNvGE8kQx0oNOTJlFgCXy5z6r11m+fHntdevWzUpOTv43FZJsZtczu385nI/r4HpO2uGyP7EAdPWKInNSU1NryJAsEBRrwEaE4/US0qINLiXNOfNMPDQuAhFzYfsbqSg9gcAlLmfb/j3SHMgqWZTnsy4GfMW/ARApcNAmu2zbNUxAlfewv6cr8in/9VxvDlGa9AanLyLYsNkB6sZ87OJaKDnSi7SggPcVuaG46q0goq3MW0ea8gK7SsAxeCgQ7XDTKYtP9DrYqcwqGbtKBPTw12VMQOiLOUS0TQ9y/DeK3E9aapeennQGEzelrQaPlagMkBYgJ78mjbyyQgx4DURlIUoNkWwbLZ6D0GZEv4GEQsgzop8ednh/9OlNfkacIIkH2cakkb9OomFAQMCDgYg9eFh+s3ge0iXvIi2tUq/J8H4x1gNxH55mw8FqKPbfvND4gJ8HTCiPFBM96BFlSUGuk0jWyC31Gjt37uxQt27d8QkJCfVMjAu0JY+Kpm4m8L3KnnRC2bLXtm3bdoVy3V7169dfStbqq7ntT6wBQ2lVampqD7/fv5wEAkFxxCmkOWT0OjtwViEaumGsG6YTXh6nb4bsb4TuKRC4xam8loPd9mgY2wI2BJyuZxuICKz1pwYchygtBGl8r8g7pKXPOUEjJj3KhjXgExPp2s5XUsPTG1C5strhGZs20/xFn5mdgjULSDIQ4scjrDeriLreHMCt3ojXjqi1BmJxk0ftQippZV6DICtpQ3HTW4HBnrh/6xd5mTuq0LltTxCVCRa9BiLux1MWHnk67++Dow93PzXmKSAZGSdH66WkpJi+H+22mMGsLVauEYF+LFOumW7hviBg3g5o70W8aI73BV4s8BwbZiMD9RYlIBqtA2memVChysg3r8ivEdWlb2G8ic9dwtdKd9CGZ8ORKkhZr1GtGlWooNWj3LV7N+XmnlRmCmHDe5gksovRbBB3VOSAg/NRqw213BaxfhZFQg8W4UYPt/H3eLnDiQrnIFUGYfSIfB1VDPRgjAIrYrtR6Ogv/f2EW2+9tey4ceMGV6pU6akg19GByTuHzCPagk7uIO0ULDh06NCo3r17Pzd9+nRM0qFqtzntTzwBRsmS1NRUjIvP+f3+XBIIBMUFiOSC8wUOh3/z/Igor7MczkuuYSS3IkB0he2vkGuCOAUc7YjE+geFd+B9QppT3gik700NcvwORe4gLesFpWjmOGgbyKYq4Q7C+uCd1/5DbVtfXOT9eQs/DUW0EZM9yMB4PoJ6s4uo6c0F3OgNEWzYMKJ7iDVGc76HMbMBOkb5mo1h1rOXcv8vd/C9hNXbeU3OofNTzqWqVQsPQym0xUuX06+/bXeltwKirfLBtb4Dm76jmkc3HMts/Y9R+ZSE9J4KQY7HZNM+eczGe4480GS/m2/UI2Ip2C5vod6PVDuIByVE/0SyiLrXcBNGWdmJLl3ot7jgN/5hA+/xD/DsKN6/LQ9M+PGbkWzw2iCS8SLDe9exIakDzzGin5BSiZTLH220AYPikFAHNDrjdHpj9Chq3KhhwXsdu3SjXbv/DHY4iI5PmeixCoQKw3MEJ8EBF/pcQVoEFSLa8KBmeqkHm3CiB9SeA9l7o8kEiEVEXcM4CcJnbZDj8Cwh3ROF7REJ+51XeqhdqybVqlEDlpX6/4kTJ2jTll/c6sFnMv77QswLBRsY/Pjjj6c3a9bs/aSkpMvC9M0soswsAs2IxEqVKj0zefLky5988sl7WrVqhRndjGxz0p94BHQyDD93jm7b6fRCVna1NduVV+AaTjbYCAuzNDwjoWHlGCfXDXWck/6WMBIG9kEqLxA3sI3xT54PEfkxI9oNCqdfl1FmjvorkW2COAAiim4hrcZtVphjsRHVVTavj4j0caQ5XJEqaMdhBru8k5UDW6U2P4lks4GBbPf+5YHe4MgEuW4WpYVMrxdZj7gfyLqJpEWxYe10LFJ6S0hIoNMbnEbbTMig6tWq0hOPPqzqcX/m3zRx6oc0Z/4CatfmEvr2hx8p+/hxL/RG3H+kxgbLiEMJGtRbA8GIskU3cX/m8LogXMYV9NRXkdWk1X2b49Xz1qB+fRr61ABa8Nli+u33HdT5ig50eds29PnS5fTKm29ZIdnC6q1gAdC5feuU3y86f2aNimXnzu5aaVSFqcdAEIwx+QFiAlpRYdSKrkefarm2NIxaIJAskEEIvUXkTL8IGB2IBhnu6Eyf71nKzx8eZLFj/OsECR5cw6r+XXsWlO8vWgtR6DqbX+fwdzc5SvdGH1/hwSsUUwGD8SIL19tKWiH8l0mLaLL6PbxMATUgA/Hog32LkGwW+9XMYhsSuQ3Qg3EzF9xwW5DjkQY9kkknDOLYVQbel2/489mkkXaoy2KnVtlJeqhf71Tauevk/WXqnVqX+is6qV2rljLIL6MZc+ZRyrnn0E+r17rRA4DoyrlBSKl23KevmITDDj9wpLwZ4lq/MkmCfrVxowegZfNmdF1aZ1q5ajVd1bE9Xd2pI42dMIkmT5/p9fNg9RlDG7Gr6PXVq1d/2+fzWakplhTiWU8gC7t7g8xr0aLFD8p9+9asWXMexefGBl4DBj5SSe/1+/1uann0ZuPVCR4K87wLwv9m7BBSrmClFlawYzwkPqLa3zgB5kxERB9nO2YLv49UnAZsI2z36mZWdgk1I0etkLFe9jeQVCsmtdrggMV4i9ImO0Icdw7bDNfyAtfVb9QuUR5Kl6GO0z8Lcr7rfhcjAvVx0pyhVhyyFxpegwhBqh5KC4UrCTSCfwvgAz6y0bYBVg9scnbjgtcgQt54ZxwdO5ZNWUezrJxeibRyR895oDd9p8pOQdZVWGss4vWCauKzPYJN514izVF/LFJ6a3rBefSff42kex54mLbvKOqzTExIoHffeFWN1gLq1K5F/3p2EA158nF6d+Jk+nl9BmXv3++F3qAfOKRbBvkMGVPYUA2bz43n9+D9XMWk2UsW77GOeZUBNok20+etQvnyNP5//6UpM2bRrHlajMmqtWvpoykTqVP7dvTuBFv7L5jqrWBxMCmt8e7ldzRtO7tripoSdLR7eTwIV/OC/ESQiyLn9dtyTy+5ycVgYGag1OWFbTQxh+9rp53BgALXYHRRTLyWhyTbMMckW/Bz9QifTBft0gfiLBOdWRXLRJlTieJzhJl4YsB70+wYKi5xGRuDb4U5TifZvmByCZuffGpyLK7VmIkZq20I64ZKOUcL8pvz8QJqe1UXatWxM+3e81e4Nl9psQ3X8gT4bsD7K4JcA5G78DTdzRMpJkiEjiNl1BjxOZwH0mQ3epj1wXt0aetWRd4rX64cTRo7hrp2uYbaXNxSmQgH0PdfLKLLLmldUJfCoR4wHsEBMDjgfdRaW8h9msTHIFLtDgq/XfUYHv8vdaOHenXr0NjXX6bX336X5i1YRI8NHEzrNmyk666+iv7aayko2I4eLBFsw4YNS87Kynq5Ro0aMyySbMbFt6tIM9wP98X90Q69TVSyU/NrKjI3NTX1ZUXKObzGf9gIruTg3DcUmUCF6fOW0aRFm3xE1Oni0uYRCOLxt4n5oBdp0cuvGEgn4gXnUq9INpAY4YiMwGNAphgJFf1/h4SXo/66vGe0gXkYETajw5BNwCYmDJYwOeXqu/WKZAv83CL5FZN+xwiVmcB4x+LxRnt2IhMaWP/vCXMefgfI3+xho21Ya3S0enCF8oVJdR/NX0Cbf9lKv+/cSfv2W1623uOR3mBbwBmPGmu3BXzWwUCyGQHDHXVpcyKpt4oVKqpO+ukT3qVrrioauHVxy9QCks2IMmXK0BXt21FObq4XeiPuy0+kZT8F4kZeLxjXFQhEeZNt26427oPvpi1/F66ftys7tqfT6tejPXsL97o4fvyE6uhH2nKnDpfb/e0F1VvIiJOsW8rnH+lWbjQvlHaY/EBnlnlwzlMeDhI9+IfeLcqDU1e+bw+ProcfI3ZzvCUOSTbiiQQPhZv6YWvYMHnMZPFpVWzDGOGmv8ZfXaL87OB+cCXAE/J4kIEVkSkD+PPfI7zYwnMHL2y4YpY6gfQ9D4CYuU6YHKt7dm+z2IZbrRxUtpy2rv7q2+9o7/79dPDgIcrLywt32i022jAxyHeB6CKENyPM+VR+ry2dvGtMOf5OjZ6on9kIS3OjBxR3Hfvay2o4d62aNdX3UptdpBJPRfSjTIZ/7vkrWGi3HT1gHP0yyGKoG5MLOlmOGXc8aTW0GoW5JibJqVa/Z7PjruzQXvUo6d7JXOW7nz1vPtWtU5tOq1fP6vPudnwt2PBg/fr1KYMGDVpWoUKFfjbHJZ/Lz4sci/ujHWgPFaaklmSyDX1DbY+vU1NTnabYd+exzMlqFwQ7PKxO7p0fpXNiCVcOMqeES6DYPaa49DeOSLXhPFegoHU7toXL81y5PNLfsd1j7BJbAdeIan/jBEiLgzMVETVWo0iG8LGf8Tow5iSbA7ItJv2OIdqz3bAgnAlOWkpfdcN7dfg9SFUL90L0fScb9kmncLyDTgQhpa9KlVMK3qtRo7r6HuSUypZ9akj3bOiB3rDjPeqUw/k6jf9HDTcEINQ26wb3d18k9bZm3Xo6evQoVa1ShV5Jf45mTBhHt93YlU4/rT7VqF4t6MWSkpLUCLi/DxzwQm+qOU/mO4zqxnyTIPxBoH1ckdcgZsC4fIispzqHfN7q1NLWXyhjZMTGzVuYQil8D2sVrE2cPG9JVlp6uEu5HyovOo6QwOkUPKolPemOCQ3yDhx6lOzlHBuBaLIxZI/d9BoYcD7ghSGKdu92eT09ug3huKjdZjXn2blR5/NZOjclJQVtmeCmc8o1cil4scyYQY9eA9kWwUg25PKBqITXZwv/PRbmnMUsOolzJg/SjXmh5xVAGg0L8TlIFJCrFxgWqHq4LwxNMy/WUjZUrCCkYXL+uU2o7709qRoXnbz7jttUz8KRrCx6Zvjzrq5twKV0MomMARdeFBQxfoIX9+hXsIhMxFMH82zBywk3x0wnekA9hcnTZ9H9Sv/v69mDet15O32/0k/Hjp78+Bw4eJA+nP2RWz3geQiWPqDPsFcb+rKb+63vzApLFlF9/w1yPq451M3zcOiwxvGhVsSixVoT/9q7T+33rj+0offMhmeoUX0Tpn7oVg9mBI8aNZaZmdmjSpUqr/p8vsrxMI4phlAzZSHxjdKuR6tVqzbJAWFXHIHUnhWpqakP+f3+SQ7OP48N4D4UvE5IKCA6EjUo4Xz6yOa5+Q6+m/xi9n3GPEXUCtEiKaKO7VQMwAh9QImBgSw38ILQU1ipo+ek1p6Ne0a1v3EC2AHz2TZ8xea5ICKPMgHRzWDHxoxkMx6vn2+SchyTfscYmMt+YVsuFJoYyA4dYw2v7+b1cCj8yOtmZNFYiWxtaqUDID7mTSt66+eHPFPw+okhw2nuJwut6gOpsdtc6g19ROrjAJ4bWlH4aEesKzIjrTeQkZNnzKLed92pRmFdeH6KKqFw9NgxNbDBI71V4GfJrGazvv7oyb8pfb11Cr828hAd+RizskYIBllt9TkKd9x3K/zq327XXUtvvzdB1QtQKTlZfY1sKx2tW7agAY88SNfffpdtvSVYfVIPXV0WFcrBWk40OQRRAO87HBj0KLaucTJQRSq67VYqPfA8dTQQMYpe043wKWykrbdAsgUCEUHYNeJj/j15WeMORFqo1UYl/h3r3qqG/D8MklD5ehkUPtJJx5mhPkQUV9qVV6geAnUkvOB89f8mZzW2cu2zLByTYKIHhMvdQoXF5uFxuspk3DEr0L6BrHt6TtIDIvbSOnUsiNyDZwlFSoOFKP8ZOo32LBttCPY8IEJxKWlpdy34uF48Vh3lY+DuaR0JPQDYOeqHlX4a+Pij6m4/8FTedEMXevSpQXQsWytxWK1qVbrowvO90EPg71cl2UaNGlX16NGj46pWrTouXki2gkYq7UG70D60kwrTSEsy4Qbj64PU1NT3FHGSCorvEB5nROIn2TwXzP9sNvTsjsmlIbLNi/k/ZpAoOFM8wQsl5D/fzAuFI/w6onBac6+49jdGgDMKu0oOcUA26cB5KCMEIrJLPJBswc4L+D3HpN9xAJA3v3pwnfUWjvnVcE+rbXONX7ba6t5pHuitPD8HdmyvbdHQG0rL9Lm7h0qyWUWwGtEu9FafbVOzlGyU6xnM15vN4y7q08FRD+eG3Tr/W7163lCjDhse1K1di14fnU7NL7qAOrZrS/3+0ZsefOyJcBuyWdZbQpwMDMiNyomzwSqHwqff2UFJr7VjtpiNSOooEIP6azoQDbac7IXWmg1QSF1o5mHbsCAPRfyBvRllGBS/4/+HGAioYMgm69tKhww5375jB70zfiIdPnJE/X/J8q/U/8dPnmbl2mUtPDOV+fd2JMhn71kc98xSR4651cPMuR+rkW3h8KN/lVs96ORBMD3AM4SwakTaoj4bZpRZpHltK/P/03gixOsHAs4/yqSIYz3k5OTQPQ88QiNHvUTXdr6SPp87gz5dspS+/WEFJVesqP6PUPhOl7dTX99xy41u9BBsPE58+OGH3y5fvnwPimOgfWgnkz8JVDrQi3+rTuce7BpW1+G5cDzUcnAeReGc4jz/xxTGWloRqKkVd/21gbPZHlihrz8UgWP99Eh/H+EIFivHOLhnTPobQ8ziBe5rLq+DWr2IDvuvk+/Z7TEOzo9pv2MIPVIoHPS1wDLDezP4PYgVL8Rxg51pBZbqG2N3TKwJflj5U8F7iz5for4H2brtNzv6qOKB3hBoYDfSfWk09PbLr9to8VJ7me5wcHuoN72Q3t8hjkGqEiIpkKmAklYgrt+lwihRODfhmELwyYVU6KgK1oYswz1dP2//e3c8Xdn1FrVO9MN976Mxr7xEMz6ap65DAESxYef6t159ic45q7H6GlK5UiXLerNstFdedBy529g5wizNDUWF73E4MExn5U6Pk4HK6/YgNQthGR+SIKLQo9yiQMAh7eAr/l6dAB7Vr0lLd/ISGOzKh/gcOXlIk9hmmAzw/+gw10W66wEbbTAFJsmXXnuTDh7SUgc/WfSZ+j8GOosTe7hIAcRE55kMsv/mQT7cNT6IlB6wqybIxfz80E0IExpvRQ+6LswmmzzWxUR+je2z6/M5mBRBwM3l12MC+R9FDrp9HhDZB12g0C1e335TN3VnJKQRX3nDLdR/4GBavPxL9fWUGbPd6CFwUawSbb17934kMzNzcjyPaWgf2kmFRFtpcNi848KeGE9a6vgOh/e9jOyVjRCSTVCcgUwUFJdGalQ7XgwhCvmzSN7USlSh15GHfJ2Y9DeGgJPsNhfjqQ7k7nUi67V6jTp3fYyD82Pa7xjikEUiQl8LLAyYO/VUaitknb5Tl1Vb8IiVg/bu26euCb78pjAbcda8T9T3IHqKn0Uc8EhvSH2cQqEDEoqY+tHS25NDR9DHCz+zUuNaIzhmz/VSb0fNCKYAYM2JNFE9gg0ZfroTHmWJkEqLUkbr+XV1E/1UNNzTk+cNEX5IE924RavNhgwrvQ7gG2+PUzfqe+zpIbRl66/qa4geKGJFb5aItkrzs7Fjywoy33VwYM6Ung/nfdIv18XgsIcHstso/G4nkYLXbUAqHjYLuMXm9Yxe0eG27pif7yuQEOdmZGQkKtJQEVcREsr59RUJRu1GNHXUSKTpr2OwyyhICbgSLrF5HlL1viTrO6fYAUKSm0TguilkPRz91wjq3EosL2YbuLyCpRXm8AI81DOCyeAHk8/OdauH3Nxc+nPPnpCh3hj0UeTUpR6ArSZ6AGkDIu1l0nYFglFwIY/zeg4vCLKfTa7bhK/tWA/YehyRbM8M6E9XdWxP0+fMVT1G2JUVhVxVK+TQIdocOnz7F4fPkUq2TZs2Lad69eqDlyxZ8oTyvRymOALag3ahfWgnlQ6SDUbK7X6/v68iWTbPRdQtdgW+14YhpuMYn9eXr2PnOXLy7AkE8QJ4MPrzs7+c54V3eK5M8/pmoaKXdMLEyjEu7hnV/sYBZvEa5E0eH50AqV+PM+G00q7Ozb4zB7uHhnweAr7nmPQ7DgD7tmGU7tXQcE8r+D1G+vBCb3DqtrHIm4DJ+ilaejtx4oSa9mglU2bJsi9p/cZNXuptF6+5wkUEIzilu2HNf4VhvQF7DfXsYIPn8utME34A6+adXj5vDc84nbpcfRXpsQ+XtGpJMz8Yr65DUMYG9eyyso6qRCZeQ0IESpykt5DfSsUZx3zJc7JR/A+RO8HyddW6Bif+122Uhz+KWEW3eX1fTOZIMXS7WcAwsku26cjPD3VuT15E3+u0YRkZGVjAo5jm2yaLCU9TR427itqVCD43YN0R6Wm1fhl2ukRxyFoRag+i5DpG4Lod+NpW2xApfGnxuG/YOAoG1JPsQcG9HRj4Hwmjh2/d6mF4+kv0z0HPqrsFBQJ1A0a+ONorPXzNE1oRjou0SDZshICNIUawIXoJT2z6phcYH16IhB5AsiFE+7I2rWn0a2/SG++Mo6HPj6Lb7rlPncD+78G+6nHYzv2t9yZ4oQcKMUYldurUaXHfvn377N+/f2M8WMpoB9qDdlHp2HkUALnd3O/3O4n8BrF+GTnbRXsrG9Dj7Zy0ceW3Pj2NAGLjmRMI4g2v8kIINUvPYxIKi0U4VJ6wYd84Ib6CEi7hjrFLzARcL6r9jQOgVtn1pO2k2d/muailhI3urgxDHoTUeSTINgs13mLS7xgDbUV6dJUo3AtBA3DIbrd4/JoY6GOtR3qDMy6NClPOzYCU3Aeiqbfs48epz8P91bVDSLsy828a+q8XvdYbHKIIBWtp8nlz0koUDeY+w7lfn7kRkGzYEViPJATX1D3EvWALo9TSai/0dl6Tc+jD98fSQ316qU798ZOmUru062n+os9Ukm3cm69S+XLl1GNXrlqtRrU50VtBseB+a3Oq7cjOn1irDC0Y27TMGxWmHkMo9Rgy30YVUQpds1+4Yq2LH4CZ0alHlkUTt3lkHGPHEtQ9muJh24Y5PhNkW/DIGRgZyeQudbEeE00FM1xKSkqkvh9bu4Ahqi0jIyNazw70mGnxWERsVIxgWz5kQei3VzUGEeZ8J2meXyuYxr+BSGCGjePSmSjS46lRs6kLD/x3UNGUSjxLH3C7zcK5U/j38olTPdSsUYM6tLtUHeCvS+tMFSpUMPxU89V00RGjRocKS7arhzmkbXiA3+oufg87L1zDejgWMCkhtfYKC89DdzfPQ8vU5nR52zbU7c6eqpFQQF5s3qKm1sKj5PHzQCbjB54NeNByx40bt2P27NmPffrpp/e1bNnyxhiRIvkrVqyY3blz57GZmZkH9LZxO0tq8fx8XggN8vv9Jxycj5zzhxTZ5+Bc1N65i8KkuwsEpQC/UNEI4Y28gEIa9t38+nPyKOMkGJEWbmfZwGOsRMCFuF5U+xsHWMJEwXxe2L5g4ZyRpDnhrrSxuDX9zkx2BrV0TCBsbKQQk37HEIuZ/Ehj2yuS6ML6tZpO+TkfG61as/gNb/NQbxgjbiIt66VDkM+xDkRd4z+irbdff9tOD//zaXpx5FC6uEXqSZ8jCgsF/v/au9drventQ58CA3sakhZYgvT8fgGf3cF6eozH3MW8Pg6Vsoqsyqp8P1d6q1/vVJrw9htqySIEPhjx+DNDFT3to149ulPzpheq9doOHT6sihO9FRBtC1ds3PTHnp01z65V5dLkSVm18zSvjlm+MgrW3XP0qZb73fwCIkjKxKodWNSCyf4zAs0c5nwZkx/s3JyAv06gpwqfiNF35IuT52u7jYWazv43iVBb4BHYwUbCax5d8342SL+00QZEp1zscd/W2BhgP2bSqJci4/g91KT4njSvFXYagOfqELd1sgWDCu6Md/kcR3pA7YnVa9dRwwYNKGPjJrWgJuqRrfl5vboL54ZNm73WA/qMGpHPKdLbYAzkM8EQuOMCfjThooLuI420+9qpHg4eOqgSizdcm6booWifGzdqSB/OmuO1HoKRO3ksYPpAOCZlZmYmtGrVaswrr7yy+oEHHhhQrly5U6I1iGRnZx8cM2bM6P79+yM86ii36RgV3SyopJFt8P7e7ff7F7m4RncXermeSvbun14h36P3LcEssiUYyeLk3Hjrbxwjl+d9zJs92BZALTPY/nC+ITID0Qpwyu9zezM7hfOtPAsOiuzb6m+w+0Zgl1QvgTkbkf5zmSwIlYIFGxX1zZAhsc7t9+ol2eZgt9KY9DtGgM0AZ3CfCBNtyM65hgkTq4DduJTCO3O9wgSP9IZo+WtJc07jOSpjYufey+u7qOmtRbOm1P4yzXnf5uKWlJR08mbriMZ6ethz9NvvOyKhNwCBRXB2Ng1YR93O66zFJue9xESb1TIhfXj83epWbyhbg/WXvulBIN6dOEkl2o7ZqwcYVG8F38iegxXL5OXWoI2+cypTvm+oCYMBYx+pRqOPPNAkXgwLn833I4kbI0AmRRpuiLZsEhDZ93itocgRbfhdIkR+PstWl9dDCgVSCTvbXEw8xgZrgsf9yrfxXGM7buwYNY8X9ADSIQc6uH830rybdiNAT9ID0iFR0DVKegAG8zM3jo0BkGsPkkbetybN4wTUYENjXohroT7CSNaH4+cB5NqwF16kR+6/j5pecD59v0Irf1K1ShVa9tU36gYJEdCD8Vw9kk2PFPMZP+vfv//X8+bN+2XChAlP1qtX76JIDyC7du1a07NnzxcXL14MYvQoyxE2QI7x85xAJSuyDcbXXX6/f7cHY0Mszi0tKFXprsoiXtJ7TwbIfuwCfBaTT4j4qsMkFJw4ILuR/bI7Wg0KRriFImSi1V+vNm6IIDDZ1rdwHKJ3Tnfw+4naMaGOC/J+RPsdZ4CBid1E21LkSrkMIi3IYI7N816i6BBtR9j+90JvMEhBrqHkzwZ+PvKYyIFjdGoIMimiegOJBnKterWq6kZzp9atQ/l5+fTnX3/RqrU/q2mQZmSSh3rTnelIt77Z8L4edISND2YHsbea8+/yewv30Gu89fBCb/v2aXFi2Pjgsy+WnVRz7bwmTWhdxgZa/fN613orINqyK9TuQMl1lvl8dIrPnEzodTAteVW8jCRmxFS8RMoVEzTIyMhoxoOIjw2M9YoOT0o75JpsNQyL1KayWFGxJsjvCoMBIogmsJwI+C3dGsH2YIJI54G8k4FkMgKeBuwcGSoSryZpW1qjBuOPNtvwDRMyz5od0KPP/ZSYmET7Mi0Fxr5oIISsAm2/lgf4zmTda0JBJgPszAkP1F6v9WATTvSA+lVI3YSXrj1pHjdMCON48irPC4ZwBUYRsg0SDpGCX7rVw9SZc2jGRx9TozNOp7Jly6rRfn/u+SuSejBCH8Ny+G9+4HuLFy/eeeaZZw5cuHDhne3bt7/D5/Mlev1DVSb33GXLlk1JS0ubnJ2drRNsWSx6VNtxblsSWU81iGfk8HOQ7vf7XfXHRm00gUDgHlt4vqjDi1GM661IizJ4krTC8VFFYDppsBTUSPfX43sKBG6BTT6Q1YGddVuSd2VkdMBBi+ytu8h+sMYCJqU6RVgHWLfs8VBvX7i0OSOmNziqdWd1jPQGPEVaOuz1VOisR8ooApC683oSGUHYiaEij6NX8PHh7EA4mRFF7Cf75WKC6m3ugkXqJmzYBKFa1arKWmQebfttO5UvX54uPD9FLV9zf/8nLO/kGkpvBUTb8b7Jq8qOzbqMG2Qs1H6EFzUvHOxU5oSMX8FRDMk9PfT1bhYjkGc9zPhGRkbGxWxkBFtsli3lX/8aw+8JuoTHQt+5EfWwEFH0L9K2lcfAvTYKbQLRVo8njq48uBmxK8z5IGBm88SS7rANw9lADVoYdNduyxnWIISedtgGEExTeQK4yUK/A9GJzx/AE7DnerABN3qYaHgeMPHBg4Tx3GpqBGp2grhd4eXzkJOTo0b4RVEPgL7bcZ7B2Cmo1WaQnOzs7NyOHTtOGDp06JonFSQnJ9f06gd65MiRvS8qGDFiBJxXINR0cs1Isp0wtDGBXOzUHCeAJ/cOv9//jVgNAkGxBCJ8d7A9CMAJh0E85kawHuXmMfEVsr8RuqdA4Bb9mJh4nbTNPswA++Ntw/wcDuAH4LT9iJxv9vcP0jYfCLlhQ8amTTSNy4js2m0rWHYlEx+R1JtdRE1vLuBGb0tJc+AjEhgbq21h+7Urr6MQ7HA9vwfnP7imVyzas3DMtmbJ80JvWHs8+PiTarrtZZe0po6XX6a+t+uP3fTtDz/S+5OnhdpZ1JbeiiTzHr+v4tpy47Mu5gVVA9Lybp8/3KXcHzJmlThs4wEWC0o9iNHHP4JgO3WAFUE9pLpUWJtNx+pSrkvUJkH0Ggi1YLtVNeSJbBCTFNGKCv0/0ogmkCqIQsJOW+Gq7CfzOU9zW93sKIxRCimKqO8GorGMzfNBMAzjc52SC3ieb+O+rOHvCERNOA9fbR7c4YnpQ/bDvONND8TfJYjGhfw84v9w4YTl2fAYxJPiyBKgB2N79DptxtcFRJv+esSIESs//vjjfjNnznysYcOGl7gefLdt++7mm29+2e/3I0JSJ9l0gg2Szc+u3pYEKv6RwyDu+yh9ziSBQFBcMYvnAtQsRSrlLaSlWA6PdcMiRHSF7K+Qa4I4BUgzZK6gHAgyV54ysSEWslgB7GLsEnmQCmv+OgE2U7yD7WrTQI0vv/lOFZsAKX4TOY/is6o3O4iq3hzCrd4A7NJ7IWlRZJ25vcBisp5aG4jHeexFFODPXusNabU2U2tt662AaDMwdyBgmhVdjkgZk5KGlJQUhGGOsXE8GOg00ZwKsxou4zy4hteAV+YrJlVQs2waG4sgnfbyoINJQN/qHhMMPLYdyDtC8CWetNCGLhb7juLoIPu82FYdRAU2d0EhXETnoo4ANj9AlBsiug5wm1CkFNv1IN30OjawL6DwOwgVFz0AE/l5SOexfhZPiviu97BBUY0nS9Sk686TWycP2xAPeiiY3VhAqhkJNyPRhr85fr8/t1GjRsPmz59/Q1pa2n0JCQllDdcIdw8VeXl5xxcuXDi2S5cueBZBsBkj2PR6bPrmB3qbrNwjnoE+DVD09yYJBILijtd5rhzBAsARM0n6KxDEFRazDQd7F8EzqDd4MMGZNYFUyqlsq1xNoXeHtIIFTH7gd1Teo/5u53Xq9kjozeG1SpPejrNND/seEcA9eJ3lBOjbf0iLKryPv4tiqbckGYcEghKPVTzAo5A/orsQ6YbNGOry54jJRgFYFAHF9smR2GkJFSWv5/uiPl0H0lIvajHRguJcG7gNHyqSEYE2oK5YG9J2v0QbBnN7qjOhAkJtLU+yqL+yo4TqAd4dEKqNqDBi73xeTOhtwPOANFOQbWtKqB506GannkqaR0Wj23TSS40u69Kly4yBAwf+NGTIkMEVK1Y8w3B+vsl11b9ZWVm/jRw58rn09HRE9J2gwg0PjFFsxwPa4AnB5vf7nRD7XjgD8B12V+5f2qOeBYKSAoyD2FBoIs8Zv/N8ETME2xjBymYJbvsbrD6cR/cUCLwCIsk7MtkD+/YZfp1r8fya/Pxj3YDaW4jIOuBR22ax7Yf2NHR5LZS5QdTTLtFbTPWGPsIxDwcFgjqQSjrUxvVhd4Ksg0MeTn8EPnxanPUmRJtAUHoAcmNYjNsAA/U5lljhB5bSrgcQbi+wlEQ9WCLAAt7XyS1jHbfAdNKy6enpaz/55JO7Fy5c+DgVjTwLhEre/fHHH3PS0tL+s2bNGn1jA/w11mLTU0VzAtrgpj+xBgysR/x+/xESCAQlDevIgVMuWiSU8T4e3TNsf4VgE8QpkH+JzeuQgoeC9Eh7xiZt86mwhJARp5DmdEeaNJzzcHzeQ1o5Ka+B0jaog4hSLShTYjfaaDf3axx5v1mU6M0ZYNMiCg0bF7zKaw0Ql8ioggN/X8DxKI0CZ/81ivQkzQEPPSOLZU9x15svX9JCBQKBQFCCwDuEIrUTuxtV4L+JbBgZUzWPBzGWfIbJH+eU4WuV4+uUpcJNYXD+Eb6WGpGGnUQN99fPSabC2hC5VEi06VFsej02s1RRy/3B/eUJEAgEAoGg9GDgwIFWDsOmWEjH686EBuwPlAY6yLZPXT4GNslS0iI5p/L/IZGebr5PVpMWbay0DWVsQNAg4+JCMo+qR1uQoYI0QKQUHgt34VA7lIveIqo32NHYEOFe0soTgdhCzfddbO/Clm3E70OfIOOwqcLW4qq3QJ1JRJtAIBAISiJAVulRaDCKEqlo7bX8EOcRFY0s06Pa8LeMYe7USbNcKprqaTznOBsberHUHJ64jbuK5lL4HUWd9kcgEAgEAoEABMcwltNIi9gC0ZHMn4MEQXkL7LwZ7Wh0RC/9iwVlRFAv/nTSyrvAzsHmXZtJiybLEr0VC73BDp7NAsdzc9KIyjqkEVtwEqPG2VrWX4nTmxBtAoFAIChpMBJdJ3hCTzT8H0iMmV2DqJDE0tNIk1h8/L8x5TPQwMjh43C+vnOoXvMtsB35Ee6PQCAQCAQCAbCDIlOL2Asg7fIz0VuJ0hsyOL5jKTV6k9RRgUAgEJQo+BSQRkSBENMj0HTCSye57ESC4Vw9lTSRX+th5jrJppJdypyaz/dPMByrO7WMhJkdcsxyf/JlUhcIBAKBQCAQCGIKiWgTCAQCQUmETmgR/9WJKWMaqFUYN0rAuUaizfhZ4DnGaLjAY8NFsUWyPwKBQCAQCAQCgSBCEKJNIBAIBCUNgWmfPiokpgLJLrvXtLIjqJ1jY9UfgUAgEAgEAoFAEAEI0SYQCASCkggjOeUL8n6+i2vme3xsrPojEAgEAoFAIBAIPIbUaBMIBAKBQCAQCAQCgUAgEAg8wP8LMADFt5hSV0kCvQAAAABJRU5ErkJggg==") no-repeat 0 0',h=22,f="<style>";return f+=".trv-wrapper.trv-vertical, .trv-vertical .trvdfloater #slider, .trv-vertical .trvdfloater {border-radius: 12px !important;}",f+="#"+t+" .media-video, .swipe-video video ,#"+t+" .trv-media-controls, #"+t+" .video-overlay, #"+t+" .info-overlay {  -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; -o-user-select: none; user-select: none; }#"+t+" .sprite-background { background: "+c+"; }#"+t+" .brpBtn { text-indent: -9999px; width: 10px; height: 18px; border: none; margin-top: 18px; padding: 0; outline: none; cursor: pointer; box-shadow: none; background-color: transparent !important; display: inline-block; }#"+t+" .trv-control { padding: 0.1rem "+(l()?"0.2":"0.3")+"rem; text-indent: -9999px; border: none; cursor: pointer; transition: none; position:relative;}#"+t+" .trv-control svg { display: block; width:20px; height:20px; transform: translateZ(0); -webkit-transform: translateZ(0);}#"+t+" .trv-control svg path { fill: white; fill-opacity:0.8; transition:fill 0.1s ease-in-out; pointer-events: auto;}#"+t+" .trv-control.hovered svg path { fill: white; fill-opacity:1; }",e||(f+="#"+t+" .button-holder { position: relative; left: 0; }"),f+="#"+t+".trvdfloater { z-index:1500; margin: 0px !important;}",f+="#"+t+".trvdfloater.trv-right { transform-origin: right; animation: trv-animate-floater-right 0.2s linear 1 forwards;}",f+="#"+t+".trvdfloater.trv-left { transform-origin: left; animation: trv-animate-floater-left 0.2s linear 1 forwards;}",f+="#"+t+".trvdfloater.trv-top { transform-origin: top; animation: trv-animate-floater-top 0.01s linear 1 forwards;}",f+="#"+t+".trvdfloater.trv-bottom { transform-origin: bottom; animation: trv-animate-floater-bottom 0.01s linear 1 forwards;}",f+="#"+t+".trvdinstream { animation: trv-animate-back-to-instream 0.01s linear 1 forwards;}",f+="#"+t+' .trv-floating-menu { position: absolute; z-index:9;width:24px;height:24px; left:0; background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAQAAABKfvVzAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfiBRgKCyeBfAlfAAAAPklEQVQ4y2NgwAD/Wf8n/j/9//T/xP+sDMSA/4n/YSCROA2n4RpOY8oyEWUGtZ1EqqcHIRiNuCEKRiMOAwAAAsCVIyMyzqoAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDUtMjRUMTA6MTE6MzkrMDI6MDD/4PcGAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTA1LTI0VDEwOjExOjM5KzAyOjAwjr1PugAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII="); opacity:0.8; margin-top:0;margin-left:2px;cursor:pointer;top:29px; }',f+="#"+t+" .info-overlay { background-color: #000000;opacity: 0.8;display: none;text-align: left;color: #ffffff;font-size: 14px;z-index:9; position:absolute;height:170px;width:135px;left:0;top:0; }",f+="#"+t+" .info-overlay .info-text {height:100%;width: 90%;padding: 9px;text-align: justify;margin: 0 auto;}",f+="#"+t+" .info-overlay .overlay-info-close {cursor:pointer;color: #ffffff;bottom: 3px;font-size: 16px;text-align:right;margin-right:6px;margin-top:6px;}",f+="#"+t+" .info-overlay a,.info-overlay a:visited,.info-overlay a:hover,.info-overlay a:active {color:#ffffff;display:block;  text-decoration: none;margin-top:7px;margin-left:9px;}",f+="#"+t+" .info-overlay a:hover { text-decoration: underline; }",f+="#"+t+" * { -webkit-tap-highlight-color: rgba(0,0,0,0);-webkit-tap-highlight-color: transparent; /* For some Androids */ box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;-webkit-transform:unset; overflow: unset;overflow-y:unset;position:unset;margin:unset;}",f+="#"+t+" {direction:ltr !important; height: "+(i?"100%; width: 100%;":a+"px; width: "+r+"px;")+" margin:0 auto; background-color: #000000; position: relative; overflow: visible; opacity: 1; z-index:1; }",f+="#"+t+" div {white-space:normal !important;}",f+=".trv-close-container { position:fixed;z-index:999999999999999;}",f+=".trv-close-container .trv-close { width: 15px; height: 15px; padding: 1px; color: #fff; background-color: white; border-radius:50%; text-align: center; font-size:16px;position:absolute;visibility: visible;z-index:4999; cursor: pointer;font-weight:400;font-family: arial;-moz-user-select: none; -khtml-user-select: none; -webkit-user-select: none; -ms-user-select: none; user-select: none;line-height: 18px;box-sizing: unset; }",f+=".trv-close svg {vertical-align: top !important;}",f+=".trv-close div {position: absolute; width: 26px;height: 26px;display: block; transform: translate(-50%, -50%) !important; top: 50%;left: 50%;cursor: pointer; opacity: 0;}",f+="#"+t+" .truvid_ima_container video { display:block; height: 100% !important; }",f+="#"+t+" .truvid_ima_container { position:absolute; top:0; }",f+="#"+t+" .truvid_ima_container.trv-ima-container-hidden{ transform: scale(0);}",f+="#"+t+" .media-video { height: 100% !important; width: 100% !important; left: 0%; margin-top: 0; -webkit-transition: "+u.toggleDisplay+"; -moz-transition: "+u.toggleDisplay+"; -o-transition: "+u.toggleDisplay+";-ms-transition: "+u.toggleDisplay+"; transition: "+u.toggleDisplay+"; -ms-transition: "+u.toggleDisplay+"; object-fit: contain; cursor: pointer; position: absolute; background-color: #000000; }",f+="#"+t+" .swipe-video { position: relative; height: 100%;}",f+="#"+t+" .swipe-video .video-details { pointer-events: auto; box-sizing: border-box; width:100%; position:relative !important; bottom: 0 !important; padding: 16px; z-index:2; left:0;}",f+=".trvdfloater .swipe-video .video-details h2 {text-transform: capitalize; margin-bottom: 0.2rem; font-size: 12px; color: #fff; }",f+=".trvdinstream .swipe-video .video-details h2 {text-transform: capitalize; margin-bottom: 1rem; font-size: 16px; color: #fff; }",f+=".trvdfloater .swipe-video .video-details p { display: none;}",f+=".trvdinstream .swipe-video .video-details p {  font-family: inter; font-size: 14px; color: #ddd;  max-height: 2.5em;}",f+="#"+t+" .swipe-video .video-details.expanded > * { white-space:normal !important; max-height: none !important;}",f+="#"+t+" .swipe-video .video-details h2, .swipe-video .video-details p { overflow: hidden !important; white-space:nowrap !important; text-overflow: ellipsis !important;}",f+="#"+t+" .swipe {overflow: hidden; visibility: hidden; position: relative;}",f+="#"+t+" .swipe-wrap.hidden { height: 0 !important}",f+="#"+t+" .swipe-wrap { overflow: hidden; position: relative;}",f+="#"+t+" .swipe-wrap > div {float: left;width: 100%; position: relative; overflow: hidden;}",f+="#"+t+" .vertical-logo {z-index: 2; position: absolute; margin: 1rem; right:0;}",f+=".trv-vertical-play-pause-indicator svg {pointer-events:none; transition: opacity 1.5s ease-in-out; position: absolute !important; width: 96px;height: 96px; transform: translate(-50%, -50%) !important; opacity: 0.7; top: 50%; left: 50%;}",f+=".trv-vertical-play-pause-indicator.sound-icon svg {width: 64px;height: 64px;}",f+=".trv-vertical-play-pause-indicator.fade svg {opacity: 0 !important;}",f+=".trv-fs-modal { z-index: 2147483647; max-width: none !important; max-height: none !important; position: fixed !important;top: 0 !important; left: 0px !important; right: 0px !important !important; width: 100vw !important; padding-bottom: 0px !important; padding-top: 0px !important; height: 100vh !important; background: black;}",f+=".trv-sponsored { position:relative; width: 100%; display:flex; justify-content: flex-end;}",f+=".trv-sponsored span { padding: 0.4rem; margin: 0.5rem !important; font-weight: bold; color: #d8d8d8 !important; border-radius: 8px; background: rgba(0,0,0,0.7);}",f+=".trv-fs-modal-bg {height: 100vh; position: fixed; top: 0; width: 100vw; background: black; z-index: 0; left: 0;}",f+=".trv-close-fs-modal {position: absolute; top: 0; left: 0; z-index: 999999; margin: 0 16px; color: #ddd;  display: flex; flex-direction: row-reverse; font-family: sans-serif; align-items: center; text-align: left; padding:1rem;}",f+=".trv-close-fs-modal svg { width:24px;height:24px;transform:scale(1.5);}",f+="#"+t+" .swipe-video .video-bottom { pointer-events:none; display:flex; justify-content: flex-end; flex-direction: column; align-items: center;bottom: 0; position: absolute; width: 100%; height: 100%;}",f+=".trv-vertical-autoskip {display: flex; justify-content: center; visibility:hidden; gap:10px; position:relative !important; width: 100%;}",f+=".trv-vertical-as-btn {pointer-events: auto; display: flex; justify-content: center; align-items: center; color: white; backdrop-filter: blur(4px); width:40%; height: 42px; border-radius: 6px;border: none; font-size: 16px; font-weight: bold; cursor: pointer; position: relative; overflow: hidden; color: white !important;}",f+=".trv-vertical-as-btn.cancel {background: rgba(84, 83, 85, 0.6);}",f+=".trv-vertical-as-btn.up-next { position: relative !important; background: rgba(247, 249, 252,0.3);}",f+='.trv-vertical-as-btn.up-next::before {content: "";position: absolute; top: 0;left: 0; width: 0; height: 100%; background: #2C95FF; transition: width linear; z-index: 0;}',f+=".trv-vertical-as-btn.up-next span {position: absolute; z-index: 10000; }",f+=".up-next-fill {border-radius: 6px; position:absolute !important;top:0;left:0;height:100%;width:0;background:#2C95FF;z-index:0;}",f+="#"+t+" .media-player { font-family: arial; white-space: normal !important; }",f+="#"+t+" .v-arrow.hidden, .trvdfloater .v-arrow {display:none !important;}",f+="#"+t+" .v-arrow { position: absolute; display: block; opacity: 1; visibility: visible; cursor: pointer; top: 50%; width: 32px; color:white !important;}",f+="#"+t+" .v-left-arrow {transform: translateY(-50%) rotateY(180deg);}",f+="#"+t+" .v-right-arrow {transform: translateY(-50%); right: 0px;}",f+="#"+t+" .trv-overlay { width:100%;height:100%;position:absolute;display:block;opacity:1;visibility: visible;cursor:pointer;}",f+="#"+t+" .trv-overlay.vertical { width:100%;height:100%;position:absolute;display:block;opacity:1;visibility: visible;cursor:pointer; top:0}",f+="#"+t+" .back-blocker { position: fixed; top: 0; left: 0;width: 30px; height: 100vh; z-index: 2147483647; touch-action: pan-y; }",f+=NaN+t+" .video-overlay { display: none; ",e||(f+="width: 100%; height: 100%;"),f+="}",f+=NaN+t+" .info-overlay { display: none; ",e||(f+="width: 100%; height: 100%;"),f+="}#"+t+" .overlayBtn { vertical-align: bottom !important; width: 25px; height: 28px; outline: 0; border: none; bottom: 21.5px; position: relative; padding: 0;",e&&(f+="margin-top:-38px;"),f+=" }#"+t+" .overlayBtnWrapper { position:absolute; width: 100%; height:100%; top: 50%; transform: translateY(-50%); display:none; justify-content: space-evenly; align-items: flex-start; position: absolute; left:0px; text-align: center; z-index: 9; opacity: 1; cursor: pointer;  transition: "+u.overlay+"; -webkit-transition: "+u.overlay+"; -o-transition: "+u.overlay+"; -moz-transition: "+u.overlay+"; -ms-transition: "+u.overlay+"; }#"+t+" .overlayBtnWrapper>div { display: inline-block; }#"+t+" .overlay-play-wrapper { border-radius: 100%; cursor: pointer;position:absolute;top:50%;transform: translateY(-50%);}#"+t+" .overlay-play-pause { width: 55px; height: 55px; border-radius: 50%; background: linear-gradient(rgba(0, 0, 0, 0.1) 0%, rgba(0, 0, 0, 0.15) 64%); overflow: hidden; }#"+t+" .overlay-backwards-wrapper { margin-right: 35px; width: 8%;left:0px;position:absolute;top:50%;transform: translateY(-50%); }#"+t+" .overlay-backwards { cursor: pointer; left:0px; background-position: -441px -5px; background: linear-gradient(180deg, rgba(200, 200, 200, 1), rgba(230, 230, 230, 0.8)); }#"+t+" .overlay-forward-wrapper { position:absolute;top:50%;transform: translateY(-50%); right: 0px; }#"+t+" .overlay-forward { cursor: pointer; background-position: -472px -5px; background: linear-gradient(180deg, rgba(200, 200, 200, 1), rgba(230, 230, 230, 0.8)); }#"+t+" .mobile-unmute-wrapper { position:absolute; top:12px; left:12px; z-index: 10; opacity: 1; transition: "+u.fadeOut+"; -webkit-transition: "+u.fadeOut+"; -o-transition: "+u.fadeOut+"; -moz-transition: "+u.fadeOut+"; -ms-transition: "+u.fadeOut+"; }#"+t+" .mobile-unmute-wrapper.large-unmute { top:18px; left:18px; transform: scale(1.5); }#"+t+" .mobile-unmute-wrapper svg path { fill: rgb(224, 226, 230); }#"+t+" .mobile-sound-action-btn svg { width:18px; height:18px; fill: rgb(224, 226, 230); }#"+t+" .small-nav-l { left: 0; border-top-right-radius: 10px;border-bottom-right-radius: 10px;  }#"+t+" .small-nav-r { right: 0;border-top-left-radius: 10px;border-bottom-left-radius: 10px; }#"+t+" .small-nav { top: 50%;stroke: #1EAAF1; height: 50px;width: 20px;;color: rgba(200, 200, 200, 1);background-color: rgba(255, 255, 255, 0.85);display: block;cursor: pointer;-webkit-touch-callout: none;webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;z-index: 3;}#"+t+" .trv-poster { position: absolute;display: block;opacity: 1;visibility: visible;width: 100%;height: 100%;background: #000 no-repeat 50% 50%; background-size: cover;cursor:pointer;}#"+t+" .links-overlay { position: absolute; right: 0px; height: 24px; top: 20px;display:none;width:fit-content; z-index:1510;}#"+t+" .links-overlay .links-button { height: fit-content; padding: 0.7rem 1rem; background-color: #cc0000; width: auto; opacity: 0.75;  border-radius: 20px 0 0 20px; font-size: 11pt; color: #FCFCFC; cursor:default;webkit-transition: background-color 0.25s ease-in-out;-moz-transition: background-color 0.25s ease-in-out;-o-transition: background-color 0.25s ease-in-out; -khtml-transition: background-color 0.25s ease-in-out; transition: background-color 0.25s ease-in-out;-webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; -o-user-select: none; user-select: none;text-align:left;box-sizing: initial;letter-spacing:0; }.trvdfloater .links-overlay { top: 5px !important; }.trvdfloater .links-overlay .links-button { padding: 0.5rem !important; }#"+t+" .links-overlay .links-button.highlight { background-color:#cc0000;opacity:1; box-shadow: inset 0 0 0 2px #fff; }#"+t+" .links-overlay .links-button:hover { background-color:#cc0000; opacity:1; cursor: pointer;box-shadow: inset 0 0 0 2px #fff; }#"+t+" .loader-bg { top: 0px; left: 0px; position: absolute; width: "+r+"px; height: "+a+"px; background-color: black;z-index:9; }#"+t+" .loader-bg-transparent { top: 0px; left: 0px; font-size: 1rem !important; position: absolute; width: "+r+"px; height: "+a+"px; background-color: transparent;z-index:8; }#"+t+" .loader-bg-image { width: "+d.bgSize+"px; height: "+d.bgSize+"px; background: "+d.bg+"; background-size: "+d.bgSize+"px "+d.bgSize+"px; position: absolute; left: "+(r-d.bgSize)/2+"px; top: "+(a-d.bgSize)/2+"px; }#"+t+" .loader-bg-image-transparent { width: "+d.bgSize+"px; height: "+d.bgSize+"px; background: "+d.bg+"; background-size: "+d.bgSize+"px "+d.bgSize+"px; position: absolute; left: 50%; top:50%;transform: translate(calc(-50% + 2px),-50%); }#"+t+" .loader { position: absolute; width: "+d.spinnerSize+"px; height: "+d.spinnerSize+"px;",f+=";z-index: 9; border-top: "+d.border+"em solid rgba(00, 00, 00, 0.2); border-right: "+d.border+"em solid rgba(62, 181, 231, 0.2); border-bottom: "+d.border+"em solid rgba(62, 181, 231, 0.2); border-left: "+d.border+"em solid #3eb5e7; -webkit-transform: translateZ(0); -o-transform: translateZ(0);-ms-transform: translateZ(0); transform: translateZ(0); -webkit-animation: load8 1.1s infinite linear; animation: load8 1.1s infinite linear; }#"+t+" .loader, #"+t+" .loader:after { border-radius: 50%; }@-webkit-keyframes load8 { 0% { -webkit-transform: translate(-50%,-50%) rotate(0deg); transform: translate(-50%,-50%) rotate(0deg); } 100% { -webkit-transform: translate(-50%,-50%) rotate(360deg); transform: translate(-50%,-50%) rotate(360deg); } }@keyframes load8 { 0% { -webkit-transform: translate(-50%,-50%) rotate(0deg); transform: translate(-50%,-50%) rotate(0deg); } 100% { -webkit-transform: translate(-50%,-50%) rotate(360deg); transform: translate(-50%,-50%) rotate(360deg); } }#"+t+" .truvid-bg { top: 0px; left: 0px; position: absolute; width: "+r+"px; height: "+a+"px; z-index: 9; }#"+t+" .loader-transparent { font-size: 1rem !important; position: absolute; width: "+d.spinnerSize+"px; height: "+d.spinnerSize+"px; top: 50%; left: 50%;",f+=";z-index: 9; border-top: "+d.border+"em solid rgba(00, 00, 00, 0.2); border-right: "+d.border+"em solid rgba(62, 181, 231, 0.2); border-bottom: "+d.border+"em solid rgba(62, 181, 231, 0.2); border-left: "+d.border+"em solid #3eb5e7; -webkit-transform: translateZ(0); -o-transform: translateZ(0);-ms-transform: translateZ(0); transform: translateZ(0); -webkit-animation: load8 1.1s infinite linear; animation: load8 1.1s infinite linear; }#"+t+" .loader-transparent, #"+t+" .loader-transparent:after { border-radius: 50%; }@-webkit-keyframes load8 { 0% { -webkit-transform: translate(-50%,-50%) rotate(0deg); transform: translate(-50%,-50%) rotate(0deg); } 100% { -webkit-transform: translate(-50%,-50%) rotate(360deg); transform: translate(-50%,-50%) rotate(360deg); } }@keyframes load8 { 0% { -webkit-transform: translate(-50%,-50%) rotate(0deg); transform: translate(-50%,-50%) rotate(0deg); } 100% { -webkit-transform: translate(-50%,-50%) rotate(360deg); transform: translate(-50%,-50%) rotate(360deg); } }#"+t+" .trv-media-controls { ",f+="overflow:hidden;background-color: transparent; background: linear-gradient(180deg, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.8) 100%); position: absolute; display: none;bottom:0; left: 0px; z-index: 1501; width: 100%; color: #FCFCFC; font-size: 10pt; text-align: left; height: 46px;  -webkit-transition: "+u.controller+"; -moz-transition: "+u.controller+"; -o-transition; "+u.controller+"; transition: "+u.controller+"; -ms-transition: "+u.controller+"; }#"+t+" .fullScreen { width:20px;height:20px; }#"+t+" .fullScreen svg { display: block; }#"+t+" .trv-media-controls .trv-info { display: flex; align-items: center; margin:"+(l()?"0 3px;":"0 8px;")+" }#"+t+" .trv-media-controls .trv-bottom-controls { margin-top: 18px; display:flex; justify-content:space-between; align-items:center; }#"+t+" .trv-media-controls .trv-bottom-controls .bottom-left { display:flex; justify-content:flex-start; align-items:center; margin-left: "+(l()?"0px;":"10px;")+" }#"+t+" .trv-media-controls .trv-bottom-controls .bottom-right { display: flex; flex-direction: row-reverse; justify-content: space-between; align-items: center; width: 65px; margin-right: "+(l()?"5":"10")+"px; }#"+t+" .trv-media-controls .trv-bottom-controls * { margin-top: 0 !important; margin-bottom: 0 !important; line-height: normal !important;}#"+t+" .trv-media-controls span { font-size: "+(l()?"12px;":"10pt;")+" color: #FCFCFC; font-family: arial; }#"+t+" .BR { background-position: 0px -8px; width: 22px; height: 22px; transition: none; }#"+t+" .videoTitle-container { display: inline-flex; }#"+t+" .videoTitle {",e||(f+="position: absolute; margin-top: 18px;"),f+="position: relative; display: inline-block; visibility: visible; margin-left:7px; white-space: nowrap; text-overflow: ellipsis; overflow: hidden; cursor: default; }#"+t+" .trv-currentTime, #"+t+" .timeDivider, #"+t+" .duration { cursor: default; display:inline; }#"+t+" .trv-duration { margin-right:"+(l()?"0":"12px")+";cursor: default; }#"+t+" .playlist { float: right; background-position: -149.5px -8px; margin-right: 12px; margin-left: 12px; width: 12px; }#"+t+" .trv-progress-bar { margin-top:8px; position: absolute; width: 100%; height: 3px; background: rgba(255,255,255,0.2); cursor: pointer; -webkit-transition: "+u.progressBar+"; -moz-transition: "+u.progressBar+"; -o-transition: "+u.progressBar+"; transition: "+u.progressBar+"; -ms-transition: "+u.progressBar+"; }#"+t+" .trv-play-progress { position: absolute; background: #1EAAF1; height: 3px; width: 0%; top: 0px; max-width: 100%; -webkit-transition: "+u.progressBar+"; -moz-transition: "+u.progressBar+"; -o-transition: "+u.progressBar+"; transition: "+u.progressBar+"; -ms-transition: "+u.progressBar+"; }#"+t+" .trv-hover-progress { position: absolute; background: rgba(255,255,255,0.5); height: 0px; width: 0%; top: 0px; max-width: 100%; -webkit-transition: "+u.progressBar+"; -moz-transition: "+u.progressBar+"; -o-transition: "+u.progressBar+"; transition: "+u.progressBar+"; -ms-transition: "+u.progressBar+"; }#"+t+" .trv-progress-padding { position: absolute; width: 100%; height: 16px; bottom: 0; z-index: 28; }#"+t+" .trv-buffered { position: absolute; background: rgba(255,255,255,0.4); height: 100%; width: 0%; }#"+t+" .trv-progressBtn { background: #1EAAF1; box-shadow: 0 0 20px rgba(0,0,0,0.3); border-radius: 30px; width: 3px; height: 3px; position: absolute; left: 0; text-decoration: overline; top: 0px; -webkit-transition: "+u.progressBar+"; -moz-transition: "+u.progressBar+"; -o-transition: "+u.progressBar+"; transition: "+u.progressBar+"; -ms-transition: "+u.progressBar+"; }",f+="#"+t+" style {display:none;}",e||(f+="#"+t+" .volume-bar { cursor: none; left: 15px; position: absolute; width: 2px; height: 55px; overflow: hidden; background: #737373; top: 10px; -webkit-transition: "+u.volumeBar+"; -moz-transition: "+u.volumeBar+"; -o-transition: "+u.volumeBar+"; transition: "+u.volumeBar+"; -ms-transition: "+u.volumeBar+"; }#"+t+" .volume-container { -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; -o-user-select: none; user-select: none; position: absolute; bottom:36px; left:"+(l()?"26":"38")+"px; background-color: #F1F1F1; color: white; width: 32px; height:75px; text-align: center; border-radius: 10px; z-index:1502;; display: none; -webkit-transition: "+u.volumeBar+"; -moz-transition: "+u.volumeBar+"; -o-transition: "+u.volumeBar+"; transition: "+u.volumeBar+"; -ms-transition: "+u.volumeBar+"; cursor: pointer; }#"+t+' .volume-container::after {  content: ""; position: absolute; bottom: -8px; left: 50%; transform: translateX(-50%); width: 0; height: 0; border-left: 10px solid transparent; border-right: 10px solid transparent; border-top: 10px solid #F1F1F1; z-index:1502;}#'+t+" .volume-container .button-holder { height: 49px; width: 49px; top: 8px; left: 5px; }#"+t+" .active-volume { position: absolute; bottom: 0px; background: #1EAAF1; height: 100%; width: 100%; overflow-y: visible; }#"+t+" .volumeHandle { background: #1EAAF1; box-shadow: 0 0 20px rgba(0,0,0,0.3); border-radius: 30px; width: 8px; height: 8px; position: absolute; left: 7px; top: 0%; text-decoration: overline; }#context-menu { width: 185px; height: 40px; position: absolute; background-color: #252525; z-index: 9; cursor: pointer; border-radius: 5px; direction:ltr;text-align:left; }#context-menu .context-menu-icon-container { width: "+h+"px; height: "+h+"px; float: left; }#context-menu .context-menu-icon { background: "+c+"; background-position: 0px -8px; background-color: transparent; width: "+h+"px; height: "+h+"px; margin-top: 9px !important; margin-left: 20px !important; }#context-menu .context-menu-text-container { width: 160px; height: 22px; float: right; }#context-menu .context-menu-text { width: 120px; height: 22px; font-size: 12px; color: #CCC; font-weight: 600; margin-top: 14px !important; margin-left: 28px !important; font-family: arial; line-height: 15px; }"),f+="#"+t+" .autoskip-btn {pointer-events: all; width: 100%; padding: 9px 0px; font-size: 10px; font-family: arial; font-weight: 500; font-stretch: normal; font-style: normal; line-height: normal; letter-spacing: 1.78px; text-align: center; color: #ffffff; margin: 5px 0px; cursor: pointer; z-index: 10}",f+="#"+t+" .autoskip-btn-blue {display: block; background-color: #1E7ABB}",f+="#"+t+" .autoskip-btn-gray {display: block; background-color: #3E3E3E}",f+="#"+t+" .autoskip-btn-blue-compact {background-color: #1E7ABB; width: 50%; position: absolute; z-index:1508; bottom: 0px; left: 0px}",f+="#"+t+" .autoskip-btn-gray-compact {background-color: #3E3E3E; width: 50%; position: absolute; z-index:1508; bottom: 0px; right: 0px}",f+="#"+t+" .trv-autoskip-container {display: block; visibility:hidden; position: absolute; top: 22px; right: 32px; max-width:30%; min-height:"+(a-50)+"px; z-index: 10;}",f+="#"+t+" .trv-autoskip-background {background-color: white; display: flex; justify-content: center; align-items: center; padding: 5px; position: relative;}",f+="#"+t+" .trv-autoskip-container-compact {position: absolute; bottom: 0px; width: 100%; height: 100%; align-items: flex-end; pointer-events: none; display: flex; flex-direction: row-reverse;}",f+="#"+t+" .trv-autoskip-background-compact {height: 100%; width: 100%; position: absolute; z-index: 20;}",f+="#"+t+" .autoskip-btn-compact {height: 30px; margin: 0px; line-height: 30px;}",f+="#"+t+" .trv-autoskip-line-top {display: block; visibility:hidden; width: 100%; height: 5px; background: transparent; position: absolute; top: 0px; left: 0px;}",f+="#"+t+" .trv-autoskip-line-top > div {position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: #1EAAF1; transform-origin: left;}",f+="#"+t+" .trv-autoskip-line-top > div.trv-with-animation {animation: trv-animate-top "+o/4+"s linear 1 forwards;}",f+="#"+t+" .trv-autoskip-line-right {display: block; visibility:hidden; width: 5px; height: 100%; background: transparent; position: absolute; top: 0px; right: 0px;}",f+="#"+t+" .trv-autoskip-line-right > div {position: absolute; top: 0; right: 0; width: 100%; height: 100%; background: #1EAAF1; transform-origin: top;}",f+="#"+t+" .trv-autoskip-line-right > div.trv-with-animation {animation: trv-animate-right "+o/4+"s linear 1 forwards;}",f+="#"+t+" .trv-autoskip-line-bottom {display: block; visibility:hidden; width: 100%; height: 5px; background: transparent; position: absolute; bottom: 0px; right: 0px;}",f+="#"+t+" .trv-autoskip-line-bottom > div {position: absolute; bottom: 0; right: 0; width: 100%; height: 100%; background: #1EAAF1; transform-origin: right;}",f+="#"+t+" .trv-autoskip-line-bottom > div.trv-with-animation {animation: trv-animate-bottom "+o/4+"s linear 1 forwards;}",f+="#"+t+" .trv-autoskip-line-left {display: block; visibility:hidden; width: 5px; height: 100%; background: transparent; position: absolute; bottom: 0px; left: 0px;}",f+="#"+t+" .trv-autoskip-line-left > div {position: absolute; bottom: 0; left: 0; width: 100%; height: 100%; background: #1EAAF1; transform-origin: bottom;}",f+="#"+t+" .trv-autoskip-line-left > div.trv-with-animation {animation: trv-animate-left "+o/4+"s linear 1 forwards;}",f+="@keyframes trv-animate-floater-right {0% {transform: translateX(0);} 100% {transform: translateX(-100%);}}",f+="@keyframes trv-animate-floater-left {0% {transform: translateX(0);} 100% {transform: translateX(100%);}}",f+="@keyframes trv-animate-floater-top {0% {transform: translateY(0);} 100% {transform: translateY(calc(100% + "+s+"px));}}",f+="@keyframes trv-animate-floater-bottom {0% {transform: translateY(0);} 100% {transform: translateY(calc(-100% - "+s+"px));}}",f+="@keyframes trv-animate-back-to-instream {0% {transform: scale(0);} 100% {transform: scale(1);}}",f+="@keyframes trv-animate-top {0% {transform: scaleX(0);} 100% {transform: scaleX(1);}}",f+="@keyframes trv-animate-right {0% {transform: scaleY(0);} 100% {transform: scaleY(1);}}",f+="@keyframes trv-animate-bottom {0% {transform: scaleX(0);} 100% {transform: scaleX(1);}}",f+="@keyframes trv-animate-left {0% {transform: scaleY(0)} 100% {transform: scaleY(1);}}",f+="#"+t+" .trv-autoskip-poster-compact {display:none}",f+="#"+t+" .trv-autoskip-poster {width: 100%; height:100%;}",f+="@media screen and (max-width: 479px) { #"+t+" .videoTitle { display:none; } }",f+="</style>"}(ee,Me,te,0,O,I,c,h),p)if(Ei());else{var o=.3*O;a+='<div class="trv-autoskip-container"><div class="trv-autoskip-background"><img class="trv-autoskip-poster" width="'+o+'" height="'+9/16*o+'" alt="auto skip"><div class="trv-autoskip-line-top"><div></div></div><div class="trv-autoskip-line-right"><div></div></div><div class="trv-autoskip-line-bottom"><div></div></div><div class="trv-autoskip-line-left"><div></div></div></div><div class="autoskip-btn autoskip-btn-blue"></div><div class="autoskip-btn autoskip-btn-gray"></div></div>'}return r.innerHTML=a.replace("{{video_placeholder}}",e),t},this.getIsFSModalOpened=function(){return Rt},this.setIsFSModalOpened=function(e,t){(Rt=e)?Wt(t):function(){var e,t;null!==(e=top.history)&&void 0!==e&&null!==(t=e.state)&&void 0!==t&&t.fsModalOpen&&top.history.back(),top.document.body.style.overflow="auto",top.document.querySelectorAll(".trv-fs-modal-bg").forEach(function(e){return e.remove()});var i=b.getWrapperElement();if(i.parentElement.classList.remove("trv-fs-modal"),i.classList.add("trv-vertical"),Mt){Mt.kill();var n=Si().querySelector(".vertical-logo");n&&n.remove()}b.getParentElement().prepend(i.parentElement),b.recreateVerticalSwiper(),k.dispatchEvent(new CustomEvent(qr)),b.showVerticalSwipingArrows(),zt(!1),Ft&&!0,Ut()}()},this.useVerticalSwiper=function(){return Ei()},this.setAdContainerVisibility=function(e){Ai().classList["".concat(e?"add":"remove")]("hidden"),b.tryPauseVerticalPlayerWhenOOV(!e)},this.getSwiperInstance=function(){return Li()},this.getTranslations=function(){return Lt},this.setNewTranslation=function(e,t,i){e&&t&&i&&(Lt[t][e]=i)},this.setContentVideo=function(){if(Ri(),x&&((K=new fr(x,b)).setup(),!Ei())){var e=K.getFileToPlay();g=Ei()&&yi["".concat(x[mi].p)]?yi["".concat(x[mi].p)]:new Tr(e,b),ki(ce=K.getCurrentVideoDuration()),Gi(),!Ei()&&Re&&Re.Show(),$n(Object(cr.b)(k).width),1<K.getTotalVideos()?(function(){var e=G.player.mediaPlayer.getElementsByClassName("overlay-backwards");0<e.length&&e[0].addEventListener("click",function(e){e.stopPropagation(),b.handlePlayerInteraction(br.a.Previous),l&&l.notify("click",{widgetId:o,video:G.player.mediaVideo,clickedElement:"previous video"}),Ui()})}(),function(){var e=G.player.mediaPlayer.getElementsByClassName("overlay-forward");0<e.length&&e[0].addEventListener("click",function(e){e.stopPropagation(),b.handlePlayerInteraction(br.a.Next),l&&l.notify("click",{widgetId:o,video:G.player.mediaVideo,clickedElement:"forward video"}),ji()})}()):G.buttonsOverlay&&(G.buttonsOverlay.overlayForwardButton.style.display="none",G.buttonsOverlay.overlayBackwardButton.style.display="none"),function(){var e=G.player.mediaPlayer.getElementsByClassName("mobile-unmute-wrapper")[0];e&&e.addEventListener("click",function(){Dt=!0,b.setVolume(A),e.style.display="none"})}()}},this.isContentPlaying=function(){return Fi()},this.noContentMode=function(){_i()},this.handleMobileUnmuteClick=function(e){Hi(e),xt=!1},this.mute=function(){Sn()},this.unmute=function(){An()},this.getDefaultVolume=function(){return this.isAdPlaying()?.05:.01},this.mobileUnmuteBtnClicked=function(){return Dt},this.canStartBiddingSession=function(){return function(){if(Pe)return!1;return!(u&&!u.canStartBiddingSession())&&!(D&&!D.canStartBiddingSession())}()},this.disableAutoSkip=function(){Wn()},this.hideControls=function(){Vn()},this.showControls=function(){Un()},this.setIsSlotStructured=function(e){lt=e},this.isSlotStructured=function(){return lt},this.setVolume=function(e){Xn(e)},this.getVolume=function(){return Q},this.onPlayerReady=function(){l&&l.notify("ready",{video:G.player.mediaVideo,widgetId:o}),this.dispatchEvent(Hr),Ye&&(this.dispatchEvent(Zr),this.dispatchEvent(Xr)),Le.subscribe(Gr,er),window.addEventListener("resize",er),window.addEventListener("orientationchange",er);var e=Object(cr.b)(k);tr(e.width,e.height)},this.forward=function(){rr()},this.setVerticalAdSlots=function(e){_t=e},this.getVerticalAdSlots=function(){return _t},this.setIgnorePlaylistEnd=function(){ar()},this.getPlayerElement=function(){return k},this.DestroyPlayer=function(){ur()}}},function(e,t,i){"use strict";i.d(t,"d",function(){return a}),i.d(t,"a",function(){return o}),i.d(t,"c",function(){return u}),i.d(t,"b",function(){return s});var n=i(16),d=i(12);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t,i){return e&&e[t]?i+"?e="+e[t]:null}function o(e,t,i){var n,r;if(t&&i){var a={p:"va11",m:"va12",t:"va13"}[t.getSlotType()],o=Math.floor(Date.now()/d.a),s=function(){try{var e=top.document.cookie.split("; ").find(function(e){return e.startsWith("__gpi=")});if(!e)return o;var t=decodeURIComponent(e.substring(6)).split(":").find(function(e){return e.startsWith("UID=")});return t?t.substring(4):o}catch(e){return console.warn("Failed to extract UID from __gpi cookie:",e),o}}(),l={c1:"2",c2:"34220185",ns_st_ct:a,ns_st_cl:t.getDuration()*d.a,ns_st_pt:Math.floor(i.adPlayingTime*d.a),ns_ts:o,ns_ap_sv:"2.1602.11",ns_type:"hidden",ns_st_it:"a",ns_st_sv:"4.0.0",ns_st_ad:"1",ns_st_sq:"1",ns_st_id:o,ns_st_ec:null!==(n=i.currentSlotNumberMacro)&&void 0!==n?n:1,ns_st_cn:null!==(r=i.currentSlotNumberMacro)&&void 0!==r?r:1,ns_st_ev:"stop"===e?"end":e,c3:"Content",c4:null,c6:null,cs_fpdm:null,cs_fpdt:null,cs_fpid:s};u("https://sb.scorecardresearch.com/p?"+Object.keys(l).map(function(e){return"".concat(e,"=").concat(l[e])}).join("&"))}}function u(e){if(e=Object(n.a)(e),"object"!==("undefined"==typeof window?"undefined":r(window))||"undefined"==typeof Image){var t=new XMLHttpRequest;t.open("get",e,!0),t.send()}else{(new Image).src=e}}function s(e,t,i){void 0!==window.playerLog&&window.playerLog("error on "+e)}},function(e,t,i){"use strict";i.d(t,"c",function(){return ue}),i.d(t,"a",function(){return ce}),i.d(t,"g",function(){return C}),i.d(t,"b",function(){return he}),i.d(t,"f",function(){return fe}),i.d(t,"e",function(){return pe}),i.d(t,"h",function(){return k}),i.d(t,"d",function(){return P});var G=i(14),z=i(2),H=i(15),W=i(0);function q(n,t){var o,r,a,s=n,l=null,d=t,i=d.shadowDomEnabled()?d.getParentElement().shadowRoot:d.getParentElement(),u=d.getPlayerElement(),c=i.querySelector(".trv-video"),h=null,f=null,p=null,g=!1,v=this,m=null,y=15e3,b=i.querySelector(".media-video"),w=8e3,E="10000",S=null;if(d.useVerticalSwiper()&&d.getVideo()){var e=d.getVideo();a=e.muted?0:e.volume}else a=b.muted?0:b.volume;var A,T,L,C=!1,k=!1,P=!1,x=[],O=!1,I=null;o="truvid_ima_container"+Math.floor(1e5*Math.random()+1),i.querySelector("#".concat(o))||(o="truvid_ima_container"+Math.floor(1e5*Math.random()+1));var R=0;function M(e){L&&(L.style.pointerEvents=e?"auto":"none",L.style.opacity=e?1:0,d.useVerticalSwiper()?d.setAdContainerVisibility(e):L.classList[e?"remove":"add"]("trv-ima-container-hidden"))}function D(){g?d.handlePlayerInteraction(W.a.PlayAd):d.handlePlayerInteraction(W.a.PauseAd),B()}function F(e){if(window.playerLog("ima onAdStarted"),O){window.playerLog("ima inside onAdStarted"),C=!0,k&&(window.playerLog("ima set volume 0"),p.setVolume(0),a=0);var t=top.document.querySelector("#".concat(o));t&&(t.style.zIndex=E,t.addEventListener("click",D)),function(){if(!m){var e,t=null!==(e=l)&&void 0!==e&&e.getIsGptOutstream()?{isOutstream:!0}:null;m=new H.a(v,null,t,d)}}();var i=p.getVolume();m.setVolume(i),s.onAdStarted(e),s.onPlayerResize()}}function B(){if(window.playerLog("ima toggle play pause"),g?(p.resume(),g=!1,t.setPlayerPausedOnUserBehalf(!1)):(p.pause(),g=!0,t.setPlayerPausedOnUserBehalf(!0)),g?m&&m.pause():m&&m.play(),g){var e=i.querySelector("#".concat(o));e&&(e.style.bottom="0")}}function _(){if(!h.isStopped()&&!h.getIsLoaded()){h.setLoaded(!0),clearTimeout(A),window.playerLog("ima AD LOADED"),h.firePixels("available");var e=top.document.querySelector("#".concat(o));e&&(e.style.display="block");var t=e?e.querySelector("iframe"):[];t.length&&(t[0].style.display="block");s.onAdLoaded(!1),window.playerLog("ima loaded")}}function N(e){if(!h.isStopped()){window.playerLog("ima onIMAAdsManagerLoaded"),P=!1;var t=new google.ima.AdsRenderingSettings;t.loadVideoTimeout=y,t.restoreCustomPlaybackStateOnAdBreakComplete=!1;var i=["video/mp4"];b.canPlayType("video/webm")&&(window.playerLog("ima can play video webm"),i.push("video/webm")),t.mimeTypes=i,p=e.getAdsManager(b,t),b.muted?p.setVolume(0):p.setVolume(b.volume),p.addEventListener(google.ima.AdEvent.Type.CLICK,function(){d.getApiObservable().notify("adClick",{widgetId:d.getWidgetId(),video:b}),u.dispatchEvent(new CustomEvent("adClick")),window.playerLog("ima CLICK"),h.firePixels("click"),g?u.dispatchEvent(new CustomEvent("onUserMediaPlay")):u.dispatchEvent(new CustomEvent("onUserMediaPause")),B(),m&&m.show()}),p.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,function(e){window.playerLog("ima event google.ima.AdErrorEvent.Type.AD_ERROR "+e.getError(),e),j()}),p.addEventListener(google.ima.AdEvent.Type.LOADED,function(e){window.playerLog("ima event LOADED"),R++,h.resetHasSentImpression(),s.getStartAdOnAdLoadedEvent()||(window.playerLog("ima MANAGER START"),_())}),p.addEventListener(google.ima.AdEvent.Type.PAUSED,function(e){window.playerLog("ima event PAUSED"),h.firePixels("pause"),n.pauseAdTimer(),m&&m.pause()}),p.addEventListener(google.ima.AdEvent.Type.RESUMED,function(){window.playerLog("ima event RESUMED"),h.firePixels("resume"),n.resumeAdTimer(),m&&m.play(),n.resumeAdTimer()}),p.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(){_(),d.pauseContentVideo(),window.playerLog("ima event CONTENT_PAUSE_REQUESTED"),P=!0;var e=top.document.querySelector("#".concat(o));e&&(e.style.display="block");var t=e?e.querySelector("iframe"):[];t.length&&(t[0].style.display="block")}),p.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(e){window.playerLog("ima CONTENT_RESUME_REQUESTED");var t=top.document.querySelector("#".concat(o));t&&(t.style.display="none"),h.isStopped()||(window.playerLog("ima event INSIDE CONTENT_RESUME_REQUESTED"),U())}),p.addEventListener(google.ima.AdEvent.Type.STARTED,function(e){var t;window.playerLog("ima STARTED"),h.firePixels("start");var i=e.ad.data.duration;h.setDuration(i);var n=top.document.querySelector("#".concat(o)),r=n?n.querySelector("iframe"):[];r.length&&(r[0].style.position="absolute"),O=!0;var a=null!==(t=e.ad.data.adId)&&void 0!==t?t:null;C&&I===a&&(O=!1),C=!0,I=a,F(h)}),p.addEventListener(google.ima.AdEvent.Type.IMPRESSION,function(t){d.getApiObservable().notify("adImpression",{widgetId:d.getWidgetId(),video:b}),u.dispatchEvent(new CustomEvent("adImpression")),window.playerLog("ima IMPRESSION"),h.firePixels("start"),h.setFiredImpression(!0),1<R&&n.increaseCurrentSlotNUmberMacro(),h.fireImpressionPixel("impression",n),x.map(function(e){return e(t)})}),p.addEventListener(google.ima.AdEvent.Type.COMPLETE,function(){window.playerLog("ima COMPLETE"),h.firePixels("complete")}),p.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(){window.playerLog("ima all ads COMPLETE"),u.dispatchEvent(new CustomEvent("adComplete")),T=setTimeout(function(){if(!h.isStopped()){var e=top.document.querySelector("#".concat(o));e&&(e.style.display="none"),U()}}.bind(this),4e3)}),p.addEventListener(google.ima.AdEvent.Type.FIRST_QUARTILE,function(){window.playerLog("ima FIRST_QUARTILE"),h.firePixels("firstQuartile")}),p.addEventListener(google.ima.AdEvent.Type.MIDPOINT,function(){window.playerLog("ima MIDPOINT"),h.firePixels("midpoint")}),p.addEventListener(google.ima.AdEvent.Type.THIRD_QUARTILE,function(){window.playerLog("ima THIRD_QUARTILE"),h.firePixels("thirdQuartile")}),p.addEventListener(google.ima.AdEvent.Type.SKIPPED,function(e){window.playerLog("ima skip"),h.firePixels("skip"),d.handlePlayerInteraction(W.a.SkipAd),u.dispatchEvent(new CustomEvent(he))}),p.addEventListener(google.ima.AdEvent.Type.VOLUME_CHANGED,function(){window.playerLog("ima volume change");var e=p.getVolume();null!=e&&(0<a&&0==e?h.firePixels("mute"):0==a&&0<e&&h.firePixels("unmute"),function(){if(d.useVerticalSwiper()){var e=top.document.getElementsByClassName("mobile-unmute-wrapper")[0];d.handleMobileUnmuteClick(e),d.updateSoundIcon()}}(),window.playerLog("ima VOLUME CHANGE NEW VOLUME "+e),a=e)}),p.addEventListener(google.ima.AdEvent.Type.USER_CLOSE,function(){window.playerLog("ima user close"),h.firePixels("close")}),window.playerLog("ima init"),p.init(s.getRequestWidth(),s.getRequestHeight(),google.ima.ViewMode.NORMAL),s.getStartAdOnAdLoadedEvent()&&(window.playerLog("ima MANAGER START"),p.start())}}function V(){window.playerLog("ima DESTROY FUNCTION"),clearTimeout(A),p&&p.destroy(),m&&(m.destroy(),m=null),l=l&&null,x=[]}function U(e){var t,i=!1;if(O&&e&&(i=!0),O=!1,!i)if(d.useVerticalSwiper()||d.setProcessingAd(!1),null!==(t=h)&&void 0!==t&&t.getOnErrorCb())h.getOnErrorCb()();else if(h.isStopped())window.playerLog("will not call  advertisingLibrary.onAdStopped(dontRestoreContent)");else{if(e||s.beforeStopHandler(),h.setStopped(),window.playerLog("ima onAdStopped FUNCTION"),clearTimeout(T),clearTimeout(A),V(),P){var n=top.document.querySelector("#".concat(o));n&&(n.style.display="none",n.removeEventListener("click",D))}C?s.onAdStopped(!1):s.onLoadingContainerFailed(h)}}function j(){O||h.firePixels("error"),U(!0)}this.onAdStoppedByCloseButton=function(){var e=top.document.querySelector("#".concat(o));e&&(e.style.display="none"),h.isStopped()||U()},this.startAd=function(){h.getIsLoaded()?p&&p.start():s.setStartAdOnAdLoadedEvent(!0)},this.startOutstreamAd=function(){p&&(p.init(s.getRequestWidth(),s.getRequestHeight(),google.ima.ViewMode.NORMAL),p.start())},this.getImaAdsManager=function(){return p},this.getImaAdsContainer=function(){return r},this.initialize=function(){try{if("undefined"!=typeof google&&void 0!==google.ima){var e,t;l=null===(e=n.currentBidSession)||void 0===e?void 0:e.getCurrentTruvidAd(),window.playerLog("initialize ima");var i=top.document.querySelector("#trv-ad-container");null!=i&&i.children.length&&i.children[0].remove(),r=new google.ima.AdDisplayContainer(null!==(t=l)&&void 0!==t&&t.getVastRes()?top.document.querySelector("#trv-ad-container"):function(){if(window.playerLog("ima createIMAContainer"),(L=document.createElement("div")).className="truvid_ima_container",L.id=o,L.style.display="block",M(!(L.style.textAlign="left")),d.useVerticalSwiper()){var e=top.document.querySelector(".media-player");e&&e.appendChild(L)}else c.appendChild(L);return L}(),b),f=new google.ima.AdsLoader(r),r.initialize(),f.getSettings().setDisableCustomPlaybackForIOS10Plus(!0),f.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(e){N(e)},!1),f.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,function(e){window.playerLog("ima google.ima.AdErrorEvent.Type "+e.getError(),e),j()},!1)}else Object(z.b)("googlelibundefined",{wid:d.getWidgetId()},null)}catch(e){Object(z.b)("googleiniterr",{wid:d.getWidgetId()},e)}},this.setAdsContainerVisibility=function(e){M(e)},this.skipAd=function(){window.playerLog("ima skip"),p.skip(),U()},this.stopAd=function(){window.playerLog("ima stop"),p&&C&&(p.stop(),U())},this.loadAd=function(e,t,i){var n;(h=e,R=0,window.playerLog("load ima ad"),"undefined"!=typeof google&&void 0!==google.ima)?h.isStopped()||(d.isNetworkWidget()||(google.ima.settings.setPlayerType("truvid"),google.ima.settings.setPlayerVersion("1.0.0")),"outstream"===(S=t.mediaFile.src)&&null!==(n=l)&&void 0!==n&&n.getVastRes()&&(r=new google.ima.AdDisplayContainer(top.document.querySelector("#trv-ad-container"),b),f=new google.ima.AdsLoader(r),r.initialize(),f.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(e){N(e)},!1),f.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,function(e){window.playerLog("ima google.ima.AdErrorEvent.Type "+e.getError(),e),j()},!1)),f?(window.playerLog("inside ima ads loader"),m=null,g=C=!1,d.useVerticalSwiper()||d.setProcessingAd(!0),f.requestAds(function(){var e;window.playerLog("ima set ima ads request");var t=s.getRequestWidth(),i=s.getRequestHeight(),n=new google.ima.AdsRequest;null!==(e=l)&&void 0!==e&&e.getVastRes()?n.adsResponse=l.getVastRes():n.adTagUrl=S;n.linearAdSlotWidth=t,n.linearAdSlotHeight=i,n.nonLinearAdSlotWidth=t,n.nonLinearAdSlotHeight=Math.round(.375*i),n.forceNonLinearFullSlot=!1,n.vastLoadTimeout=w,n.setAdWillAutoPlay(!0),k=!1,d.useVerticalSwiper()&&(b=d.getVideo());b.muted?k=!0:0==b.volume?k=!0:n.setAdWillPlayMuted(!1);return n}()),h.fireRequestPixel(),A=setTimeout(function(){window.playerLog("ima ad request timeout"),U()},8e3)):setTimeout(function(){Object(z.b)("imaStopAdImaAdsLoadedUndefined",{wid:d.getWidgetId()},null),window.playerLog("ima stop ad imaAdsLoaded undefined"),h.setStopped()},100)):U()},this.addImpressionCb=function(e){(x=[]).push(e)},this.clearImpressionCbs=function(){x=[]},this.destroy=function(){window.playerLog("ima destroy"),h.isStopped()||(h.setStopped(),window.playerLog("ima inside destroy"),V(),clearTimeout(A))},this.getAdContainer=function(){return L},this.resizeAd=function(e,t){window.playerLog("ima resizeAd "+e+"/"+t);var i=top.document.querySelector("#".concat(o));i&&(i.style.height=t+"px",i.style.width=e+"px",i.style.zIndex=E),p.resize(e,t,"normal")},this.resumeAd=function(){window.playerLog("ima resume"),g=!1,p.resume(),n.resumeAdPlayingTime()},this.getAdDuration=function(){var e,t=p.getCurrentAd();return t&&null!==(e=t.getDuration())&&void 0!==e?e:0},this.isStopped=function(){return h.isStopped()},this.setAdVolume=function(e){window.playerLog("ima set ad volume"),p.setVolume(e),m.setVolume(e),d.setCurrentVolume(e)},this.pauseAd=function(){window.playerLog("ima pauseAd"),g||B()},this.togglePlayPause=function(){window.playerLog("ima toggle play pause"),B()},this.getAdRemainingTime=function(){return p.getRemainingTime()},this.getContainerId=function(){return o},this.isCurrentAdPaused=function(){return g}}var Y=i(18),Q=i(1),u=i(9);function K(){}function s(e,t){var i;e.setGdprApplies(t.gdprApplies),e.setConsentString(null!==(i=t.tcString)&&void 0!==i?i:"");var n=!t.tcString||!!t.purpose.consents[2];e.setPersonalizedAdsAgreed(n)}function l(n,r){var a={tcString:"",gdprApplies:!1,isAgreed:!1,isPersonalizedAdsAgreed:!0},e=new Promise(function(i){null!=n&&n.getConsentString()?(a.tcString=n.getConsentString(),a.gdprApplies=n.getGdprApplies(),a.isPersonalizedAdsAgreed=n.getPersonalizedAdsAgreed(),i(a)):window.__tcfapi?(n.setCmpUsed(),window.__tcfapi("getTCData",2,function(e,t){t?(r&&(a.isAgreed=h(e)),s(n,e),a.tcString=n.getConsentString(),a.gdprApplies=n.getGdprApplies(),a.isPersonalizedAdsAgreed=n.getPersonalizedAdsAgreed(),i(a)):i(null)})):i(null)}),t=new Promise(function(e){setTimeout(function(){e(null)},500)});return Promise.race([e,t])}K.prototype.Load=function(){var i=Object(u.c)("https://imasdk.googleapis.com/js/sdkloader/ima3.js"),n=top.googletag?Promise.resolve():Object(u.c)("https://securepubads.g.doubleclick.net/tag/js/gpt.js");return new Promise(function(e,t){Promise.all([i,n]).then(function(){e()}).catch(function(e){t(e)})})};var d=i(7);function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var c=function(){function i(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.userSync=t,this.img=document.createElement("img"),this.img.style.border="0px",this.img.style.width="1px",this.img.style.height="1px",this.img.style.visibility="hidden",this.img.style.pointerEvents="none",this.img.style.position="absolute",this.img.src=e}return function(e,t,i){t&&n(e.prototype,t),i&&n(e,i),Object.defineProperty(e,"prototype",{writable:!1})}(i,[{key:"sync",value:function(){this.userSync.player.getPlayerElement().appendChild(this.img)}}]),i}();function X(e,t){this.player=e,this.adsLib=t}function h(e){var t,i,n=null===(t=e.purpose)||void 0===t?void 0:t.consents,r=null===(i=e.vendor)||void 0===i?void 0:i.consents;if(!n||!r)return!1;var a=Object.keys(n),o=Object.values(f).filter(function(e){return!r[e]});return 10==a.length&&a.every(function(e){return n[e]})&&!o.length}var f={smartAdserver:45,magnite:52,xande:32,yahoo:25,freewheel:285,indexExchange:10,truvid:862};function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==i)return;var n,r,a=[],o=!0,s=!1;try{for(i=i.call(e);!(o=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==i.return||i.return()}finally{if(s)throw r}}return a}(e,t)||p(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=p(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw a}}}}function p(e,t){if(e){if("string"==typeof e)return r(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function Z(e,t){var n=this;this.macros={},this.player=t,this.adLib=e;var i={userAgent:function(){try{return navigator.userAgent}catch(e){return null}}},r=t.getDomain();i.prtclDomain=function(){return encodeURIComponent(window.location.protocol+"//"+r)},i.pageTitle=function(){return document.title},i.domain=function(){return encodeURIComponent(r)},i.osPlatform=function(){return t.getOSFamily()},i.osVersion=function(){return t.getOSVersion()},i.pageReferrer=function(){return encodeURIComponent(document.referrer)},i.width=function(){return n.adLib.getAdRequestWidth()},i.height=function(){return n.adLib.adRequestHeight()},i.pageUrl=function(){return encodeURIComponent(r)},i.vw=function(){return 1==t.IsPlayerViewable()?1:0},i.sellersJsonId=function(){return t.getSellersJsonId()},i.cb=function(){var e=parseInt(99999999*Math.random(),10).toString();return e=Array(9-e.length).join("0")+e},i.timestamp=function(){return Math.round((new Date).getTime()/1e3)},i.ip=function(){return t.getIp()};var a=t.getGeoLocation();i.latitude=function(){return encodeURIComponent(a&&a.lat?a.lat:"")},i.longitude=function(){return encodeURIComponent(a&&a.long?a.long:"")},i.location=function(){return encodeURIComponent((a?a.lat:"")+","+(a?a.long:""))},i.pageHref=function(){return t.getPageUrl()},i.pmute=function(){return 0==t.getCurrentVolume()?1:0},i.ad_context=function(){return(1===i.plcmt()?"":"accompanying_content_")+("p"===i.slotType()?"pre_roll":"mid_roll")},i.ad_context_magnite=function(){return"in_stream"==n.player.getWidgetType()?"instream":"outstream"},i.playback_method_by_text=function(){return n.player.isContentPlaying()?i.pmute()?"auto_play_sound_off":'"auto_play_sound_on"':"click_to_play"},i.playback_method_by_number=function(){return n.player.isContentPlaying()?n.player.isContainerInView()?i.pmute()?"6":"5":i.pmute()?"2":"1":i.pmute()?"":"3"},i.plcmt=function(){return 0==t.getCurrentVolume()?2:1},i.pinit=function(){return n.adLib.getAutomaticMacro()},i.accountid=function(){return t.getSubUserId()},i.slotType=function(){return n.adLib.getCurrentSlotTypeMacro()},i.slotNumber=function(){return n.adLib.getCurrentSlotNumberMacro()},i.npa=function(){var e,t,i=null===(e=n.adLib.currentBidSession)||void 0===e?void 0:null===(t=e.getCurrentTruvidAd())||void 0===t?void 0:t.type;return["ima","vpaid_js"].includes(i)&&window.__tcfapi&&(n.player.getGdprApplies()||n.adLib.getUsPrivacyApplies())?+!n.player.getPersonalizedAdsAgreed():0},t.noContentMode()?(i.videoTitle=function(){return""},i.videoDuration=function(){return"0"},i.videoId=function(){return"nocontent"},i.videoUrl=function(){return"nocontent_720"},i.lng2=function(){return""},i.lng=function(){return""},i.videoIabCategory=""):t.getPlaylistContent()&&(i.videoTitle=function(){return t.getCurrentVideoObj().t},i.videoDuration=function(){return t.getDuration()},i.videoUrl=function(){return t.getCurrentVideoUrl()},i.videoId=function(){return t.getCurrentVideoObj().id},i.lng2=function(){return t.getCurrentVideoObj().l},i.lng=function(){return t.getCurrentVideoObj().l},i.videoIabCategory=function(){return t.getCurrentVideoObj().iabc}),this.macros=i}X.prototype.Sync=function(){var r=this,a=null;function o(){return new Promise(function(e){var t=function(){return new Promise(function(e){var t=Object(d.a)("trv_usersync"),i=!1;if(t?((t=JSON.parse(t)).optout&&e(),t.uids&&t.uids.rubicon||(i=!0)):i=!0,i){var n=document.createElement("div");n.innerHTML='<iframe id="multisync-iframe" height="0" width="0" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="https://secure-assets.rubiconproject.com/utils/xapi/multi-sync.html?p=truvid&endpoint=us-east" style="border: 0; display: none;"></iframe>',this.player.getPlayerElement().appendChild(n)}e()}.bind(this))}.bind(r),i=function(n){return new Promise(function(e){var t="",i=0;null!=n&&(void 0!==n.gdprApplies&&1==n.gdprApplies&&(i=1),t=n.tcString),new c("https://ads.stickyadstv.com/auto-user-sync?_fw_gdpr="+i+"&_fw_gdpr_consent="+t,this).sync(),new c("https://ads.stickyadstv.com/user-matching?id=2545&_fw_gdpr="+i+"&_fw_gdpr_consent="+t,this).sync(),e()}.bind(this))}.bind(r,a),n=function(){return new Promise(function(e){var t=Object(d.a)("trv_usersync"),i=!1;if(t?((t=JSON.parse(t)).optout&&e(),t.uids&&t.uids.smartAdserver||(i=!0)):i=!0,i){var n=document.createElement("div");n.innerHTML='<iframe src="https://csync-global.smartadserver.com/3356/CookieSync.html" style="position: absolute; width:0; height:0; border:0;"></iframe>',this.player.getPlayerElement().appendChild(n)}e()}.bind(this))}.bind(r);t().finally(function(){i().finally(function(){n().finally(function(){e()})})})})}return new Promise(function(n,t){l(r.player,!0).then(function(e){if(null!=(a=e)&&e.gdprApplies)if(window.__tcfapi)if(r.player.setCmpUsed(),e.isAgreed)o().then(function(){return n()});else try{window.__tcfapi("addEventListener",2,function e(t,i){s(r.player,t),i&&"useractioncomplete"===t.eventStatus&&h(t)&&(window.__tcfapi("removeEventListener",2,function(){},e),o().then(function(){return n()}))}),n()}catch(e){window.playerLog("error user sync",e),t()}else n();else o().then(function(){return n()})}.bind(this)).catch(function(e){window.playerLog("error user sync",e),t()})}.bind(this))},Z.prototype.InjectMacros=function(i,y,b){var w=this.macros,E=this;return new Promise(function(m){function t(e,t){for(var i=0,n=e;-1<n.indexOf("[",i);){var r=n.indexOf("[",i),a=n.indexOf("]",i)+1;if(0<a){i=a;var o=n.substring(r,a);if(0<=o.indexOf("[dmp%")){var s=o.indexOf("[dmp%"),l=o.substring(s+5,o.length-1),d=l.indexOf("_"),u=l.substring(0,d),c=l.substring(d+1),h=S(u.split("%%",1),1)[0],f=u.substring(u.indexOf("%%")+2),p=void 0;switch(h){case"lclstg":p=window.localStorage.getItem(c)}if(p&&"string"==typeof p){var g,v=A(f=f.split("%%"));try{for(v.s();!(g=v.n()).done;){switch(g.value){case"arr":p=p.substring(1,p.length-1);break;case"urlenc":p=encodeURIComponent(p)}}}catch(e){v.e(e)}finally{v.f()}e=e.replace(o,p)}else e=e.replace(o,"")}else t[o.substring(1,o.length-1)]&&(e=e.replace(o,b?'"'+t[o.substring(1,o.length-1)]()+'"':t[o.substring(1,o.length-1)]()))}else i=r+1}e=function(t,e){if(null==e||!e.length||!y)return t;try{var i,n=new URL(t),r=n.searchParams,a=A(e);try{for(a.s();!(i=a.n()).done;){var o,s=i.value,l=s.parameter,d=s.active,u=s.action,c=s.macro;if((null!==(o=E.player.getPlayerMacroActivationChance())&&void 0!==o?o:Math.floor(100*Math.random())+1)<=d&&("remove"===u?r.delete(l):"replace"===u?r.set(l,c):"add"===u&&(r.has(l)?r.set(l,c):r.append(l,c))),r.has(l)){var h=r.get(l);if(/^\[.*\]$/.test(h)){var f=h.substring(1,h.length-1);r.set(l,w[f]?w[f]():h)}}}}catch(e){a.e(e)}finally{a.f()}return n.toString()}catch(e){return console.error("Could not include widget macros:",e),t}}(e,E.player.getWidgetMacros()),m(e)}-1<i.indexOf("[userGdprConsent]")?l(E.player).then(function(e){w.userGdprConsent=function(){return null!=e?e.tcString:""},t(i,w)}).catch(function(){window.playerLog("error getting consent")}):t(i,w)})};var J=i(10),$=i(13),T=i(8);function ee(o){var d=!1;this.player=o;var s="truvid_cnt_prebid_iframe"+Math.floor(1e5*Math.random()+1);null!==document.getElementById(s)&&(s="truvid_cnt_prebid_iframe"+Math.floor(1e5*Math.random()+1));var u,c=null;this.createFriendlyIframe=function(r,a){return new Promise(function(e,t){var i=document.createElement("iframe");i.src="about:blank",i.id=s,i.marginWidth="0",i.marginHeight="0",i.frameBorder="0",i.width="1px",i.height="1px",i.style.position="absolute",i.style.left="0",i.style.top="0",i.style.margin="0px",i.style.padding="0px",i.style.border="none",i.style.width="1px",i.style.height="1px",i.setAttribute("SCROLLING","NO");var n='<html lang=\'en\'><head><meta charset=\'utf-8\'><script type="text/javascript">window.trvortb={"validation": "strict","config": {"ver":"1.0","complete": 1,"nodes": [{"asi":"truvid.com","sid": "'+o.getSellersJsonId()+'","hp":1}]}};<\/script><script async src="'+a+'"><\/script><title></title></head><body></body></html>';i.onload=function(){i.contentWindow.loadPrebidAd=function(o,s,e){if(0!=d&&void 0!==c.contentWindow.pbjs&&void 0!==c.contentWindow.pbjs.rp){var l=e.mediaFiles[0].mediaFile.src;(u=e).fireRequestPixel(),c.contentWindow.pbjs.rp.requestVideoBids({adSlotName:l,timeout:3,playerSize:[640,480],callback:function(e,t){if(void 0!==t[l]&&void 0!==t[l].bids&&0<t[l].bids.length){var i=t[l].bids.sort(function(e,t){return t.cpm-e.cpm});if(i&&0<i.length){var n=i[0];if(n&&void 0!==n.adserverTargeting&&void 0!==n.adserverTargeting.hb_cache_host){var r="https://"+n.adserverTargeting.hb_cache_host+"/cache?uuid="+n.videoCacheKey,a=u.mediaFiles[0].adParameters;u.mediaFiles=[],u.type="google/ima",u.mediaFiles.push(new T.a("google/ima",{delivery:"progressive",height:"480",src:r,type:"google/ima",width:"640"},a)),o()}else s()}else s()}else s()}})}else s()},e()},i.onerror=function(){t()},i.srcdoc=n,r.appendChild(i),c=i})},this.init=function(){return new Promise(function(e,t){d?e():this.createFriendlyIframe(this.player.getPlayerElement(),"https://micro.rubiconproject.com/prebid/dynamic/17412.js").then(function(){d=!0,e()}).catch(function(){t()})}.bind(this))},this.LoadAd=function(e,t,i){c.contentWindow.loadPrebidAd(e,t,i)}}function g(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||v(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){if(e){if("string"==typeof e)return a(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function te(s,l,d){var u=!1;this.player=s;var a=l.adParameters.rjs,o="truvid_cnt_prebid_relevant_iframe"+Math.floor(1e5*Math.random()+1);null!==document.getElementById(o)&&(o="truvid_cnt_prebid_relevant_iframe"+Math.floor(1e5*Math.random()+1));var c=null;this.createFriendlyIframe=function(r){return new Promise(function(t,e){var i=document.createElement("iframe");i.src="about:blank",i.id=o,i.marginWidth="0",i.marginHeight="0",i.frameBorder="0",i.width="1px",i.height="1px",i.style.position="absolute",i.style.left="0",i.style.top="0",i.style.margin="0px",i.style.padding="0px",i.style.border="none",i.style.width="1px",i.style.height="1px",i.setAttribute("SCROLLING","NO");var n="<html lang='en'><head><meta charset='utf-8'><script type=\"text/javascript\">\n        window.RELEVANT_ANALYTICS_SETTINGS = window.RELEVANT_ANALYTICS_SETTINGS || {};\n        RELEVANT_ANALYTICS_SETTINGS.getCustomParams = function() {\n          return {    \n            'widgetId': "+s.getWidgetId()+",\n            'tagId': "+l.getDemandTagId()+',\n          };\n        };\n       <\/script><script async src="'+a+'"><\/script><title></title></head><body></body></html>';i.onload=function(){var e=i.contentWindow,r=e.relevantDigital||{};e.loadPrebidAd=function(n,a,e){if(u)try{var o=function(n){r.cmd=r.cmd||[],r.cmd.push(function(){var e,t=function(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=v(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw a}}}}([n.getAd().getAdId()].concat(g(n.getAd().getWrapperAdIds())));try{for(t.s();!(e=t.n()).done;){var i=e.value;if(r.Auction.registerImpressionByAdId(i))return}}catch(e){t.e(e)}finally{t.f()}})};(l=e).fireRequestPixel(),r.cmd=r.cmd||[],r.cmd.push(function(){r.addPrebidConfig({consentManagement:{gdpr:{cmpApi:"static",consentData:{getTCData:{tcString:s.getConsentString(),gdprApplies:s.getGdprApplies()}}}},schain:{validation:"strict",config:{ver:"1.0",complete:1,nodes:[{asi:"truvid.com",sid:s.getSellersJsonId(),hp:1}]}}});var i=r.defineVideoSlots([{path:"desktop-preroll-4"}]).map(function(e){return e.getSlotElementId()});r.loadTruvidConfig(function(e){var t=e.configId;r.loadPrebid({configId:t,manageAdserver:!0,allowedDivIds:i,cache:{url:null}})}),r.loadVideoUrls(i,function(e,t){var r;t.forEach(function(e){var t=e.unitData,i=(e.gamParams,e.url,t.getHighestBid());r=r&&r.cpm>i.cpm?r:i,console.info("Path: ",t.slot.getAdUnitPath()," Highest bid: ",r);var n=l.mediaFiles[0].adParameters;r&&(l.mediaFiles=[],l.type="google/ima",l.mediaFiles.push(new T.a("google/ima",{delivery:"progressive",height:"480",src:r.vastUrl,type:"google/ima",width:"640"},n)),r.vastImpUrl&&l.tracking.events.impression.push({event:"impression",offset:null,url:r.vastImpUrl}))}),r?(d.addImpressionEvent2IMA(o),n()):a()})})}catch(e){console.error(e),a()}else a()},t()},i.onerror=function(){e()},i.srcdoc=n,r.appendChild(i),c=i})},this.init=function(){return new Promise(function(e,t){u?e():(null!=a&&a.length&&null!=a&&a.includes("https://")||t(),this.createFriendlyIframe(this.player.getPlayerElement()).then(function(){u=!0,e()}).catch(function(){t()}))}.bind(this))},this.LoadAd=function(e,t,i){c.contentWindow.loadPrebidAd(e,t,i)}}function o(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function L(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?o(Object(i),!0).forEach(function(e){m(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function m(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function ie(E,o){var s=!1;this.player=E;var l="truvid_cnt_prebid_trv_iframe"+Math.floor(1e5*Math.random()+1);null!==document.getElementById(l)&&(l="truvid_cnt_prebid_trv_iframe"+Math.floor(1e5*Math.random()+1));var S,d=null;this.createFriendlyIframe=function(a){return new Promise(function(i,e){var n=document.createElement("iframe");n.src="about:blank",n.id=l,n.marginWidth="0",n.marginHeight="0",n.frameBorder="0",n.width="1px",n.height="1px",n.style.position="absolute",n.style.left="0",n.style.top="0",n.style.margin="0px",n.style.padding="0px",n.style.border="none",n.style.width="1px",n.style.height="1px",n.setAttribute("SCROLLING","NO");var t="https://s.trvdp.com/scripts/v"+o.advertisingConfiguration.version+"/prebid.js",r="<html lang='en'><head><meta charset='utf-8'>"+(o.getIntegrationScript("prebid")?"":'<script type="text/javascript" async src='.concat(t,"><\/script>"))+"<title></title></head><body></body></html>";n.onload=function(){var e,t=n.contentWindow,w=null!==(e=o.getIntegrationScript("prebid"))&&void 0!==e?e:t.trvpbjs;o.getIntegrationScript("prebid")||o.setIntegrationScript("prebid",w),t.loadPrebidAd=function(m,y,b){var e,t,i,n=null!==(e=null==b?void 0:null===(t=b.adObject)||void 0===t?void 0:null===(i=t.properties)||void 0===i?void 0:i.VASTAdTagURI)&&void 0!==e?e:null;s&&n?new Z(o,E).InjectMacros(n,void 0,!0).then(function(e){try{var t,i,n,r,a,o,s,l=JSON.parse(e),d=l.bidders,u=l.adUnit,c=l.extraConfigs,h=null!==(t=u.timeout)&&void 0!==t?t:2e3,f=null!==(i=u.width)&&void 0!==i?i:E.getWidth(),p=null!==(n=u.height)&&void 0!==n?n:E.getHeight(),g={code:u.code,sizes:[f,p],mediaTypes:{video:{mimes:["video/mp4","application/javascript"],context:"instream",playerSize:[f,p],playback_method:["auto_play_sound_off"],protocols:[1,2,3,4,5,6],minduration:null!==(r=u.minduration)&&void 0!==r?r:1,maxduration:null!==(a=u.maxduration)&&void 0!==a?a:60,startdelay:null!==(o=u.startdelay)&&void 0!==o?o:0,skip:null!==(s=u.skip)&&void 0!==s?s:0,linearity:1,api:[2],placement:1,plcmt:1}},floors:u.floors,bids:d},v={consentManagement:{gdpr:{cmpApi:"static",consentData:{getTCData:{tcString:E.getConsentString(),gdprApplies:E.getGdprApplies()}}}},cache:{url:"https://prebid.adnxs.com/pbc/v1/cache"},userSync:{filterSettings:{iframe:{bidders:"*",filter:"include"}}},schain:{validation:"strict",config:{ver:"1.0",complete:1,nodes:[{asi:"truvid.com",sid:E.getSellersJsonId(),hp:1}]}}};if(v=L(L({},v),c),S=b,!w)return window.playerLog("ERROR loading prebid - trvpbjs is not defined"),y();w.que=w.que||[],w.removeAdUnit(),w.que.push(function(){w.addAdUnits(g),w.setConfig(v),b.fireRequestPixel({bidders:d.map(function(e){return e.bidder})}),w.requestBids({bidsBackHandler:function(e,t){var i=w.getHighestCpmBids(u.code);if(i.filter(function(e){return"video"==e.mediaType}),i.length){i.sort(function(e,t){return t.cpm-e.cpm});!function e(t,i,n,r){if(S.clearLoadingContainerTimeout(),i>=t.length)return console.warn("No more bids to try"),b.setOnErrorCb(void 0),r();var a=t[i],o={bidders:t.map(function(e){return e.bidder}),cpm:t.map(function(e){return e.cpm}),imps:t.map(function(e){return e.vastImpUrl}),vasts:t.map(function(e){return e.vastUrl})},s=S.adParameters;if(S.mediaFiles=[],S.type="google/ima",S.mediaFiles.push(new T.a("google/ima",{delivery:"progressive",height:"480",src:a.vastUrl,type:"google/ima",width:"640"},s)),a.vastImpUrl&&S.tracking.events.impression.push({event:"impression",offset:null,url:a.vastImpUrl}),v.tryNextBidEnabled){var l=e.bind(this,t,i+1,n,r,b);b.setOnErrorCb(l)}else b.setOnErrorCb(void 0);n(o)}(i,0,m,y)}else console.warn("no prebid bids retrieved"),y()},timeout:h})})}catch(e){console.error(e),y()}}).catch(function(e){console.error(e),y()}):y()}.bind(this),i()},n.onerror=function(){e()},n.srcdoc=r,a.appendChild(n),d=n})},this.init=function(){return new Promise(function(e,t){s?e():this.createFriendlyIframe(this.player.getPlayerElement()).then(function(){s=!0,e()}).catch(function(){t()})}.bind(this))},this.LoadAd=function(e,t,i){d.contentWindow.loadPrebidAd(e,t,i)}}function ne(p){this.player=p,this.currentTruvidAd=void 0;var g,v=this,m=!1;this.LoadAd=function(e,t,i){!function(i,e,n){var t,r,a;if(!m){m=!0,v.currentTruvidAd=n;var o,s,l,d=function(){v.reset(),e()},u=null!==(t=null==n?void 0:null===(r=n.adObject)||void 0===r?void 0:null===(a=r.properties)||void 0===a?void 0:a.VASTAdTagURI)&&void 0!==t?t:null;try{var c=function(e){var t=unescape(e).split("?")[1].split("&"),i=t.find(function(e){return e.includes("iu=")});if(i){var n=i.split("=")[1],r=t.find(function(e){return e.includes("sz=")}),a=[];return r&&1===(a=(a=r.split("="))[1]?a[1].split("|").map(function(e){var t=e.split("x");return[+t[0],+t[1]]}):[]).length&&(a=a[0]),{sizesArr:a,adUnitId:n}}d()}(u),h=c.adUnitId,f=c.sizesArr;p.isSlotStructured()||function(){var e,t=document.createElement("div");t.id="trv-ad-container",t.style.width="".concat(p.getPlayerWidth(),"px"),t.style.height="".concat(p.getPlayerHeight(),"px"),t.style.pointerEvents="none";var i=p.getParentElement().parentElement;"BODY"===i.nodeName?(e=document.createElement("div"),i.appendChild(e),e.appendChild(p.getParentElement()),e.id="trv-out-wrapper"):i.id="trv-out-wrapper",p.setIsSlotStructured(!0),p.getPlayerElement().appendChild(t)}(),(s=h,l=f,new Promise(function(t,i){googletag?(v.reset(),googletag.cmd.push(function(){googletag.defineSlot(s,l,"trv-out-wrapper").addService(googletag.pubads()).setConfig({outstream:{exposeVast:!0}}),googletag.pubads().addEventListener("slotRenderEnded",function(e){!e.isEmpty&&e.vast?t(e.vast):i()}),googletag.enableServices()})):i()})).then(function(e){n.setVastRes(e);var t=g.adParameters;g.mediaFiles=[],g.type="google/ima",g.mediaFiles.push(new T.a("google/ima",{delivery:"progressive",height:"250",src:"outstream",type:"google/ima",width:"300"},t)),i()}).catch(function(){d()}),top.document.querySelector("#trv-out-wrapper").appendChild(((o=document.createElement("script")).innerHTML='googletag.cmd.push(function () {\n        googletag.display("trv-out-wrapper");\n      });',o.type="text/javascript",o)),(g=n).fireRequestPixel()}catch(e){console.error(e),d()}}}(e,t,i)},this.reset=function(){var e=document.querySelector("#trv-ad-container");if(null!=e&&e.children.length&&e.children[0].remove(),this.currentTruvidAd.setVastRes(void 0),googletag){var t=googletag.pubads().getSlots().find(function(e){return"trv-out-wrapper"===e.getSlotElementId()});t&&googletag.destroySlots([t])}}}function re(f,i){this.player=f,this.adsLib=i,this.currentTruvidAd=void 0;var p=this,g=!1;this.init=function(){return new Promise(function(e,t){g||i.getIntegrationScript("adocean")?(g=!0,e()):Object(u.c)("//port80ge.adocean.pl/files/js/ado.js").then(function(){g=!0,i.setIntegrationScript("adocean",top.ado),e()}).catch(function(){return t()})})},this.loadAdOceanAd=function(e,t,i){!function(e,t,i){p.currentTruvidAd=i;try{var n,r,a,o=null!==(n=null==i?void 0:null===(r=i.adObject)||void 0===r?void 0:null===(a=r.properties)||void 0===a?void 0:a.VASTAdTagURI)&&void 0!==n?n:null;if(!g||!o)return t();var s=JSON.parse(o),l=s.masterId,d=s.baseUrl,u=(s.options,{master_id:l,baseUrl:d,href:top.document.location.href,gdpr:f.getGdprApplies(),gdpr_consent:f.getConsentString()}),c="".concat(u.baseUrl,"?id=").concat(u.master_id,"/href=").concat(encodeURIComponent(u.href),"/gdpr=").concat(u.gdpr,"/gdpr_consent=").concat(encodeURIComponent(u.gdpr_consent)),h=i.adParameters;i.mediaFiles=[],i.type="google/ima",i.mediaFiles.push(new T.a("google/ima",{delivery:"progressive",height:"250",src:c,type:"google/ima",width:"300"},h)),i.fireRequestPixel(),e()}catch(e){console.error(e),t()}}(e,t,i)}}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==i)return;var n,r,a=[],o=!0,s=!1;try{for(i=i.call(e);!(o=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==i.return||i.return()}finally{if(s)throw r}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function ae(a,o){var h="https://aax.amazon-adsystem.com/e/dtb/vast?",f=null,i=!1;this.adsLib=o,this.player=a;function n(a,t,e){if(!i){i=!0,p=e;try{(function(e){return new Promise(function(u,c){window.playerLog("request bids Amazon TAM... "+JSON.stringify(e)),p.firePixels("request",f),apstag.fetchBids({slots:e,timeout:f.bidTimeout},function(e){if(e&&0<e.length){var t,i;window.playerLog("Amazon  fire TAM win-response..."),p.firePixels("win-response",f);var n=e[0],r=y(n.size.split("x").map(Number),2),a=r[0],o=r[1],s=(null==n?void 0:n.amzniid)||(null==n?void 0:null===(t=n.targeting)||void 0===t?void 0:t.amzniid),l=(null==n?void 0:n.amznbid)||(null==n?void 0:null===(i=n.targeting)||void 0===i?void 0:i.amznbid),d=h+"b="+s+"&pp="+l+"&cb="+g;window.playerLog("Amazon VAST URL = "+d),u({vastUrl:d,width:a,height:o})}else window.playerLog("AmazonTam: No bids received."),c(new Error("AmazonTam: No bids received"))})})})(f.slots).then(function(e){var t=e.vastUrl,i=e.width,n=e.height,r=p.adParameters;p.mediaFiles=[],p.type="google/ima",p.mediaFiles.push(new T.a("google/ima",{delivery:"progressive",height:n,src:t,type:"google/ima",width:i},r)),a()}).catch(function(e){console.error("getVastFromAmazonTam error: "+e.message),window.playerLog("ERROR getVastFromAmazonTam:",e),t()})}catch(e){console.error(e),t()}}}var p=void 0,s=null,g=Math.floor(1e5*Math.random()+1),l=!1;function d(e,t,i,n){if(window.playerLog("initializeTAMTag pubID ="+e),s=function(){if(s)return s;var e=a.getSellersJsonId();return e?s={validation:"strict",config:{ver:"1.0",complete:1,nodes:[{asi:"truvid.com",sid:e,hp:1}]}}:(window.playerLog("AmazonTam: No sellerId found"),s)}(),l)window.playerLog("tamLoaded return");else{var r={pubID:e,bidTimeout:n,gdpr:{cmpApi:"static",consentData:{gdprApplies:!1}}};i&&(r.videoAdServer=i),t&&(r.adServer=t),s&&(r.schain=s),apstag.init(r),l=!0}}this.init=function(e){var t=function(e){try{var t,i=JSON.parse(e);if(!i.pubID||!Array.isArray(i.slots)||0===i.slots.length)throw new Error("Invalid TAM configuration. Ensure 'pubID', 'adServer', and at least one slot are provided.");if(!i.slots[0].slotID)throw new Error("Invalid slot configuration. Each slot must have 'slotID' and 'sizes'.");return f={pubID:i.pubID,videoAdServer:i.videoAdServer,adServer:i.adServer,bidTimeout:null!==(t=i.bidTimeout)&&void 0!==t?t:5e3,slots:i.slots}}catch(e){return console.error("Error parsing TAM Configuration:",e.message),window.playerLog("Error parsing TAM Configuration:",e.message),null}}(e),i=t.pubID,n=t.adServer,r=t.videoAdServer,a=t.bidTimeout;return new Promise(function(e,t){l||o.getIntegrationScript("amazonTam")?(l||d(i,n,r,a),e()):Object(u.c)("//c.amazon-adsystem.com/aax2/apstag.js",document).then(function(){o.setIntegrationScript("amazonTam",top.apstag),l||d(i,n,r,a),e()}).catch(function(){return t()})})},this.loadAmazonTamAd=function(e,t,i){n(e,t,i)}}function oe(r,e){var t,i,n,a,o,s=1<arguments.length&&void 0!==e?e:{},l=null!==(t=s.aiwaEnabled)&&void 0!==t&&t,d=null!==(i=s.aiwaMagicNumber)&&void 0!==i?i:3,u=null!==(n=s.aiwaMagicNumberSoundBoost)&&void 0!==n?n:2,c=null!==(a=s.aiwaDebug)&&void 0!==a&&a,h=null!==(o=s.aiwaStartFromMiddleOnFailure)&&void 0!==o&&o,f={soundOnIdx:0,soundOffIdx:0};return{getAiwaIndex:function(){var e=!r.playerObj.getCurrentVolume(),t=f[e?"soundOffIdx":"soundOnIdx"];return c&&console.log("AIWA DEBUG: "+t),t},setAiwaIndex:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],i=e;t&&(i-=r.playerObj.getCurrentVolume()?d*u:d);var n=!r.playerObj.getCurrentVolume();f[n?"soundOffIdx":"soundOnIdx"]=Math.max(i,0),t&&c&&console.log("AIWA DEBUG: * WIN * | NEW STATE: soundOnIdx: ".concat(f.soundOnIdx,", soundOffIdx: ").concat(f.soundOffIdx))},isAiwaEnabled:function(){return l},aiwaDebugMode:function(){return!!c},aiwaStartFromMiddleOnFailure:function(){return h}}}var se=i(12);function w(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function le(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?w(Object(i),!0).forEach(function(e){E(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):w(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function E(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var de="adLoaded",ue="adStarted",ce="onAdEnd",C="onBiddingSessionsEnd",he="adSkipped",fe="onBiddingSessionStart",pe="onBeforeBiddingSessionStart",ge="stoppedTrackingAdViewability",k="restartBiddingInterval";function P(u,c){this.currentBidSession=null,this.playerObj=c;var e=u,r=null!=typeof(this.advertisingConfiguration=u).prebidVastParameters?u.prebidVastParameters:null,h=this,f=!1;this.allowedContainers=["application/javascript","google/ima","video/mp4","openrtb","relevant","prebid"];var t,p=c.getPlayerElement(),a=new K,o=null,i=null,s=null,l=Math.ceil(c.getPlayerHeight()),d=Math.ceil(c.getPlayerWidth()),g=Math.ceil(c.getPlayerWidth()),v=Math.ceil(c.getPlayerHeight()),m=!0,y=!1,n=void 0===u.startAdOnAdLoadedEvent||u.startAdOnAdLoadedEvent,b=null,w=0,E=null,S="",A=!1,T=!0,L=[],C=-1,k=-1,P=null,x=0,O=!1,I=0,R=null;function M(e,t,i,n){var r,a,o=e.getGeoLocation(),s=null!==(r=null==o?void 0:null===(a=o.country)||void 0===a?void 0:a.toUpperCase())&&void 0!==r?r:null;s&&function(e){return["BR"].includes(e)}(s)&&i&&Object(z.a)(t,i,n)}function D(){m&&(y||c.getPlayerContentStatus()==Q.i)&&(window.playerLog("restoring content - switch to content"),c.restoreContentState(),f=y=!1,h.currentBidSession&&h.currentBidSession.getCurrentTruvidAd&&h.currentBidSession.getCurrentTruvidAd().hasFiredImpression()&&(h.currentBidSession.resetCurrentTruvidAd(),h.currentBidSession.destroy(),h.currentBidSession=null))}function F(){h.currentBidSession&&h.currentBidSession.getCurrentTruvidAd()&&h.currentBidSession.getCurrentTruvidAd().getAdManager()&&h.currentBidSession.getCurrentTruvidAd().getAdManager().destroy()}function B(){t||(t=new q(h,c)).initialize()}function _(){S="",A=!1}function N(t){window.playerLog("start bidding session"),O=!1,r&&(window.playerLog("adding prebid parameters"),S=r,A=!0),B();if(u.isPreroll||"c"==u.midrollType&&u.midrollCount||"d"==u.midrollType&&u.midrollInterval||u.isPostroll){var e,i;null===(e=h.currentBidSession)||void 0===e||(null===(i=e.getCurrentTruvidAd())||void 0===i||i.getAdManager());if(window.playerLog("dispatch bidding session start"),p.dispatchEvent(new CustomEvent(fe)),A||0,null==h.currentBidSession&&!f){switch(h.currentBidSession=new G.b(h,{adOffset:t.type,ads:[]},c),t.type){case J.d:b="p";break;case J.b:b="m";break;case J.c:b="t"}w++,h.currentBidSession.ListenToBiddingSessionEnds(function(){U()}),h.currentBidSession.listenToStartLoadingContainer(function(){h.onStartLoadingContainer()}.bind(h));var n=o+S;h.adMacros.InjectMacros(n).then(function(e){A?h.loadAdByUrl(e,function(){!function(e){window.playerLog("reset current bid session - restart bidding session"),h.currentBidSession=null,_(),w--,N(e)}(t)}):T?(T=!1,V(),window.playerLog("opportunity pixel"),Object(z.c)(c.getOpportunityPixel()),h.currentBidSession.startBiddingSession(e)):k!=v||C!=g?(V(),T=!1,window.playerLog("opportunity pixel"),Object(z.c)(c.getOpportunityPixel()),h.currentBidSession.startBiddingSession(e)):(window.playerLog("opportunity pixel"),Object(z.c)(c.getOpportunityPixel()),h.currentBidSession.startLoadingLastAds())}).catch(function(e){window.playerLog("ERROR injectmacrosErr",e),Object(z.b)("injectmacrosErr",{wid:c.getWidgetId()},e)})}}else window.playerLog("reset current bid session - start bidding session"),h.currentBidSession=null}function V(){C=g,k=v}function U(){window.playerLog("bidding session ends"),0,h.currentBidSession&&h.currentBidSession.abort(),h.currentBidSession=null,c.setIsAdPlaying(!1),p.dispatchEvent(new CustomEvent("onBiddingSessionsEnd"))}function j(){return"in_read"==c.getWidgetType()}function H(){var e=this.shiftPrioritizedMediaFiles();h.currentBidSession=new G.b(h,null,c),h.currentBidSession.setCurrentTruvidAd(this),h.currentBidSession.loadTruvidMediaFile(e)}this.previousVolume=null,this.maxAdStarts=null!=typeof e.maxAdStarts?e.maxAdStarts:null,this.gdpr=null!=typeof e.gdpr&&e.gdpr,this.adMacros=new Z(h,this.playerObj),this.prebidAdManager=new ee(this.playerObj),this.adSessionFQCounter={},this.integrationsScripts={adocean:null,prebid:null,amazonTam:null},e.aiwaOptions&&(this.aiwa=oe(this,e.aiwaOptions)),this.updateCurrentPlayTime=function(){s=s||setInterval(function(){I+=.5},500)},this.pauseUpdateCurrentPlayTime=function(){clearInterval(s)},this.stopUpdateCurrentPlayTime=function(){clearInterval(s),s=null},this.resumeAdPlayingTime=function(){this.updateCurrentPlayTime()},this.beforeStopHandler=function(){this.stopUpdateCurrentPlayTime(),M(c,"stop",h.currentBidSession.getCurrentTruvidAd(),le(le({},u),{},{adPlayingTime:I,currentSlotNumberMacro:w}))},this.getIntegrationScript=function(e){return this.integrationsScripts[e]},this.setIntegrationScript=function(e,t){e&&(this.integrationsScripts[e]=t)},this.getOutstreamImaManager=function(){return new ne(this.playerObj,this)},this.getAdOceanManager=function(){return new re(this.playerObj,this)},this.getAmazonTamManager=function(){return new ae(this.playerObj,this)},this.getPrebidManager=function(e,t){switch(e){case"prebid":return new ie(this.playerObj,this);case"relevant":return new te(this.playerObj,t,this);case"openrtb":default:return this.prebidAdManager}},this.getUsPrivacyApplies=function(){return"1---"!==this.advertisingConfiguration.usPrivacy},this.addImpressionEvent2IMA=function(e){this.getImaAdManager().addImpressionCb(e)},this.getAdSessionFQCounter=function(){return this.adSessionFQCounter},this.adSessionInterval={},this.getAdSessionInterval=function(){return this.adSessionInterval},this.setLastVastAds=function(e){L=e},this.getLastVastAds=function(){return L},this.pauseAdTimer=function(){this.pauseUpdateCurrentPlayTime()},this.pauseAd=function(){h.currentBidSession&&h.currentBidSession.getCurrentTruvidAd()&&h.currentBidSession.getCurrentTruvidAd().getAdManager()&&h.currentBidSession.getCurrentTruvidAd().getAdManager().pauseAd()},this.resumeAdTimer=function(){this.resumeAdPlayingTime()},this.resumeAd=function(){h.currentBidSession&&h.currentBidSession.getCurrentTruvidAd()&&h.currentBidSession.getCurrentTruvidAd().getAdManager()&&h.currentBidSession.getCurrentTruvidAd().getAdManager().resumeAd()},this.getAllowedContainers=function(){return this.allowedContainers.slice(0)},this.setStartAdOnAdLoadedEvent=function(e){n=e},this.getStartAdOnAdLoadedEvent=function(){return n},this.onPlayerResize=function(){var e,t,i,n,r,a,o={width:p.offsetWidth,height:p.offsetHeight};if(h.syncContentDimensions(o.width,o.height),e=0==d?c.getPlayerWidth():d,t=0==l?c.getPlayerHeight():l,f){if(h.currentBidSession&&h.currentBidSession.getCurrentTruvidAd()&&h.currentBidSession.getCurrentTruvidAd().getAdManager()){var s=h.currentBidSession.getCurrentTruvidAd().getAdManager();s.resizeAd(e,t),null!=s&&s.setAdsContainerVisibility&&(i=s,n=e,r=t,a=setInterval(function(){Math.abs(n-i.getAdContainer().offsetWidth)<2&&Math.abs(r-i.getAdContainer().offsetHeight)<2&&(clearInterval(a),i.setAdsContainerVisibility(!0))},100))}}else c.resizeSpinner(e,t);h.syncContentDimensions(e,t)},this.startPendingAd=function(){if(window.playerLog("start pending ad"),h.currentBidSession&&h.currentBidSession.getCurrentTruvidAd()&&h.currentBidSession.getCurrentTruvidAd().getAdManager()){var e=c.getElementDimension(p);h.syncContentDimensions(e.width,e.height),h.currentBidSession.getCurrentTruvidAd().getAdManager().resizeAd(d,l),h.currentBidSession.getCurrentTruvidAd().getAdManager().startAd(),n=!0}},this.getCurrentTagId=function(){if(h.currentBidSession&&h.currentBidSession.getCurrentTruvidAd())return h.currentBidSession&&h.currentBidSession.getCurrentTruvidAd().getDemandTagId()},this.onAdLoaded=function(){try{if(O=!0,h.currentBidSession)this.stopUpdateCurrentContentTimeState(),function(){if(window.playerLog("function onAdLoaded"),h.currentBidSession){if(y=!0,h.currentBidSession&&h.currentBidSession.getCurrentTruvidAd()&&(window.playerLog("function onAdLoaded - clear loading container timeout"),h.currentBidSession.getCurrentTruvidAd().clearLoadingContainerTimeout()),c.setIsAdPlaying(!0),m)try{c.saveContentState(!0)}catch(e){Object(z.b)("saveContentStateErr",{wid:c.getWidgetId()},e)}p.dispatchEvent(new CustomEvent(de))}}();else if(E){this.stopUpdateCurrentContentTimeState(),h.currentBidSession&&h.currentBidSession.getCurrentTruvidAd()&&h.currentBidSession.getCurrentTruvidAd().clearLoadingContainerTimeout(),y=!0,c.setIsAdPlaying(!0);try{c.saveContentState(!0)}catch(e){Object(z.b)("saveContentStateErr2",{wid:c.getWidgetId()},e)}p.dispatchEvent(new CustomEvent(de)),_()}}catch(e){Object(z.b)("OnAdLoadedErr",{wid:c.getWidgetId()},e)}},this.onAdStarted=function(e){var t,i,n,r=null!=e?e:null;if(h.currentBidSession&&h.currentBidSession.getCurrentTruvidAd()){var a,o;if(!(r=null!=e?e:h.currentBidSession.getCurrentTruvidAd()).getIsLoaded()){if(r.setLoaded(!0),m)try{c.saveContentState(!1)}catch(e){Object(z.b)("saveContentStateErr3",{wid:c.getWidgetId()},e)}this.stopUpdateCurrentContentTimeState(),r.clearLoadingContainerTimeout(),c.setIsAdPlaying(!0),I=performance?performance.now():Date.now()}var s=null===(a=h.currentBidSession)||void 0===a?void 0:null===(o=a.getCurrentTruvidAd())||void 0===o?void 0:o.getAdManager();null!=s&&s.setAdsContainerVisibility&&s.setAdsContainerVisibility(!0)}if(f=!(O=!1),null!==(t=this.aiwa)&&void 0!==t&&t.isAiwaEnabled()&&this.aiwa.setAiwaIndex(this.aiwa.getAiwaIndex(),!0),this.trackAdViewability(),p.dispatchEvent(new CustomEvent(ue)),0,this.syncContentDimensions(0,0),null!==(i=h.currentBidSession)&&void 0!==i&&null!==(n=i.getCurrentTruvidAd())&&void 0!==n&&n.getIsGptOutstream())this.playerObj.mute();else{var l=this.getAdVolume();this.setAdSound(l)}this.playerObj.useVerticalSwiper()&&this.playerObj.getIsFSModalOpened()&&this.playerObj.removeVerticalBackBtn();var d=this.getCurrentSlotTypeMacro();r.setSlotType(d),I=0,M(c,"play",r,le(le({},u),{},{adPlayingTime:I,currentSlotNumberMacro:w})),this.updateCurrentPlayTime()},this.getAdVolume=function(){return this.playerObj.mobileUnmuteBtnClicked()&&this.playerObj.isPlayerInView()?Q.e:this.playerObj.getVolume()},this.trackAdViewability=function(){x=0;P=setInterval(function(){c.IsPlayerViewable()?x+=10:x=0,2e3<=x&&(h.currentBidSession&&h.currentBidSession.getCurrentTruvidAd()&&h.currentBidSession.getCurrentTruvidAd().fireViewability(),this.stopTrackingAdViewability())}.bind(this),10)},this.stopTrackingAdViewability=function(){h.currentBidSession&&h.currentBidSession.getCurrentTruvidAd()&&!h.currentBidSession.getCurrentTruvidAd().getStoppedTrackingViewability()&&h.currentBidSession.getCurrentTruvidAd().isAdOnly()&&(h.currentBidSession.getCurrentTruvidAd().setStoppedTrackingViewability(),c.dispatchEvent(ge,{currentAdViewabilityCounter:x})),clearInterval(P),x=0},this.onContentVolumeChange=function(){this.previousVolume=c.getCurrentVolume()},this.onVideoEnd=function(){F(),i&&clearTimeout(i)},this.onAdStopped=function(e){var t,i,n,r,a=null===(t=h.currentBidSession)||void 0===t?void 0:null===(i=t.getCurrentTruvidAd())||void 0===i?void 0:i.getAdManager();null!=a&&a.setAdsContainerVisibility&&a.setAdsContainerVisibility(!1),O=!1,this.stopTrackingAdViewability(),this.stopSettingsAdSound(),c.setIsAdPlaying(!1);var o=0;h.currentBidSession&&h.currentBidSession.getCurrentTruvidAd()&&(o=h.currentBidSession.getCurrentTruvidAd().getNumberOfTimesAdSkipped()),p.dispatchEvent(new CustomEvent(ce,{detail:{numberOfTimesAdSkipped:o,isGptOutstreamAdEnded:null===(n=h.currentBidSession)||void 0===n?void 0:null===(r=n.getCurrentTruvidAd())||void 0===r?void 0:r.getIsGptOutstream()}})),y=f=!1,window.playerLog("on ad stopped"),this.stopUpdateCurrentContentTimeState(),e||j()?y=!1:(window.playerLog("going to switch to content"),D()),h.currentBidSession&&h.currentBidSession.resetCurrentTruvidAd(),U(),I=0,clearInterval(s),s=null},this.canStartBiddingSession=function(){return null==this.currentBidSession&&(!this.playerObj.getPauseOnHiddenTab()||this.playerObj.getPauseOnHiddenTab()&&!c.getPlayerStoppedOnPageVisibilityEvent()&&c.getIsPageVisible())},this.isAdLoading=function(){return O},this.init=function(){var i=function(e){this.initializeListeners(),e()}.bind(this),n=function(t){new X(this.playerObj,this).Sync().then(function(){i(t)}.bind(this)).catch(function(e){Object(z.b)("userSyncErr",{wid:c.getWidgetId()},e),i(t)})}.bind(this);return new Promise(function(t){a.Load().then(function(){n(t)}.bind(this)).catch(function(e){Object(z.b)("thirdPartyLoaderLoadErr",{wid:c.getWidgetId()},e),n(t)}.bind(this))}.bind(this))},this.initializeListeners=function(){o=c.getVastPath();var e=c.getElementDimension(p);h.syncContentDimensions(e.width,e.height),this.playerObj.subscribe(Q.k,this.onPlayerResize),this.playerObj.subscribe($.e,this.onPlayerResize),this.playerObj.subscribe($.b,this.onPlayerResize),this.playerObj.subscribe(Q.r,this.onPlayerResize),this.playerObj.subscribe($.c,this.onFloaterClosedByUserRequest),this.playerObj.subscribe(Q.f,function(){return new Promise(function(e){j()||(f=!1,clearTimeout(i),h.currentBidSession&&h.currentBidSession.destroy(),h.currentBidSession=null,T=!0),e()}.bind(this))}.bind(this))},this.stopAd=function(){h.currentBidSession&&h.currentBidSession.getCurrentTruvidAd()&&h.currentBidSession.getCurrentTruvidAd().getAdManager()&&(window.playerLog("ad stopped"),h.currentBidSession.getCurrentTruvidAd().getAdManager().stopAd()),this.stopTrackingAdViewability()},this.onFloaterClosedByUserRequest=function(){if(!h.playerObj.getContinuePlayingAdOnFloaterClose()){var e,t,i=null===(e=h.currentBidSession)||void 0===e?void 0:null===(t=e.getCurrentTruvidAd())||void 0===t?void 0:t.getAdManager();null!=i&&i.onAdStoppedByCloseButton?i.onAdStoppedByCloseButton():i&&h.playerObj.killBiddingSession()}},this.skipAd=function(){h.currentBidSession&&h.currentBidSession.getCurrentTruvidAd()&&h.currentBidSession.getCurrentTruvidAd().getAdManager()&&(p.dispatchEvent(new CustomEvent(ce)),window.playerLog("ad skipped"),h.currentBidSession.getCurrentTruvidAd().getAdManager().skipAd()),p.dispatchEvent(new CustomEvent(he)),this.stopTrackingAdViewability()},this.startBiddingSession=function(e){var t=this,i=!1,n=this;n.playerObj.useVerticalSwiper()||"in_stream"!==this.playerObj.getWidgetType()||!this.playerObj.IsPlayerViewable()||void 0===this.playerObj.getPlayContentTimeout()||this.playerObj.getPlayerContentStatus()===Q.h||this.playerObj.getCurrentContentTime()||(window.playerLog("play with getPlayContentTimeout = "+this.playerObj.getPlayContentTimeout()),setTimeout(function(){return t.playerObj.play()},this.playerObj.getPlayContentTimeout()*se.a)),c.DispatchPromiseEvent(pe).then(function(){!this.playerObj.hasUsedCmp()&&window.__tcfapi&&(i=!0),new Promise(function(e){i?new X(n.playerObj,n).Sync().finally(function(){return e()}):e()}).finally(function(){N(e)})}.bind(this)).catch(function(e){return window.playerLog("ERROR reject starting bidding session",e)})},this.killBiddingSession=function(){var e,t;(null===(e=h.currentBidSession)||void 0===e?void 0:null===(t=e.getCurrentTruvidAd())||void 0===t?void 0:t.getAdManager())&&(F(),this.onAdStopped()),h.currentBidSession&&h.currentBidSession.getCurrentTruvidAd()&&h.currentBidSession.getCurrentTruvidAd().getIsLoaded()&&D()},this.getAdRequestWidth=function(){return g},this.adRequestHeight=function(){return v},this.getAutomaticMacro=function(){return this.advertisingConfiguration.isClickToPlay||this.playerObj.hasUserInteractionOccured()||this.playerObj.getDomainEngagementVPA()&&this.playerObj.domainEngagementOccured()?"click":"auto"},this.getCurrentSlotTypeMacro=function(){return b},this.getCurrentSlotNumberMacro=function(){return w},this.increaseCurrentSlotNUmberMacro=function(){w++},this.setAdSound=function(t){function i(){return p.querySelectorAll("video")}var n=Array.from(i());R=setInterval(function(){var e;null!==(e=n)&&void 0!==e&&e.length||(n=Array.from(i())),n.forEach(function(e){return e.volume=t})},100)},this.stopSettingsAdSound=function(){R&&clearInterval(R)},this.syncContentDimensions=function(e,t){var i=Math.ceil(e),n=Math.ceil(t);d=i,l=n,0<e&&0<t&&(g=d,v=l)},this.setCurrentAdPlaying=function(e){f=e},this.advertisingState=function(){var e=!1;return f&&h.currentBidSession&&h.currentBidSession.getCurrentTruvidAd()&&h.currentBidSession.getCurrentTruvidAd().getAdManager()&&(e=h.currentBidSession.getCurrentTruvidAd().getAdManager().isCurrentAdPaused()),{paused:e}},this.initializeAdManagers=function(){B()},this.getImaAdManager=function(){return t},this.resetImaManager=function(){t=null},this.setLoadVastOnNextBiddingSession=function(e){T=e},this.onStartLoadingContainer=function(){this.previousVolume=c.getCurrentVolume()},this.onLoadingContainerFailed=function(e){window.playerLog("on loading container failed - advertising"),O=!1,this.previousVolume&&c.setVolume(this.previousVolume),h.currentBidSession&&h.currentBidSession.getCurrentTruvidAd()&&h.currentBidSession.getCurrentTruvidAd().getIsLoaded()&&p.dispatchEvent(new CustomEvent("adStoppedAfterLoad")),h.currentBidSession&&h.currentBidSession.getCurrentTruvidAd()&&"function"==typeof h.currentBidSession.getCurrentTruvidAd().clearResources&&h.currentBidSession.getCurrentTruvidAd().clearResources(),h.currentBidSession&&e==h.currentBidSession.getCurrentTruvidAd()&&this.stopUpdateCurrentContentTimeState(),h.currentBidSession&&(!c.useVerticalSwiper()&&c.isMediaPlayingIsDifferentThanContent()&&c.restoreContentState(),e.isPrebid||h.currentBidSession.onLoadingContainerFailed(e))},this.startUpdatingCurrentContentTimeState=function(){c.updateCurrentContentTimeState(),i=setInterval(function(){c.updateCurrentContentTimeState()},50)},this.stopUpdateCurrentContentTimeState=function(){clearInterval(i)},this.getRequestWidth=function(){return g},this.getRequestHeight=function(){return v},this.loadAdByUrl=function(e,t){this.adMacros.InjectMacros(e).then(function(e){(E=new Y.a(null,e,h.getAllowedContainers())).requestMediaFiles(this.getRequestWidth(),this.getRequestHeight(),H,t),E.setIsPrebid(!0)}.bind(this)).catch(function(e){window.playerLog("ERROR macros loadAdByUrl",e),Object(z.b)("LoadAdByUrlEx",{wid:c.getWidgetId()},e)})}}},function(e,t,i){"use strict";i.d(t,"b",function(){return a}),i.d(t,"a",function(){return o}),i.d(t,"c",function(){return s}),i.d(t,"d",function(){return l}),i.d(t,"f",function(){return d}),i.d(t,"e",function(){return u});var n=i(7),r=i(6);function a(e){return null!==e&&1==e}function o(){return/iPhone/.test(navigator.userAgent)}function s(e,t){return this.isMobile?null==t||t:null==e||e}function l(e,t,i,n){this.width=this.isMobile&&t||e,this.height=this.isMobile&&n||i}function d(e,t,i,n,r,a){null!=e&&null!=i&&null!=t&&(this.passbackCode=e,this.passbackWidth=t,this.passbackHeight=i,null!=n&&(this.passbackLength=n),null!=r&&(this.passbackAdSlots=r),this.passbackOnFirstBidding=a)}function u(e){(function(e,t){this.outofviewMethod=this.isMobile?t:e}).call(this,this.widgetStaticConfig.oovm,this.widgetStaticConfig.oovmm),function(e,t,i,n,r,a){""!=a&&("adonly"!=e&&"floater"!=e&&"adonly_cnt"!=e||(this.isMobile?i&&Array.isArray(i)?i.includes(a)||(this.outofviewMethod="play"):r&&Array.isArray(r)&&r.includes(a)&&(this.outofviewMethod="play"):t&&Array.isArray(t)?t.includes(a)||(this.outofviewMethod="play"):n&&Array.isArray(n)&&n.includes(a)&&(this.outofviewMethod="play")))}.call(this,this.outofviewMethod,this.widgetStaticConfig.iflc,this.widgetStaticConfig.iflcm,this.widgetStaticConfig.eflc,this.widgetStaticConfig.eflcm,e),this.outofviewMethod!=r.e&&this.outofviewMethod!=r.d&&this.outofviewMethod!=r.c||(function(e,t,i){this.floaterWidthOnOutofview=this.isMobile?t||i:e||i}.call(this,this.widgetStaticConfig.oovfw,this.widgetStaticConfig.oovfwm,this.width),function(e,t,i){this.floaterHeightOnOutofview=this.isMobile?t||i:e||i}.call(this,this.widgetStaticConfig.oovfh,this.widgetStaticConfig.oovfhm,this.height),function(e,t,i){this.floaterPositionOutOfView=this.isMobile?t||i:e||i}.call(this,this.widgetStaticConfig.oovfp,this.widgetStaticConfig.oovfpm,"bottom-right"),function(e,t){this.outofviewFloaterStartWithFloater=this.isMobile?t||!1:e||!1}.call(this,this.widgetStaticConfig.oovfi,this.widgetStaticConfig.oovfim),"adonly"==this.outofviewMethod||this.outofviewMethod==r.c?(function(e,t){this.outofviewAdOnlyFQ=this.isMobile?t:e}.call(this,this.widgetStaticConfig.oofaofq,this.widgetStaticConfig.oofaofqm),function(e,t){this.outofviewAdOnlyFQDaily=this.isMobile?t:e}.call(this,this.widgetStaticConfig.oofaodfq,this.widgetStaticConfig.oofaodfqm),function(e,t){this.outofviewAdOnlyFQHourly=this.isMobile?t:e}.call(this,this.widgetStaticConfig.oovaohfq,this.widgetStaticConfig.oovadhfqm),(this.outofviewAdOnlyFQDaily||this.outofviewAdOnlyFQHourly)&&c.call(this,this.outofviewAdOnlyFQDaily,this.outofviewAdOnlyFQHourly)):"floater"==this.outofviewMethod&&(function(e,t){this.outofviewFloaterFQ=this.isMobile?t:e}.call(this,this.widgetStaticConfig.oovffq,this.widgetStaticConfig.oovffqm),function(e,t){this.outofviewFloaterFQDaily=this.isMobile?t:e}.call(this,this.widgetStaticConfig.oovfdfq,this.widgetStaticConfig.oovfdfqm),function(e,t){this.outofviewFloaterFQHourly=this.isMobile?t:e}.call(this,this.widgetStaticConfig.oovfhfq,this.widgetStaticConfig.oovfhfqm),(this.outofviewFloaterFQDaily||this.outofviewFloaterFQHourly)&&c.call(this,this.outofviewFloaterFQDaily,this.outofviewFloaterFQHourly)),function(e,t){this.floaterPadding=this.isMobile?t||0:e||0}.call(this,this.widgetStaticConfig.fp,this.widgetStaticConfig.fpm),this.closeFloaterDelay=this.widgetStaticConfig.cfd)}function c(e,t){this.outofviewCookieName="truvid_oov";var i=Object(n.a)(this.outofviewCookieName);i&&(i=JSON.parse(i),e&&(i.timesShown&&i.dailyFQTimestamp&&(new Date-new Date(i.dailyFQTimestamp))/1e3/60/60<24?this.floaterOOVTimesShown=i.timesShown:this.floaterOOVTimesShown=0),t&&(i.timesShownHourly&&i.hourlyFQTimestamp&&(new Date-new Date(i.hourlyFQTimestamp))/1e3/60/60<1?this.floaterOOVTimesShownHourly=i.timesShownHourly:this.floaterOOVTimesShownHourly=0))}},function(e,t,i){"use strict";function n(e){var t;return e.getBoundingClientRect?{width:(t=e.getBoundingClientRect()).width,height:t.height}:{width:e.offsetWidth,height:e.offsetHeight}}function r(e){if(null==e||!e.length)return"";var t=top.navigator.userAgent,i=/(Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini)/i.test(t),n=e.filter(function(e){return"both"==e.device||e.device==(i?"mobile":"desktop")});if(n.length){for(var r=0;r<n.length;r++)try{var a=n[r].s,o=top.document.querySelector(a);if(null!=o&&o.parentElement&&!"BODY".includes(o.parentElement.nodeName))return""}catch(e){continue}return"131"}return""}function a(e,t,i){var n;null!=e&&null!==(n=e.style)&&void 0!==n&&n.setProperty&&e.style.setProperty(t,i,"important")}function o(){try{if(window.frameElement&&void 0!==window.parent.location&&void 0!==window.parent.location.href){var e=window.parent.location.href;0<e.indexOf("#")&&(e=e.substr(0,e.indexOf("#")));var t=window.location.href;return 0<t.indexOf("#")&&(t=t.substr(0,t.indexOf("#"))),e==t}return!1}catch(e){return!1}}i.d(t,"b",function(){return n}),i.d(t,"a",function(){return r}),i.d(t,"d",function(){return a}),i.d(t,"c",function(){return o})},function(e,t,i){"use strict";i.d(t,"e",function(){return n}),i.d(t,"d",function(){return r}),i.d(t,"c",function(){return a}),i.d(t,"f",function(){return o}),i.d(t,"g",function(){return s}),i.d(t,"b",function(){return l}),i.d(t,"h",function(){return d}),i.d(t,"a",function(){return u});var n="floater",r="adonly",a="adonly_cnt",o="pause",s=864e5,l="truvid_oov",d="truvid_s",u=36e5},function(e,t,i){"use strict";function n(t){t+="=";for(var e,i=document.cookie.split(";"),n=0;n<i.length;n++){var r=i[n].trim();if(0===r.indexOf(t)){var a=r.substring(t.length);try{e=decodeURIComponent(a)}catch(e){return window.playerLog("Failed to decode cookie:"+t),console.error("Failed to decode cookie:",e),"null"}break}}return e}function r(e){var t=window.location.hostname;return 0<=e.indexOf(t)?t:0<=t.indexOf(e)?e:t}function a(e,t,i,n){try{document.cookie=e+"="+JSON.stringify(t)+";path=/;expires="+i+";domain=."+n}catch(e){window.playerLog("could not write cookie"),window.playerLog(e)}}i.d(t,"a",function(){return n}),i.d(t,"b",function(){return r}),i.d(t,"c",function(){return a})},function(e,t,i){"use strict";function n(e,t,i){this.type=e,this.mediaFile=t,this.adParameters=i,this.isVAST=function(){return"video/mp4"==this.type},this.isIMA=function(){return"google/ima"==this.type},this.isVPAID=function(){return"application/javascript"==this.type},this.isSpotX=function(){return"spotsdk"==this.type}}i.d(t,"a",function(){return n})},function(e,t,i){"use strict";function n(a,o){return new Promise(function(e,t){void 0!==o&&o||(o=window.document);var i=o.createElement("script");i.src=a;var n=o.getElementsByTagName("head")[0],r=!1;i.onload=i.onreadystatechange=function(){r||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(r=!0,i.onload=i.onreadystatechange=null,e())},i.onerror=function(){i.onerror=null,t()},n.appendChild(i)})}function r(n){return new Promise(function(e,t){var i=new Image;i.onload=function(){e(i)},i.onerror=function(){t()},i.src=n})}function a(n,r,a){return new Promise(function(e,t){var i=new XMLHttpRequest;i.onreadystatechange=function(){4==i.readyState&&200==i.status&&e(i.responseText)},a&&(i.ontimeout=function(e){t("on timeout status: "+i.status+" statusText: "+i.statusText)}),i.onerror=function(e){t("on error status: "+i.status+" statusText: "+i.statusText)},i.open("GET",n,!0),a&&(i.timeout=a),r&&(i.withCredentials=!0),i.send(null)})}i.d(t,"c",function(){return n}),i.d(t,"b",function(){return r}),i.d(t,"a",function(){return a})},function(e,t,i){"use strict";i.d(t,"e",function(){return s}),i.d(t,"f",function(){return l}),i.d(t,"a",function(){return a}),i.d(t,"d",function(){return d}),i.d(t,"b",function(){return u}),i.d(t,"c",function(){return c});var n=i(1);function r(e){this.widget=e,this.wasOutOfView=!1,this.activateBonusSlot=!1,this.onVideoTimeUpdateBinding=this.onVideoTimeUpdate.bind(this),this.onViewabilityChangeBinding=this.onViewabilityChange.bind(this),this.widget.player.subscribe(n.q,this.onVideoTimeUpdateBinding),this.widget.player.subscribe(n.l,this.onViewabilityChangeBinding)}r.prototype.onViewabilityChange=function(e){e.detail.isPlayerViewable?this.wasOutOfView&&!this.widget.player.IsFloaterOpen()&&(this.activateBonusSlot=!0):this.wasOutOfView=!0},r.prototype.onVideoTimeUpdate=function(e){!this.widget.player.useVerticalSwiper()&&this.activateBonusSlot&&this.widget.player.getBSlotEnabled()&&(this.widget.adSlots?this.widget.player.IsPlayerViewable()&&this.widget.player.canStartBiddingSession()&&1<e.detail.currentTime&&!this.widget.player.isAdPlaying()&&(this.widget.adSlots.isPreroll?this.widget.adSlots.PushSlot({type:d,offset:e.detail.currentTime}):this.widget.adSlots.midrollCount&&"c"==this.widget.adSlots.midrollType?this.widget.adSlots.PushSlot({type:u,offset:e.detail.currentTime}):this.widget.adSlots.midrollInterval&&"d"==this.widget.adSlots.midrollType?this.widget.adSlots.PushSlot({type:u,offset:e.detail.currentTime}):this.widget.adSlots.isPostroll&&this.widget.adSlots.PushSlot({type:c,offset:e.detail.currentTime}),this.widget.player.unsubscribe(n.q,this.onVideoTimeUpdateBinding),this.widget.player.unsubscribe(n.l,this.onViewabilityChangeBinding)):(this.widget.player.unsubscribe(n.q,this.onVideoTimeUpdateBinding),this.widget.player.unsubscribe(n.l,this.onViewabilityChangeBinding)))};var s="setSlotsEvent",l="setSlotsEventVertical";function a(e){this.widget=e,this.slotsOffsets=[],this.slotsOffsetsWithoutModifications=[],this.isPreroll=!1,this.midrollCount=0,this.midrollType="c",this.midrollInterval=0,this.isPostroll=!1,this.widget.widgetStaticConfig.aid?(this.isPreroll=!0,this.midrollCount=1,this.midrollType="c"):(this.isPreroll=1==this.widget.widgetStaticConfig.aip,this.midrollType=this.widget.widgetStaticConfig.amt,"d"==this.midrollType?this.midrollInterval=this.widget.widgetStaticConfig.amd:(this.midrollCount=this.widget.widgetStaticConfig.am||0,this.midrollType="c"),this.isPostroll=1==this.widget.widgetStaticConfig.aipr),this.bonusSlot=new r(e),this.widget.player.subscribe(n.a,this.onNewVideo.bind(this)),this.widget.player.subscribe(n.j,this.onPlayerReady.bind(this))}var d=1,u=2,c=3;a.prototype.IsSlotAvailable=function(e){if(0==this.slotsOffsets.length)return null;for(var t=0;t<this.slotsOffsets.length&&!(this.slotsOffsets[t].offset>e+5);t++)if(Math.abs(this.slotsOffsets[t].offset-e)<=5)return this.slotsOffsets[t];return null},a.prototype.getLastSlotByOffset=function(e){if(!this.slotsOffsetsWithoutModifications.length)return null;for(var t=null,i=0;i<this.slotsOffsetsWithoutModifications.length&&this.slotsOffsetsWithoutModifications[i].offset<=e;i++)t=this.slotsOffsetsWithoutModifications[i];return t},a.prototype.RemoveSlot=function(e){for(var t=0;t<this.slotsOffsets.length;t++)this.slotsOffsets[t].offset==e&&this.slotsOffsets.splice(t,1)},a.prototype.onPlayerReady=function(){var e;e=this.widget.player.useVerticalSwiper()?this.widget.player.getPlaylistContent()[0].dur:this.widget.player.getDuration(),this.setSlots(e)},a.prototype.setSlots=function(e){if(this.slotsOffsets=[],this.isPreroll)for(var t=0,i=0;i<this.widget.numberOfPrerolls;i++,t+=4)this.slotsOffsets.push({type:d,offset:t});if(0<this.midrollCount&&"c"==this.midrollType)for(var n=1;n<=this.midrollCount;n++){var r=Math.round(e*(n/(this.midrollCount+1)));this.slotsOffsets.push({type:u,offset:r})}else if("d"==this.midrollType&&0<this.midrollInterval){this.midrollInterval<10&&(this.midrollInterval=10);for(var a=this.isPostroll?e-6:e,o=this.midrollInterval;o<a;o+=this.midrollInterval)this.slotsOffsets.push({type:u,offset:o})}this.isPostroll&&this.slotsOffsets.push({type:c,offset:e}),this.slotsOffsetsWithoutModifications=JSON.parse(JSON.stringify(this.slotsOffsets)),this.widget.player.useVerticalSwiper()?(this.widget.player.setVerticalAdSlots(this.slotsOffsetsWithoutModifications),this.widget.player.dispatchEvent(l)):this.widget.player.dispatchEvent(s)},a.prototype.onNewVideo=function(e){var t=e.detail.fileToPlay.dur;this.setSlots(t)},a.prototype.IsPreroll=function(){return this.isPreroll},a.prototype.PushSlot=function(e){this.slotsOffsets.push(e)}},function(t,e,i){
/*
 *  @Copyright (c) 2017 Dailymotion (http://www.dailymotion.com)
 *  @Licensed under the Apache License, Version 2.0 (the "License");
 *  @you may not use this file except in compliance with the License.
 *  @You may obtain a copy of the License at
    http://www.apache.org/licenses/LICENSE-2.0
    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
    src/remux/mp4-generator.js and src/demux/exp-golomb.ts implementation in this project
    are derived from the HLS library for video.js (https://github.com/videojs/videojs-contrib-hls)
    That work is also covered by the Apache 2 License, following copyright:
    Copyright (c) 2013-2015 Brightcove
    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
    AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
    THE SOFTWARE.
*/
!function qa(Ya){var e;e=function(){"use strict";function t(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function C(r){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?t(Object(a),!0).forEach(function(e){var t,i,n;t=r,n=a[i=e],(i=o(i))in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(a,e))})}return r}function o(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);var i=t.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==typeof t?t:String(t)}function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,o(n.key),n)}}function i(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function ge(){return(ge=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function s(e,t){e.prototype=Object.create(t.prototype),a(e.prototype.constructor=e,t)}function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function l(e,t,i){return(l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct.bind():function(e,t,i){var n=[null];n.push.apply(n,t);var r=new(Function.bind.apply(e,n));return i&&a(r,i.prototype),r}).apply(null,arguments)}function d(e){var i="function"==typeof Map?new Map:void 0;return(d=function(e){if(null===e||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==i){if(i.has(e))return i.get(e);i.set(e,t)}function t(){return l(e,arguments,r(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),a(t,e)})(e)}function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var u,c,h,f,p;u=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,c=/^(?=([^\/?#]*))\1([^]*)$/,h=/(?:\/|^)\.(?=\/)/g,f=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g;var g,v,m,y=p={buildAbsoluteURL:function(e,t,i){if(i=i||{},e=e.trim(),!(t=t.trim())){if(!i.alwaysNormalize)return e;var n=p.parseURL(e);if(!n)throw new Error("Error trying to parse base URL.");return n.path=p.normalizePath(n.path),p.buildURLFromParts(n)}var r=p.parseURL(t);if(!r)throw new Error("Error trying to parse relative URL.");if(r.scheme)return i.alwaysNormalize?(r.path=p.normalizePath(r.path),p.buildURLFromParts(r)):t;var a=p.parseURL(e);if(!a)throw new Error("Error trying to parse base URL.");if(!a.netLoc&&a.path&&"/"!==a.path[0]){var o=c.exec(a.path);a.netLoc=o[1],a.path=o[2]}a.netLoc&&!a.path&&(a.path="/");var s={scheme:a.scheme,netLoc:r.netLoc,path:null,params:r.params,query:r.query,fragment:r.fragment};if(!r.netLoc&&(s.netLoc=a.netLoc,"/"!==r.path[0]))if(r.path){var l=a.path,d=l.substring(0,l.lastIndexOf("/")+1)+r.path;s.path=p.normalizePath(d)}else s.path=a.path,r.params||(s.params=a.params,r.query||(s.query=a.query));return null===s.path&&(s.path=i.alwaysNormalize?p.normalizePath(r.path):r.path),p.buildURLFromParts(s)},parseURL:function(e){var t=u.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(h,"");e.length!==(e=e.replace(f,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},J=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)},b=Number.isSafeInteger||function(e){return"number"==typeof e&&Math.abs(e)<=w},w=Number.MAX_SAFE_INTEGER||9007199254740991,ve=((m={}).MEDIA_ATTACHING="hlsMediaAttaching",m.MEDIA_ATTACHED="hlsMediaAttached",m.MEDIA_DETACHING="hlsMediaDetaching",m.MEDIA_DETACHED="hlsMediaDetached",m.BUFFER_RESET="hlsBufferReset",m.BUFFER_CODECS="hlsBufferCodecs",m.BUFFER_CREATED="hlsBufferCreated",m.BUFFER_APPENDING="hlsBufferAppending",m.BUFFER_APPENDED="hlsBufferAppended",m.BUFFER_EOS="hlsBufferEos",m.BUFFER_FLUSHING="hlsBufferFlushing",m.BUFFER_FLUSHED="hlsBufferFlushed",m.MANIFEST_LOADING="hlsManifestLoading",m.MANIFEST_LOADED="hlsManifestLoaded",m.MANIFEST_PARSED="hlsManifestParsed",m.LEVEL_SWITCHING="hlsLevelSwitching",m.LEVEL_SWITCHED="hlsLevelSwitched",m.LEVEL_LOADING="hlsLevelLoading",m.LEVEL_LOADED="hlsLevelLoaded",m.LEVEL_UPDATED="hlsLevelUpdated",m.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",m.LEVELS_UPDATED="hlsLevelsUpdated",m.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",m.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",m.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",m.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",m.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",m.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",m.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",m.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",m.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",m.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",m.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",m.CUES_PARSED="hlsCuesParsed",m.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",m.INIT_PTS_FOUND="hlsInitPtsFound",m.FRAG_LOADING="hlsFragLoading",m.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",m.FRAG_LOADED="hlsFragLoaded",m.FRAG_DECRYPTED="hlsFragDecrypted",m.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",m.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",m.FRAG_PARSING_METADATA="hlsFragParsingMetadata",m.FRAG_PARSED="hlsFragParsed",m.FRAG_BUFFERED="hlsFragBuffered",m.FRAG_CHANGED="hlsFragChanged",m.FPS_DROP="hlsFpsDrop",m.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",m.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",m.ERROR="hlsError",m.DESTROYING="hlsDestroying",m.KEY_LOADING="hlsKeyLoading",m.KEY_LOADED="hlsKeyLoaded",m.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",m.BACK_BUFFER_REACHED="hlsBackBufferReached",m.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",m),me=((v={}).NETWORK_ERROR="networkError",v.MEDIA_ERROR="mediaError",v.KEY_SYSTEM_ERROR="keySystemError",v.MUX_ERROR="muxError",v.OTHER_ERROR="otherError",v),ye=((g={}).KEY_SYSTEM_NO_KEYS="keySystemNoKeys",g.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",g.KEY_SYSTEM_NO_SESSION="keySystemNoSession",g.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",g.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",g.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",g.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",g.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",g.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",g.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",g.MANIFEST_LOAD_ERROR="manifestLoadError",g.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",g.MANIFEST_PARSING_ERROR="manifestParsingError",g.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",g.LEVEL_EMPTY_ERROR="levelEmptyError",g.LEVEL_LOAD_ERROR="levelLoadError",g.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",g.LEVEL_PARSING_ERROR="levelParsingError",g.LEVEL_SWITCH_ERROR="levelSwitchError",g.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",g.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",g.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",g.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",g.FRAG_LOAD_ERROR="fragLoadError",g.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",g.FRAG_DECRYPT_ERROR="fragDecryptError",g.FRAG_PARSING_ERROR="fragParsingError",g.FRAG_GAP="fragGap",g.REMUX_ALLOC_ERROR="remuxAllocError",g.KEY_LOAD_ERROR="keyLoadError",g.KEY_LOAD_TIMEOUT="keyLoadTimeOut",g.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",g.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",g.BUFFER_APPEND_ERROR="bufferAppendError",g.BUFFER_APPENDING_ERROR="bufferAppendingError",g.BUFFER_STALLED_ERROR="bufferStalledError",g.BUFFER_FULL_ERROR="bufferFullError",g.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",g.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",g.INTERNAL_EXCEPTION="internalException",g.INTERNAL_ABORTED="aborted",g.UNKNOWN="unknown",g),E=function(){},S={trace:E,debug:E,log:E,warn:E,info:E,error:E},A=S;function k(e,t){if("object"==typeof console&&!0===e||"object"==typeof e){!function(n){for(var e=arguments.length,t=new Array(1<e?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];t.forEach(function(e){var t,i;A[e]=n[e]?n[e].bind(n):(t=e,(i=self.console[t])?i.bind(self.console,"["+t+"] >"):E)})}(e,"debug","log","info","warn","error");try{A.log('Debug logs enabled for "'+t+'" in hls.js version 1.5.13')}catch(e){A=S}}else A=S}var T,be=A,L=/^(\d+)x(\d+)$/,P=/(.+?)=(".*?"|.*?)(?:,|$)/g,$=((T=x.prototype).decimalInteger=function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t},T.hexadecimalInteger=function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var i=new Uint8Array(t.length/2),n=0;n<t.length/2;n++)i[n]=parseInt(t.slice(2*n,2*n+2),16);return i}return null},T.hexadecimalIntegerAsNumber=function(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t},T.decimalFloatingPoint=function(e){return parseFloat(this[e])},T.optionalFloat=function(e,t){var i=this[e];return i?parseFloat(i):t},T.enumeratedString=function(e){return this[e]},T.bool=function(e){return"YES"===this[e]},T.decimalResolution=function(e){var t=L.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}},x.parseAttrList=function(e){var t,i={};for(P.lastIndex=0;null!==(t=P.exec(e));){var n=t[2];0===n.indexOf('"')&&n.lastIndexOf('"')===n.length-1&&(n=n.slice(1,-1)),i[t[1].trim()]=n}return i},i(x,[{key:"clientAttrs",get:function(){return Object.keys(this).filter(function(e){return"X-"===e.substring(0,2)})}}]),x);function x(e){"string"==typeof e&&(e=x.parseAttrList(e)),ge(this,e)}function O(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}var I,ee=(i(U,[{key:"id",get:function(){return this.attr.ID}},{key:"class",get:function(){return this.attr.CLASS}},{key:"startDate",get:function(){return this._startDate}},{key:"endDate",get:function(){if(this._endDate)return this._endDate;var e=this.duration;return null!==e?new Date(this._startDate.getTime()+1e3*e):null}},{key:"duration",get:function(){if("DURATION"in this.attr){var e=this.attr.decimalFloatingPoint("DURATION");if(J(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}},{key:"plannedDuration",get:function(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}},{key:"endOnNext",get:function(){return this.attr.bool("END-ON-NEXT")}},{key:"isValid",get:function(){return!!this.id&&!this._badValueForSameId&&J(this.startDate.getTime())&&(null===this.duration||0<=this.duration)&&(!this.endOnNext||!!this.class)}}]),U),F="audio",R="video",M="audiovideo",D=(V.prototype.setByteRange=function(e,t){var i,n=e.split("@",2);i=1===n.length?(null==t?void 0:t.byteRangeEndOffset)||0:parseInt(n[1]),this._byteRange=[i,parseInt(n[0])+i]},i(V,[{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"url",get:function(){return!this._url&&this.baseurl&&this.relurl&&(this._url=y.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function(e){this._url=e}}]),V),te=function(n){function e(e,t){var i;return(i=n.call(this,t)||this)._decryptdata=null,i.rawProgramDateTime=null,i.programDateTime=null,i.tagList=[],i.duration=0,i.sn=0,i.levelkeys=void 0,i.type=void 0,i.loader=null,i.keyLoader=null,i.level=-1,i.cc=0,i.startPTS=void 0,i.endPTS=void 0,i.startDTS=void 0,i.endDTS=void 0,i.start=0,i.deltaPTS=void 0,i.maxStartPTS=void 0,i.minEndPTS=void 0,i.stats=new O,i.data=void 0,i.bitrateTest=!1,i.title=null,i.initSegment=null,i.endList=void 0,i.gap=void 0,i.urlId=0,i.type=e,i}s(e,n);var t=e.prototype;return t.setKeyFormat=function(e){if(this.levelkeys){var t=this.levelkeys[e];t&&!this._decryptdata&&(this._decryptdata=t.getDecryptData(this.sn))}},t.abortRequests=function(){var e,t;null==(e=this.loader)||e.abort(),null==(t=this.keyLoader)||t.abort()},t.setElementaryStreamInfo=function(e,t,i,n,r,a){void 0===a&&(a=!1);var o=this.elementaryStreams,s=o[e];s?(s.startPTS=Math.min(s.startPTS,t),s.endPTS=Math.max(s.endPTS,i),s.startDTS=Math.min(s.startDTS,n),s.endDTS=Math.max(s.endDTS,r)):o[e]={startPTS:t,endPTS:i,startDTS:n,endDTS:r,partial:a}},t.clearElementaryStreamInfo=function(){var e=this.elementaryStreams;e[F]=null,e[R]=null,e[M]=null},i(e,[{key:"decryptdata",get:function(){if(!this.levelkeys&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){var e=this.levelkeys.identity;if(e)this._decryptdata=e.getDecryptData(this.sn);else{var t=Object.keys(this.levelkeys);if(1===t.length)return this._decryptdata=this.levelkeys[t[0]].getDecryptData(this.sn)}}return this._decryptdata}},{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!J(this.programDateTime))return null;var e=J(this.duration)?this.duration:0;return this.programDateTime+1e3*e}},{key:"encrypted",get:function(){var e;if(null!=(e=this._decryptdata)&&e.encrypted)return!0;if(this.levelkeys){var t=Object.keys(this.levelkeys),i=t.length;if(1<i||1===i&&this.levelkeys[t[0]].encrypted)return!0}return!1}}]),e}(D),ie=(s(N,I=D),i(N,[{key:"start",get:function(){return this.fragment.start+this.fragOffset}},{key:"end",get:function(){return this.start+this.duration}},{key:"loaded",get:function(){var e=this.elementaryStreams;return!!(e.audio||e.video||e.audiovideo)}}]),N),ne=(_.prototype.reloaded=function(e){if(!e)return this.advanced=!0,void(this.updated=!0);var t=this.lastPartSn-e.lastPartSn,i=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!i||!!t||!this.live,this.advanced=this.endSN>e.endSN||0<t||0==t&&0<i,this.updated||this.advanced?this.misses=Math.floor(.6*e.misses):this.misses=e.misses+1,this.availabilityDelay=e.availabilityDelay},i(_,[{key:"hasProgramDateTime",get:function(){return!!this.fragments.length&&J(this.fragments[this.fragments.length-1].programDateTime)}},{key:"levelTargetDuration",get:function(){return this.averagetargetduration||this.targetduration||10}},{key:"drift",get:function(){var e=this.driftEndTime-this.driftStartTime;return 0<e?1e3*(this.driftEnd-this.driftStart)/e:1}},{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function(){var e;return null!=(e=this.fragments)&&e.length?this.fragments[this.fragments.length-1].end:0}},{key:"age",get:function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].index:-1}},{key:"lastPartSn",get:function(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}]),_),B=e(void 0);function _(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}function N(e,t,i,n,r){var a;(a=I.call(this,i)||this).fragOffset=0,a.duration=0,a.gap=!1,a.independent=!1,a.relurl=void 0,a.fragment=void 0,a.index=void 0,a.stats=new O,a.duration=e.decimalFloatingPoint("DURATION"),a.gap=e.bool("GAP"),a.independent=e.bool("INDEPENDENT"),a.relurl=e.enumeratedString("URI"),a.fragment=t,a.index=n;var o=e.enumeratedString("BYTERANGE");return o&&a.setByteRange(o,r),r&&(a.fragOffset=r.fragOffset+r.duration),a}function V(e){var t;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=((t={})[F]=null,t[R]=null,t[M]=null,t),this.baseurl=e}function U(e,t){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,t){var i=t.attr;for(var n in i)if(Object.prototype.hasOwnProperty.call(e,n)&&e[n]!==i[n]){be.warn('DATERANGE tag attribute: "'+n+'" does not match for tags with ID: "'+e.ID+'"'),this._badValueForSameId=n;break}e=ge(new $({}),i,e)}if(this.attr=e,this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){var r=new Date(this.attr["END-DATE"]);J(r.getTime())&&(this._endDate=r)}}function j(e,t,i){return Uint8Array.prototype.slice?e.slice(t,i):new Uint8Array(Array.prototype.slice.call(e,t,i))}function H(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function G(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function z(e,t){for(var i=t,n=0;H(e,t);)n+=10,n+=Y(e,t+6),G(e,t+10)&&(n+=10),t+=n;if(0<n)return e.subarray(i,i+n)}function W(e){for(var t=K(e),i=0;i<t.length;i++){var n=t[i];if(Q(n))return oe(n)}}var q,Y=function(e,t){var i=0;return i=(127&e[t])<<21,i|=(127&e[t+1])<<14,(i|=(127&e[t+2])<<7)|127&e[t+3]},Q=function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},K=function(e){for(var t=0,i=[];H(e,t);){for(var n=Y(e,t+6),r=(t+=10)+n;t+8<r;){var a=(s=e.subarray(t),void 0,l=String.fromCharCode(s[0],s[1],s[2],s[3]),d=Y(s,4),{type:l,size:d,data:s.subarray(10,10+d)}),o=X(a);o&&i.push(o),t+=a.size+10}G(e,t)&&(t+=10)}var s,l,d;return i},X=function(e){return"PRIV"===e.type?Z(e):"W"===e.type[0]?ae(e):re(e)},Z=function(e){if(!(e.size<2)){var t=se(e.data,!0),i=new Uint8Array(e.data.subarray(t.length+1));return{key:e.type,info:t,data:i.buffer}}},re=function(e){if(!(e.size<2)){if("TXXX"===e.type){var t=1,i=se(e.data.subarray(t),!0);t+=i.length+1;var n=se(e.data.subarray(t));return{key:e.type,info:i,data:n}}var r=se(e.data.subarray(1));return{key:e.type,data:r}}},ae=function(e){if("WXXX"===e.type){if(e.size<2)return;var t=1,i=se(e.data.subarray(t),!0);t+=i.length+1;var n=se(e.data.subarray(t));return{key:e.type,info:i,data:n}}var r=se(e.data);return{key:e.type,data:r}},oe=function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),i=1&t[3],n=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return n/=45,i&&(n+=47721858.84),Math.round(n)}},se=function(e,t){void 0===t&&(t=!1);var i=function(){if(!navigator.userAgent.includes("PlayStation 4"))return q||void 0===self.TextDecoder||(q=new self.TextDecoder("utf-8")),q}();if(i){var n=i.decode(e);if(t){var r=n.indexOf("\0");return-1!==r?n.substring(0,r):n}return n.replace(/\0/g,"")}for(var a,o,s,l=e.length,d="",u=0;u<l;){if(0===(a=e[u++])&&t)return d;if(0!==a&&3!==a)switch(a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:d+=String.fromCharCode(a);break;case 12:case 13:o=e[u++],d+=String.fromCharCode((31&a)<<6|63&o);break;case 14:o=e[u++],s=e[u++],d+=String.fromCharCode((15&a)<<12|(63&o)<<6|(63&s)<<0)}}return d};function le(e){for(var t="",i=0;i<e.length;i++){var n=e[i].toString(16);n.length<2&&(n="0"+n),t+=n}return t}var de=Math.pow(2,32)-1,ue=[].push,ce={video:1,audio:2,id3:3,text:4};function he(e){return String.fromCharCode.apply(null,e)}function fe(e,t){var i=e[t]<<8|e[t+1];return i<0?65536+i:i}function pe(e,t){var i=Ee(e,t);return i<0?4294967296+i:i}function we(e,t){var i=pe(e,t);return(i*=Math.pow(2,32))+pe(e,t+4)}function Ee(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function Se(e,t,i){e[t]=i>>24,e[t+1]=i>>16&255,e[t+2]=i>>8&255,e[t+3]=255&i}function Ae(e,t){var i=[];if(!t.length)return i;for(var n=e.byteLength,r=0;r<n;){var a=pe(e,r),o=1<a?r+a:n;if(he(e.subarray(r+4,r+8))===t[0])if(1===t.length)i.push(e.subarray(r+8,o));else{var s=Ae(e.subarray(r+8,o),t.slice(1));s.length&&ue.apply(i,s)}r=o}return i}function Te(e){var t=[],i=e[0],n=8,r=pe(e,n);n+=4;var a=0,o=0;0===i?(a=pe(e,n),o=pe(e,n+4),n+=8):(a=we(e,n),o=we(e,n+8),n+=16),n+=2;var s=e.length+o,l=fe(e,n);n+=2;for(var d=0;d<l;d++){var u=n,c=pe(e,u);u+=4;var h=2147483647&c;if(1==(2147483648&c)>>>31)return be.warn("SIDX has hierarchical references (not supported)"),null;var f=pe(e,u);u+=4,t.push({referenceSize:h,subsegmentDuration:f,info:{duration:f/r,start:s,end:s+h-1}}),s+=h,n=u+=4}return{earliestPresentationTime:a,timescale:r,version:i,referencesCount:l,references:t}}function Le(e){for(var n=[],t=Ae(e,["moov","trak"]),i=0;i<t.length;i++){var r=t[i],a=Ae(r,["tkhd"])[0];if(a){var o=a[0],s=pe(a,0===o?12:20),l=Ae(r,["mdia","mdhd"])[0];if(l){var d=pe(l,0===(o=l[0])?12:20),u=Ae(r,["mdia","hdlr"])[0];if(u){var c=he(u.subarray(8,12)),h={soun:F,vide:R}[c];if(h){var f=Ce(Ae(r,["mdia","minf","stbl","stsd"])[0]);n[s]={timescale:d,type:h},n[h]=C({timescale:d,id:s},f)}}}}}return Ae(e,["moov","mvex","trex"]).forEach(function(e){var t=pe(e,4),i=n[t];i&&(i.default={duration:pe(e,12),flags:pe(e,20)})}),n}function Ce(e){var t=e.subarray(8),i=t.subarray(86),n=he(t.subarray(4,8)),r=n,a="enca"===n||"encv"===n;a&&Ae(Ae(t,[n])[0].subarray("enca"===n?28:78),["sinf"]).forEach(function(e){var t=Ae(e,["schm"])[0];if(t){var i=he(t.subarray(4,8));if("cbcs"===i||"cenc"===i){var n=Ae(e,["frma"])[0];n&&(r=he(n))}}});switch(r){case"avc1":case"avc2":case"avc3":case"avc4":var o=Ae(i,["avcC"])[0];r+="."+Pe(o[1])+Pe(o[2])+Pe(o[3]);break;case"mp4a":var s=Ae(Ae(t,[n])[0].subarray(28),["esds"])[0];if(s&&12<s.length){var l=4;if(3!==s[l++])break;l=ke(s,l),l+=2;var d=s[l++];if(128&d&&(l+=2),64&d&&(l+=s[l++]),4!==s[l++])break;l=ke(s,l);var u=s[l++];if(64!==u)break;if(r+="."+Pe(u),l+=12,5!==s[l++])break;l=ke(s,l);var c=s[l++],h=(248&c)>>3;31===h&&(h+=1+((7&c)<<3)+((224&s[l])>>5)),r+="."+h}break;case"hvc1":case"hev1":var f=Ae(i,["hvcC"])[0],p=f[1],g=["","A","B","C"][p>>6],v=31&p,m=pe(f,2),y=(32&p)>>5?"H":"L",b=f[12],w=f.subarray(6,12);r+="."+g+v,r+="."+m.toString(16).toUpperCase(),r+="."+y+b;for(var E="",S=w.length;S--;){var A=w[S];(A||E)&&(E="."+A.toString(16).toUpperCase()+E)}r+=E;break;case"dvh1":case"dvhe":var T=Ae(i,["dvcC"])[0],L=T[2]>>1&127,C=T[2]<<5&32|T[3]>>3&31;r+="."+xe(L)+"."+xe(C);break;case"vp09":var k=Ae(i,["vpcC"])[0],P=k[4],x=k[5],O=k[6]>>4&15;r+="."+xe(P)+"."+xe(x)+"."+xe(O);break;case"av01":var I=Ae(i,["av1C"])[0],R=I[1]>>>5,M=31&I[1],D=I[2]>>>7?"H":"M",F=(64&I[2])>>6,B=(32&I[2])>>5,_=2==R&&F?B?12:10:F?10:8,N=(16&I[2])>>4,V=(8&I[2])>>3,U=(4&I[2])>>2,j=3&I[2];r+="."+R+"."+xe(M)+D+"."+xe(_)+"."+N+"."+V+U+j+"."+xe(1)+"."+xe(1)+"."+xe(1)+".0"}return{codec:r,encrypted:a}}function ke(e,t){for(var i=t+5;128&e[t++]&&t<i;);return t}function Pe(e){return("0"+e.toString(16).toUpperCase()).slice(-2)}function xe(e){return(e<10?"0":"")+e}function Oe(e){var t=pe(e,0),i=8;1&t&&(i+=4),4&t&&(i+=4);for(var n=0,r=pe(e,4),a=0;a<r;a++)256&t&&(n+=pe(e,i),i+=4),512&t&&(i+=4),1024&t&&(i+=4),2048&t&&(i+=4);return n}function Ie(e,t){var i=new Uint8Array(e.length+t.length);return i.set(e),i.set(t,e.length),i}function Re(S,A){var T=[],L=A.samples,C=A.timescale,s=A.id,k=!1;return Ae(L,["moof"]).map(function(e){var E=e.byteOffset-8;Ae(e,["traf"]).map(function(o){var e=Ae(o,["tfdt"]).map(function(e){var t=e[0],i=pe(e,4);return 1===t&&(i*=Math.pow(2,32),i+=pe(e,8)),i/C})[0];return void 0!==e&&(S=e),Ae(o,["tfhd"]).map(function(e){var t=pe(e,4),i=16777215&pe(e,0),b=0,n=0!=(16&i),w=0,r=0!=(32&i),a=8;t===s&&(0!=(1&i)&&(a+=8),0!=(2&i)&&(a+=4),0!=(8&i)&&(b=pe(e,a),a+=4),n&&(w=pe(e,a),a+=4),r&&(a+=4),"video"===A.type&&(k=function(e){if(!e)return!1;var t=e.indexOf("."),i=t<0?e:e.substring(0,t);return"hvc1"===i||"hev1"===i||"dvh1"===i||"dvhe"===i}(A.codec)),Ae(o,["trun"]).map(function(e){var t=e[0],i=16777215&pe(e,0),n=0!=(1&i),r=0,a=0!=(4&i),o=0!=(256&i),s=0,l=0!=(512&i),d=0,u=0!=(1024&i),c=0!=(2048&i),h=0,f=pe(e,4),p=8;n&&(r=pe(e,p),p+=4),a&&(p+=4);for(var g=r+E,v=0;v<f;v++){if(o?(s=pe(e,p),p+=4):s=b,l?(d=pe(e,p),p+=4):d=w,u&&(p+=4),c&&(h=0===t?pe(e,p):Ee(e,p),p+=4),A.type===R)for(var m=0;m<d;){var y=pe(L,g);Me(k,L[g+=4])&&De(L.subarray(g,g+y),k?2:1,S+h/C,T),g+=y,m+=y+4}S+=s/C}}))})})}),T}function Me(e,t){if(e){var i=t>>1&63;return 39==i||40==i}return 6==(31&t)}function De(e,t,i,n){var r=Fe(e),a=0;a+=t;for(var o=0,s=0,l=0;a<r.length;){o=0;do{if(a>=r.length)break;o+=l=r[a++]}while(255===l);s=0;do{if(a>=r.length)break;s+=l=r[a++]}while(255===l);var d=r.length-a,u=a;if(s<d)a+=s;else if(d<s){be.error("Malformed SEI payload. "+s+" is too small, only "+d+" bytes left to parse.");break}if(4===o){if(181===r[u++]){var c=fe(r,u);if(u+=2,49===c){var h=pe(r,u);if(u+=4,1195456820===h){var f=r[u++];if(3===f){var p=r[u++],g=64&p,v=g?2+3*(31&p):0,m=new Uint8Array(v);if(g){m[0]=p;for(var y=1;y<v;y++)m[y]=r[u++]}n.push({type:f,payloadType:o,pts:i,bytes:m})}}}}}else if(5===o&&16<s){for(var b=[],w=0;w<16;w++){var E=r[u++].toString(16);b.push(1==E.length?"0"+E:E),3!==w&&5!==w&&7!==w&&9!==w||b.push("-")}for(var S=s-16,A=new Uint8Array(S),T=0;T<S;T++)A[T]=r[u++];n.push({payloadType:o,pts:i,uuid:b.join(""),userData:se(A),userDataBytes:A})}}}function Fe(e){for(var t=e.byteLength,i=[],n=1;n<t-2;)0===e[n]&&0===e[n+1]&&3===e[n+2]?(i.push(n+2),n+=2):n++;if(0===i.length)return e;var r=t-i.length,a=new Uint8Array(r),o=0;for(n=0;n<r;o++,n++)o===i[0]&&(o++,i.shift()),a[n]=e[o];return a}var Be=function(){function i(e,t,i,n,r){void 0===n&&(n=[1]),void 0===r&&(r=null),this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=i,this.keyFormatVersions=n,this.iv=r,this.encrypted=!!e&&"NONE"!==e,this.isCommonEncryption=this.encrypted&&"AES-128"!==e}i.clearKeyUriToKeyIdMap=function(){};var e=i.prototype;return e.isSupported=function(){if(this.method){if("AES-128"===this.method||"NONE"===this.method)return!0;if("identity"===this.keyFormat)return"SAMPLE-AES"===this.method}return!1},e.getDecryptData=function(e){if(!this.encrypted||!this.uri)return null;if("AES-128"!==this.method||!this.uri||this.iv)return this;"number"!=typeof e&&("AES-128"!==this.method||this.iv||be.warn('missing IV for initialization segment with method="'+this.method+'" - compliance issue'),e=0);var t=function(e){for(var t=new Uint8Array(16),i=12;i<16;i++)t[i]=e>>8*(15-i)&255;return t}(e);return new i(this.method,this.uri,"identity",this.keyFormatVersions,t)},i}();function _e(e){if(void 0===e&&(e=!0),"undefined"!=typeof self)return(e||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}var Ne={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function Ve(e,t,i){return void 0===i&&(i=!0),!e.split(",").some(function(e){return!Ue(e,t,i)})}function Ue(e,t,i){var n;void 0===i&&(i=!0);var r=_e(i);return null!=(n=null==r?void 0:r.isTypeSupported(je(e,t)))&&n}function je(e,t){return t+'/mp4;codecs="'+e+'"'}function He(e){if(e){var t=e.substring(0,4);return Ne.video[t]}return 2}function Ge(e){return e.split(",").reduce(function(e,t){var i=Ne.video[t];return i?(2*i+e)/(e?3:2):(Ne.audio[t]+e)/(e?2:1)},0)}var ze={},We=/flac|opus/i;function qe(e,t){return void 0===t&&(t=!0),e.replace(We,function(e){return function(e,t){if(void 0===t&&(t=!0),ze[e])return ze[e];for(var i={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"]}[e],n=0;n<i.length;n++)if(Ue(i[n],"audio",t))return ze[e]=i[n],i[n];return e}(e.toLowerCase(),t)})}function Ye(e,t){return e&&"mp4a"!==e?e:t?t.split(",")[0]:t}var Qe=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,Ke=/#EXT-X-MEDIA:(.*)/g,Xe=/^#EXT(?:INF|-X-TARGETDURATION):/m,Ze=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),Je=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),$e=(et.findGroup=function(e,t){for(var i=0;i<e.length;i++){var n=e[i];if(n.id===t)return n}},et.resolve=function(e,t){return y.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},et.isMediaPlaylist=function(e){return Xe.test(e)},et.parseMasterPlaylist=function(e,t){var i,n={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:!1},r=[];for(Qe.lastIndex=0;null!=(i=Qe.exec(e));)if(i[1]){var a,o=new $(i[1]),s=i[2],l={attrs:o,bitrate:o.decimalInteger("BANDWIDTH")||o.decimalInteger("AVERAGE-BANDWIDTH"),name:o.NAME,url:et.resolve(s,t)},d=o.decimalResolution("RESOLUTION");d&&(l.width=d.width,l.height=d.height),nt(o.CODECS,l),null!=(a=l.unknownCodecs)&&a.length||r.push(l),n.levels.push(l)}else if(i[3]){var u=i[3],c=i[4];switch(u){case"SESSION-DATA":var h=new $(c),f=h["DATA-ID"];f&&(null===n.sessionData&&(n.sessionData={}),n.sessionData[f]=h);break;case"SESSION-KEY":var p=tt(c,t);p.encrypted&&p.isSupported()?(null===n.sessionKeys&&(n.sessionKeys=[]),n.sessionKeys.push(p)):be.warn('[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "'+c+'"');break;case"DEFINE":break;case"CONTENT-STEERING":var g=new $(c);n.contentSteering={uri:et.resolve(g["SERVER-URI"],t),pathwayId:g["PATHWAY-ID"]||"."};break;case"START":n.startTimeOffset=it(c)}}var v=0<r.length&&r.length<n.levels.length;return n.levels=v?r:n.levels,0===n.levels.length&&(n.playlistParsingError=new Error("no levels found in manifest")),n},et.parseMasterPlaylistMedia=function(e,t,i){var n,r={},a=i.levels,o={AUDIO:a.map(function(e){return{id:e.attrs.AUDIO,audioCodec:e.audioCodec}}),SUBTITLES:a.map(function(e){return{id:e.attrs.SUBTITLES,textCodec:e.textCodec}}),"CLOSED-CAPTIONS":[]},s=0;for(Ke.lastIndex=0;null!==(n=Ke.exec(e));){var l=new $(n[1]),d=l.TYPE;if(d){var u=o[d],c=r[d]||[];r[d]=c;var h=l.LANGUAGE,f=l["ASSOC-LANGUAGE"],p=l.CHANNELS,g=l.CHARACTERISTICS,v=l["INSTREAM-ID"],m={attrs:l,bitrate:0,id:s++,groupId:l["GROUP-ID"]||"",name:l.NAME||h||"",type:d,default:l.bool("DEFAULT"),autoselect:l.bool("AUTOSELECT"),forced:l.bool("FORCED"),lang:h,url:l.URI?et.resolve(l.URI,t):""};if(f&&(m.assocLang=f),p&&(m.channels=p),g&&(m.characteristics=g),v&&(m.instreamId=v),null!=u&&u.length){var y=et.findGroup(u,m.groupId)||u[0];rt(m,y,"audioCodec"),rt(m,y,"textCodec")}c.push(m)}}return r},et.parseLevelPlaylist=function(e,t,i,n,r,a){var o,s,l,d=new ne(t),u=d.fragments,c=null,h=0,f=0,p=0,g=0,v=null,m=new te(n,t),y=-1,b=!1,w=null;for(Ze.lastIndex=0,d.m3u8=e,d.hasVariableRefs=!1;null!==(o=Ze.exec(e));){b&&(b=!1,(m=new te(n,t)).start=p,m.sn=h,m.cc=g,m.level=i,c&&(m.initSegment=c,m.rawProgramDateTime=c.rawProgramDateTime,c.rawProgramDateTime=null,w&&(m.setByteRange(w),w=null)));var E=o[1];if(E){m.duration=parseFloat(E);var S=(" "+o[2]).slice(1);m.title=S||null,m.tagList.push(S?["INF",E,S]:["INF",E])}else if(o[3]){if(J(m.duration)){m.start=p,l&&st(m,l,d),m.sn=h,m.level=i,m.cc=g,u.push(m);var A=(" "+o[3]).slice(1);m.relurl=A,at(m,v),p+=(v=m).duration,h++,b=!(f=0)}}else if(o[4]){var T=(" "+o[4]).slice(1);v?m.setByteRange(T,v):m.setByteRange(T)}else if(o[5])m.rawProgramDateTime=(" "+o[5]).slice(1),m.tagList.push(["PROGRAM-DATE-TIME",m.rawProgramDateTime]),-1===y&&(y=u.length);else{if(!(o=o[0].match(Je))){be.warn("No matches on slow regex match for level playlist!");continue}for(s=1;s<o.length&&void 0===o[s];s++);var L=(" "+o[s]).slice(1),C=(" "+o[s+1]).slice(1),k=o[s+2]?(" "+o[s+2]).slice(1):"";switch(L){case"PLAYLIST-TYPE":d.type=C.toUpperCase();break;case"MEDIA-SEQUENCE":h=d.startSN=parseInt(C);break;case"SKIP":var P=new $(C),x=P.decimalInteger("SKIPPED-SEGMENTS");if(J(x)){for(var O=d.skippedSegments=x;O--;)u.unshift(null);h+=x}var I=P.enumeratedString("RECENTLY-REMOVED-DATERANGES");I&&(d.recentlyRemovedDateranges=I.split("\t"));break;case"TARGETDURATION":d.targetduration=Math.max(parseInt(C),1);break;case"VERSION":d.version=parseInt(C);break;case"INDEPENDENT-SEGMENTS":case"EXTM3U":case"DEFINE":break;case"ENDLIST":d.live=!1;break;case"#":(C||k)&&m.tagList.push(k?[C,k]:[C]);break;case"DISCONTINUITY":g++,m.tagList.push(["DIS"]);break;case"GAP":m.gap=!0,m.tagList.push([L]);break;case"BITRATE":m.tagList.push([L,C]);break;case"DATERANGE":var R=new $(C),M=new ee(R,d.dateRanges[R.ID]);M.isValid||d.skippedSegments?d.dateRanges[M.id]=M:be.warn('Ignoring invalid DATERANGE tag: "'+C+'"'),m.tagList.push(["EXT-X-DATERANGE",C]);break;case"DISCONTINUITY-SEQUENCE":g=parseInt(C);break;case"KEY":var D=tt(C,t);if(D.isSupported()){if("NONE"===D.method){l=void 0;break}(l=l||{})[D.keyFormat]&&(l=ge({},l)),l[D.keyFormat]=D}else be.warn('[Keys] Ignoring invalid EXT-X-KEY tag: "'+C+'"');break;case"START":d.startTimeOffset=it(C);break;case"MAP":var F=new $(C);if(m.duration){var B=new te(n,t);ot(B,F,i,l),c=B,(m.initSegment=c).rawProgramDateTime&&!m.rawProgramDateTime&&(m.rawProgramDateTime=c.rawProgramDateTime)}else{var _=m.byteRangeEndOffset;if(_){var N=m.byteRangeStartOffset;w=_-N+"@"+N}else w=null;ot(m,F,i,l),c=m,b=!0}break;case"SERVER-CONTROL":var V=new $(C);d.canBlockReload=V.bool("CAN-BLOCK-RELOAD"),d.canSkipUntil=V.optionalFloat("CAN-SKIP-UNTIL",0),d.canSkipDateRanges=0<d.canSkipUntil&&V.bool("CAN-SKIP-DATERANGES"),d.partHoldBack=V.optionalFloat("PART-HOLD-BACK",0),d.holdBack=V.optionalFloat("HOLD-BACK",0);break;case"PART-INF":var U=new $(C);d.partTarget=U.decimalFloatingPoint("PART-TARGET");break;case"PART":var j=d.partList;j=j||(d.partList=[]);var H=0<f?j[j.length-1]:void 0,G=f++,z=new $(C),W=new ie(z,m,t,G,H);j.push(W),m.duration+=W.duration;break;case"PRELOAD-HINT":var q=new $(C);d.preloadHint=q;break;case"RENDITION-REPORT":var Y=new $(C);d.renditionReports=d.renditionReports||[],d.renditionReports.push(Y);break;default:be.warn("line parsed but not handled: "+o)}}}v&&!v.relurl?(u.pop(),p-=v.duration,d.partList&&(d.fragmentHint=v)):d.partList&&(at(m,v),m.cc=g,d.fragmentHint=m,l&&st(m,l,d));var Q=u.length,K=u[0],X=u[Q-1];if(0<(p+=d.skippedSegments*d.targetduration)&&Q&&X){d.averagetargetduration=p/Q;var Z=X.sn;d.endSN="initSegment"!==Z?Z:0,d.live||(X.endList=!0),K&&(d.startCC=K.cc)}else d.endSN=0,d.startCC=0;return d.fragmentHint&&(p+=d.fragmentHint.duration),d.totalduration=p,d.endCC=g,0<y&&function(e,t){for(var i=e[t],n=t;n--;){var r=e[n];if(!r)return;r.programDateTime=i.programDateTime-1e3*r.duration,i=r}}(u,y),d},et);function et(){}function tt(e,t){var i,n,r=new $(e),a=null!=(i=r.METHOD)?i:"",o=r.URI,s=r.hexadecimalInteger("IV"),l=r.KEYFORMATVERSIONS,d=null!=(n=r.KEYFORMAT)?n:"identity";o&&r.IV&&!s&&be.error("Invalid IV: "+r.IV);var u=o?$e.resolve(o,t):"",c=(l||"1").split("/").map(Number).filter(Number.isFinite);return new Be(a,u,d,c,s)}function it(e){var t=new $(e).decimalFloatingPoint("TIME-OFFSET");return J(t)?t:null}function nt(e,i){var r=(e||"").split(/[ ,]+/).filter(function(e){return e});["video","audio","text"].forEach(function(n){var t=r.filter(function(e){return t=e,!!(i=Ne[n])&&!!i[t.slice(0,4)];var t,i});t.length&&(i[n+"Codec"]=t.join(","),r=r.filter(function(e){return-1===t.indexOf(e)}))}),i.unknownCodecs=r}function rt(e,t,i){var n=t[i];n&&(e[i]=n)}function at(e,t){e.rawProgramDateTime?e.programDateTime=Date.parse(e.rawProgramDateTime):null!=t&&t.programDateTime&&(e.programDateTime=t.endProgramDateTime),J(e.programDateTime)||(e.programDateTime=null,e.rawProgramDateTime=null)}function ot(e,t,i,n){e.relurl=t.URI,t.BYTERANGE&&e.setByteRange(t.BYTERANGE),e.level=i,e.sn="initSegment",n&&(e.levelkeys=n),e.initSegment=null}function st(e,t,i){e.levelkeys=t;var n=i.encryptedFragments;n.length&&n[n.length-1].levelkeys===t||!Object.keys(t).some(function(e){return t[e].isCommonEncryption})||n.push(e)}var lt="manifest",dt="level",ut="audioTrack",ct="subtitleTrack",ht="main",ft="audio",pt="subtitle";function gt(e){switch(e.type){case ut:return ft;case ct:return pt;default:return ht}}function vt(e,t){var i=e.url;return void 0!==i&&0!==i.indexOf("data:")||(i=t.url),i}var mt,yt=((mt=bt.prototype).startLoad=function(e){},mt.stopLoad=function(){this.destroyInternalLoaders()},mt.registerListeners=function(){var e=this.hls;e.on(ve.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ve.LEVEL_LOADING,this.onLevelLoading,this),e.on(ve.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(ve.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},mt.unregisterListeners=function(){var e=this.hls;e.off(ve.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ve.LEVEL_LOADING,this.onLevelLoading,this),e.off(ve.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(ve.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},mt.createInternalLoader=function(e){var t=this.hls.config,i=t.pLoader,n=t.loader,r=new(i||n)(t);return this.loaders[e.type]=r},mt.getInternalLoader=function(e){return this.loaders[e.type]},mt.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},mt.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}},mt.destroy=function(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()},mt.onManifestLoading=function(e,t){var i=t.url;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:lt,url:i,deliveryDirectives:null})},mt.onLevelLoading=function(e,t){var i=t.id,n=t.level,r=t.pathwayId,a=t.url,o=t.deliveryDirectives;this.load({id:i,level:n,pathwayId:r,responseType:"text",type:dt,url:a,deliveryDirectives:o})},mt.onAudioTrackLoading=function(e,t){var i=t.id,n=t.groupId,r=t.url,a=t.deliveryDirectives;this.load({id:i,groupId:n,level:null,responseType:"text",type:ut,url:r,deliveryDirectives:a})},mt.onSubtitleTrackLoading=function(e,t){var i=t.id,n=t.groupId,r=t.url,a=t.deliveryDirectives;this.load({id:i,groupId:n,level:null,responseType:"text",type:ct,url:r,deliveryDirectives:a})},mt.load=function(e){var t,i,n,o=this,r=this.hls.config,a=this.getInternalLoader(e);if(a){var s=a.context;if(s&&s.url===e.url&&s.level===e.level)return void be.trace("[playlist-loader]: playlist request ongoing");be.log("[playlist-loader]: aborting previous loader for type: "+e.type),a.abort()}if(i=e.type===lt?r.manifestLoadPolicy.default:ge({},r.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),a=this.createInternalLoader(e),J(null==(t=e.deliveryDirectives)?void 0:t.part)&&(e.type===dt&&null!==e.level?n=this.hls.levels[e.level].details:e.type===ut&&null!==e.id?n=this.hls.audioTracks[e.id].details:e.type===ct&&null!==e.id&&(n=this.hls.subtitleTracks[e.id].details),n)){var l=n.partTarget,d=n.targetduration;if(l&&d){var u=1e3*Math.max(3*l,.8*d);i=ge({},i,{maxTimeToFirstByteMs:Math.min(u,i.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(u,i.maxTimeToFirstByteMs)})}}var c=i.errorRetry||i.timeoutRetry||{},h={loadPolicy:i,timeout:i.maxLoadTimeMs,maxRetry:c.maxNumRetry||0,retryDelay:c.retryDelayMs||0,maxRetryDelay:c.maxRetryDelayMs||0},f={onSuccess:function(e,t,i,n){var r=o.getInternalLoader(i);o.resetInternalLoader(i.type);var a=e.data;0===a.indexOf("#EXTM3U")?(t.parsing.start=performance.now(),$e.isMediaPlaylist(a)?o.handleTrackOrLevelPlaylist(e,t,i,n||null,r):o.handleMasterPlaylist(e,t,i,n)):o.handleManifestParsingError(e,i,new Error("no EXTM3U delimiter"),n||null,t)},onError:function(e,t,i,n){o.handleNetworkError(t,i,!1,e,n)},onTimeout:function(e,t,i){o.handleNetworkError(t,i,!0,void 0,e)}};a.load(e,h,f)},mt.handleMasterPlaylist=function(e,t,i,n){var r=this.hls,a=e.data,o=vt(e,i),s=$e.parseMasterPlaylist(a,o);if(s.playlistParsingError)this.handleManifestParsingError(e,i,s.playlistParsingError,n,t);else{var l=s.contentSteering,d=s.levels,u=s.sessionData,c=s.sessionKeys,h=s.startTimeOffset,f=s.variableList;this.variableList=f;var p=$e.parseMasterPlaylistMedia(a,o,s),g=p.AUDIO,v=void 0===g?[]:g,m=p.SUBTITLES,y=p["CLOSED-CAPTIONS"];v.length&&(v.some(function(e){return!e.url})||!d[0].audioCodec||d[0].attrs.AUDIO||(be.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),v.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new $({}),bitrate:0,url:""}))),r.trigger(ve.MANIFEST_LOADED,{levels:d,audioTracks:v,subtitles:m,captions:y,contentSteering:l,url:o,stats:t,networkDetails:n,sessionData:u,sessionKeys:c,startTimeOffset:h,variableList:f})}},mt.handleTrackOrLevelPlaylist=function(e,t,i,n,r){var a=this.hls,o=i.id,s=i.level,l=i.type,d=vt(e,i),u=J(s)?s:J(o)?o:0,c=gt(i),h=$e.parseLevelPlaylist(e.data,d,u,c,0,this.variableList);if(l===lt){var f={attrs:new $({}),bitrate:0,details:h,name:"",url:d};a.trigger(ve.MANIFEST_LOADED,{levels:[f],audioTracks:[],url:d,stats:t,networkDetails:n,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),i.levelDetails=h,this.handlePlaylistLoaded(h,e,t,i,n,r)},mt.handleManifestParsingError=function(e,t,i,n,r){this.hls.trigger(ve.ERROR,{type:me.NETWORK_ERROR,details:ye.MANIFEST_PARSING_ERROR,fatal:t.type===lt,url:e.url,err:i,error:i,reason:i.message,response:e,context:t,networkDetails:n,stats:r})},mt.handleNetworkError=function(e,t,i,n,r){void 0===i&&(i=!1);var a="A network "+(i?"timeout":"error"+(n?" (status "+n.code+")":""))+" occurred while loading "+e.type;e.type===dt?a+=": "+e.level+" id: "+e.id:e.type!==ut&&e.type!==ct||(a+=" id: "+e.id+' group-id: "'+e.groupId+'"');var o=new Error(a);be.warn("[playlist-loader]: "+a);var s=ye.UNKNOWN,l=!1,d=this.getInternalLoader(e);switch(e.type){case lt:s=i?ye.MANIFEST_LOAD_TIMEOUT:ye.MANIFEST_LOAD_ERROR,l=!0;break;case dt:s=i?ye.LEVEL_LOAD_TIMEOUT:ye.LEVEL_LOAD_ERROR,l=!1;break;case ut:s=i?ye.AUDIO_TRACK_LOAD_TIMEOUT:ye.AUDIO_TRACK_LOAD_ERROR,l=!1;break;case ct:s=i?ye.SUBTITLE_TRACK_LOAD_TIMEOUT:ye.SUBTITLE_LOAD_ERROR,l=!1}d&&this.resetInternalLoader(e.type);var u={type:me.NETWORK_ERROR,details:s,fatal:l,url:e.url,loader:d,context:e,error:o,networkDetails:t,stats:r};if(n){var c=(null==t?void 0:t.url)||e.url;u.response=C({url:c,data:void 0},n)}this.hls.trigger(ve.ERROR,u)},mt.handlePlaylistLoaded=function(e,t,i,n,r,a){var o=this.hls,s=n.type,l=n.level,d=n.id,u=n.groupId,c=n.deliveryDirectives,h=vt(t,n),f=gt(n),p="number"==typeof n.level&&f===ht?l:void 0;if(e.fragments.length){e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration"));var g=e.playlistParsingError;if(g)o.trigger(ve.ERROR,{type:me.NETWORK_ERROR,details:ye.LEVEL_PARSING_ERROR,fatal:!1,url:h,error:g,reason:g.message,response:t,context:n,level:p,parent:f,networkDetails:r,stats:i});else switch(e.live&&a&&(a.getCacheAge&&(e.ageHeader=a.getCacheAge()||0),a.getCacheAge&&!isNaN(e.ageHeader)||(e.ageHeader=0)),s){case lt:case dt:o.trigger(ve.LEVEL_LOADED,{details:e,level:p||0,id:d||0,stats:i,networkDetails:r,deliveryDirectives:c});break;case ut:o.trigger(ve.AUDIO_TRACK_LOADED,{details:e,id:d||0,groupId:u||"",stats:i,networkDetails:r,deliveryDirectives:c});break;case ct:o.trigger(ve.SUBTITLE_TRACK_LOADED,{details:e,id:d||0,groupId:u||"",stats:i,networkDetails:r,deliveryDirectives:c})}}else{var v=new Error("No Segments found in Playlist");o.trigger(ve.ERROR,{type:me.NETWORK_ERROR,details:ye.LEVEL_EMPTY_ERROR,fatal:!1,url:h,error:v,reason:v.message,response:t,context:n,level:p,parent:f,networkDetails:r,stats:i})}},bt);function bt(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.hls=e,this.registerListeners()}function wt(e,t){var i;try{i=new Event("addtrack")}catch(e){(i=document.createEvent("Event")).initEvent("addtrack",!1,!1)}i.track=e,t.dispatchEvent(i)}var Et="org.id3",St="https://aomedia.org/emsg/ID3";function At(){if("undefined"!=typeof self)return self.VTTCue||self.TextTrackCue}function Tt(t,i,n,r,a){var o=new t(i,n,"");try{o.value=r,a&&(o.type=a)}catch(e){o=new t(i,n,JSON.stringify(a?C({type:a},r):r))}return o}var Lt=function(){var e=At();try{e&&new e(0,Number.POSITIVE_INFINITY,"")}catch(e){return Number.MAX_VALUE}return Number.POSITIVE_INFINITY}();function Ct(e,t){return e.getTime()/1e3-t}var kt,Pt,xt=((Pt=Dt.prototype).destroy=function(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null},Pt._registerListeners=function(){var e=this.hls;e.on(ve.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(ve.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(ve.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ve.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(ve.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(ve.LEVEL_UPDATED,this.onLevelUpdated,this)},Pt._unregisterListeners=function(){var e=this.hls;e.off(ve.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(ve.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(ve.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ve.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(ve.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(ve.LEVEL_UPDATED,this.onLevelUpdated,this)},Pt.onMediaAttached=function(e,t){this.media=t.media},Pt.onMediaDetaching=function(){this.id3Track&&(function(e){var t=e.mode;if("disabled"===t&&(e.mode="hidden"),e.cues)for(var i=e.cues.length;i--;)e.removeCue(e.cues[i]);"disabled"===t&&(e.mode=t)}(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})},Pt.onManifestLoading=function(){this.dateRangeCuesAppended={}},Pt.createTrack=function(e){var t=this.getID3Track(e.textTracks);return t.mode="hidden",t},Pt.getID3Track=function(e){if(this.media){for(var t=0;t<e.length;t++){var i=e[t];if("metadata"===i.kind&&"id3"===i.label)return wt(i,this.media),i}return this.media.addTextTrack("metadata","id3")}},Pt.onFragParsingMetadata=function(e,t){if(this.media){var i=this.hls.config,n=i.enableEmsgMetadataCues,r=i.enableID3MetadataCues;if(n||r){var a=t.samples;this.id3Track||(this.id3Track=this.createTrack(this.media));var o=At();if(o)for(var s=0;s<a.length;s++){var l=a[s].type;if((l!==St||n)&&r){var d=K(a[s].data);if(d){var u=a[s].pts,c=u+a[s].duration;Lt<c&&(c=Lt),c-u<=0&&(c=u+.25);for(var h=0;h<d.length;h++){var f=d[h];if(!Q(f)){this.updateId3CueEnds(u,l);var p=Tt(o,u,c,f,l);p&&this.id3Track.addCue(p)}}}}}}}},Pt.updateId3CueEnds=function(e,t){var i,n=null==(i=this.id3Track)?void 0:i.cues;if(n)for(var r=n.length;r--;){var a=n[r];a.type===t&&a.startTime<e&&a.endTime===Lt&&(a.endTime=e)}},Pt.onBufferFlushing=function(e,t){var i=t.startOffset,n=t.endOffset,r=t.type,a=this.id3Track,o=this.hls;if(o){var s=o.config,l=s.enableEmsgMetadataCues,d=s.enableID3MetadataCues;a&&(l||d)&&function(e,t,i,n){var r=e.mode;if("disabled"===r&&(e.mode="hidden"),e.cues&&0<e.cues.length)for(var a=function(e,t,i){var n=[],r=function(e,t){if(t<e[0].startTime)return 0;var i=e.length-1;if(t>e[i].endTime)return-1;for(var n=0,r=i;n<=r;){var a=Math.floor((r+n)/2);if(t<e[a].startTime)r=a-1;else{if(!(t>e[a].startTime&&n<i))return a;n=a+1}}return e[n].startTime-t<t-e[r].startTime?n:r}(e,t);if(-1<r)for(var a=r,o=e.length;a<o;a++){var s=e[a];if(s.startTime>=t&&s.endTime<=i)n.push(s);else if(s.startTime>i)return n}return n}(e.cues,t,i),o=0;o<a.length;o++)n&&!n(a[o])||e.removeCue(a[o]);"disabled"===r&&(e.mode=r)}(a,i,n,"audio"===r?function(e){return e.type===Et&&d}:"video"===r?function(e){return e.type===St&&l}:function(e){return e.type===Et&&d||e.type===St&&l})}},Pt.onLevelUpdated=function(e,t){var y=this,i=t.details;if(this.media&&i.hasProgramDateTime&&this.hls.config.enableDateRangeMetadataCues){var b=this.dateRangeCuesAppended,n=this.id3Track,w=i.dateRanges,E=Object.keys(w);if(n)for(var r=Object.keys(b).filter(function(e){return!E.includes(e)}),a=function(){var t=r[o];Object.keys(b[t].cues).forEach(function(e){n.removeCue(b[t].cues[e])}),delete b[t]},o=r.length;o--;)a();var s=i.fragments[i.fragments.length-1];if(0!==E.length&&J(null==s?void 0:s.programDateTime)){this.id3Track||(this.id3Track=this.createTrack(this.media));for(var S=s.programDateTime/1e3-s.start,A=At(),l=function(){var e,t=E[T],n=w[t],i=Ct(n.startDate,S),r=b[t],a=(null==r?void 0:r.cues)||{},o=(null==r?void 0:r.durationKnown)||!1,s=Lt,l=n.endDate;if(l)s=Ct(l,S),o=!0;else if(n.endOnNext&&!o){var d=E.reduce(function(e,t){if(t!==n.id){var i=w[t];if(i.class===n.class&&i.startDate>n.startDate&&(!e||n.startDate<e.startDate))return i}return e},null);d&&(s=Ct(d.startDate,S),o=!0)}for(var u,c,h=Object.keys(n.attr),f=0;f<h.length;f++){var p=h[f];if("ID"!==(c=p)&&"CLASS"!==c&&"START-DATE"!==c&&"DURATION"!==c&&"END-DATE"!==c&&"END-ON-NEXT"!==c){var g=a[p];if(g)o&&!r.durationKnown&&(g.endTime=s);else if(A){var v=n.attr[p];"SCTE35-OUT"!==(e=p)&&"SCTE35-IN"!==e||(u=v,v=Uint8Array.from(u.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer);var m=Tt(A,i,s,{key:p,data:v},"com.apple.quicktime.HLS");m&&(m.id=t,y.id3Track.addCue(m),a[p]=m)}}}b[t]={cues:a,dateRange:n,durationKnown:o}},T=0;T<E.length;T++)l()}}},Dt),Ot=((kt=Mt.prototype).destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null},kt.registerListeners=function(){this.hls.on(ve.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(ve.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(ve.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(ve.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(ve.ERROR,this.onError,this)},kt.unregisterListeners=function(){this.hls.off(ve.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(ve.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.off(ve.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(ve.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.off(ve.ERROR,this.onError,this)},kt.onMediaAttached=function(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)},kt.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)},kt.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0},kt.onLevelUpdated=function(e,t){var i=t.details;(this.levelDetails=i).advanced&&this.timeupdate(),!i.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)},kt.onError=function(e,t){var i;t.details===ye.BUFFER_STALLED_ERROR&&(this.stallCount++,null!=(i=this.levelDetails)&&i.live&&be.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))},kt.timeupdate=function(){var e=this.media,t=this.levelDetails;if(e&&t){this.currentTime=e.currentTime;var i=this.computeLatency();if(null!==i){this._latency=i;var n=this.config,r=n.lowLatencyMode,a=n.maxLiveSyncPlaybackRate;if(r&&1!==a&&t.live){var o=this.targetLatency;if(null!==o){var s=i-o;if(s<Math.min(this.maxLatency,o+t.targetduration)&&.05<s&&1<this.forwardBufferLength){var l=Math.min(2,Math.max(1,a)),d=Math.round(2/(1+Math.exp(-.75*s-this.edgeStalled))*20)/20;e.playbackRate=Math.min(l,Math.max(1,d))}else 1!==e.playbackRate&&0!==e.playbackRate&&(e.playbackRate=1)}}}}},kt.estimateLiveEdge=function(){var e=this.levelDetails;return null===e?null:e.edge+e.age},kt.computeLatency=function(){var e=this.estimateLiveEdge();return null===e?null:e-this.currentTime},i(Mt,[{key:"latency",get:function(){return this._latency||0}},{key:"maxLatency",get:function(){var e=this.config,t=this.levelDetails;return void 0!==e.liveMaxLatencyDuration?e.liveMaxLatencyDuration:t?e.liveMaxLatencyDurationCount*t.targetduration:0}},{key:"targetLatency",get:function(){var e=this.levelDetails;if(null===e)return null;var t=e.holdBack,i=e.partHoldBack,n=e.targetduration,r=this.config,a=r.liveSyncDuration,o=r.liveSyncDurationCount,s=r.lowLatencyMode,l=this.hls.userConfig,d=s&&i||t;(l.liveSyncDuration||l.liveSyncDurationCount||0===d)&&(d=void 0!==a?a:o*n);var u=n;return d+Math.min(1*this.stallCount,u)}},{key:"liveSyncPosition",get:function(){var e=this.estimateLiveEdge(),t=this.targetLatency,i=this.levelDetails;if(null===e||null===t||null===i)return null;var n=i.edge,r=e-t-this.edgeStalled,a=n-i.totalduration,o=n-(this.config.lowLatencyMode&&i.partTarget||i.targetduration);return Math.min(Math.max(a,r),o)}},{key:"drift",get:function(){var e=this.levelDetails;return null===e?1:e.drift}},{key:"edgeStalled",get:function(){var e=this.levelDetails;if(null===e)return 0;var t=3*(this.config.lowLatencyMode&&e.partTarget||e.targetduration);return Math.max(e.age-t,0)}},{key:"forwardBufferLength",get:function(){var e=this.media,t=this.levelDetails;if(!e||!t)return 0;var i=e.buffered.length;return(i?e.buffered.end(i-1):t.edge)-this.currentTime}}]),Mt),It=["NONE","TYPE-0","TYPE-1",null],Rt=["SDR","PQ","HLG"];function Mt(e){var t=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=function(){return t.timeupdate()},this.hls=e,this.config=e.config,this.registerListeners()}function Dt(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=e,this._registerListeners()}function Ft(e){var t=e.canSkipUntil,i=e.canSkipDateRanges,n=e.age;return t&&n<t/2?i?"v2":"YES":""}var Bt,_t=(Ut.prototype.addDirectives=function(e){var t=new self.URL(e);return void 0!==this.msn&&t.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href},Ut),Nt=((Bt=Vt.prototype).hasAudioGroup=function(e){return jt(this._audioGroups,e)},Bt.hasSubtitleGroup=function(e){return jt(this._subtitleGroups,e)},Bt.addGroupId=function(e,t){if(t)if("audio"===e){var i=this._audioGroups;-1===(i=i||(this._audioGroups=[])).indexOf(t)&&i.push(t)}else if("text"===e){var n=this._subtitleGroups;-1===(n=n||(this._subtitleGroups=[])).indexOf(t)&&n.push(t)}},Bt.addFallback=function(){},i(Vt,[{key:"maxBitrate",get:function(){return Math.max(this.realBitrate,this.bitrate)}},{key:"averageBitrate",get:function(){return this._avgBitrate||this.realBitrate||this.bitrate}},{key:"attrs",get:function(){return this._attrs[0]}},{key:"codecs",get:function(){return this.attrs.CODECS||""}},{key:"pathwayId",get:function(){return this.attrs["PATHWAY-ID"]||"."}},{key:"videoRange",get:function(){return this.attrs["VIDEO-RANGE"]||"SDR"}},{key:"score",get:function(){return this.attrs.optionalFloat("SCORE",0)}},{key:"uri",get:function(){return this.url[0]||""}},{key:"audioGroups",get:function(){return this._audioGroups}},{key:"subtitleGroups",get:function(){return this._subtitleGroups}},{key:"urlId",get:function(){return 0},set:function(e){}},{key:"audioGroupIds",get:function(){return this.audioGroups?[this.audioGroupId]:void 0}},{key:"textGroupIds",get:function(){return this.subtitleGroups?[this.textGroupId]:void 0}},{key:"audioGroupId",get:function(){var e;return null==(e=this.audioGroups)?void 0:e[0]}},{key:"textGroupId",get:function(){var e;return null==(e=this.subtitleGroups)?void 0:e[0]}}]),Vt);function Vt(e){this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(function(e){return!!e}).map(function(e){return e.substring(0,4)}).join(","),this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}function Ut(e,t,i){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=i}function jt(e,t){return!(!t||!e)&&-1!==e.indexOf(t)}function Ht(e,t){var i=t.startPTS;if(J(i)){var n,r=0;(n=t.sn>e.sn?(r=i-e.start,e):(r=e.start-i,t)).duration!==r&&(n.duration=r)}else t.sn>e.sn?e.cc===t.cc&&e.minEndPTS?t.start=e.start+(e.minEndPTS-e.start):t.start=e.start+e.duration:t.start=Math.max(e.start-t.duration,0)}function Gt(e,t,i,n,r,a){n-i<=0&&(be.warn("Fragment should have a positive duration",t),n=i+t.duration,a=r+t.duration);var o=i,s=n,l=t.startPTS,d=t.endPTS;if(J(l)){var u=Math.abs(l-i);J(t.deltaPTS)?t.deltaPTS=Math.max(u,t.deltaPTS):t.deltaPTS=u,o=Math.max(i,l),i=Math.min(i,l),r=Math.min(r,t.startDTS),s=Math.min(n,d),n=Math.max(n,d),a=Math.max(a,t.endDTS)}var c=i-t.start;0!==t.start&&(t.start=i),t.duration=n-t.start,t.startPTS=i,t.maxStartPTS=o,t.startDTS=r,t.endPTS=n,t.minEndPTS=s,t.endDTS=a;var h,f=t.sn;if(!e||f<e.startSN||f>e.endSN)return 0;var p=f-e.startSN,g=e.fragments;for(g[p]=t,h=p;0<h;h--)Ht(g[h],g[h-1]);for(h=p;h<g.length-1;h++)Ht(g[h],g[h+1]);return e.fragmentHint&&Ht(g[g.length-1],e.fragmentHint),e.PTSKnown=e.alignedSliding=!0,c}function zt(e,t){var i=t.startSN+t.skippedSegments-e.startSN,n=e.fragments;i<0||i>=n.length||function(e,t){if(t){for(var i=e.fragments,n=e.skippedSegments;n<i.length;n++)i[n].start+=t;e.fragmentHint&&(e.fragmentHint.start+=t)}}(t,n[i].start)}function Wt(e,t,i){var n;return null!=e&&e.details?qt(null==(n=e.details)?void 0:n.partList,t,i):null}function qt(e,t,i){if(e)for(var n=e.length;n--;){var r=e[n];if(r.index===i&&r.fragment.sn===t)return r}return null}function Yt(e){e.forEach(function(e,t){var i=e.details;null!=i&&i.fragments&&i.fragments.forEach(function(e){e.level=t})})}function Qt(e){switch(e.details){case ye.FRAG_LOAD_TIMEOUT:case ye.KEY_LOAD_TIMEOUT:case ye.LEVEL_LOAD_TIMEOUT:case ye.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function Kt(e,t){var i=Qt(t);return e.default[(i?"timeout":"error")+"Retry"]}function Xt(e,t){var i="linear"===e.backoff?1:Math.pow(2,t);return Math.min(i*e.retryDelayMs,e.maxRetryDelayMs)}function Zt(e){return C(C({},e),{errorRetry:null,timeoutRetry:null})}function Jt(e,t,i,n){if(!e)return!1;var r,a=null==n?void 0:n.code,o=t<e.maxNumRetry&&(0===(r=a)&&!1===navigator.onLine||!!r&&(r<400||499<r)||!!i);return e.shouldRetry?e.shouldRetry(e,t,i,n,o):o}function $t(e,t){for(var i=0,n=e.length-1,r=null,a=null;i<=n;){var o=t(a=e[r=(i+n)/2|0]);if(0<o)i=r+1;else{if(!(o<0))return a;n=r-1}}return null}function ei(e,t,i,n,r){void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=.005);var a=null;if(e){a=t[e.sn-t[0].sn+1]||null;var o=e.endDTS-i;0<o&&o<15e-7&&(i+=15e-7)}else 0===i&&0===t[0].start&&(a=t[0]);if(a&&((!e||e.level===a.level)&&0===ti(i,n,a)||function(e,t,i){if(t&&0===t.start&&t.level<e.level&&0<(t.endPTS||0)){var n=t.tagList.reduce(function(e,t){return"INF"===t[0]&&(e+=parseFloat(t[1])),e},i);return e.start<=n}return!1}(a,e,Math.min(r,n))))return a;var s=$t(t,ti.bind(null,i,n));return!s||s===e&&a?a:s}function ti(e,t,i){if(void 0===e&&(e=0),void 0===t&&(t=0),i.start<=e&&i.start+i.duration>e)return 0;var n=Math.min(t,i.duration+(i.deltaPTS?i.deltaPTS:0));return i.start+i.duration-n<=e?1:i.start-n>e&&i.start?-1:0}var ii,ni,ri,ai,oi=((ai=fi.prototype).registerListeners=function(){var e=this.hls;e.on(ve.ERROR,this.onError,this),e.on(ve.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ve.LEVEL_UPDATED,this.onLevelUpdated,this)},ai.unregisterListeners=function(){var e=this.hls;e&&(e.off(ve.ERROR,this.onError,this),e.off(ve.ERROR,this.onErrorOut,this),e.off(ve.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ve.LEVEL_UPDATED,this.onLevelUpdated,this))},ai.destroy=function(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}},ai.startLoad=function(e){},ai.stopLoad=function(){this.playlistError=0},ai.getVariantLevelIndex=function(e){return(null==e?void 0:e.type)===ht?e.level:this.hls.loadLevel},ai.onManifestLoading=function(){this.playlistError=0,this.penalizedRenditions={}},ai.onLevelUpdated=function(){this.playlistError=0},ai.onError=function(e,t){var i,n;if(!t.fatal){var r=this.hls,a=t.context;switch(t.details){case ye.FRAG_LOAD_ERROR:case ye.FRAG_LOAD_TIMEOUT:case ye.KEY_LOAD_ERROR:case ye.KEY_LOAD_TIMEOUT:return void(t.errorAction=this.getFragRetryOrSwitchAction(t));case ye.FRAG_PARSING_ERROR:if(null!=(i=t.frag)&&i.gap)return void(t.errorAction={action:0,flags:0});case ye.FRAG_GAP:case ye.FRAG_DECRYPT_ERROR:return t.errorAction=this.getFragRetryOrSwitchAction(t),void(t.errorAction.action=2);case ye.LEVEL_EMPTY_ERROR:case ye.LEVEL_PARSING_ERROR:var o,s,l=t.parent===ht?t.level:r.loadLevel;return void(t.details===ye.LEVEL_EMPTY_ERROR&&null!=(o=t.context)&&null!=(s=o.levelDetails)&&s.live?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,l):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,l)));case ye.LEVEL_LOAD_ERROR:case ye.LEVEL_LOAD_TIMEOUT:return void("number"==typeof(null==a?void 0:a.level)&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,a.level)));case ye.AUDIO_TRACK_LOAD_ERROR:case ye.AUDIO_TRACK_LOAD_TIMEOUT:case ye.SUBTITLE_LOAD_ERROR:case ye.SUBTITLE_TRACK_LOAD_TIMEOUT:if(a){var d=r.levels[r.loadLevel];if(d&&(a.type===ut&&d.hasAudioGroup(a.groupId)||a.type===ct&&d.hasSubtitleGroup(a.groupId)))return t.errorAction=this.getPlaylistRetryOrSwitchAction(t,r.loadLevel),t.errorAction.action=2,void(t.errorAction.flags=1)}return;case ye.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:var u=r.levels[r.loadLevel],c=null==u?void 0:u.attrs["HDCP-LEVEL"];return void(c?t.errorAction={action:2,flags:2,hdcpLevel:c}:this.keySystemError(t));case ye.BUFFER_ADD_CODEC_ERROR:case ye.REMUX_ALLOC_ERROR:case ye.BUFFER_APPEND_ERROR:return void(t.errorAction=this.getLevelSwitchAction(t,null!=(n=t.level)?n:r.loadLevel));case ye.INTERNAL_EXCEPTION:case ye.BUFFER_APPENDING_ERROR:case ye.BUFFER_FULL_ERROR:case ye.LEVEL_SWITCH_ERROR:case ye.BUFFER_STALLED_ERROR:case ye.BUFFER_SEEK_OVER_HOLE:case ye.BUFFER_NUDGE_ON_STALL:return void(t.errorAction={action:0,flags:0})}t.type===me.KEY_SYSTEM_ERROR&&this.keySystemError(t)}},ai.keySystemError=function(e){var t=this.getVariantLevelIndex(e.frag);e.levelRetry=!1,e.errorAction=this.getLevelSwitchAction(e,t)},ai.getPlaylistRetryOrSwitchAction=function(e,t){var i=Kt(this.hls.config.playlistLoadPolicy,e),n=this.playlistError++;if(Jt(i,n,Qt(e),e.response))return{action:5,flags:0,retryConfig:i,retryCount:n};var r=this.getLevelSwitchAction(e,t);return i&&(r.retryConfig=i,r.retryCount=n),r},ai.getFragRetryOrSwitchAction=function(e){var t=this.hls,i=this.getVariantLevelIndex(e.frag),n=t.levels[i],r=t.config,a=r.fragLoadPolicy,o=r.keyLoadPolicy,s=Kt(e.details.startsWith("key")?o:a,e),l=t.levels.reduce(function(e,t){return e+t.fragmentError},0);if(n&&(e.details!==ye.FRAG_GAP&&n.fragmentError++,Jt(s,l,Qt(e),e.response)))return{action:5,flags:0,retryConfig:s,retryCount:l};var d=this.getLevelSwitchAction(e,i);return s&&(d.retryConfig=s,d.retryCount=l),d},ai.getLevelSwitchAction=function(o,e){var t=this.hls;null==e&&(e=t.loadLevel);var s=this.hls.levels[e];if(s){var i,n,l=o.details;s.loadError++,l===ye.BUFFER_APPEND_ERROR&&s.fragmentError++;var d=-1,u=t.levels,c=t.loadLevel,h=t.minAutoLevel,f=t.maxAutoLevel;t.autoLevelEnabled||(t.loadLevel=-1);for(var r,p=null==(i=o.frag)?void 0:i.type,g=(p===ft&&l===ye.FRAG_PARSING_ERROR||"audio"===o.sourceBufferName&&(l===ye.BUFFER_ADD_CODEC_ERROR||l===ye.BUFFER_APPEND_ERROR))&&u.some(function(e){var t=e.audioCodec;return s.audioCodec!==t}),v="video"===o.sourceBufferName&&(l===ye.BUFFER_ADD_CODEC_ERROR||l===ye.BUFFER_APPEND_ERROR)&&u.some(function(e){var t=e.codecSet,i=e.audioCodec;return s.codecSet!==t&&s.audioCodec===i}),a=null!=(n=o.context)?n:{},m=a.type,y=a.groupId,b=function(){var e=(w+c)%u.length;if(e!==c&&h<=e&&e<=f&&0===u[e].loadError){var t,i,n=u[e];if(l===ye.FRAG_GAP&&p===ht&&o.frag){var r=u[e].details;if(r){var a=ei(o.frag,r.fragments,o.frag.start);if(null!=a&&a.gap)return 0}}else{if(m===ut&&n.hasAudioGroup(y)||m===ct&&n.hasSubtitleGroup(y))return 0;if(p===ft&&null!=(t=s.audioGroups)&&t.some(function(e){return n.hasAudioGroup(e)})||p===pt&&null!=(i=s.subtitleGroups)&&i.some(function(e){return n.hasSubtitleGroup(e)})||g&&s.audioCodec===n.audioCodec||!g&&s.audioCodec!==n.audioCodec||v&&s.codecSet===n.codecSet)return 0}return d=e,1}},w=u.length;w--&&(0===(r=b())||1!==r););if(-1<d&&t.loadLevel!==d)return o.levelRetry=!0,{action:2,flags:this.playlistError=0,nextAutoLevel:d}}return{action:2,flags:1}},ai.onErrorOut=function(e,t){var i;switch(null==(i=t.errorAction)?void 0:i.action){case 0:break;case 2:this.sendAlternateToPenaltyBox(t),t.errorAction.resolved||t.details===ye.FRAG_GAP?/MediaSource readyState: ended/.test(t.error.message)&&(this.warn('MediaSource ended after "'+t.sourceBufferName+'" sourceBuffer append error. Attempting to recover from media error.'),this.hls.recoverMediaError()):t.fatal=!0}t.fatal&&this.hls.stopLoad()},ai.sendAlternateToPenaltyBox=function(e){var t=this.hls,i=e.errorAction;if(i){var n=i.flags,r=i.hdcpLevel,a=i.nextAutoLevel;switch(n){case 0:this.switchLevel(e,a);break;case 2:r&&(t.maxHdcpLevel=It[It.indexOf(r)-1],i.resolved=!0),this.warn('Restricting playback to HDCP-LEVEL of "'+t.maxHdcpLevel+'" or lower')}i.resolved||this.switchLevel(e,a)}},ai.switchLevel=function(e,t){void 0!==t&&e.errorAction&&(this.warn("switching to level "+t+" after "+e.details),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel)},fi),si=((ri=hi.prototype).destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null},ri.clearTimer=function(){-1!==this.timer&&(self.clearTimeout(this.timer),this.timer=-1)},ri.startLoad=function(){this.canLoad=!0,this.requestScheduled=-1,this.loadPlaylist()},ri.stopLoad=function(){this.canLoad=!1,this.clearTimer()},ri.switchParams=function(e,t,i){var n=null==t?void 0:t.renditionReports;if(n){for(var r=-1,a=0;a<n.length;a++){var o=n[a],s=void 0;try{s=new self.URL(o.URI,t.url).href}catch(e){be.warn("Could not construct new URL for Rendition Report: "+e),s=o.URI||""}if(s===e){r=a;break}s===e.substring(0,s.length)&&(r=a)}if(-1!==r){var l=n[r],d=parseInt(l["LAST-MSN"])||(null==t?void 0:t.lastPartSn),u=parseInt(l["LAST-PART"])||(null==t?void 0:t.lastPartIndex);if(this.hls.config.lowLatencyMode){var c=Math.min(t.age-t.partTarget,t.targetduration);0<=u&&c>t.partTarget&&(u+=1)}var h=i&&Ft(i);return new _t(d,0<=u?u:void 0,h)}}},ri.loadPlaylist=function(e){-1===this.requestScheduled&&(this.requestScheduled=self.performance.now())},ri.shouldLoadPlaylist=function(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)},ri.shouldReloadPlaylist=function(e){return-1===this.timer&&-1===this.requestScheduled&&this.shouldLoadPlaylist(e)},ri.playlistLoaded=function(e,t,i){var n=this,r=t.details,a=t.stats,o=self.performance.now(),s=a.loading.first?Math.max(0,o-a.loading.first):0;if(r.advancedDateTime=Date.now()-s,r.live||null!=i&&i.live){if(r.reloaded(i),i&&this.log("live playlist "+e+" "+(r.advanced?"REFRESHED "+r.lastPartSn+"-"+r.lastPartIndex:r.updated?"UPDATED":"MISSED")),i&&0<r.fragments.length&&function(e,f){for(var p=null,t=e.fragments,i=t.length-1;0<=i;i--){var n=t[i].initSegment;if(n){p=n;break}}e.fragmentHint&&delete e.fragmentHint.endPTS;var g,r,a,o,s,v=0;if(function(e,t){for(var i=t.skippedSegments,n=Math.max(e.startSN,t.startSN)-t.startSN,r=(e.fragmentHint?1:0)+(i?t.endSN:Math.min(e.endSN,t.endSN))-t.startSN,a=t.startSN-e.startSN,o=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments,s=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,l=n;l<=r;l++){var d=s[a+l],u=o[l];i&&!u&&l<i&&(u=t.fragments[l]=d),d&&u&&(h=u,(c=d).relurl&&(v=c.cc-h.cc),J(c.startPTS)&&J(c.endPTS)&&(h.start=h.startPTS=c.startPTS,h.startDTS=c.startDTS,h.maxStartPTS=c.maxStartPTS,h.endPTS=c.endPTS,h.endDTS=c.endDTS,h.minEndPTS=c.minEndPTS,h.duration=c.endPTS-c.startPTS,h.duration&&(g=h),f.PTSKnown=f.alignedSliding=!0),h.elementaryStreams=c.elementaryStreams,h.loader=c.loader,h.stats=c.stats,c.initSegment&&(h.initSegment=c.initSegment,p=c.initSegment))}var c,h}(e,f),p&&(f.fragmentHint?f.fragments.concat(f.fragmentHint):f.fragments).forEach(function(e){var t;!e||e.initSegment&&e.initSegment.relurl!==(null==(t=p)?void 0:t.relurl)||(e.initSegment=p)}),f.skippedSegments)if(f.deltaUpdateFailed=f.fragments.some(function(e){return!e}),f.deltaUpdateFailed){be.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var l=f.skippedSegments;l--;)f.fragments.shift();f.startSN=f.fragments[0].sn,f.startCC=f.fragments[0].cc}else f.canSkipDateRanges&&(f.dateRanges=(r=e.dateRanges,a=f.dateRanges,o=f.recentlyRemovedDateranges,s=ge({},r),o&&o.forEach(function(e){delete s[e]}),Object.keys(a).forEach(function(e){var t=new ee(a[e].attr,s[e]);t.isValid?s[e]=t:be.warn('Ignoring invalid Playlist Delta Update DATERANGE tag: "'+JSON.stringify(a[e].attr)+'"')}),s));var d=f.fragments;if(v){be.warn("discontinuity sliding from playlist, take drift into account");for(var u=0;u<d.length;u++)d[u].cc+=v}f.skippedSegments&&(f.startCC=f.fragments[0].cc),function(e,t){if(e&&t)for(var i=0,n=0,r=e.length;n<=r;n++){var a=e[n],o=t[n+i];a&&o&&a.index===o.index&&a.fragment.sn===o.fragment.sn?(s=a,(l=o).elementaryStreams=s.elementaryStreams,l.stats=s.stats):i--}var s,l}(e.partList,f.partList),g?Gt(f,g,g.startPTS,g.endPTS,g.startDTS,g.endDTS):zt(e,f),d.length&&(f.totalduration=f.edge-d[0].start),f.driftStartTime=e.driftStartTime,f.driftStart=e.driftStart;var c=f.advancedDateTime;if(f.advanced&&c){var h=f.edge;f.driftStart||(f.driftStartTime=c,f.driftStart=h),f.driftEndTime=c,f.driftEnd=h}else f.driftEndTime=e.driftEndTime,f.driftEnd=e.driftEnd,f.advancedDateTime=e.advancedDateTime}(i,r),!this.canLoad||!r.live)return;var l,d=void 0,u=void 0;if(r.canBlockReload&&r.endSN&&r.advanced){var c=this.hls.config.lowLatencyMode,h=r.lastPartSn,f=r.endSN,p=r.lastPartIndex,g=h===f;-1!==p?(d=g?f+1:h,u=g?c?0:p:p+1):d=f+1;var v=r.age,m=v+r.ageHeader,y=Math.min(m-r.partTarget,1.5*r.targetduration);if(0<y){if(i&&y>i.tuneInGoal)this.warn("CDN Tune-in goal increased from: "+i.tuneInGoal+" to: "+y+" with playlist age: "+r.age),y=0;else{var b=Math.floor(y/r.targetduration);d+=b,void 0!==u&&(u+=Math.round(y%r.targetduration/r.partTarget)),this.log("CDN Tune-in age: "+r.ageHeader+"s last advanced "+v.toFixed(2)+"s goal: "+y+" skip sn "+b+" to part "+u)}r.tuneInGoal=y}if(l=this.getDeliveryDirectives(r,t.deliveryDirectives,d,u),c||!g)return void this.loadPlaylist(l)}else(r.canBlockReload||r.canSkipUntil)&&(l=this.getDeliveryDirectives(r,t.deliveryDirectives,d,u));var w=this.hls.mainForwardBufferInfo,E=w?w.end-w.len:0,S=function(e,t){void 0===t&&(t=1/0);var i=1e3*e.targetduration;if(e.updated){var n=e.fragments;if(n.length&&t<4*i){var r=1e3*n[n.length-1].duration;r<i&&(i=r)}}else i/=2;return Math.round(i)}(r,1e3*(r.edge-E));r.updated&&o>this.requestScheduled+S&&(this.requestScheduled=a.loading.start),void 0!==d&&r.canBlockReload?this.requestScheduled=a.loading.first+S-(1e3*r.partTarget||1e3):-1===this.requestScheduled||this.requestScheduled+S<o?this.requestScheduled=o:this.requestScheduled-o<=0&&(this.requestScheduled+=S);var A=this.requestScheduled-o;A=Math.max(0,A),this.log("reload live playlist "+e+" in "+Math.round(A)+" ms"),this.timer=self.setTimeout(function(){return n.loadPlaylist(l)},A)}else this.clearTimer()},ri.getDeliveryDirectives=function(e,t,i,n){var r=Ft(e);return null!=t&&t.skip&&e.deltaUpdateFailed&&(i=t.msn,n=t.part,r=""),new _t(i,n,r)},ri.checkRetry=function(e){var t=this,i=e.details,n=Qt(e),r=e.errorAction,a=r||{},o=a.action,s=a.retryCount,l=void 0===s?0:s,d=a.retryConfig,u=!!r&&!!d&&(5===o||!r.resolved&&2===o);if(u){var c;if(this.requestScheduled=-1,l>=d.maxNumRetry)return!1;if(n&&null!=(c=e.context)&&c.deliveryDirectives)this.warn("Retrying playlist loading "+(l+1)+"/"+d.maxNumRetry+' after "'+i+'" without delivery-directives'),this.loadPlaylist();else{var h=Xt(d,l);this.timer=self.setTimeout(function(){return t.loadPlaylist()},h),this.warn("Retrying playlist loading "+(l+1)+"/"+d.maxNumRetry+' after "'+i+'" in '+h+"ms")}e.levelRetry=!0,r.resolved=!0}return u},hi),li=((ni=ci.prototype).sample=function(e,t){var i=Math.pow(this.alpha_,e);this.estimate_=t*(1-i)+i*this.estimate_,this.totalWeight_+=e},ni.getTotalWeight=function(){return this.totalWeight_},ni.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_},ci),di=((ii=ui.prototype).update=function(e,t){var i=this.slow_,n=this.fast_,r=this.ttfb_;i.halfLife!==e&&(this.slow_=new li(e,i.getEstimate(),i.getTotalWeight())),n.halfLife!==t&&(this.fast_=new li(t,n.getEstimate(),n.getTotalWeight())),r.halfLife!==e&&(this.ttfb_=new li(e,r.getEstimate(),r.getTotalWeight()))},ii.sample=function(e,t){var i=(e=Math.max(e,this.minDelayMs_))/1e3,n=8*t/i;this.fast_.sample(i,n),this.slow_.sample(i,n)},ii.sampleTTFB=function(e){var t=e/1e3,i=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(i,Math.max(e,5))},ii.canEstimate=function(){return this.fast_.getTotalWeight()>=this.minWeight_},ii.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},ii.getEstimateTTFB=function(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_},ii.destroy=function(){},ui);function ui(e,t,i,n){void 0===n&&(n=100),this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new li(e),this.fast_=new li(t),this.defaultTTFB_=n,this.ttfb_=new li(e)}function ci(e,t,i){void 0===t&&(t=0),void 0===i&&(i=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=i}function hi(e,t){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.log=void 0,this.warn=void 0,this.log=be.log.bind(be,t+":"),this.warn=be.warn.bind(be,t+":"),this.hls=e}function fi(e){this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.log=void 0,this.warn=void 0,this.error=void 0,this.hls=e,this.log=be.log.bind(be,"[info]:"),this.warn=be.warn.bind(be,"[warning]:"),this.error=be.error.bind(be,"[error]:"),this.registerListeners()}function pi(e,t){be.log('[abr] start candidates with "'+e+'" ignored because '+t)}var gi,vi,mi,yi=((mi=ki.prototype).resetEstimator=function(e){e&&(be.log("setting initial bwe to "+e),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()},mi.initEstimator=function(){var e=this.hls.config;return new di(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)},mi.registerListeners=function(){var e=this.hls;e.on(ve.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ve.FRAG_LOADING,this.onFragLoading,this),e.on(ve.FRAG_LOADED,this.onFragLoaded,this),e.on(ve.FRAG_BUFFERED,this.onFragBuffered,this),e.on(ve.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(ve.LEVEL_LOADED,this.onLevelLoaded,this),e.on(ve.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(ve.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(ve.ERROR,this.onError,this)},mi.unregisterListeners=function(){var e=this.hls;e&&(e.off(ve.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ve.FRAG_LOADING,this.onFragLoading,this),e.off(ve.FRAG_LOADED,this.onFragLoaded,this),e.off(ve.FRAG_BUFFERED,this.onFragBuffered,this),e.off(ve.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(ve.LEVEL_LOADED,this.onLevelLoaded,this),e.off(ve.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(ve.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(ve.ERROR,this.onError,this))},mi.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=null,this.fragCurrent=this.partCurrent=null},mi.onManifestLoading=function(e,t){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()},mi.onLevelsUpdated=function(){-1<this.lastLoadedFragLevel&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null},mi.onMaxAutoLevelUpdated=function(){this.firstSelection=-1,this.nextAutoLevelKey=""},mi.onFragLoading=function(e,t){var i,n=t.frag;this.ignoreFragment(n)||(n.bitrateTest||(this.fragCurrent=n,this.partCurrent=null!=(i=t.part)?i:null),this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100))},mi.onLevelSwitching=function(e,t){this.clearTimer()},mi.onError=function(e,t){if(!t.fatal)switch(t.details){case ye.BUFFER_ADD_CODEC_ERROR:case ye.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case ye.FRAG_LOAD_TIMEOUT:var i=t.frag,n=this.fragCurrent,r=this.partCurrent;if(i&&n&&i.sn===n.sn&&i.level===n.level){var a=performance.now(),o=r?r.stats:i.stats,s=a-o.loading.start,l=o.loading.first?o.loading.first-o.loading.start:-1;if(o.loaded&&-1<l){var d=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(s-Math.min(d,l),o.loaded)}else this.bwEstimator.sampleTTFB(s)}}},mi.getTimeToLoadFrag=function(e,t,i,n){return e+i/t+(n?this.lastLevelLoadSec:0)},mi.onLevelLoaded=function(e,t){var i=this.hls.config,n=t.stats.loading,r=n.end-n.start;J(r)&&(this.lastLevelLoadSec=r/1e3),t.details.live?this.bwEstimator.update(i.abrEwmaSlowLive,i.abrEwmaFastLive):this.bwEstimator.update(i.abrEwmaSlowVoD,i.abrEwmaFastVoD)},mi.onFragLoaded=function(e,t){var i=t.frag,n=t.part,r=n?n.stats:i.stats;if(i.type===ht&&this.bwEstimator.sampleTTFB(r.loading.first-r.loading.start),!this.ignoreFragment(i)){if(this.clearTimer(),i.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){var a=n?n.duration:i.duration,o=this.hls.levels[i.level],s=(o.loaded?o.loaded.bytes:0)+r.loaded,l=(o.loaded?o.loaded.duration:0)+a;o.loaded={bytes:s,duration:l},o.realBitrate=Math.round(8*s/l)}if(i.bitrateTest){var d={stats:r,frag:i,part:n,id:i.type};this.onFragBuffered(ve.FRAG_BUFFERED,d),i.bitrateTest=!1}else this.lastLoadedFragLevel=i.level}},mi.onFragBuffered=function(e,t){var i=t.frag,n=t.part,r=null!=n&&n.stats.loaded?n.stats:i.stats;if(!r.aborted&&!this.ignoreFragment(i)){var a=r.parsing.end-r.loading.start-Math.min(r.loading.first-r.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(a,r.loaded),r.bwEstimate=this.getBwEstimate(),i.bitrateTest?this.bitrateTestDelay=a/1e3:this.bitrateTestDelay=0}},mi.ignoreFragment=function(e){return e.type!==ht||"initSegment"===e.sn},mi.clearTimer=function(){-1<this.timer&&(self.clearInterval(this.timer),this.timer=-1)},mi.getAutoLevelKey=function(){return this.getBwEstimate()+"_"+this.getStarvationDelay().toFixed(2)},mi.getNextABRAutoLevel=function(){var e=this.fragCurrent,t=this.partCurrent,i=this.hls,n=i.maxAutoLevel,r=i.config,a=i.minAutoLevel,o=t?t.duration:e?e.duration:0,s=this.getBwEstimate(),l=this.getStarvationDelay(),d=r.abrBandWidthFactor,u=r.abrBandWidthUpFactor;if(l){var c=this.findBestLevel(s,a,n,l,0,d,u);if(0<=c)return c}var h=o?Math.min(o,r.maxStarvationDelay):r.maxStarvationDelay;if(!l){var f=this.bitrateTestDelay;f&&(h=(o?Math.min(o,r.maxLoadingDelay):r.maxLoadingDelay)-f,be.info("[abr] bitrate test took "+Math.round(1e3*f)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*h)+" ms"),d=u=1)}var p=this.findBestLevel(s,a,n,l,h,d,u);if(be.info("[abr] "+(l?"rebuffering expected":"buffer is empty")+", optimal quality level "+p),-1<p)return p;var g=i.levels[a],v=i.levels[i.loadLevel];return(null==g?void 0:g.bitrate)<(null==v?void 0:v.bitrate)?a:i.loadLevel},mi.getStarvationDelay=function(){var e=this.hls,t=e.media;if(!t)return 1/0;var i=t&&0!==t.playbackRate?Math.abs(t.playbackRate):1,n=e.mainForwardBufferInfo;return(n?n.len:0)/i},mi.getBwEstimate=function(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate},mi.findBestLevel=function(d,e,u,c,h,f,p){var t,g=this,v=c+h,m=this.lastLoadedFragLevel,y=-1===m?this.hls.firstLevel:m,i=this.fragCurrent,b=this.partCurrent,n=this.hls,w=n.levels,r=n.allAudioTracks,E=n.loadLevel,a=n.config;if(1===w.length)return 0;var S,o,s,A=w[y],T=!(null==A||null==(t=A.details)||!t.live),L=-1===E||-1===m,C="SDR",k=(null==A?void 0:A.frameRate)||0,l=a.audioPreference,P=a.videoPreference;if(this.audioTracksByGroup||(this.audioTracksByGroup=r.reduce(function(e,t){var i=e.groups[t.groupId];(i=i||(e.groups[t.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1})).tracks.push(t);var n=t.channels||"2";return i.channels[n]=(i.channels[n]||0)+1,i.hasDefault=i.hasDefault||t.default,i.hasAutoSelect=i.hasAutoSelect||t.autoselect,i.hasDefault&&(e.hasDefaultAudio=!0),i.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})),L){if(-1!==this.firstSelection)return this.firstSelection;var x=function(n,e,r,t,i){for(var a=Object.keys(n),o=null==t?void 0:t.channels,s=null==t?void 0:t.audioCodec,l=o&&2===parseInt(o),d=!0,u=!1,c=1/0,h=1/0,f=1/0,p=0,g=[],v=function(e,t){var i=!1,n=[];return e&&(i="SDR"!==e,n=[e]),t&&(n=t.allowedVideoRanges||Rt.slice(0),n=(i=void 0!==t.preferHDR?t.preferHDR:function(){if("function"==typeof matchMedia){var e=matchMedia("(dynamic-range: high)"),t=matchMedia("bad query");if(e.media!==t.media)return!0===e.matches}return!1}())?n.filter(function(e){return"SDR"!==e}):["SDR"]),{preferHDR:i,allowedVideoRanges:n}}(e,i),m=v.preferHDR,y=v.allowedVideoRanges,b=function(){var t=n[a[w]];d=0<t.channels[2],c=Math.min(c,t.minHeight),h=Math.min(h,t.minFramerate),f=Math.min(f,t.minBitrate);var e=y.filter(function(e){return 0<t.videoRanges[e]});0<e.length&&(u=!0,g=e)},w=a.length;w--;)b();c=J(c)?c:0,h=J(h)?h:0;var E=Math.max(1080,c),S=Math.max(30,h);return f=J(f)?f:r,r=Math.max(f,r),u||(e=void 0,g=[]),{codecSet:a.reduce(function(e,t){var i=n[t];if(t===e)return e;if(i.minBitrate>r)return pi(t,"min bitrate of "+i.minBitrate+" > current estimate of "+r),e;if(!i.hasDefaultAudio)return pi(t,"no renditions with default or auto-select sound found"),e;if(s&&t.indexOf(s.substring(0,4))%5!=0)return pi(t,'audio codec preference "'+s+'" not found'),e;if(o&&!l){if(!i.channels[o])return pi(t,"no renditions with "+o+" channel sound found (channels options: "+Object.keys(i.channels)+")"),e}else if((!s||l)&&d&&0===i.channels[2])return pi(t,"no renditions with stereo sound found"),e;return i.minHeight>E?(pi(t,"min resolution of "+i.minHeight+" > maximum of "+E),e):i.minFramerate>S?(pi(t,"min framerate of "+i.minFramerate+" > maximum of "+S),e):g.some(function(e){return 0<i.videoRanges[e]})?i.maxScore<p?(pi(t,"max score of "+i.maxScore+" < selected max of "+p),e):e&&(Ge(t)>=Ge(e)||i.fragmentError>n[e].fragmentError)?e:(p=i.maxScore,t):(pi(t,"no variants with VIDEO-RANGE of "+JSON.stringify(g)+" found"),e)},void 0),videoRanges:g,preferHDR:m,minFramerate:h,minBitrate:f}}(this.codecTiers||(this.codecTiers=(o=e,s=u,w.slice(o,s+1).reduce(function(e,t){if(!t.codecSet)return e;var i=t.audioGroups,n=e[t.codecSet];n||(e[t.codecSet]=n={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!i,fragmentError:0}),n.minBitrate=Math.min(n.minBitrate,t.bitrate);var r=Math.min(t.height,t.width);return n.minHeight=Math.min(n.minHeight,r),n.minFramerate=Math.min(n.minFramerate,t.frameRate),n.maxScore=Math.max(n.maxScore,t.score),n.fragmentError+=t.fragmentError,n.videoRanges[t.videoRange]=(n.videoRanges[t.videoRange]||0)+1,e},{}))),C,d,l,P),O=x.codecSet,I=x.videoRanges,R=x.minFramerate,M=x.minBitrate,D=x.preferHDR;S=O,C=D?I[I.length-1]:I[0],k=R,d=Math.max(d,M),be.log("[abr] picked start tier "+JSON.stringify(x))}else S=null==A?void 0:A.codecSet,C=null==A?void 0:A.videoRange;for(var F,B=b?b.duration:i?i.duration:0,_=this.bwEstimator.getEstimateTTFB()/1e3,N=[],V=function(){var e,t=w[U],i=y<U;if(!t)return 0;if(S&&t.codecSet!==S||C&&t.videoRange!==C||i&&k>t.frameRate||!i&&0<k&&k<t.frameRate||t.supportedResult&&(null==(e=t.supportedResult.decodingInfoResults)||!e[0].smooth))return N.push(U),0;var n,r=t.details,a=(b?null==r?void 0:r.partTarget:null==r?void 0:r.averagetargetduration)||B;n=i?p*d:f*d;var o=B&&2*B<=c&&0===h?w[U].averageBitrate:w[U].maxBitrate,s=g.getTimeToLoadFrag(_,n,o*a,void 0===r);if(o<=n&&(U===m||0===t.loadError&&0===t.fragmentError)&&(s<=_||!J(s)||T&&!g.bitrateTestDelay||s<v)){var l=g.forcedAutoLevel;return U===E||-1!==l&&l===E||(N.length&&be.trace("[abr] Skipped level(s) "+N.join(",")+" of "+u+' max with CODECS and VIDEO-RANGE:"'+w[N[0]].codecs+'" '+w[N[0]].videoRange+'; not compatible with "'+A.codecs+'" '+C),be.info("[abr] switch candidate:"+y+"->"+U+" adjustedbw("+Math.round(n)+")-bitrate="+Math.round(n-o)+" ttfb:"+_.toFixed(1)+" avgDuration:"+a.toFixed(1)+" maxFetchDuration:"+v.toFixed(1)+" fetchDuration:"+s.toFixed(1)+" firstSelection:"+L+" codecSet:"+S+" videoRange:"+C+" hls.loadLevel:"+E)),L&&(g.firstSelection=U),{v:U}}},U=u;e<=U;U--)if(0!==(F=V())&&F)return F.v;return-1},i(ki,[{key:"firstAutoLevel",get:function(){var e=this.hls,t=e.maxAutoLevel,i=e.minAutoLevel,n=this.getBwEstimate(),r=this.hls.config.maxStarvationDelay,a=this.findBestLevel(n,i,t,0,r,1,1);if(-1<a)return a;var o=this.hls.firstLevel,s=Math.min(Math.max(o,i),t);return be.warn("[abr] Could not find best starting auto level. Defaulting to first in playlist "+o+" clamped to "+s),s}},{key:"forcedAutoLevel",get:function(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}},{key:"nextAutoLevel",get:function(){var e=this.forcedAutoLevel,t=this.bwEstimator.canEstimate(),i=-1<this.lastLoadedFragLevel;if(!(-1===e||t&&i&&this.nextAutoLevelKey!==this.getAutoLevelKey()))return e;var n=t&&i?this.getNextABRAutoLevel():this.firstAutoLevel;if(-1!==e){var r=this.hls.levels;if(r.length>Math.max(e,n)&&r[e].loadError<=r[n].loadError)return e}return this._nextAutoLevel=n,this.nextAutoLevelKey=this.getAutoLevelKey(),n},set:function(e){var t=this.hls,i=t.maxAutoLevel,n=t.minAutoLevel,r=Math.min(Math.max(e,n),i);this._nextAutoLevel!==r&&(this.nextAutoLevelKey="",this._nextAutoLevel=r)}}]),ki),bi={length:0,start:function(){return 0},end:function(){return 0}},wi=(Ci.isBuffered=function(e,t){try{if(e)for(var i=Ci.getBuffered(e),n=0;n<i.length;n++)if(t>=i.start(n)&&t<=i.end(n))return!0}catch(e){}return!1},Ci.bufferInfo=function(e,t,i){try{if(e){var n,r=Ci.getBuffered(e),a=[];for(n=0;n<r.length;n++)a.push({start:r.start(n),end:r.end(n)});return this.bufferedInfo(a,t,i)}}catch(e){}return{len:0,start:t,end:t,nextStart:void 0}},Ci.bufferedInfo=function(e,t,i){t=Math.max(0,t),e.sort(function(e,t){return e.start-t.start||t.end-e.end});var n=[];if(i)for(var r=0;r<e.length;r++){var a=n.length;if(a){var o=n[a-1].end;e[r].start-o<i?e[r].end>o&&(n[a-1].end=e[r].end):n.push(e[r])}else n.push(e[r])}else n=e;for(var s,l=0,d=t,u=t,c=0;c<n.length;c++){var h=n[c].start,f=n[c].end;if(h<=t+i&&t<f)d=h,l=(u=f)-t;else if(t+i<h){s=h;break}}return{len:l,start:d||0,end:u||0,nextStart:s}},Ci.getBuffered=function(e){try{return e.buffered}catch(e){return be.log("failed to get media.buffered",e),bi}},Ci),Ei=((vi=Li.prototype).append=function(e,t,i){var n=this.queues[t];n.push(e),1!==n.length||i||this.executeNext(t)},vi.insertAbort=function(e,t){this.queues[t].unshift(e),this.executeNext(t)},vi.appendBlocker=function(e){var t,i=new Promise(function(e){t=e}),n={execute:t,onStart:function(){},onComplete:function(){},onError:function(){}};return this.append(n,e),i},vi.executeNext=function(e){var t=this.queues[e];if(t.length){var i=t[0];try{i.execute()}catch(t){be.warn('[buffer-operation-queue]: Exception executing "'+e+'" SourceBuffer operation: '+t),i.onError(t);var n=this.buffers[e];null!=n&&n.updating||this.shiftAndExecuteNext(e)}}},vi.shiftAndExecuteNext=function(e){this.queues[e].shift(),this.executeNext(e)},vi.current=function(e){return this.queues[e][0]},Li),Si=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,Ai=((gi=Ti.prototype).hasSourceTypes=function(){return 0<this.getSourceBufferTypes().length||0<Object.keys(this.pendingTracks).length},gi.destroy=function(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null,this.hls=null},gi.registerListeners=function(){var e=this.hls;e.on(ve.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(ve.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(ve.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ve.MANIFEST_PARSED,this.onManifestParsed,this),e.on(ve.BUFFER_RESET,this.onBufferReset,this),e.on(ve.BUFFER_APPENDING,this.onBufferAppending,this),e.on(ve.BUFFER_CODECS,this.onBufferCodecs,this),e.on(ve.BUFFER_EOS,this.onBufferEos,this),e.on(ve.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(ve.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(ve.FRAG_PARSED,this.onFragParsed,this),e.on(ve.FRAG_CHANGED,this.onFragChanged,this)},gi.unregisterListeners=function(){var e=this.hls;e.off(ve.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(ve.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(ve.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ve.MANIFEST_PARSED,this.onManifestParsed,this),e.off(ve.BUFFER_RESET,this.onBufferReset,this),e.off(ve.BUFFER_APPENDING,this.onBufferAppending,this),e.off(ve.BUFFER_CODECS,this.onBufferCodecs,this),e.off(ve.BUFFER_EOS,this.onBufferEos,this),e.off(ve.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(ve.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(ve.FRAG_PARSED,this.onFragParsed,this),e.off(ve.FRAG_CHANGED,this.onFragChanged,this)},gi._initSourceBuffer=function(){this.sourceBuffer={},this.operationQueue=new Ei(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.appendErrors={audio:0,video:0,audiovideo:0},this.lastMpegAudioChunk=null},gi.onManifestLoading=function(){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=0,this.details=null},gi.onManifestParsed=function(e,t){t.audio&&!t.video||t.altAudio,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=1,this.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},gi.onMediaAttaching=function(e,t){var i,n,r,a=this.media=t.media,o=_e(this.appendSource);if(a&&o){var s,l=this.mediaSource=new o;this.log("created media source: "+(null==(s=l.constructor)?void 0:s.name)),l.addEventListener("sourceopen",this._onMediaSourceOpen),l.addEventListener("sourceended",this._onMediaSourceEnded),l.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(l.addEventListener("startstreaming",this._onStartStreaming),l.addEventListener("endstreaming",this._onEndStreaming));var d=this._objectUrl=self.URL.createObjectURL(l);if(this.appendSource)try{a.removeAttribute("src");var u=self.ManagedMediaSource;a.disableRemotePlayback=a.disableRemotePlayback||u&&l instanceof u,Pi(a),i=a,n=d,(r=self.document.createElement("source")).type="video/mp4",r.src=n,i.appendChild(r),a.load()}catch(e){a.src=d}else a.src=d;a.addEventListener("emptied",this._onMediaEmptied)}},gi.onMediaDetaching=function(){var e=this.media,t=this.mediaSource,i=this._objectUrl;if(t){if(this.log("media source detaching"),"open"===t.readyState)try{t.endOfStream()}catch(e){this.warn("onMediaDetaching: "+e.message+" while calling endOfStream")}this.onBufferReset(),t.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("sourceended",this._onMediaSourceEnded),t.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(t.removeEventListener("startstreaming",this._onStartStreaming),t.removeEventListener("endstreaming",this._onEndStreaming)),e&&(e.removeEventListener("emptied",this._onMediaEmptied),i&&self.URL.revokeObjectURL(i),this.mediaSrc===i?(e.removeAttribute("src"),this.appendSource&&Pi(e),e.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(ve.MEDIA_DETACHED,void 0)},gi.onBufferReset=function(){var t=this;this.getSourceBufferTypes().forEach(function(e){t.resetBuffer(e)}),this._initSourceBuffer()},gi.resetBuffer=function(e){var t=this.sourceBuffer[e];try{var i;t&&(this.removeBufferListeners(e),this.sourceBuffer[e]=void 0,null!=(i=this.mediaSource)&&i.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(t))}catch(t){this.warn("onBufferReset "+e,t)}},gi.onBufferCodecs=function(e,p){var g=this,v=this.getSourceBufferTypes().length,t=Object.keys(p);if(t.forEach(function(e){if(v){var t=g.tracks[e];if(t&&"function"==typeof t.buffer.changeType){var i,n=p[e],r=n.id,a=n.codec,o=n.levelCodec,s=n.container,l=n.metadata,d=Ye(t.codec,t.levelCodec),u=null==d?void 0:d.replace(Si,"$1"),c=Ye(a,o),h=null==(i=c)?void 0:i.replace(Si,"$1");if(c&&u!==h){"audio"===e.slice(0,5)&&(c=qe(c,g.appendSource));var f=s+";codecs="+c;g.appendChangeType(e,f),g.log("switching codec "+d+" to "+c),g.tracks[e]={buffer:t.buffer,codec:a,container:s,levelCodec:o,metadata:l,id:r}}}}else g.pendingTracks[e]=p[e]}),!v){var i=Math.max(this.bufferCodecEventsExpected-1,0);this.bufferCodecEventsExpected!==i&&(this.log(i+" bufferCodec event(s) expected "+t.join(",")),this.bufferCodecEventsExpected=i),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks()}},gi.appendChangeType=function(t,i){var n=this,r=this.operationQueue,e={execute:function(){var e=n.sourceBuffer[t];e&&(n.log("changing "+t+" sourceBuffer type to "+i),e.changeType(i)),r.shiftAndExecuteNext(t)},onStart:function(){},onComplete:function(){},onError:function(e){n.warn("Failed to change "+t+" SourceBuffer type",e)}};r.append(e,t,!!this.pendingTracks[t])},gi.onBufferAppending=function(e,t){var r=this,n=this.hls,i=this.operationQueue,a=this.tracks,o=t.data,s=t.type,l=t.frag,d=t.part,u=t.chunkMeta,c=u.buffering[s],h=self.performance.now();c.start=h;var f=l.stats.buffering,p=d?d.stats.buffering:null;0===f.start&&(f.start=h),p&&0===p.start&&(p.start=h);var g=a.audio,v=!1;"audio"===s&&"audio/mpeg"===(null==g?void 0:g.container)&&(v=!this.lastMpegAudioChunk||1===u.id||this.lastMpegAudioChunk.sn!==u.sn,this.lastMpegAudioChunk=u);var m=l.start,y={execute:function(){if(c.executeStart=self.performance.now(),v){var e=r.sourceBuffer[s];if(e){var t=m-e.timestampOffset;.1<=Math.abs(t)&&(r.log("Updating audio SourceBuffer timestampOffset to "+m+" (delta: "+t+") sn: "+l.sn+")"),e.timestampOffset=m)}}r.appendExecutor(o,s)},onStart:function(){},onComplete:function(){var e=self.performance.now();c.executeEnd=c.end=e,0===f.first&&(f.first=e),p&&0===p.first&&(p.first=e);var t=r.sourceBuffer,i={};for(var n in t)i[n]=wi.getBuffered(t[n]);r.appendErrors[s]=0,"audio"===s||"video"===s?r.appendErrors.audiovideo=0:(r.appendErrors.audio=0,r.appendErrors.video=0),r.hls.trigger(ve.BUFFER_APPENDED,{type:s,frag:l,part:d,chunkMeta:u,parent:l.type,timeRanges:i})},onError:function(e){var t={type:me.MEDIA_ERROR,parent:l.type,details:ye.BUFFER_APPEND_ERROR,sourceBufferName:s,frag:l,part:d,chunkMeta:u,error:e,err:e,fatal:!1};if(e.code===DOMException.QUOTA_EXCEEDED_ERR)t.details=ye.BUFFER_FULL_ERROR;else{var i=++r.appendErrors[s];t.details=ye.BUFFER_APPEND_ERROR,r.warn("Failed "+i+"/"+n.config.appendErrorMaxRetry+' times to append segment in "'+s+'" sourceBuffer'),i>=n.config.appendErrorMaxRetry&&(t.fatal=!0)}n.trigger(ve.ERROR,t)}};i.append(y,s,!!this.pendingTracks[s])},gi.onBufferFlushing=function(e,i){function t(t){return{execute:n.removeExecutor.bind(n,t,i.startOffset,i.endOffset),onStart:function(){},onComplete:function(){n.hls.trigger(ve.BUFFER_FLUSHED,{type:t})},onError:function(e){n.warn("Failed to remove from "+t+" SourceBuffer",e)}}}var n=this,r=this.operationQueue;i.type?r.append(t(i.type),i.type):this.getSourceBufferTypes().forEach(function(e){r.append(t(e),e)})},gi.onFragParsed=function(e,t){var i=this,n=t.frag,r=t.part,a=[],o=r?r.elementaryStreams:n.elementaryStreams;o[M]?a.push("audiovideo"):(o[F]&&a.push("audio"),o[R]&&a.push("video")),0===a.length&&this.warn("Fragments must have at least one ElementaryStreamType set. type: "+n.type+" level: "+n.level+" sn: "+n.sn),this.blockBuffers(function(){var e=self.performance.now();n.stats.buffering.end=e,r&&(r.stats.buffering.end=e);var t=r?r.stats:n.stats;i.hls.trigger(ve.FRAG_BUFFERED,{frag:n,part:r,stats:t,id:n.type})},a)},gi.onFragChanged=function(e,t){this.trimBuffers()},gi.onBufferEos=function(e,n){var r=this;this.getSourceBufferTypes().reduce(function(e,t){var i=r.sourceBuffer[t];return!i||n.type&&n.type!==t||(i.ending=!0,i.ended||(i.ended=!0,r.log(t+" sourceBuffer now EOS"))),e&&!(i&&!i.ended)},!0)&&(this.log("Queueing mediaSource.endOfStream()"),this.blockBuffers(function(){r.getSourceBufferTypes().forEach(function(e){var t=r.sourceBuffer[e];t&&(t.ending=!1)});var e=r.mediaSource;e&&"open"===e.readyState?(r.log("Calling mediaSource.endOfStream()"),e.endOfStream()):e&&r.log("Could not call mediaSource.endOfStream(). mediaSource.readyState: "+e.readyState)}))},gi.onLevelUpdated=function(e,t){var i=t.details;i.fragments.length&&(this.details=i,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())},gi.trimBuffers=function(){var e=this.hls,t=this.details,i=this.media;if(i&&null!==t&&this.getSourceBufferTypes().length){var n=e.config,r=i.currentTime,a=t.levelTargetDuration,o=t.live&&null!==n.liveBackBufferLength?n.liveBackBufferLength:n.backBufferLength;if(J(o)&&0<o){var s=Math.max(o,a),l=Math.floor(r/a)*a-s;this.flushBackBuffer(r,a,l)}if(J(n.frontBufferFlushThreshold)&&0<n.frontBufferFlushThreshold){var d=Math.max(n.maxBufferLength,n.frontBufferFlushThreshold),u=Math.max(d,a),c=Math.floor(r/a)*a+u;this.flushFrontBuffer(r,a,c)}}},gi.flushBackBuffer=function(n,r,a){var o=this,s=this.details,l=this.sourceBuffer;this.getSourceBufferTypes().forEach(function(e){var t=l[e];if(t){var i=wi.getBuffered(t);if(0<i.length&&a>i.start(0)){if(o.hls.trigger(ve.BACK_BUFFER_REACHED,{bufferEnd:a}),null!=s&&s.live)o.hls.trigger(ve.LIVE_BACK_BUFFER_REACHED,{bufferEnd:a});else if(t.ended&&i.end(i.length-1)-n<2*r)return void o.log("Cannot flush "+e+" back buffer while SourceBuffer is in ended state");o.hls.trigger(ve.BUFFER_FLUSHING,{startOffset:0,endOffset:a,type:e})}}})},gi.flushFrontBuffer=function(o,s,l){var d=this,u=this.sourceBuffer;this.getSourceBufferTypes().forEach(function(e){var t=u[e];if(t){var i=wi.getBuffered(t),n=i.length;if(n<2)return;var r=i.start(n-1),a=i.end(n-1);if(r<l||r<=o&&o<=a)return;if(t.ended&&o-a<2*s)return void d.log("Cannot flush "+e+" front buffer while SourceBuffer is in ended state");d.hls.trigger(ve.BUFFER_FLUSHING,{startOffset:r,endOffset:1/0,type:e})}})},gi.updateMediaElementDuration=function(){if(this.details&&this.media&&this.mediaSource&&"open"===this.mediaSource.readyState){var e=this.details,t=this.hls,i=this.media,n=this.mediaSource,r=e.fragments[0].start+e.totalduration,a=i.duration,o=J(n.duration)?n.duration:0;e.live&&t.config.liveDurationInfinity?(n.duration=1/0,this.updateSeekableRange(e)):(o<r&&a<r||!J(a))&&(this.log("Updating Media Source duration to "+r.toFixed(3)),n.duration=r)}},gi.updateSeekableRange=function(e){var t=this.mediaSource,i=e.fragments;if(i.length&&e.live&&null!=t&&t.setLiveSeekableRange){var n=Math.max(0,i[0].start),r=Math.max(n,n+e.totalduration);this.log("Media Source duration is set to "+t.duration+". Setting seekable range to "+n+"-"+r+"."),t.setLiveSeekableRange(n,r)}},gi.checkPendingTracks=function(){var e=this.bufferCodecEventsExpected,t=this.operationQueue,i=this.pendingTracks,n=Object.keys(i).length;if(n&&(!e||2===n||"audiovideo"in i)){this.createSourceBuffers(i),this.pendingTracks={};var r=this.getSourceBufferTypes();if(r.length)this.hls.trigger(ve.BUFFER_CREATED,{tracks:this.tracks}),r.forEach(function(e){t.executeNext(e)});else{var a=new Error("could not create source buffer for media codec(s)");this.hls.trigger(ve.ERROR,{type:me.MEDIA_ERROR,details:ye.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:a,reason:a.message})}}},gi.createSourceBuffers=function(s){var l=this,d=this.sourceBuffer,u=this.mediaSource;if(!u)throw Error("createSourceBuffers called when mediaSource was null");function e(n){if(!d[n]){var e,t=s[n];if(!t)throw Error("source buffer exists for track "+n+", however track does not");var i=-1===(null==(e=t.levelCodec)?void 0:e.indexOf(","))?t.levelCodec:t.codec;i&&"audio"===n.slice(0,5)&&(i=qe(i,l.appendSource));var r=t.container+";codecs="+i;l.log("creating sourceBuffer("+r+")");try{var a=d[n]=u.addSourceBuffer(r),o=n;l.addBufferListener(o,"updatestart",l._onSBUpdateStart),l.addBufferListener(o,"updateend",l._onSBUpdateEnd),l.addBufferListener(o,"error",l._onSBUpdateError),l.appendSource&&l.addBufferListener(o,"bufferedchange",function(e,t){var i=t.removedRanges;null!=i&&i.length&&l.hls.trigger(ve.BUFFER_FLUSHED,{type:n})}),l.tracks[n]={buffer:a,codec:i,container:t.container,levelCodec:t.levelCodec,metadata:t.metadata,id:t.id}}catch(e){l.error("error while trying to add sourceBuffer: "+e.message),l.hls.trigger(ve.ERROR,{type:me.MEDIA_ERROR,details:ye.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:e,sourceBufferName:n,mimeType:r})}}}for(var t in s)e(t)},gi._onSBUpdateStart=function(e){this.operationQueue.current(e).onStart()},gi._onSBUpdateEnd=function(e){var t;if("closed"!==(null==(t=this.mediaSource)?void 0:t.readyState)){var i=this.operationQueue;i.current(e).onComplete(),i.shiftAndExecuteNext(e)}else this.resetBuffer(e)},gi._onSBUpdateError=function(e,t){var i,n=new Error(e+" SourceBuffer error. MediaSource readyState: "+(null==(i=this.mediaSource)?void 0:i.readyState));this.error(""+n,t),this.hls.trigger(ve.ERROR,{type:me.MEDIA_ERROR,details:ye.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:n,fatal:!1});var r=this.operationQueue.current(e);r&&r.onError(n)},gi.removeExecutor=function(e,t,i){var n=this.media,r=this.mediaSource,a=this.operationQueue,o=this.sourceBuffer[e];if(!n||!r||!o)return this.warn("Attempting to remove from the "+e+" SourceBuffer, but it does not exist"),void a.shiftAndExecuteNext(e);var s=J(n.duration)?n.duration:1/0,l=J(r.duration)?r.duration:1/0,d=Math.max(0,t),u=Math.min(i,s,l);d<u&&(!o.ending||o.ended)?(o.ended=!1,this.log("Removing ["+d+","+u+"] from the "+e+" SourceBuffer"),o.remove(d,u)):a.shiftAndExecuteNext(e)},gi.appendExecutor=function(e,t){var i=this.sourceBuffer[t];if(i)i.ended=!1,i.appendBuffer(e);else if(!this.pendingTracks[t])throw new Error("Attempting to append to the "+t+" SourceBuffer, but it does not exist")},gi.blockBuffers=function(e,t){var i=this;if(void 0===t&&(t=this.getSourceBufferTypes()),!t.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve().then(e);var n=this.operationQueue,r=t.map(function(e){return n.appendBlocker(e)});Promise.all(r).then(function(){e(),t.forEach(function(e){var t=i.sourceBuffer[e];null!=t&&t.updating||n.shiftAndExecuteNext(e)})})},gi.getSourceBufferTypes=function(){return Object.keys(this.sourceBuffer)},gi.addBufferListener=function(e,t,i){var n=this.sourceBuffer[e];if(n){var r=i.bind(this,e);this.listeners[e].push({event:t,listener:r}),n.addEventListener(t,r)}},gi.removeBufferListeners=function(e){var t=this.sourceBuffer[e];t&&this.listeners[e].forEach(function(e){t.removeEventListener(e.event,e.listener)})},i(Ti,[{key:"mediaSrc",get:function(){var e,t=(null==(e=this.media)?void 0:e.firstChild)||this.media;return null==t?void 0:t.src}}]),Ti);function Ti(e){var i=this;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendSource=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this.log=void 0,this.warn=void 0,this.error=void 0,this._onEndStreaming=function(e){i.hls&&i.hls.pauseBuffering()},this._onStartStreaming=function(e){i.hls&&i.hls.resumeBuffering()},this._onMediaSourceOpen=function(){var e=i.media,t=i.mediaSource;i.log("Media source opened"),e&&(e.removeEventListener("emptied",i._onMediaEmptied),i.updateMediaElementDuration(),i.hls.trigger(ve.MEDIA_ATTACHED,{media:e,mediaSource:t})),t&&t.removeEventListener("sourceopen",i._onMediaSourceOpen),i.checkPendingTracks()},this._onMediaSourceClose=function(){i.log("Media source closed")},this._onMediaSourceEnded=function(){i.log("Media source ended")},this._onMediaEmptied=function(){var e=i.mediaSrc,t=i._objectUrl;e!==t&&be.error("Media element src was set while attaching MediaSource ("+t+" > "+e+")")},this.hls=e;var t,n="[buffer-controller]";this.appendSource=(t=_e(e.config.preferManagedMediaSource),"undefined"!=typeof self&&t===self.ManagedMediaSource),this.log=be.log.bind(be,n),this.warn=be.warn.bind(be,n),this.error=be.error.bind(be,n),this._initSourceBuffer(),this.registerListeners()}function Li(e){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=e}function Ci(){}function ki(e){var P=this;this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this._abandonRulesCheck=function(){var e=P.fragCurrent,t=P.partCurrent,i=P.hls,n=i.autoLevelEnabled,r=i.media;if(e&&r){var a=performance.now(),o=t?t.stats:e.stats,s=t?t.duration:e.duration,l=a-o.loading.start,d=i.minAutoLevel;if(o.aborted||o.loaded&&o.loaded===o.total||e.level<=d)return P.clearTimer(),void(P._nextAutoLevel=-1);if(n&&!r.paused&&r.playbackRate&&r.readyState){var u=i.mainForwardBufferInfo;if(null!==u){var c=P.bwEstimator.getEstimateTTFB(),h=Math.abs(r.playbackRate);if(!(l<=Math.max(c,s/(2*h)*1e3))){var f=u.len/h,p=o.loading.first?o.loading.first-o.loading.start:-1,g=o.loaded&&-1<p,v=P.getBwEstimate(),m=i.levels,y=m[e.level],b=o.total||Math.max(o.loaded,Math.round(s*y.averageBitrate/8)),w=g?l-p:l;w<1&&g&&(w=Math.min(l,8*o.loaded/v));var E=g?1e3*o.loaded/w:0,S=E?(b-o.loaded)/E:8*b/v+c/1e3;if(!(S<=f)){var A,T=E?8*E:v,L=Number.POSITIVE_INFINITY;for(A=e.level-1;d<A;A--){var C=m[A].maxBitrate;if((L=P.getTimeToLoadFrag(c/1e3,T,s*C,!m[A].details))<f)break}if(!(S<=L||10*s<L)){i.nextLoadLevel=i.nextAutoLevel=A,g?P.bwEstimator.sample(l-Math.min(c,p),o.loaded):P.bwEstimator.sampleTTFB(l);var k=m[A].maxBitrate;P.getBwEstimate()*P.hls.config.abrBandWidthUpFactor>k&&P.resetEstimator(k),P.clearTimer(),be.warn("[abr] Fragment "+e.sn+(t?" part "+t.index:"")+" of level "+e.level+" is loading too slowly;\n      Time to underbuffer: "+f.toFixed(3)+" s\n      Estimated load time for current fragment: "+S.toFixed(3)+" s\n      Estimated load time for down switch fragment: "+L.toFixed(3)+" s\n      TTFB estimate: "+(0|p)+" ms\n      Current BW estimate: "+(J(v)?0|v:"Unknown")+" bps\n      New BW estimate: "+(0|P.getBwEstimate())+" bps\n      Switching to level "+A+" @ "+(0|k)+" bps"),i.trigger(ve.FRAG_LOAD_EMERGENCY_ABORTED,{frag:e,part:t,stats:o})}}}}}}},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}function Pi(t){var e=t.querySelectorAll("source");[].slice.call(e).forEach(function(e){t.removeChild(e)})}var xi,Oi,Ii,Ri=((Ii=_i.prototype).setStreamController=function(e){this.streamController=e},Ii.destroy=function(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null},Ii.registerListeners=function(){var e=this.hls;e.on(ve.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(ve.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(ve.MANIFEST_PARSED,this.onManifestParsed,this),e.on(ve.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(ve.BUFFER_CODECS,this.onBufferCodecs,this),e.on(ve.MEDIA_DETACHING,this.onMediaDetaching,this)},Ii.unregisterListener=function(){var e=this.hls;e.off(ve.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(ve.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(ve.MANIFEST_PARSED,this.onManifestParsed,this),e.off(ve.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(ve.BUFFER_CODECS,this.onBufferCodecs,this),e.off(ve.MEDIA_DETACHING,this.onMediaDetaching,this)},Ii.onFpsDropLevelCapping=function(e,t){var i=this.hls.levels[t.droppedLevel];this.isLevelAllowed(i)&&this.restrictedLevels.push({bitrate:i.bitrate,height:i.height,width:i.width})},Ii.onMediaAttaching=function(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()},Ii.onManifestParsed=function(e,t){var i=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,i.config.capLevelToPlayerSize&&t.video&&this.startCapping()},Ii.onLevelsUpdated=function(e,t){this.timer&&J(this.autoLevelCapping)&&this.detectPlayerSize()},Ii.onBufferCodecs=function(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()},Ii.onMediaDetaching=function(){this.stopCapping()},Ii.detectPlayerSize=function(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0)return void(this.clientRect=null);var e=this.hls.levels;if(e.length){var t=this.hls,i=this.getMaxLevel(e.length-1);i!==this.autoLevelCapping&&be.log("Setting autoLevelCapping to "+i+": "+e[i].height+"p@"+e[i].bitrate+" for media "+this.mediaWidth+"x"+this.mediaHeight),t.autoLevelCapping=i,t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}},Ii.getMaxLevel=function(i){var n=this,e=this.hls.levels;if(!e.length)return-1;var t=e.filter(function(e,t){return n.isLevelAllowed(e)&&t<=i});return this.clientRect=null,_i.getMaxLevelByMediaSize(t,this.mediaWidth,this.mediaHeight)},Ii.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},Ii.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)},Ii.getDimensions=function(){if(this.clientRect)return this.clientRect;var e=this.media,t={width:0,height:0};if(e){var i=e.getBoundingClientRect();t.width=i.width,t.height=i.height,t.width||t.height||(t.width=i.right-i.left||e.width||0,t.height=i.bottom-i.top||e.height||0)}return this.clientRect=t},Ii.isLevelAllowed=function(t){return!this.restrictedLevels.some(function(e){return t.bitrate===e.bitrate&&t.width===e.width&&t.height===e.height})},_i.getMaxLevelByMediaSize=function(e,t,i){if(null==e||!e.length)return-1;for(var n,r,a=e.length-1,o=Math.max(t,i),s=0;s<e.length;s+=1){var l=e[s];if((l.width>=o||l.height>=o)&&(n=l,!(r=e[s+1])||n.width!==r.width||n.height!==r.height)){a=s;break}}return a},i(_i,[{key:"mediaWidth",get:function(){return this.getDimensions().width*this.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*this.contentScaleFactor}},{key:"contentScaleFactor",get:function(){var e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch(e){}return e}}]),_i),Mi=((Oi=Bi.prototype).setStreamController=function(e){this.streamController=e},Oi.registerListeners=function(){this.hls.on(ve.MEDIA_ATTACHING,this.onMediaAttaching,this)},Oi.unregisterListeners=function(){this.hls.off(ve.MEDIA_ATTACHING,this.onMediaAttaching,this)},Oi.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null},Oi.onMediaAttaching=function(e,t){var i=this.hls.config;if(i.capLevelOnFPSDrop){var n=t.media instanceof self.HTMLVideoElement?t.media:null;(this.media=n)&&"function"==typeof n.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),i.fpsDroppedMonitoringPeriod)}},Oi.checkFPS=function(e,t,i){var n=performance.now();if(t){if(this.lastTime){var r=n-this.lastTime,a=i-this.lastDroppedFrames,o=t-this.lastDecodedFrames,s=1e3*a/r,l=this.hls;if(l.trigger(ve.FPS_DROP,{currentDropped:a,currentDecoded:o,totalDroppedFrames:i}),0<s&&a>l.config.fpsDroppedMonitoringThreshold*o){var d=l.currentLevel;be.warn("drop FPS ratio greater than max allowed value for currentLevel: "+d),0<d&&(-1===l.autoLevelCapping||l.autoLevelCapping>=d)&&(d-=1,l.trigger(ve.FPS_DROP_LEVEL_CAPPING,{level:d,droppedLevel:l.currentLevel}),l.autoLevelCapping=d,this.streamController.nextLevelSwitch())}}this.lastTime=n,this.lastDroppedFrames=i,this.lastDecodedFrames=t}},Oi.checkFPSInterval=function(){var e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)},Bi),Di=((xi=Fi.prototype).registerListeners=function(){var e=this.hls;e.on(ve.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ve.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(ve.MANIFEST_PARSED,this.onManifestParsed,this),e.on(ve.ERROR,this.onError,this)},xi.unregisterListeners=function(){var e=this.hls;e&&(e.off(ve.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ve.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(ve.MANIFEST_PARSED,this.onManifestParsed,this),e.off(ve.ERROR,this.onError,this))},xi.startLoad=function(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){var e=1e3*this.timeToLoad-(performance.now()-this.updated);if(0<e)return void this.scheduleRefresh(this.uri,e)}this.loadSteeringManifest(this.uri)}},xi.stopLoad=function(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()},xi.clearTimeout=function(){-1!==this.reloadTimer&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)},xi.destroy=function(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null},xi.removeLevel=function(t){var e=this.levels;e&&(this.levels=e.filter(function(e){return e!==t}))},xi.onManifestLoading=function(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null},xi.onManifestLoaded=function(e,t){var i=t.contentSteering;null!==i&&(this.pathwayId=i.pathwayId,this.uri=i.uri,this.started&&this.startLoad())},xi.onManifestParsed=function(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks},xi.onError=function(e,t){var i=t.errorAction;if(2===(null==i?void 0:i.action)&&1===i.flags){var n=this.levels,r=this.pathwayPriority,a=this.pathwayId;if(t.context){var o=t.context,s=o.groupId,l=o.pathwayId,d=o.type;s&&n?a=this.getPathwayForGroupId(s,d,a):l&&(a=l)}a in this.penalizedPathways||(this.penalizedPathways[a]=performance.now()),!r&&n&&(r=n.reduce(function(e,t){return-1===e.indexOf(t.pathwayId)&&e.push(t.pathwayId),e},[])),r&&1<r.length&&(this.updatePathwayPriority(r),i.resolved=this.pathwayId!==a),i.resolved||be.warn("Could not resolve "+t.details+' ("'+t.error.message+'") with content-steering for Pathway: '+a+" levels: "+(n?n.length:n)+" priorities: "+JSON.stringify(r)+" penalized: "+JSON.stringify(this.penalizedPathways))}},xi.filterParsedLevels=function(e){this.levels=e;var t=this.getLevelsForPathway(this.pathwayId);if(0===t.length){var i=e[0].pathwayId;this.log("No levels found in Pathway "+this.pathwayId+'. Setting initial Pathway to "'+i+'"'),t=this.getLevelsForPathway(i),this.pathwayId=i}return t.length!==e.length?(this.log("Found "+t.length+"/"+e.length+' levels in Pathway "'+this.pathwayId+'"'),t):e},xi.getLevelsForPathway=function(t){return null===this.levels?[]:this.levels.filter(function(e){return t===e.pathwayId})},xi.updatePathwayPriority=function(e){var t;this.pathwayPriority=e;var i=this.penalizedPathways,n=performance.now();Object.keys(i).forEach(function(e){3e5<n-i[e]&&delete i[e]});for(var r=0;r<e.length;r++){var a=e[r];if(!(a in i)){if(a===this.pathwayId)return;var o=this.hls.nextLoadLevel,s=this.hls.levels[o];if(0<(t=this.getLevelsForPathway(a)).length){this.log('Setting Pathway to "'+a+'"'),this.pathwayId=a,Yt(t),this.hls.trigger(ve.LEVELS_UPDATED,{levels:t});var l=this.hls.levels[o];s&&l&&this.levels&&(l.attrs["STABLE-VARIANT-ID"]!==s.attrs["STABLE-VARIANT-ID"]&&l.bitrate!==s.bitrate&&this.log("Unstable Pathways change from bitrate "+s.bitrate+" to "+l.bitrate),this.hls.nextLoadLevel=o);break}}}},xi.getPathwayForGroupId=function(e,t,i){for(var n=this.getLevelsForPathway(i).concat(this.levels||[]),r=0;r<n.length;r++)if(t===ut&&n[r].hasAudioGroup(e)||t===ct&&n[r].hasSubtitleGroup(e))return n[r].pathwayId;return i},xi.clonePathways=function(e){var n=this,r=this.levels;if(r){var u={},c={};e.forEach(function(e){var l=e.ID,t=e["BASE-ID"],d=e["URI-REPLACEMENT"];if(!r.some(function(e){return e.pathwayId===l})){var i=n.getLevelsForPathway(t).map(function(e){var t=new $(e.attrs);t["PATHWAY-ID"]=l;var i=t.AUDIO&&t.AUDIO+"_clone_"+l,n=t.SUBTITLES&&t.SUBTITLES+"_clone_"+l;i&&(u[t.AUDIO]=i,t.AUDIO=i),n&&(c[t.SUBTITLES]=n,t.SUBTITLES=n);var r=Vi(e.uri,t["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",d),a=new Nt({attrs:t,audioCodec:e.audioCodec,bitrate:e.bitrate,height:e.height,name:e.name,url:r,videoCodec:e.videoCodec,width:e.width});if(e.audioGroups)for(var o=1;o<e.audioGroups.length;o++)a.addGroupId("audio",e.audioGroups[o]+"_clone_"+l);if(e.subtitleGroups)for(var s=1;s<e.subtitleGroups.length;s++)a.addGroupId("text",e.subtitleGroups[s]+"_clone_"+l);return a});r.push.apply(r,i),Ni(n.audioTracks,u,d,l),Ni(n.subtitleTracks,c,d,l)}})}},xi.loadSteeringManifest=function(e){var d,u=this,t=this.hls.config,i=t.loader;this.loader&&this.loader.destroy(),this.loader=new i(t);try{d=new self.URL(e)}catch(d){return this.enabled=!1,void this.log("Failed to parse Steering Manifest URI: "+e)}if("data:"!==d.protocol){var n=0|(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate);d.searchParams.set("_HLS_pathway",this.pathwayId),d.searchParams.set("_HLS_throughput",""+n)}var r={responseType:"json",url:d.href},a=t.steeringManifestLoadPolicy.default,o=a.errorRetry||a.timeoutRetry||{},s={loadPolicy:a,timeout:a.maxLoadTimeMs,maxRetry:o.maxNumRetry||0,retryDelay:o.retryDelayMs||0,maxRetryDelay:o.maxRetryDelayMs||0},l={onSuccess:function(e,t,i,n){u.log('Loaded steering manifest: "'+d+'"');var r=e.data;if(1===r.VERSION){u.updated=performance.now(),u.timeToLoad=r.TTL;var a=r["RELOAD-URI"],o=r["PATHWAY-CLONES"],s=r["PATHWAY-PRIORITY"];if(a)try{u.uri=new self.URL(a,d).href}catch(e){return u.enabled=!1,void u.log("Failed to parse Steering Manifest RELOAD-URI: "+a)}u.scheduleRefresh(u.uri||i.url),o&&u.clonePathways(o);var l={steeringManifest:r,url:d.toString()};u.hls.trigger(ve.STEERING_MANIFEST_LOADED,l),s&&u.updatePathwayPriority(s)}else u.log("Steering VERSION "+r.VERSION+" not supported!")},onError:function(e,t,i,n){if(u.log("Error loading steering manifest: "+e.code+" "+e.text+" ("+t.url+")"),u.stopLoad(),410===e.code)return u.enabled=!1,void u.log("Steering manifest "+t.url+" no longer available");var r=1e3*u.timeToLoad;if(429!==e.code)u.scheduleRefresh(u.uri||t.url,r);else{var a=u.loader;if("function"==typeof(null==a?void 0:a.getResponseHeader)){var o=a.getResponseHeader("Retry-After");o&&(r=1e3*parseFloat(o))}u.log("Steering manifest "+t.url+" rate limited")}},onTimeout:function(e,t,i){u.log("Timeout loading steering manifest ("+t.url+")"),u.scheduleRefresh(u.uri||t.url)}};this.log("Requesting steering manifest: "+d),this.loader.load(r,s,l)},xi.scheduleRefresh=function(i,e){var n=this;void 0===e&&(e=1e3*this.timeToLoad),this.clearTimeout(),this.reloadTimer=self.setTimeout(function(){var e,t=null==(e=n.hls)?void 0:e.media;!t||t.ended?n.scheduleRefresh(i,1e3*n.timeToLoad):n.loadSteeringManifest(i)},e)},Fi);function Fi(e){this.hls=void 0,this.log=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this.pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.log=be.log.bind(be,"[content-steering]:"),this.registerListeners()}function Bi(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}function _i(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}function Ni(t,n,r,a){t&&Object.keys(n).forEach(function(i){var e=t.filter(function(e){return e.groupId===i}).map(function(e){var t=ge({},e);return t.details=void 0,t.attrs=new $(t.attrs),t.url=t.attrs.URI=Vi(e.url,e.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",r),t.groupId=t.attrs["GROUP-ID"]=n[i],t.attrs["PATHWAY-ID"]=a,t});t.push.apply(t,e)})}function Vi(e,t,i,n){var r,a=n.HOST,o=n.PARAMS,s=n[i];t&&(r=null==s?void 0:s[t])&&(e=r);var l=new self.URL(e);return a&&!r&&(l.host=a),o&&Object.keys(o).sort().forEach(function(e){e&&l.searchParams.set(e,o[e])}),l.href}var Ui,ji,Hi,Gi=/^age:\s*[\d.]+\s*$/im,zi=((Hi=Xi.prototype).destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null},Hi.abortInternal=function(){var e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,4!==e.readyState&&(this.stats.aborted=!0,e.abort()))},Hi.abort=function(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},Hi.load=function(e,t,i){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=i,this.loadInternal()},Hi.loadInternal=function(){var t=this,e=this.config,i=this.context;if(e&&i){var n=this.loader=new self.XMLHttpRequest,r=this.stats;r.loading.first=0,r.loaded=0,r.aborted=!1;var a=this.xhrSetup;a?Promise.resolve().then(function(){if(t.loader===n&&!t.stats.aborted)return a(n,i.url)}).catch(function(e){if(t.loader===n&&!t.stats.aborted)return n.open("GET",i.url,!0),a(n,i.url)}).then(function(){t.loader!==n||t.stats.aborted||t.openAndSendXhr(n,i,e)}).catch(function(e){t.callbacks.onError({code:n.status,text:e.message},i,n,r)}):this.openAndSendXhr(n,i,e)}},Hi.openAndSendXhr=function(e,t,i){e.readyState||e.open("GET",t.url,!0);var n=t.headers,r=i.loadPolicy,a=r.maxTimeToFirstByteMs,o=r.maxLoadTimeMs;if(n)for(var s in n)e.setRequestHeader(s,n[s]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),i.timeout=a&&J(a)?a:o,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),i.timeout),e.send()},Hi.readystatechange=function(){var e=this.context,t=this.loader,i=this.stats;if(e&&t){var n=t.readyState,r=this.config;if(!i.aborted&&2<=n&&(0===i.loading.first&&(i.loading.first=Math.max(self.performance.now(),i.loading.start),r.timeout!==r.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),r.timeout=r.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),r.loadPolicy.maxLoadTimeMs-(i.loading.first-i.loading.start)))),4===n)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;var a=t.status,o="text"!==t.responseType;if(200<=a&&a<300&&(o&&t.response||null!==t.responseText)){i.loading.end=Math.max(self.performance.now(),i.loading.first);var s=o?t.response:t.responseText,l="arraybuffer"===t.responseType?s.byteLength:s.length;if(i.loaded=i.total=l,i.bwEstimate=8e3*i.total/(i.loading.end-i.loading.first),!this.callbacks)return;var d=this.callbacks.onProgress;if(d&&d(i,e,s,t),!this.callbacks)return;var u={url:t.responseURL,data:s,code:a};this.callbacks.onSuccess(u,i,e,t)}else{var c=r.loadPolicy.errorRetry;Jt(c,i.retry,!1,{url:e.url,data:void 0,code:a})?this.retry(c):(be.error(a+" while loading "+e.url),this.callbacks.onError({code:a,text:t.statusText},e,t,i))}}}},Hi.loadtimeout=function(){if(this.config){var e=this.config.loadPolicy.timeoutRetry;if(Jt(e,this.stats.retry,!0))this.retry(e);else{var t;be.warn("timeout while loading "+(null==(t=this.context)?void 0:t.url));var i=this.callbacks;i&&(this.abortInternal(),i.onTimeout(this.stats,this.context,this.loader))}}},Hi.retry=function(e){var t=this.context,i=this.stats;this.retryDelay=Xt(e,i.retry),i.retry++,be.warn((status?"HTTP Status "+status:"Timeout")+" while loading "+(null==t?void 0:t.url)+", retrying "+i.retry+"/"+e.maxNumRetry+" in "+this.retryDelay+"ms"),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)},Hi.loadprogress=function(e){var t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)},Hi.getCacheAge=function(){var e=null;if(this.loader&&Gi.test(this.loader.getAllResponseHeaders())){var t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e},Hi.getResponseHeader=function(e){return this.loader&&new RegExp("^"+e+":\\s*[\\d.]+\\s*$","im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null},Xi),Wi=((ji=Ki.prototype).push=function(e){this.chunks.push(e),this.dataLength+=e.length},ji.flush=function(){var e,t=this.chunks,a=this.dataLength;return t.length?(e=1===t.length?t[0]:function(e){for(var t=new Uint8Array(a),i=0,n=0;n<e.length;n++){var r=e[n];t.set(r,i),i+=r.length}return t}(t),this.reset(),e):new Uint8Array(0)},ji.reset=function(){this.chunks.length=0,this.dataLength=0},Ki),qi=/(\d+)-(\d+)\/(\d+)/,Yi=((Ui=Qi.prototype).destroy=function(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null},Ui.abortInternal=function(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())},Ui.abort=function(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},Ui.load=function(r,a,o){var s=this,l=this.stats;if(l.loading.start)throw new Error("Loader can only be used once.");l.loading.start=self.performance.now();var e,t,i,n=(e=r,t=this.controller.signal,i={method:"GET",mode:"cors",credentials:"same-origin",signal:t,headers:new self.Headers(ge({},e.headers))},e.rangeEnd&&i.headers.set("Range","bytes="+e.rangeStart+"-"+String(e.rangeEnd-1)),i),d=o.onProgress,u="arraybuffer"===r.responseType,c=u?"byteLength":"length",h=a.loadPolicy,f=h.maxTimeToFirstByteMs,p=h.maxLoadTimeMs;this.context=r,this.config=a,this.callbacks=o,this.request=this.fetchSetup(r,n),self.clearTimeout(this.requestTimeout),a.timeout=f&&J(f)?f:p,this.requestTimeout=self.setTimeout(function(){s.abortInternal(),o.onTimeout(l,r,s.response)},a.timeout),self.fetch(this.request).then(function(e){s.response=s.loader=e;var t=Math.max(self.performance.now(),l.loading.start);if(self.clearTimeout(s.requestTimeout),a.timeout=p,s.requestTimeout=self.setTimeout(function(){s.abortInternal(),o.onTimeout(l,r,s.response)},p-(t-l.loading.start)),e.ok)return l.loading.first=t,l.total=function(e){var t=e.get("Content-Range");if(t){var i=function(e){var t=qi.exec(e);if(t)return parseInt(t[2])-parseInt(t[1])+1}(t);if(J(i))return i}var n=e.get("Content-Length");if(n)return parseInt(n)}(e.headers)||l.total,d&&J(a.highWaterMark)?s.loadProgressively(e,l,r,a.highWaterMark,d):u?e.arrayBuffer():"json"===r.responseType?e.json():e.text();var i=e.status,n=e.statusText;throw new en(n||"fetch, bad network response",i,e)}).then(function(e){var t=s.response;if(!t)throw new Error("loader destroyed");self.clearTimeout(s.requestTimeout),l.loading.end=Math.max(self.performance.now(),l.loading.first);var i=e[c];i&&(l.loaded=l.total=i);var n={url:t.url,data:e,code:t.status};d&&!J(a.highWaterMark)&&d(l,r,e,t),o.onSuccess(n,l,r,t)}).catch(function(e){if(self.clearTimeout(s.requestTimeout),!l.aborted){var t=e&&e.code||0,i=e?e.message:null;o.onError({code:t,text:i},r,e?e.details:null,l)}})},Ui.getCacheAge=function(){var e=null;if(this.response){var t=this.response.headers.get("age");e=t?parseFloat(t):null}return e},Ui.getResponseHeader=function(e){return this.response?this.response.headers.get(e):null},Ui.loadProgressively=function(r,a,o,s,l){void 0===s&&(s=0);var d=new Wi,e=r.body.getReader();return function n(){return e.read().then(function(e){if(e.done)return d.dataLength&&l(a,o,d.flush(),r),Promise.resolve(new ArrayBuffer(0));var t=e.value,i=t.length;return a.loaded+=i,i<s||d.dataLength?(d.push(t),d.dataLength>=s&&l(a,o,d.flush(),r)):l(a,o,t,r),n()}).catch(function(){return Promise.reject()})}()},Qi);function Qi(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||Zi,this.controller=new self.AbortController,this.stats=new O}function Ki(){this.chunks=[],this.dataLength=0}function Xi(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new O,this.retryDelay=0}function Zi(e,t){return new self.Request(e.url,t)}var Ji,$i,en=(s(nn,$i=d(Error)),nn),tn=C(C({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:zi,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:yi,bufferController:Ai,capLevelController:Ri,errorController:oi,fpsController:Mi,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:null,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,useMediaCapabilities:!1,certLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null}},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},{cueHandler:B,enableWebVTT:!1,enableIMSC1:!1,enableCEA708Captions:!1,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:void 0,subtitleTrackController:void 0,timelineController:void 0,audioStreamController:void 0,audioTrackController:void 0,emeController:void 0,cmcdController:void 0,contentSteeringController:Di});function nn(e,t,i){var n;return(n=$i.call(this,e)||this).code=void 0,n.details=void 0,n.code=t,n.details=i,n}function rn(i){return i&&"object"==typeof i?Array.isArray(i)?i.map(rn):Object.keys(i).reduce(function(e,t){return e[t]=rn(i[t]),e},{}):i}var an=function(a){function e(e,t){var i;return(i=a.call(this,e,"[level-controller]")||this)._levels=[],i._firstLevel=-1,i._maxAutoLevel=-1,i._startLevel=void 0,i.currentLevel=null,i.currentLevelIndex=-1,i.manualLevelIndex=-1,i.steering=void 0,i.onParsedComplete=void 0,i.steering=t,i._registerListeners(),i}s(e,a);var t=e.prototype;return t._registerListeners=function(){var e=this.hls;e.on(ve.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ve.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(ve.LEVEL_LOADED,this.onLevelLoaded,this),e.on(ve.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(ve.FRAG_BUFFERED,this.onFragBuffered,this),e.on(ve.ERROR,this.onError,this)},t._unregisterListeners=function(){var e=this.hls;e.off(ve.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ve.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(ve.LEVEL_LOADED,this.onLevelLoaded,this),e.off(ve.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(ve.FRAG_BUFFERED,this.onFragBuffered,this),e.off(ve.ERROR,this.onError,this)},t.destroy=function(){this._unregisterListeners(),this.steering=null,this.resetLevels(),a.prototype.destroy.call(this)},t.stopLoad=function(){this._levels.forEach(function(e){e.loadError=0,e.fragmentError=0}),a.prototype.stopLoad.call(this)},t.resetLevels=function(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1},t.onManifestLoading=function(e,t){this.resetLevels()},t.onManifestLoaded=function(e,t){var b=this.hls.config.preferManagedMediaSource,w=[],E={},S={},A=!1,T=!1,L=!1;t.levels.forEach(function(e){var t,i,n=e.attrs,r=e.audioCodec,a=e.videoCodec;-1===(null==(t=r)?void 0:t.indexOf("mp4a.40.34"))||(Ji=Ji||/chrome|firefox/i.test(navigator.userAgent))&&(e.audioCodec=r=void 0),r&&(e.audioCodec=r=qe(r,b)),0===(null==(i=a)?void 0:i.indexOf("avc1"))&&(a=e.videoCodec=function(){for(var e=a.split(","),t=0;t<e.length;t++){var i=e[t].split(".");if(2<i.length){var n=i.shift()+".";n+=parseInt(i.shift()).toString(16),n+=("000"+parseInt(i.shift()).toString(16)).slice(-4),e[t]=n}}return e.join(",")}());var o=e.width,s=e.height,l=e.unknownCodecs;if(A=A||!(!o||!s),T=T||!!a,L=L||!!r,!(null!=l&&l.length||r&&!Ve(r,"audio",b)||a&&!Ve(a,"video",b))){var d=n.CODECS,u=n["FRAME-RATE"],c=n["HDCP-LEVEL"],h=n["PATHWAY-ID"],f=n.RESOLUTION,p=n["VIDEO-RANGE"],g=(h||".")+"-"+e.bitrate+"-"+f+"-"+u+"-"+d+"-"+p+"-"+c;if(E[g])if(E[g].uri===e.url||e.attrs["PATHWAY-ID"])E[g].addGroupId("audio",n.AUDIO),E[g].addGroupId("text",n.SUBTITLES);else{var v=S[g]+=1;e.attrs["PATHWAY-ID"]=new Array(v+1).join(".");var m=new Nt(e);E[g]=m,w.push(m)}else{var y=new Nt(e);E[g]=y,S[g]=1,w.push(y)}}}),this.filterAndSortMediaOptions(w,t,A,T,L)},t.filterAndSortMediaOptions=function(e,t,o,i,n){var r=this,a=[],s=[],l=e;if((o||i)&&n&&(l=l.filter(function(e){var t,i=e.videoCodec,n=e.videoRange,r=e.width,a=e.height;return(!!i||!(!r||!a))&&!!(t=n)&&-1<Rt.indexOf(t)})),0!==l.length){if(t.audioTracks){var d=this.hls.config.preferManagedMediaSource;on(a=t.audioTracks.filter(function(e){return!e.audioCodec||Ve(e.audioCodec,"audio",d)}))}t.subtitles&&on(s=t.subtitles);var u=l.slice(0);l.sort(function(e,t){if(e.attrs["HDCP-LEVEL"]!==t.attrs["HDCP-LEVEL"])return(e.attrs["HDCP-LEVEL"]||"")>(t.attrs["HDCP-LEVEL"]||"")?1:-1;if(o&&e.height!==t.height)return e.height-t.height;if(e.frameRate!==t.frameRate)return e.frameRate-t.frameRate;if(e.videoRange!==t.videoRange)return Rt.indexOf(e.videoRange)-Rt.indexOf(t.videoRange);if(e.videoCodec!==t.videoCodec){var i=He(e.videoCodec),n=He(t.videoCodec);if(i!==n)return n-i}if(e.uri===t.uri&&e.codecSet!==t.codecSet){var r=Ge(e.codecSet),a=Ge(t.codecSet);if(r!==a)return a-r}return e.averageBitrate!==t.averageBitrate?e.averageBitrate-t.averageBitrate:0});var c=u[0];if(this.steering&&(l=this.steering.filterParsedLevels(l)).length!==u.length)for(var h=0;h<u.length;h++)if(u[h].pathwayId===l[0].pathwayId){c=u[h];break}this._levels=l;for(var f=0;f<l.length;f++)if(l[f]===c){var p;this._firstLevel=f;var g=c.bitrate,v=this.hls.bandwidthEstimate;if(this.log("manifest loaded, "+l.length+" level(s) found, first bitrate: "+g),void 0===(null==(p=this.hls.userConfig)?void 0:p.abrEwmaDefaultEstimate)){var m=Math.min(g,this.hls.config.abrEwmaDefaultEstimateMax);v<m&&v===tn.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=m)}break}var y=n&&!i,b={levels:l,audioTracks:a,subtitleTracks:s,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:n,video:i,altAudio:!y&&a.some(function(e){return!!e.url})};this.hls.trigger(ve.MANIFEST_PARSED,b),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else Promise.resolve().then(function(){if(r.hls){t.levels.length&&r.warn("One or more CODECS in variant not supported: "+JSON.stringify(t.levels[0].attrs));var e=new Error("no level with compatible codecs found in manifest");r.hls.trigger(ve.ERROR,{type:me.MEDIA_ERROR,details:ye.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:e,reason:e.message})}})},t.onError=function(e,t){!t.fatal&&t.context&&t.context.type===dt&&t.context.level===this.level&&this.checkRetry(t)},t.onFragBuffered=function(e,t){var i=t.frag;if(void 0!==i&&i.type===ht){var n=i.elementaryStreams;if(!Object.keys(n).some(function(e){return!!n[e]}))return;var r=this._levels[i.level];null!=r&&r.loadError&&(this.log("Resetting level error count of "+r.loadError+" on frag buffered"),r.loadError=0)}},t.onLevelLoaded=function(e,t){var i,n,r=t.level,a=t.details,o=this._levels[r];if(!o)return this.warn("Invalid level index "+r),void(null!=(n=t.deliveryDirectives)&&n.skip&&(a.deltaUpdateFailed=!0));r===this.currentLevelIndex?(0===o.fragmentError&&(o.loadError=0),this.playlistLoaded(r,t,o.details)):null!=(i=t.deliveryDirectives)&&i.skip&&(a.deltaUpdateFailed=!0)},t.loadPlaylist=function(e){a.prototype.loadPlaylist.call(this);var t=this.currentLevelIndex,i=this.currentLevel;if(i&&this.shouldLoadPlaylist(i)){var n=i.uri;if(e)try{n=e.addDirectives(n)}catch(e){this.warn("Could not construct new URL with HLS Delivery Directives: "+e)}var r=i.attrs["PATHWAY-ID"];this.log("Loading level index "+t+(void 0!==(null==e?void 0:e.msn)?" at sn "+e.msn+" part "+e.part:"")+" with"+(r?" Pathway "+r:"")+" "+n),this.clearTimer(),this.hls.trigger(ve.LEVEL_LOADING,{url:n,level:t,pathwayId:i.attrs["PATHWAY-ID"],id:0,deliveryDirectives:e||null})}},t.removeLevel=function(i){var e,n=this,t=this._levels.filter(function(e,t){return t!==i||(n.steering&&n.steering.removeLevel(e),e===n.currentLevel&&(n.currentLevel=null,n.currentLevelIndex=-1,e.details&&e.details.fragments.forEach(function(e){return e.level=-1})),!1)});Yt(t),this._levels=t,-1<this.currentLevelIndex&&null!=(e=this.currentLevel)&&e.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.hls.trigger(ve.LEVELS_UPDATED,{levels:t})},t.onLevelsUpdated=function(e,t){var i=t.levels;this._levels=i},t.checkMaxAutoUpdated=function(){var e=this.hls,t=e.autoLevelCapping,i=e.maxAutoLevel,n=e.maxHdcpLevel;this._maxAutoLevel!==i&&(this._maxAutoLevel=i,this.hls.trigger(ve.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:t,levels:this.levels,maxAutoLevel:i,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:n}))},i(e,[{key:"levels",get:function(){return 0===this._levels.length?null:this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(e){var t=this._levels;if(0!==t.length){if(e<0||e>=t.length){var i=new Error("invalid level idx"),n=e<0;if(this.hls.trigger(ve.ERROR,{type:me.OTHER_ERROR,details:ye.LEVEL_SWITCH_ERROR,level:e,fatal:n,error:i,reason:i.message}),n)return;e=Math.min(e,t.length-1)}var r=this.currentLevelIndex,a=this.currentLevel,o=a?a.attrs["PATHWAY-ID"]:void 0,s=t[e],l=s.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=s,r!==e||!s.details||!a||o!==l){this.log("Switching to level "+e+" ("+(s.height?s.height+"p ":"")+(s.videoRange?s.videoRange+" ":"")+(s.codecSet?s.codecSet+" ":"")+"@"+s.bitrate+")"+(l?" with Pathway "+l:"")+" from level "+r+(o?" with Pathway "+o:""));var d={level:e,attrs:s.attrs,details:s.details,bitrate:s.bitrate,averageBitrate:s.averageBitrate,maxBitrate:s.maxBitrate,realBitrate:s.realBitrate,width:s.width,height:s.height,codecSet:s.codecSet,audioCodec:s.audioCodec,videoCodec:s.videoCodec,audioGroups:s.audioGroups,subtitleGroups:s.subtitleGroups,loaded:s.loaded,loadError:s.loadError,fragmentError:s.fragmentError,name:s.name,id:s.id,uri:s.uri,url:s.url,urlId:0,audioGroupIds:s.audioGroupIds,textGroupIds:s.textGroupIds};this.hls.trigger(ve.LEVEL_SWITCHING,d);var u=s.details;if(!u||u.live){var c=this.switchParams(s.uri,null==a?void 0:a.details,u);this.loadPlaylist(c)}}}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(void 0!==this._startLevel)return this._startLevel;var e=this.hls.config.startLevel;return void 0!==e?e:this.hls.firstAutoLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}}]),e}(si);function on(e){var i={};e.forEach(function(e){var t=e.groupId||"";e.id=i[t]=i[t]||0,i[t]++})}var sn,ln="NOT_LOADED",dn="APPENDING",un="PARTIAL",cn="OK",hn=((sn=fn.prototype)._registerListeners=function(){var e=this.hls;e.on(ve.BUFFER_APPENDED,this.onBufferAppended,this),e.on(ve.FRAG_BUFFERED,this.onFragBuffered,this),e.on(ve.FRAG_LOADED,this.onFragLoaded,this)},sn._unregisterListeners=function(){var e=this.hls;e.off(ve.BUFFER_APPENDED,this.onBufferAppended,this),e.off(ve.FRAG_BUFFERED,this.onFragBuffered,this),e.off(ve.FRAG_LOADED,this.onFragLoaded,this)},sn.destroy=function(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null},sn.getAppendedFrag=function(e,t){var i=this.activePartLists[t];if(i)for(var n=i.length;n--;){var r=i[n];if(!r)break;var a=r.end;if(r.start<=e&&null!==a&&e<=a)return r}return this.getBufferedFrag(e,t)},sn.getBufferedFrag=function(e,t){for(var i=this.fragments,n=Object.keys(i),r=n.length;r--;){var a=i[n[r]];if((null==a?void 0:a.body.type)===t&&a.buffered){var o=a.body;if(o.start<=e&&e<=o.end)return o}}return null},sn.detectEvictedFragments=function(n,r,a,e){var o=this;this.timeRanges&&(this.timeRanges[n]=r);var s=(null==e?void 0:e.fragment.sn)||-1;Object.keys(this.fragments).forEach(function(e){var i=o.fragments[e];if(i&&!(s>=i.body.sn))if(i.buffered||i.loaded){var t=i.range[n];t&&t.time.some(function(e){var t=!o.isTimeBuffered(e.startPTS,e.endPTS,r);return t&&o.removeFragment(i.body),t})}else i.body.type===a&&o.removeFragment(i.body)})},sn.detectPartialFragments=function(e){var r=this,a=this.timeRanges,o=e.frag,s=e.part;if(a&&"initSegment"!==o.sn){var t=gn(o),l=this.fragments[t];if(!(!l||l.buffered&&o.gap)){var d=!o.relurl;Object.keys(a).forEach(function(e){var t=o.elementaryStreams[e];if(t){var i=a[e],n=d||!0===t.partial;l.range[e]=r.getBufferedTimes(o,s,n,i)}}),l.loaded=null,Object.keys(l.range).length?(l.buffered=!0,(l.body.endList=o.endList||l.body.endList)&&(this.endListFragments[l.body.type]=l),pn(l)||this.removeParts(o.sn-1,o.type)):this.removeFragment(l.body)}}},sn.removeParts=function(t,e){var i=this.activePartLists[e];i&&(this.activePartLists[e]=i.filter(function(e){return e.fragment.sn>=t}))},sn.fragBuffered=function(e,t){var i=gn(e),n=this.fragments[i];!n&&t&&(n=this.fragments[i]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),n&&(n.loaded=null,n.buffered=!0)},sn.getBufferedTimes=function(e,t,i,n){for(var r={time:[],partial:i},a=e.start,o=e.end,s=e.minEndPTS||o,l=e.maxStartPTS||a,d=0;d<n.length;d++){var u=n.start(d)-this.bufferPadding,c=n.end(d)+this.bufferPadding;if(u<=l&&s<=c){r.time.push({startPTS:Math.max(a,n.start(d)),endPTS:Math.min(o,n.end(d))});break}if(a<c&&u<o){var h=Math.max(a,n.start(d)),f=Math.min(o,n.end(d));h<f&&(r.partial=!0,r.time.push({startPTS:h,endPTS:f}))}else if(o<=u)break}return r},sn.getPartialFragment=function(i){var n,r,a,o=null,s=0,l=this.bufferPadding,d=this.fragments;return Object.keys(d).forEach(function(e){var t=d[e];t&&pn(t)&&(r=t.body.start-l,a=t.body.end+l,r<=i&&i<=a&&(n=Math.min(i-r,a-i),s<=n&&(o=t.body,s=n)))}),o},sn.isEndListAppended=function(e){var t=this.endListFragments[e];return void 0!==t&&(t.buffered||pn(t))},sn.getState=function(e){var t=gn(e),i=this.fragments[t];return i?i.buffered?pn(i)?un:cn:dn:ln},sn.isTimeBuffered=function(e,t,i){for(var n,r,a=0;a<i.length;a++){if(n=i.start(a)-this.bufferPadding,r=i.end(a)+this.bufferPadding,n<=e&&t<=r)return!0;if(t<=n)return!1}return!1},sn.onFragLoaded=function(e,t){var i=t.frag,n=t.part;if("initSegment"!==i.sn&&!i.bitrateTest){var r=n?null:t,a=gn(i);this.fragments[a]={body:i,appendedPTS:null,loaded:r,buffered:!1,range:Object.create(null)}}},sn.onBufferAppended=function(e,t){var i=this,n=t.frag,r=t.part,a=t.timeRanges;if("initSegment"!==n.sn){var o=n.type;if(r){var s=this.activePartLists[o];s||(this.activePartLists[o]=s=[]),s.push(r)}this.timeRanges=a,Object.keys(a).forEach(function(e){var t=a[e];i.detectEvictedFragments(e,t,o,r)})}},sn.onFragBuffered=function(e,t){this.detectPartialFragments(t)},sn.hasFragment=function(e){var t=gn(e);return!!this.fragments[t]},sn.hasParts=function(e){var t;return!(null==(t=this.activePartLists[e])||!t.length)},sn.removeFragmentsInRange=function(n,r,a,o,s){var l=this;o&&!this.hasGaps||Object.keys(this.fragments).forEach(function(e){var t=l.fragments[e];if(t){var i=t.body;i.type!==a||o&&!i.gap||i.start<r&&i.end>n&&(t.buffered||s)&&l.removeFragment(i)}})},sn.removeFragment=function(e){var t=gn(e);e.stats.loaded=0,e.clearElementaryStreamInfo();var i=this.activePartLists[e.type];if(i){var n=e.sn;this.activePartLists[e.type]=i.filter(function(e){return e.fragment.sn!==n})}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]},sn.removeAllFragments=function(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1},fn);function fn(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}function pn(e){var t,i,n;return e.buffered&&(e.body.gap||(null==(t=e.range.video)?void 0:t.partial)||(null==(i=e.range.audio)?void 0:i.partial)||(null==(n=e.range.audiovideo)?void 0:n.partial))}function gn(e){return e.type+"_"+e.level+"_"+e.sn}var vn,mn=Math.pow(2,17),yn=((vn=bn.prototype).destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},vn.abort=function(){this.loader&&this.loader.abort()},vn.load=function(s,l){var d=this,u=s.url;if(!u)return Promise.reject(new Cn({type:me.NETWORK_ERROR,details:ye.FRAG_LOAD_ERROR,fatal:!1,frag:s,error:new Error("Fragment does not have a "+(u?"part list":"url")),networkDetails:null}));this.abort();var i=this.config,c=i.fLoader,h=i.loader;return new Promise(function(a,r){if(d.loader&&d.loader.destroy(),s.gap){if(s.tagList.some(function(e){return"GAP"===e[0]}))return void r(En(s));s.gap=!1}var o=d.loader=s.loader=c?new c(i):new h(i),e=wn(s),t=Zt(i.fragLoadPolicy.default),n={loadPolicy:t,timeout:t.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:"initSegment"===s.sn?1/0:mn};s.stats=o.stats,o.load(e,n,{onSuccess:function(e,t,i,n){d.resetLoader(s,o);var r=e.data;i.resetIV&&s.decryptdata&&(s.decryptdata.iv=new Uint8Array(r.slice(0,16)),r=r.slice(16)),a({frag:s,part:null,payload:r,networkDetails:n})},onError:function(e,t,i,n){d.resetLoader(s,o),r(new Cn({type:me.NETWORK_ERROR,details:ye.FRAG_LOAD_ERROR,fatal:!1,frag:s,response:C({url:u,data:void 0},e),error:new Error("HTTP Error "+e.code+" "+e.text),networkDetails:i,stats:n}))},onAbort:function(e,t,i){d.resetLoader(s,o),r(new Cn({type:me.NETWORK_ERROR,details:ye.INTERNAL_ABORTED,fatal:!1,frag:s,error:new Error("Aborted"),networkDetails:i,stats:e}))},onTimeout:function(e,t,i){d.resetLoader(s,o),r(new Cn({type:me.NETWORK_ERROR,details:ye.FRAG_LOAD_TIMEOUT,fatal:!1,frag:s,error:new Error("Timeout after "+n.timeout+"ms"),networkDetails:i,stats:e}))},onProgress:function(e,t,i,n){l&&l({frag:s,part:null,payload:i,networkDetails:n})}})})},vn.loadPart=function(l,d,u){var c=this;this.abort();var t=this.config,i=t.fLoader,h=t.loader;return new Promise(function(a,r){if(c.loader&&c.loader.destroy(),l.gap||d.gap)r(En(l,d));else{var o=c.loader=l.loader=i?new i(t):new h(t),s=wn(l,d),e=Zt(t.fragLoadPolicy.default),n={loadPolicy:e,timeout:e.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:mn};d.stats=o.stats,o.load(s,n,{onSuccess:function(e,t,i,n){c.resetLoader(l,o),c.updateStatsFromPart(l,d);var r={frag:l,part:d,payload:e.data,networkDetails:n};u(r),a(r)},onError:function(e,t,i,n){c.resetLoader(l,o),r(new Cn({type:me.NETWORK_ERROR,details:ye.FRAG_LOAD_ERROR,fatal:!1,frag:l,part:d,response:C({url:s.url,data:void 0},e),error:new Error("HTTP Error "+e.code+" "+e.text),networkDetails:i,stats:n}))},onAbort:function(e,t,i){l.stats.aborted=d.stats.aborted,c.resetLoader(l,o),r(new Cn({type:me.NETWORK_ERROR,details:ye.INTERNAL_ABORTED,fatal:!1,frag:l,part:d,error:new Error("Aborted"),networkDetails:i,stats:e}))},onTimeout:function(e,t,i){c.resetLoader(l,o),r(new Cn({type:me.NETWORK_ERROR,details:ye.FRAG_LOAD_TIMEOUT,fatal:!1,frag:l,part:d,error:new Error("Timeout after "+n.timeout+"ms"),networkDetails:i,stats:e}))}})}})},vn.updateStatsFromPart=function(e,t){var i=e.stats,n=t.stats,r=n.total;if(i.loaded+=n.loaded,r){var a=Math.round(e.duration/t.duration),o=Math.min(Math.round(i.loaded/r),a),s=(a-o)*Math.round(i.loaded/o);i.total=i.loaded+s}else i.total=Math.max(i.loaded,i.total);var l=i.loading,d=n.loading;l.start?l.first+=d.first-d.start:(l.start=d.start,l.first=d.first),l.end=d.end},vn.resetLoader=function(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()},bn);function bn(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}function wn(e,t){void 0===t&&(t=null);var i=t||e,n={frag:e,part:t,responseType:"arraybuffer",url:i.url,headers:{},rangeStart:0,rangeEnd:0},r=i.byteRangeStartOffset,a=i.byteRangeEndOffset;if(J(r)&&J(a)){var o,s=r,l=a;if("initSegment"===e.sn&&"AES-128"===(null==(o=e.decryptdata)?void 0:o.method)){var d=a-r;d%16&&(l=a+(16-d%16)),0!==r&&(n.resetIV=!0,s=r-16)}n.rangeStart=s,n.rangeEnd=l}return n}function En(e,t){var i=new Error("GAP "+(e.gap?"tag":"attribute")+" found"),n={type:me.MEDIA_ERROR,details:ye.FRAG_GAP,fatal:!1,frag:e,error:i,networkDetails:null};return t&&(n.part=t),(t||e).stats.aborted=!0,new Cn(n)}function Sn(e,t,i,n,r,a){void 0===n&&(n=0),void 0===r&&(r=-1),void 0===a&&(a=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=e,this.sn=t,this.id=i,this.size=n,this.part=r,this.partial=a}var An,Tn,Ln,Cn=(s(In,Ln=d(Error)),In),kn=((Tn=On.prototype).abort=function(e){for(var t in this.keyUriToKeyInfo){var i=this.keyUriToKeyInfo[t].loader;if(i){var n;if(e&&e!==(null==(n=i.context)?void 0:n.frag.type))return;i.abort()}}},Tn.detach=function(){for(var e in this.keyUriToKeyInfo){var t=this.keyUriToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}},Tn.destroy=function(){for(var e in this.detach(),this.keyUriToKeyInfo){var t=this.keyUriToKeyInfo[e].loader;t&&t.destroy()}this.keyUriToKeyInfo={}},Tn.createKeyLoadError=function(e,t,i,n,r){return void 0===t&&(t=ye.KEY_LOAD_ERROR),new Cn({type:me.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:r,error:i,networkDetails:n})},Tn.loadClear=function(e,i){var n=this;if(this.emeController&&this.config.emeEnabled)for(var r=e.sn,a=e.cc,t=function(){var t=i[o];if(a<=t.cc&&("initSegment"===r||"initSegment"===t.sn||r<t.sn))return n.emeController.selectKeySystemFormat(t).then(function(e){t.setKeyFormat(e)}),1},o=0;o<i.length&&!t();o++);},Tn.load=function(t){var i=this;return!t.decryptdata&&t.encrypted&&this.emeController?this.emeController.selectKeySystemFormat(t).then(function(e){return i.loadInternal(t,e)}):this.loadInternal(t)},Tn.loadInternal=function(t,e){var i,n;e&&t.setKeyFormat(e);var r=t.decryptdata;if(!r){var a=new Error(e?"Expected frag.decryptdata to be defined after setting format "+e:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(t,ye.KEY_LOAD_ERROR,a))}var o=r.uri;if(!o)return Promise.reject(this.createKeyLoadError(t,ye.KEY_LOAD_ERROR,new Error('Invalid key URI: "'+o+'"')));var s,l=this.keyUriToKeyInfo[o];if(null!=(i=l)&&i.decryptdata.key)return r.key=l.decryptdata.key,Promise.resolve({frag:t,keyInfo:l});if(null!=(n=l)&&n.keyLoadPromise)switch(null==(s=l.mediaKeySessionContext)?void 0:s.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return l.keyLoadPromise.then(function(e){return r.key=e.keyInfo.decryptdata.key,{frag:t,keyInfo:l}})}switch(l=this.keyUriToKeyInfo[o]={decryptdata:r,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},r.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return"identity"===r.keyFormat?this.loadKeyHTTP(l,t):this.loadKeyEME(l,t);case"AES-128":return this.loadKeyHTTP(l,t);default:return Promise.reject(this.createKeyLoadError(t,ye.KEY_LOAD_ERROR,new Error('Key supplied with unsupported METHOD: "'+r.method+'"')))}},Tn.loadKeyEME=function(t,e){var i={frag:e,keyInfo:t};if(this.emeController&&this.config.emeEnabled){var n=this.emeController.loadKey(i);if(n)return(t.keyLoadPromise=n.then(function(e){return t.mediaKeySessionContext=e,i})).catch(function(e){throw t.keyLoadPromise=null,e})}return Promise.resolve(i)},Tn.loadKeyHTTP=function(n,a){var d=this,o=this.config,u=new o.loader(o);return a.keyLoader=n.loader=u,n.keyLoadPromise=new Promise(function(s,l){var r={keyInfo:n,frag:a,responseType:"arraybuffer",url:n.decryptdata.uri},e=o.keyLoadPolicy.default,t={loadPolicy:e,timeout:e.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},i={onSuccess:function(e,t,i,n){var r=i.frag,a=i.keyInfo,o=i.url;if(!r.decryptdata||a!==d.keyUriToKeyInfo[o])return l(d.createKeyLoadError(r,ye.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),n));a.decryptdata.key=r.decryptdata.key=new Uint8Array(e.data),r.keyLoader=null,a.loader=null,s({frag:r,keyInfo:a})},onError:function(e,t,i,n){d.resetLoader(t),l(d.createKeyLoadError(a,ye.KEY_LOAD_ERROR,new Error("HTTP Error "+e.code+" loading key "+e.text),i,C({url:r.url,data:void 0},e)))},onTimeout:function(e,t,i){d.resetLoader(t),l(d.createKeyLoadError(a,ye.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),i))},onAbort:function(e,t,i){d.resetLoader(t),l(d.createKeyLoadError(a,ye.INTERNAL_ABORTED,new Error("key loading aborted"),i))}};u.load(r,t,i)})},Tn.resetLoader=function(e){var t=e.frag,i=e.keyInfo,n=e.url,r=i.loader;t.keyLoader===r&&(t.keyLoader=null,i.loader=null),delete this.keyUriToKeyInfo[n],r&&r.destroy()},On),Pn=((An=xn.prototype).destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed()},An.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},An.onHandlerDestroyed=function(){},An.hasInterval=function(){return!!this._tickInterval},An.hasNextTick=function(){return!!this._tickTimer},An.setInterval=function(e){return!this._tickInterval&&(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)},An.clearInterval=function(){return!(!this._tickInterval||(self.clearInterval(this._tickInterval),this._tickInterval=null))},An.clearNextTick=function(){return!(!this._tickTimer||(self.clearTimeout(this._tickTimer),this._tickTimer=null))},An.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),1<this._tickCallCount&&this.tickImmediate(),this._tickCallCount=0)},An.tickImmediate=function(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)},An.doTick=function(){},xn);function xn(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}function On(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}function In(e){var t;return(t=Ln.call(this,e.error.message)||this).data=void 0,t.data=e,t}function Rn(e,t){for(var i=0,n=e.length;i<n;i++){var r;if((null==(r=e[i])?void 0:r.cc)===t)return e[i]}return null}function Mn(e,t){if(e){var i=e.start+t;e.start=e.startPTS=i,e.endPTS=i+e.duration}}function Dn(e,t){for(var i=t.fragments,n=0,r=i.length;n<r;n++)Mn(i[n],e);t.fragmentHint&&Mn(t.fragmentHint,e),t.alignedSliding=!0}var Fn,Bn,_n=(tr.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},tr),Nn=(er.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},er),Vn=((Bn=$n.prototype).uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),i=new Uint32Array(4),n=0;n<4;n++)i[n]=t.getUint32(4*n);return i},Bn.initTable=function(){var e=this.sBox,t=this.invSBox,i=this.subMix,n=i[0],r=i[1],a=i[2],o=i[3],s=this.invSubMix,l=s[0],d=s[1],u=s[2],c=s[3],h=new Uint32Array(256),f=0,p=0,g=0;for(g=0;g<256;g++)h[g]=g<128?g<<1:g<<1^283;for(g=0;g<256;g++){var v=p^p<<1^p<<2^p<<3^p<<4;v=v>>>8^255&v^99;var m=h[t[e[f]=v]=f],y=h[m],b=h[y],w=257*h[v]^16843008*v;n[f]=w<<24|w>>>8,r[f]=w<<16|w>>>16,a[f]=w<<8|w>>>24,o[f]=w,w=16843009*b^65537*y^257*m^16843008*f,l[v]=w<<24|w>>>8,d[v]=w<<16|w>>>16,u[v]=w<<8|w>>>24,c[v]=w,f?(f=m^h[h[h[b^m]]],p^=h[h[p]]):f=p=1}},Bn.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),i=!0,n=0;n<t.length&&i;)i=t[n]===this.key[n],n++;if(!i){this.key=t;var r=this.keySize=t.length;if(4!==r&&6!==r&&8!==r)throw new Error("Invalid aes key size="+r);var a,o,s,l,d=this.ksRows=4*(r+6+1),u=this.keySchedule=new Uint32Array(d),c=this.invKeySchedule=new Uint32Array(d),h=this.sBox,f=this.rcon,p=this.invSubMix,g=p[0],v=p[1],m=p[2],y=p[3];for(a=0;a<d;a++)a<r?s=u[a]=t[a]:(l=s,a%r==0?(l=h[(l=l<<8|l>>>24)>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l],l^=f[a/r|0]<<24):6<r&&a%r==4&&(l=h[l>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l]),u[a]=s=(u[a-r]^l)>>>0);for(o=0;o<d;o++)a=d-o,l=3&o?u[a]:u[a-4],c[o]=o<4||a<=4?l:g[h[l>>>24]]^v[h[l>>>16&255]]^m[h[l>>>8&255]]^y[h[255&l]],c[o]=c[o]>>>0}},Bn.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},Bn.decrypt=function(e,t,i){for(var n,r,a,o,s,l,d,u,c,h,f,p,g,v,m=this.keySize+6,y=this.invKeySchedule,b=this.invSBox,w=this.invSubMix,E=w[0],S=w[1],A=w[2],T=w[3],L=this.uint8ArrayToUint32Array_(i),C=L[0],k=L[1],P=L[2],x=L[3],O=new Int32Array(e),I=new Int32Array(O.length),R=this.networkToHostOrderSwap;t<O.length;){for(c=R(O[t]),h=R(O[t+1]),f=R(O[t+2]),p=R(O[t+3]),s=c^y[0],l=p^y[1],d=f^y[2],u=h^y[3],g=4,v=1;v<m;v++)n=E[s>>>24]^S[l>>16&255]^A[d>>8&255]^T[255&u]^y[g],r=E[l>>>24]^S[d>>16&255]^A[u>>8&255]^T[255&s]^y[g+1],a=E[d>>>24]^S[u>>16&255]^A[s>>8&255]^T[255&l]^y[g+2],o=E[u>>>24]^S[s>>16&255]^A[l>>8&255]^T[255&d]^y[g+3],s=n,l=r,d=a,u=o,g+=4;n=b[s>>>24]<<24^b[l>>16&255]<<16^b[d>>8&255]<<8^b[255&u]^y[g],r=b[l>>>24]<<24^b[d>>16&255]<<16^b[u>>8&255]<<8^b[255&s]^y[g+1],a=b[d>>>24]<<24^b[u>>16&255]<<16^b[s>>8&255]<<8^b[255&l]^y[g+2],o=b[u>>>24]<<24^b[s>>16&255]<<16^b[l>>8&255]<<8^b[255&d]^y[g+3],I[t]=R(n^C),I[t+1]=R(o^k),I[t+2]=R(a^P),I[t+3]=R(r^x),C=c,k=h,P=f,x=p,t+=4}return I.buffer},$n),Un=((Fn=Jn.prototype).destroy=function(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null},Fn.isSync=function(){return this.useSoftware},Fn.flush=function(){var e=this.currentResult,t=this.remainderData;if(!e||t)return this.reset(),null;var i,n,r,a=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?(r=(n=(i=a).byteLength)&&new DataView(i.buffer).getUint8(n-1))?j(i,0,n-r):i:a},Fn.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)},Fn.decrypt=function(n,r,a){var o=this;return this.useSoftware?new Promise(function(e,t){o.softwareDecrypt(new Uint8Array(n),r,a);var i=o.flush();i?e(i.buffer):t(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(n),r,a)},Fn.softwareDecrypt=function(e,t,i){var n=this.currentIV,r=this.currentResult,a=this.remainderData;this.logOnce("JS AES decrypt"),a&&(e=Ie(a,e),this.remainderData=null);var o=this.getValidChunk(e);if(!o.length)return null;n&&(i=n);var s=this.softwareDecrypter;(s=s||(this.softwareDecrypter=new Vn)).expandKey(t);var l=r;return this.currentResult=s.decrypt(o.buffer,0,i),this.currentIV=j(o,-16).buffer,l||null},Fn.webCryptoDecrypt=function(t,i,n){var r=this;if(this.key!==i||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(t,i,n));this.key=i,this.fastAesKey=new Nn(this.subtle,i)}return this.fastAesKey.expandKey().then(function(e){return r.subtle?(r.logOnce("WebCrypto AES decrypt"),new _n(r.subtle,new Uint8Array(n)).decrypt(t.buffer,e)):Promise.reject(new Error("web crypto not initialized"))}).catch(function(e){return be.warn("[decrypter]: WebCrypto Error, disable WebCrypto API, "+e.name+": "+e.message),r.onWebCryptoError(t,i,n)})},Fn.onWebCryptoError=function(e,t,i){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,i);var n=this.flush();if(n)return n.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")},Fn.getValidChunk=function(e){var t=e,i=e.length-e.length%16;return i!==e.length&&(t=j(e,0,i),this.remainderData=j(e,i)),t},Fn.logOnce=function(e){this.logEnabled&&(be.log("[decrypter]: "+e),this.logEnabled=!1)},Jn),jn="STOPPED",Hn="IDLE",Gn="KEY_LOADING",zn="FRAG_LOADING",Wn="FRAG_LOADING_WAITING_RETRY",qn="PARSING",Yn="PARSED",Qn="ENDED",Kn="ERROR",Xn="WAITING_LEVEL",Zn=function(o){function e(e,t,i,n,r){var a;return(a=o.call(this)||this).hls=void 0,a.fragPrevious=null,a.fragCurrent=null,a.fragmentTracker=void 0,a.transmuxer=null,a._state=jn,a.playlistType=void 0,a.media=null,a.mediaBuffer=null,a.config=void 0,a.bitrateTest=!1,a.lastCurrentTime=0,a.nextLoadPosition=0,a.startPosition=0,a.startTimeOffset=null,a.loadedmetadata=!1,a.retryDate=0,a.levels=null,a.fragmentLoader=void 0,a.keyLoader=void 0,a.levelLastLoaded=null,a.startFragRequested=!1,a.decrypter=void 0,a.initPTS=[],a.onvseeking=null,a.onvended=null,a.logPrefix="",a.log=void 0,a.warn=void 0,a.playlistType=r,a.logPrefix=n,a.log=be.log.bind(be,n+":"),a.warn=be.warn.bind(be,n+":"),a.hls=e,a.fragmentLoader=new yn(e.config),a.keyLoader=i,a.fragmentTracker=t,a.config=e.config,a.decrypter=new Un(e.config),e.on(ve.MANIFEST_LOADED,a.onManifestLoaded,function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(a)),a}s(e,o);var t=e.prototype;return t.doTick=function(){this.onTickEnd()},t.onTickEnd=function(){},t.startLoad=function(e){},t.stopLoad=function(){this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);var e=this.fragCurrent;null!=e&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=jn},t._streamEnded=function(e,t){if(t.live||e.nextStart||!e.end||!this.media)return!1;var i=t.partList;if(null!=i&&i.length){var n=i[i.length-1];return wi.isBuffered(this.media,n.start+n.duration/2)}var r=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(r)},t.getLevelDetails=function(){var e;if(this.levels&&null!==this.levelLastLoaded)return null==(e=this.levelLastLoaded)?void 0:e.details},t.onMediaAttached=function(e,t){var i=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),i.addEventListener("seeking",this.onvseeking),i.addEventListener("ended",this.onvended);var n=this.config;this.levels&&n.autoStartLoad&&this.state===jn&&this.startLoad(n.startPosition)},t.onMediaDetaching=function(){var e=this.media;null!=e&&e.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&this.onvseeking&&this.onvended&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},t.onMediaSeeking=function(){var e=this.config,t=this.fragCurrent,i=this.media,n=this.mediaBuffer,r=this.state,a=i?i.currentTime:0,o=wi.bufferInfo(n||i,a,e.maxBufferHole);if(this.log("media seeking to "+(J(a)?a.toFixed(3):a)+", state: "+r),this.state===Qn)this.resetLoadingState();else if(t){var s=e.maxFragLookUpTolerance,l=t.start-s,d=t.start+t.duration+s;if(!o.len||d<o.start||l>o.end){var u=d<a;(a<l||u)&&(u&&t.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),t.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}i&&(this.fragmentTracker.removeFragmentsInRange(a,1/0,this.playlistType,!0),this.lastCurrentTime=a),this.loadedmetadata||o.len||(this.nextLoadPosition=this.startPosition=a),this.tickImmediate()},t.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},t.onManifestLoaded=function(e,t){this.startTimeOffset=t.startTimeOffset,this.initPTS=[]},t.onHandlerDestroying=function(){this.hls.off(ve.MANIFEST_LOADED,this.onManifestLoaded,this),this.stopLoad(),o.prototype.onHandlerDestroying.call(this),this.hls=null},t.onHandlerDestroyed=function(){this.state=jn,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,o.prototype.onHandlerDestroyed.call(this)},t.loadFragment=function(e,t,i){this._loadFragForPlayback(e,t,i)},t._loadFragForPlayback=function(i,e,t){var n=this;this._doFragLoad(i,e,t,function(e){if(n.fragContextChanged(i))return n.warn("Fragment "+i.sn+(e.part?" p: "+e.part.index:"")+" of level "+i.level+" was dropped during download."),void n.fragmentTracker.removeFragment(i);i.stats.chunkCount++,n._handleFragmentLoadProgress(e)}).then(function(e){if(e){var t=n.state;n.fragContextChanged(i)?t!==zn&&(n.fragCurrent||t!==qn)||(n.fragmentTracker.removeFragment(i),n.state=Hn):("payload"in e&&(n.log("Loaded fragment "+i.sn+" of level "+i.level),n.hls.trigger(ve.FRAG_LOADED,e)),n._handleFragmentLoadComplete(e))}}).catch(function(e){n.state!==jn&&n.state!==Kn&&(n.warn("Frag error: "+((null==e?void 0:e.message)||e)),n.resetFragmentLoading(i))})},t.clearTrackerIfNeeded=function(e){var t,i=this.fragmentTracker;if(i.getState(e)===dn){var n=e.type,r=this.getFwdBufferInfo(this.mediaBuffer,n),a=Math.max(e.duration,r?r.len:this.config.maxBufferLength),o=this.backtrackFragment;1!=(o?e.sn-o.sn:0)&&!this.reduceMaxBufferLength(a,e.duration)||i.removeFragment(e)}else 0===(null==(t=this.mediaBuffer)?void 0:t.buffered.length)?i.removeAllFragments():i.hasParts(e.type)&&(i.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),i.getState(e)===un&&i.removeFragment(e))},t.checkLiveUpdate=function(e){if(e.updated&&!e.live){var t=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)},t.flushMainBuffer=function(e,t,i){if(void 0===i&&(i=null),e-t){var n={startOffset:e,endOffset:t,type:i};this.hls.trigger(ve.BUFFER_FLUSHING,n)}},t._loadInitSegment=function(a,e){var o=this;this._doFragLoad(a,e).then(function(e){if(!e||o.fragContextChanged(a)||!o.levels)throw new Error("init load aborted");return e}).then(function(i){var n=o.hls,e=i.payload,t=a.decryptdata;if(e&&0<e.byteLength&&null!=t&&t.key&&t.iv&&"AES-128"===t.method){var r=self.performance.now();return o.decrypter.decrypt(new Uint8Array(e),t.key.buffer,t.iv.buffer).catch(function(e){throw n.trigger(ve.ERROR,{type:me.MEDIA_ERROR,details:ye.FRAG_DECRYPT_ERROR,fatal:!1,error:e,reason:e.message,frag:a}),e}).then(function(e){var t=self.performance.now();return n.trigger(ve.FRAG_DECRYPTED,{frag:a,payload:e,stats:{tstart:r,tdecrypt:t}}),i.payload=e,o.completeInitSegmentLoad(i)})}return o.completeInitSegmentLoad(i)}).catch(function(e){o.state!==jn&&o.state!==Kn&&(o.warn(e),o.resetFragmentLoading(a))})},t.completeInitSegmentLoad=function(e){if(!this.levels)throw new Error("init load aborted, missing levels");var t=e.frag.stats;this.state=Hn,e.frag.data=new Uint8Array(e.payload),t.parsing.start=t.buffering.start=self.performance.now(),t.parsing.end=t.buffering.end=self.performance.now(),this.tick()},t.fragContextChanged=function(e){var t=this.fragCurrent;return!e||!t||e.sn!==t.sn||e.level!==t.level},t.fragBufferedComplete=function(e,t){var i,n,r,a,o=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log("Buffered "+e.type+" sn: "+e.sn+(t?" part: "+t.index:"")+" of "+(this.playlistType===ht?"level":"track")+" "+e.level+" (frag:["+(null!=(i=e.startPTS)?i:NaN).toFixed(3)+"-"+(null!=(n=e.endPTS)?n:NaN).toFixed(3)+"] > buffer:"+(o?function(e){for(var t="",i=e.length,n=0;n<i;n++)t+="["+e.start(n).toFixed(3)+"-"+e.end(n).toFixed(3)+"]";return t}(wi.getBuffered(o)):"(detached)")+")"),"initSegment"!==e.sn){var s;if(e.type!==pt){var l=e.elementaryStreams;if(!Object.keys(l).some(function(e){return!!l[e]}))return void(this.state=Hn)}var d=null==(s=this.levels)?void 0:s[e.level];null!=d&&d.fragmentError&&(this.log("Resetting level fragment error count of "+d.fragmentError+" on frag buffered"),d.fragmentError=0)}this.state=Hn,o&&(!this.loadedmetadata&&e.type==ht&&o.buffered.length&&(null==(r=this.fragCurrent)?void 0:r.sn)===(null==(a=this.fragPrevious)?void 0:a.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())},t.seekToStartPos=function(){},t._handleFragmentLoadComplete=function(e){var t=this.transmuxer;if(t){var i=e.frag,n=e.part,r=e.partsLoaded,a=!r||0===r.length||r.some(function(e){return!e}),o=new Sn(i.level,i.sn,i.stats.chunkCount+1,0,n?n.index:-1,!a);t.flush(o)}},t._handleFragmentLoadProgress=function(e){},t._doFragLoad=function(t,i,e,n){var r,a=this;void 0===e&&(e=null);var o=null==i?void 0:i.details;if(!this.levels||!o)throw new Error("frag load aborted, missing level"+(o?"":" detail")+"s");var s=null;if(!t.encrypted||null!=(r=t.decryptdata)&&r.key?!t.encrypted&&o.encryptedFragments.length&&this.keyLoader.loadClear(t,o.encryptedFragments):(this.log("Loading key for "+t.sn+" of ["+o.startSN+"-"+o.endSN+"], "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+t.level),this.state=Gn,this.fragCurrent=t,s=this.keyLoader.load(t).then(function(e){if(!a.fragContextChanged(e.frag))return a.hls.trigger(ve.KEY_LOADED,e),a.state===Gn&&(a.state=Hn),e}),this.hls.trigger(ve.KEY_LOADING,{frag:t}),null===this.fragCurrent&&(s=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))),e=Math.max(t.start,e||0),this.config.lowLatencyMode&&"initSegment"!==t.sn){var l=o.partList;if(l&&n){e>t.end&&o.fragmentHint&&(t=o.fragmentHint);var d=this.getNextPart(l,t,e);if(-1<d){var u,c=l[d];return this.log("Loading part sn: "+t.sn+" p: "+c.index+" cc: "+t.cc+" of playlist ["+o.startSN+"-"+o.endSN+"] parts [0-"+d+"-"+(l.length-1)+"] "+("[stream-controller]"===this.logPrefix?"level":"track")+": "+t.level+", target: "+parseFloat(e.toFixed(3))),this.nextLoadPosition=c.start+c.duration,this.state=zn,u=s?s.then(function(e){return!e||a.fragContextChanged(e.frag)?null:a.doFragPartsLoad(t,c,i,n)}).catch(function(e){return a.handleFragLoadError(e)}):this.doFragPartsLoad(t,c,i,n).catch(function(e){return a.handleFragLoadError(e)}),this.hls.trigger(ve.FRAG_LOADING,{frag:t,part:c,targetBufferTime:e}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):u}if(!t.url||this.loadedEndOfParts(l,e))return Promise.resolve(null)}}this.log("Loading fragment "+t.sn+" cc: "+t.cc+" "+(o?"of ["+o.startSN+"-"+o.endSN+"] ":"")+("[stream-controller]"===this.logPrefix?"level":"track")+": "+t.level+", target: "+parseFloat(e.toFixed(3))),J(t.sn)&&!this.bitrateTest&&(this.nextLoadPosition=t.start+t.duration),this.state=zn;var h,f=this.config.progressive;return h=f&&s?s.then(function(e){return!e||a.fragContextChanged(null==e?void 0:e.frag)?null:a.fragmentLoader.load(t,n)}).catch(function(e){return a.handleFragLoadError(e)}):Promise.all([this.fragmentLoader.load(t,f?n:void 0),s]).then(function(e){var t=e[0];return!f&&t&&n&&n(t),t}).catch(function(e){return a.handleFragLoadError(e)}),this.hls.trigger(ve.FRAG_LOADING,{frag:t,targetBufferTime:e}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):h},t.doFragPartsLoad=function(l,i,d,u){var c=this;return new Promise(function(a,e){var t,o=[],s=null==(t=d.details)?void 0:t.partList;!function n(r){c.fragmentLoader.loadPart(l,r,u).then(function(e){var t=(o[r.index]=e).part;c.hls.trigger(ve.FRAG_LOADED,e);var i=Wt(d,l.sn,r.index+1)||qt(s,l.sn,r.index+1);if(!i)return a({frag:l,part:t,partsLoaded:o});n(i)}).catch(e)}(i)})},t.handleFragLoadError=function(e){if("data"in e){var t=e.data;e.data&&t.details===ye.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):this.hls.trigger(ve.ERROR,t)}else this.hls.trigger(ve.ERROR,{type:me.OTHER_ERROR,details:ye.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null},t._handleTransmuxerFlush=function(e){var t=this.getCurrentContext(e);if(t&&this.state===qn){var i=t.frag,n=t.part,r=t.level,a=self.performance.now();i.stats.parsing.end=a,n&&(n.stats.parsing.end=a),this.updateLevelTiming(i,n,r,e.partial)}else this.fragCurrent||this.state===jn||this.state===Kn||(this.state=Hn)},t.getCurrentContext=function(e){var t=this.levels,i=this.fragCurrent,n=e.level,r=e.sn,a=e.part;if(null==t||!t[n])return this.warn("Levels object was unset while buffering fragment "+r+" of level "+n+". The current chunk will not be buffered."),null;var o=t[n],s=-1<a?Wt(o,r,a):null,l=s?s.fragment:function(e,t,i){if(null==e||!e.details)return null;var n=e.details,r=n.fragments[t-n.startSN];return r||((r=n.fragmentHint)&&r.sn===t?r:t<n.startSN&&i&&i.sn===t?i:null)}(o,r,i);return l?(i&&i!==l&&(l.stats=i.stats),{frag:l,part:s,level:o}):null},t.bufferFragmentData=function(e,t,i,n,r){var a;if(e&&this.state===qn){var o=e.data1,s=e.data2,l=o;if(o&&s&&(l=Ie(o,s)),null!=(a=l)&&a.length){var d={type:e.type,frag:t,part:i,chunkMeta:n,parent:t.type,data:l};if(this.hls.trigger(ve.BUFFER_APPENDING,d),e.dropped&&e.independent&&!i){if(r)return;this.flushBufferGap(t)}}}},t.flushBufferGap=function(e){var t=this.media;if(t)if(wi.isBuffered(t,t.currentTime)){var i=t.currentTime,n=wi.bufferInfo(t,i,0),r=e.duration,a=Math.min(2*this.config.maxFragLookUpTolerance,.25*r),o=Math.max(Math.min(e.start-a,n.end-a),i+a);e.start-o>a&&this.flushMainBuffer(o,e.start)}else this.flushMainBuffer(0,e.start)},t.getFwdBufferInfo=function(e,t){var i=this.getLoadPosition();return J(i)?this.getFwdBufferInfoAtPos(e,i,t):null},t.getFwdBufferInfoAtPos=function(e,t,i){var n=this.config.maxBufferHole,r=wi.bufferInfo(e,t,n);if(0===r.len&&void 0!==r.nextStart){var a=this.fragmentTracker.getBufferedFrag(t,i);if(a&&r.nextStart<a.end)return wi.bufferInfo(e,t,Math.max(r.nextStart,n))}return r},t.getMaxBufferLength=function(e){var t,i=this.config;return t=e?Math.max(8*i.maxBufferSize/e,i.maxBufferLength):i.maxBufferLength,Math.min(t,i.maxMaxBufferLength)},t.reduceMaxBufferLength=function(e,t){var i=this.config,n=Math.max(Math.min(e-t,i.maxBufferLength),t),r=Math.max(e-3*t,i.maxMaxBufferLength/2,n);return n<=r&&(i.maxMaxBufferLength=r,this.warn("Reduce max buffer length to "+r+"s"),!0)},t.getAppendedFrag=function(e,t){var i=this.fragmentTracker.getAppendedFrag(e,ht);return i&&"fragment"in i?i.fragment:i},t.getNextFragment=function(e,t){var i=t.fragments,n=i.length;if(!n)return null;var r,a=this.config,o=i[0].start;if(t.live){var s=a.initialLiveManifestSize;if(n<s)return this.warn("Not enough fragments to start playback (have: "+n+", need: "+s+")"),null;(!t.PTSKnown&&!this.startFragRequested&&-1===this.startPosition||e<o)&&(r=this.getInitialLiveFragment(t,i),this.startPosition=this.nextLoadPosition=r?this.hls.liveSyncPosition||r.start:e)}else e<=o&&(r=i[0]);if(!r){var l=a.lowLatencyMode?t.partEnd:t.fragmentEnd;r=this.getFragmentAtPosition(e,l,t)}return this.mapToInitFragWhenRequired(r)},t.isLoopLoading=function(e,t){var i=this.fragmentTracker.getState(e);return(i===cn||i===un&&!!e.gap)&&this.nextLoadPosition>t},t.getNextFragmentLoopLoading=function(e,t,i,n,r){var a=e.gap,o=this.getNextFragment(this.nextLoadPosition,t);if(null===o)return o;if(e=o,a&&e&&!e.gap&&i.nextStart){var s=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,i.nextStart,n);if(null!==s&&i.len+s.len>=r)return this.log('buffer full after gaps in "'+n+'" playlist starting at sn: '+e.sn),null}return e},t.mapToInitFragWhenRequired=function(e){return null==e||!e.initSegment||null!=e&&e.initSegment.data||this.bitrateTest?e:e.initSegment},t.getNextPart=function(e,t,i){for(var n=-1,r=!1,a=!0,o=0,s=e.length;o<s;o++){var l=e[o];if(a=a&&!l.independent,-1<n&&i<l.start)break;var d=l.loaded;d?n=-1:(r||l.independent||a)&&l.fragment===t&&(n=o),r=d}return n},t.loadedEndOfParts=function(e,t){var i=e[e.length-1];return i&&t>i.start&&i.loaded},t.getInitialLiveFragment=function(e,t){var i,n,r=this.fragPrevious,a=null;if(r){if(e.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+r.programDateTime),a=function(e,t,i){if(null===t||!Array.isArray(e)||!e.length||!J(t))return null;if(t<(e[0].programDateTime||0))return null;if(t>=(e[e.length-1].endProgramDateTime||0))return null;i=i||0;for(var n=0;n<e.length;++n){var r=e[n];if(a=t,o=i,s=r,void 0,l=1e3*Math.min(o,s.duration+(s.deltaPTS?s.deltaPTS:0)),(s.endProgramDateTime||0)-l>a)return r}var a,o,s,l;return null}(t,r.endProgramDateTime,this.config.maxFragLookUpTolerance)),!a){var o=r.sn+1;if(o>=e.startSN&&o<=e.endSN){var s=t[o-e.startSN];r.cc===s.cc&&(a=s,this.log("Live playlist, switching playlist, load frag with next SN: "+a.sn))}a||(i=t,n=r.cc,(a=$t(i,function(e){return e.cc<n?1:e.cc>n?-1:0}))&&this.log("Live playlist, switching playlist, load frag with same CC: "+a.sn))}}else{var l=this.hls.liveSyncPosition;null!==l&&(a=this.getFragmentAtPosition(l,this.bitrateTest?e.fragmentEnd:e.edge,e))}return a},t.getFragmentAtPosition=function(e,t,i){var n,r=this.config,a=this.fragPrevious,o=i.fragments,s=i.endSN,l=i.fragmentHint,d=r.maxFragLookUpTolerance,u=i.partList,c=!!(r.lowLatencyMode&&null!=u&&u.length&&l);if(c&&l&&!this.bitrateTest&&(o=o.concat(l),s=l.sn),n=e<t?ei(a,o,e,t-d<e?0:d):o[o.length-1]){var h=n.sn-i.startSN,f=this.fragmentTracker.getState(n);if((f===cn||f===un&&n.gap)&&(a=n),a&&n.sn===a.sn&&(!c||u[0].fragment.sn>n.sn)&&a&&n.level===a.level){var p=o[1+h];n=n.sn<s&&this.fragmentTracker.getState(p)!==cn?p:null}}return n},t.synchronizeToLiveEdge=function(e){var t=this.config,i=this.media;if(i){var n=this.hls.liveSyncPosition,r=i.currentTime,a=e.fragments[0].start,o=e.edge,s=r>=a-t.maxFragLookUpTolerance&&r<=o;if(null!==n&&i.duration>n&&(r<n||!s)){var l=void 0!==t.liveMaxLatencyDuration?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;(!s&&i.readyState<4||r<o-l)&&(this.loadedmetadata||(this.nextLoadPosition=n),i.readyState&&(this.warn("Playback: "+r.toFixed(3)+" is located too far from the end of live sliding playlist: "+o+", reset currentTime to : "+n.toFixed(3)),i.currentTime=n))}}},t.alignPlaylists=function(e,t,i){var n=e.fragments.length;if(!n)return this.warn("No fragments in live playlist"),0;var r=e.fragments[0].start,a=!t,o=e.alignedSliding&&J(r);if(a||!o&&!r){var s=this.fragPrevious;!function(o,e,t){e&&(function(e,t,a){if(n=o,r=t,a&&(r.endCC>r.startCC||n&&n.cc<r.startCC)){var i=function(e,t){var i=a.fragments,n=t.fragments;if(n.length&&i.length){var r=Rn(i,n[0].cc);if(r&&(!r||r.startPTS))return r;be.log("No frag in previous level to align on")}else be.log("No fragments to align")}(0,t);i&&J(i.start)&&(be.log("Adjusting PTS using last level due to CC increase within current level "+t.url),Dn(i.start,t))}var n,r}(0,t,e),!t.alignedSliding&&e&&function(e,t){if(e.hasProgramDateTime&&t.hasProgramDateTime){var i,n,r=e.fragments,a=t.fragments;if(r.length&&a.length){var o=Math.min(t.endCC,e.endCC);t.startCC<o&&e.startCC<o&&(i=Rn(a,o),n=Rn(r,o)),i&&n||(n=Rn(r,(i=a[Math.floor(a.length/2)]).cc)||r[Math.floor(r.length/2)]);var s=i.programDateTime,l=n.programDateTime;s&&l&&Dn((l-s)/1e3-(n.start-i.start),e)}}}(t,e),t.alignedSliding||!e||t.skippedSegments||zt(e,t))}(s,i,e);var l=e.fragments[0].start;return this.log("Live playlist sliding: "+l.toFixed(2)+" start-sn: "+(t?t.startSN:"na")+"->"+e.startSN+" prev-sn: "+(s?s.sn:"na")+" fragments: "+n),l}return r},t.waitForCdnTuneIn=function(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,3*e.partTarget)},t.setStartPosition=function(e,t){var i=this.startPosition;if(i<t&&(i=-1),-1===i||-1===this.lastCurrentTime){var n=null!==this.startTimeOffset,r=n?this.startTimeOffset:e.startTimeOffset;null!==r&&J(r)?(i=t+r,r<0&&(i+=e.totalduration),i=Math.min(Math.max(t,i),t+e.totalduration),this.log("Start time offset "+r+" found in "+(n?"multivariant":"media")+" playlist, adjust startPosition to "+i),this.startPosition=i):e.live?i=this.hls.liveSyncPosition||t:this.startPosition=i=0,this.lastCurrentTime=i}this.nextLoadPosition=i},t.getLoadPosition=function(){var e=this.media,t=0;return this.loadedmetadata&&e?t=e.currentTime:this.nextLoadPosition&&(t=this.nextLoadPosition),t},t.handleFragLoadAborted=function(e,t){this.transmuxer&&"initSegment"!==e.sn&&e.stats.aborted&&(this.warn("Fragment "+e.sn+(t?" part "+t.index:"")+" of level "+e.level+" was aborted"),this.resetFragmentLoading(e))},t.resetFragmentLoading=function(e){this.fragCurrent&&(this.fragContextChanged(e)||this.state===Wn)||(this.state=Hn)},t.onFragmentOrKeyLoadError=function(e,t){if(t.chunkMeta&&!t.frag){var i=this.getCurrentContext(t.chunkMeta);i&&(t.frag=i.frag)}var n=t.frag;if(n&&n.type===e&&this.levels)if(this.fragContextChanged(n)){var r;this.warn("Frag load error must match current frag to retry "+n.url+" > "+(null==(r=this.fragCurrent)?void 0:r.url))}else{var a=t.details===ye.FRAG_GAP;a&&this.fragmentTracker.fragBuffered(n,!0);var o=t.errorAction,s=o||{},l=s.action,d=s.retryCount,u=void 0===d?0:d,c=s.retryConfig;if(o&&5===l&&c){this.resetStartWhenNotLoaded(this.levelLastLoaded);var h=Xt(c,u);this.warn("Fragment "+n.sn+" of "+e+" "+n.level+" errored with "+t.details+", retrying loading "+(u+1)+"/"+c.maxNumRetry+" in "+h+"ms"),o.resolved=!0,this.retryDate=self.performance.now()+h,this.state=Wn}else if(c&&o){if(this.resetFragmentErrors(e),!(u<c.maxNumRetry))return void be.warn(t.details+" reached or exceeded max retry ("+u+")");a||3===l||(o.resolved=!0)}else 2===(null==o?void 0:o.action)?this.state=Xn:this.state=Kn;this.tickImmediate()}},t.reduceLengthAndFlushBuffer=function(e){if(this.state!==qn&&this.state!==Yn)return!1;var t=e.frag,i=e.parent,n=this.getFwdBufferInfo(this.mediaBuffer,i),r=n&&.5<n.len;r&&this.reduceMaxBufferLength(n.len,(null==t?void 0:t.duration)||10);var a=!r;return a&&this.warn("Buffer full error while media.currentTime is not buffered, flush "+i+" buffer"),t&&(this.fragmentTracker.removeFragment(t),this.nextLoadPosition=t.start),this.resetLoadingState(),a},t.resetFragmentErrors=function(e){e===ft&&(this.fragCurrent=null),this.loadedmetadata||(this.startFragRequested=!1),this.state!==jn&&(this.state=Hn)},t.afterBufferFlushed=function(e,t,i){if(e){var n=wi.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,n,i),this.state===Qn&&this.resetLoadingState()}},t.resetLoadingState=function(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=Hn},t.resetStartWhenNotLoaded=function(e){if(!this.loadedmetadata){this.startFragRequested=!1;var t=e?e.details:null;null!=t&&t.live?(this.startPosition=-1,this.setStartPosition(t,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}},t.resetWhenMissingContext=function(e){this.warn("The loading context changed while buffering fragment "+e.sn+" of level "+e.level+". This chunk will not be buffered."),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState()},t.removeUnbufferedFrags=function(e){void 0===e&&(e=0),this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)},t.updateLevelTiming=function(a,e,o,s){var t,l=this,d=o.details;if(d){if(!Object.keys(a.elementaryStreams).reduce(function(e,t){var i=a.elementaryStreams[t];if(i){var n=i.endPTS-i.startPTS;if(n<=0)return l.warn("Could not parse fragment "+a.sn+" "+t+" duration reliably ("+n+")"),e||!1;var r=s?0:Gt(d,a,i.startPTS,i.endPTS,i.startDTS,i.endDTS);return l.hls.trigger(ve.LEVEL_PTS_UPDATED,{details:d,level:o,drift:r,type:t,frag:a,start:i.startPTS,end:i.endPTS}),!0}return e},!1)&&null===(null==(t=this.transmuxer)?void 0:t.error)){var i=new Error("Found no media in fragment "+a.sn+" of level "+a.level+" resetting transmuxer to fallback to playlist timing");if(0===o.fragmentError&&(o.fragmentError++,a.gap=!0,this.fragmentTracker.removeFragment(a),this.fragmentTracker.fragBuffered(a,!0)),this.warn(i.message),this.hls.trigger(ve.ERROR,{type:me.MEDIA_ERROR,details:ye.FRAG_PARSING_ERROR,fatal:!1,error:i,frag:a,reason:"Found no media in msn "+a.sn+' of level "'+o.url+'"'}),!this.hls)return;this.resetTransmuxer()}this.state=Yn,this.hls.trigger(ve.FRAG_PARSED,{frag:a,part:e})}else this.warn("level.details undefined")},t.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},t.recoverWorkerError=function(e){"demuxerWorker"===e.event&&(this.fragmentTracker.removeAllFragments(),this.resetTransmuxer(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState())},i(e,[{key:"state",get:function(){return this._state},set:function(e){var t=this._state;t!==e&&(this._state=e,this.log(t+"->"+e))}}]),e}(Pn);function Jn(e,t){var i=(void 0===t?{}:t).removePKCS7Padding,n=void 0===i||i;if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=e.enableSoftwareAES,this.removePKCS7Padding=n)try{var r=self.crypto;r&&(this.subtle=r.subtle||r.webkitSubtle)}catch(e){}this.useSoftware=!this.subtle}function $n(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}function er(e,t){this.subtle=void 0,this.key=void 0,this.subtle=e,this.key=t}function tr(e,t){this.subtle=void 0,this.aesIV=void 0,this.subtle=e,this.aesIV=t}function ir(){return self.SourceBuffer||self.WebKitSourceBuffer}function nr(){if(!_e())return!1;var e=ir();return!e||e.prototype&&"function"==typeof e.prototype.appendBuffer&&"function"==typeof e.prototype.remove}function rr(e,t){return void 0===e&&(e=""),void 0===t&&(t=9e4),{type:e,id:-1,pid:-1,inputTimeScale:t,sequenceNumber:-1,samples:[],dropped:0}}var ar,or=((ar=lr.prototype).resetInitSegment=function(e,t,i,n){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}},ar.resetTimeStamp=function(e){this.initPTS=e,this.resetContiguity()},ar.resetContiguity=function(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0},ar.canParse=function(e,t){return!1},ar.appendFrame=function(e,t,i){},ar.demux=function(e,t){this.cachedData&&(e=Ie(this.cachedData,e),this.cachedData=null);var i,n,r,a=z(e,0),o=a?a.length:0,s=this._audioTrack,l=this._id3Track,d=a?W(a):void 0,u=e.length;for((null===this.basePTS||0===this.frameIndex&&J(d))&&(this.basePTS=sr(d,t,this.initPTS),this.lastPTS=this.basePTS),null===this.lastPTS&&(this.lastPTS=this.basePTS),a&&0<a.length&&l.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:a,type:Et,duration:Number.POSITIVE_INFINITY});o<u;){if(this.canParse(e,o)){var c=this.appendFrame(s,e,o);c?(this.frameIndex++,this.lastPTS=c.sample.pts,i=o+=c.length):o=u}else H(n=e,r=o)&&Y(n,r+6)+10<=n.length-r?(a=z(e,o),l.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:a,type:Et,duration:Number.POSITIVE_INFINITY}),i=o+=a.length):o++;if(o===u&&i!==u){var h=j(e,i);this.cachedData?this.cachedData=Ie(this.cachedData,h):this.cachedData=h}}return{audioTrack:s,videoTrack:rr(),id3Track:l,textTrack:rr()}},ar.demuxSampleAes=function(e,t,i){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},ar.flush=function(e){var t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:rr(),id3Track:this._id3Track,textTrack:rr()}},ar.destroy=function(){},lr),sr=function(e,t,i){return J(e)?90*e:9e4*t+(i?9e4*i.baseTime/i.timescale:0)};function lr(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}function dr(e,t){return 255===e[t]&&240==(246&e[t+1])}function ur(e,t){return 1&e[t+1]?7:9}function cr(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function hr(e,t){return t+1<e.length&&dr(e,t)}function fr(e,t){if(hr(e,t)){var i=ur(e,t);if(t+i>=e.length)return!1;var n=cr(e,t);if(n<=i)return!1;var r=t+n;return r===e.length||hr(e,r)}return!1}function pr(e,t,i,n,r){if(!e.samplerate){var a=function(e,t,i,n){var r,a,o,s,l=navigator.userAgent.toLowerCase(),d=n,u=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];r=1+((192&t[i+2])>>>6);var c=(60&t[i+2])>>>2;if(!(u.length-1<c))return o=(1&t[i+2])<<2,o|=(192&t[i+3])>>>6,be.log("manifest codec:"+n+", ADTS type:"+r+", samplingIndex:"+c),a=/firefox/i.test(l)?6<=c?(r=5,s=new Array(4),c-3):(r=2,s=new Array(2),c):-1!==l.indexOf("android")?(r=2,s=new Array(2),c):(r=5,s=new Array(4),n&&(-1!==n.indexOf("mp4a.40.29")||-1!==n.indexOf("mp4a.40.5"))||!n&&6<=c?c-3:((n&&-1!==n.indexOf("mp4a.40.2")&&(6<=c&&1==o||/vivaldi/i.test(l))||!n&&1==o)&&(r=2,s=new Array(2)),c)),s[0]=r<<3,s[0]|=(14&c)>>1,s[1]|=(1&c)<<7,s[1]|=o<<3,5===r&&(s[1]|=(14&a)>>1,s[2]=(1&a)<<7,s[2]|=8,s[3]=0),{config:s,samplerate:u[c],channelCount:o,codec:"mp4a.40."+r,manifestCodec:d};var h=new Error("invalid ADTS sampling index:"+c);e.emit(ve.ERROR,ve.ERROR,{type:me.MEDIA_ERROR,details:ye.FRAG_PARSING_ERROR,fatal:!0,error:h,reason:h.message})}(t,i,n,r);if(!a)return;e.config=a.config,e.samplerate=a.samplerate,e.channelCount=a.channelCount,e.codec=a.codec,e.manifestCodec=a.manifestCodec,be.log("parsed codec:"+e.codec+", rate:"+a.samplerate+", channels:"+a.channelCount)}}function gr(e){return 9216e4/e}function vr(e,t,i,n,r){var a,o=n+r*gr(e.samplerate),s=function(e,t){var i=ur(e,t);if(t+i<=e.length){var n=cr(e,t)-i;if(0<n)return{headerLength:i,frameLength:n}}}(t,i);if(s){var l=s.frameLength,d=s.headerLength,u=d+l,c=Math.max(0,i+u-t.length);c?(a=new Uint8Array(u-d)).set(t.subarray(i+d,t.length),0):a=t.subarray(i+d,i+u);var h={unit:a,pts:o};return c||e.samples.push(h),{sample:h,length:u,missing:c}}var f=t.length-i;return(a=new Uint8Array(f)).set(t.subarray(i,t.length),0),{sample:{unit:a,pts:o},length:f,missing:-1}}var mr=null,yr=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],br=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],wr=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],Er=[0,1,1,4];function Sr(e,t,i,n,r){if(!(i+24>t.length)){var a=Ar(t,i);if(a&&i+a.frameLength<=t.length){var o=n+r*(9e4*a.samplesPerFrame/a.sampleRate),s={unit:t.subarray(i,i+a.frameLength),pts:o,dts:o};return e.config=[],e.channelCount=a.channelCount,e.samplerate=a.sampleRate,e.samples.push(s),{sample:s,length:a.frameLength,missing:0}}}}function Ar(e,t){var i=e[t+1]>>3&3,n=e[t+1]>>1&3,r=e[t+2]>>4&15,a=e[t+2]>>2&3;if(1!=i&&0!=r&&15!=r&&3!=a){var o=e[t+2]>>1&1,s=e[t+3]>>6,l=1e3*yr[14*(3==i?3-n:3==n?3:4)+r-1],d=br[3*(3==i?0:2==i?1:2)+a],u=3==s?1:2,c=wr[i][n],h=Er[n],f=8*c*h,p=Math.floor(c*l/d+o)*h;if(null===mr){var g=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);mr=g?parseInt(g[1]):0}return!!mr&&mr<=87&&2==n&&224e3<=l&&0==s&&(e[t+3]=128|e[t+3]),{sampleRate:d,channelCount:u,frameLength:p,samplesPerFrame:f}}}function Tr(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])}function Lr(e,t){return t+1<e.length&&Tr(e,t)}function Cr(e,t){if(t+1<e.length&&Tr(e,t)){var i=Ar(e,t),n=4;null!=i&&i.frameLength&&(n=i.frameLength);var r=t+n;return r===e.length||Lr(e,r)}return!1}var kr,Pr,xr,Or,Ir=function(r){function e(e,t){var i;return(i=r.call(this)||this).observer=void 0,i.config=void 0,i.observer=e,i.config=t,i}s(e,r);var t=e.prototype;return t.resetInitSegment=function(e,t,i,n){r.prototype.resetInitSegment.call(this,e,t,i,n),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:n,inputTimeScale:9e4,dropped:0}},e.probe=function(e){if(!e)return!1;var t=z(e,0),i=(null==t?void 0:t.length)||0;if(Cr(e,i))return!1;for(var n=e.length;i<n;i++)if(fr(e,i))return be.log("ADTS sync word found !"),!0;return!1},t.canParse=function(e,t){return(n=t)+5<(i=e).length&&dr(i,n)&&cr(i,n)<=i.length-n;var i,n},t.appendFrame=function(e,t,i){pr(e,this.observer,t,i,e.manifestCodec);var n=vr(e,t,i,this.basePTS,this.frameIndex);if(n&&0===n.missing)return n},e}(or),Rr=/\/emsg[-/]ID3/i,Mr=((Or=Gr.prototype).resetTimeStamp=function(){},Or.resetInitSegment=function(e,t,i,n){var r=this.videoTrack=rr("video",1),a=this.audioTrack=rr("audio",1),o=this.txtTrack=rr("text",1);if(this.id3Track=rr("id3",1),this.timeOffset=0,null!=e&&e.byteLength){var s=Le(e);if(s.video){var l=s.video,d=l.id,u=l.timescale,c=l.codec;r.id=d,r.timescale=o.timescale=u,r.codec=c}if(s.audio){var h=s.audio,f=h.id,p=h.timescale,g=h.codec;a.id=f,a.timescale=p,a.codec=g}o.id=ce.text,r.sampleDuration=0,r.duration=a.duration=n}},Or.resetContiguity=function(){this.remainderData=null},Gr.probe=function(e){return function(e){for(var t=e.byteLength,i=0;i<t;){var n=pe(e,i);if(8<n&&109===e[i+4]&&111===e[i+5]&&111===e[i+6]&&102===e[i+7])return!0;i=1<n?i+n:t}return!1}(e)},Or.demux=function(e,t){this.timeOffset=t;var i=e,n=this.videoTrack,r=this.txtTrack;if(this.config.progressive){this.remainderData&&(i=Ie(this.remainderData,e));var a=function(e){var t={valid:null,remainder:null},i=Ae(e,["moof"]);if(i.length<2)return t.remainder=e,t;var n=i[i.length-1];return t.valid=j(e,0,n.byteOffset-8),t.remainder=j(e,n.byteOffset-8),t}(i);this.remainderData=a.remainder,n.samples=a.valid||new Uint8Array}else n.samples=i;var o=this.extractID3Track(n,t);return r.samples=Re(t,n),{videoTrack:n,audioTrack:this.audioTrack,id3Track:o,textTrack:this.txtTrack}},Or.flush=function(){var e=this.timeOffset,t=this.videoTrack,i=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;var n=this.extractID3Track(t,this.timeOffset);return i.samples=Re(e,t),{videoTrack:t,audioTrack:rr(),id3Track:n,textTrack:rr()}},Or.extractID3Track=function(e,a){var o=this.id3Track;if(e.samples.length){var t=Ae(e.samples,["emsg"]);t&&t.forEach(function(e){var t=function(e){var t=e[0],i="",n="",r=0,a=0,o=0,s=0,l=0,d=0;if(0===t){for(;"\0"!==he(e.subarray(d,d+1));)i+=he(e.subarray(d,d+1)),d+=1;for(i+=he(e.subarray(d,d+1)),d+=1;"\0"!==he(e.subarray(d,d+1));)n+=he(e.subarray(d,d+1)),d+=1;n+=he(e.subarray(d,d+1)),d+=1,r=pe(e,12),a=pe(e,16),s=pe(e,20),l=pe(e,24),d=28}else if(1===t){r=pe(e,d+=4);var u=pe(e,d+=4),c=pe(e,d+=4);for(d+=4,o=Math.pow(2,32)*u+c,b(o)||(o=Number.MAX_SAFE_INTEGER,be.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),s=pe(e,d),l=pe(e,d+=4),d+=4;"\0"!==he(e.subarray(d,d+1));)i+=he(e.subarray(d,d+1)),d+=1;for(i+=he(e.subarray(d,d+1)),d+=1;"\0"!==he(e.subarray(d,d+1));)n+=he(e.subarray(d,d+1)),d+=1;n+=he(e.subarray(d,d+1)),d+=1}return{schemeIdUri:i,value:n,timeScale:r,presentationTime:o,presentationTimeDelta:a,eventDuration:s,id:l,payload:e.subarray(d,e.byteLength)}}(e);if(Rr.test(t.schemeIdUri)){var i=J(t.presentationTime)?t.presentationTime/t.timeScale:a+t.presentationTimeDelta/t.timeScale,n=4294967295===t.eventDuration?Number.POSITIVE_INFINITY:t.eventDuration/t.timeScale;n<=.001&&(n=Number.POSITIVE_INFINITY);var r=t.payload;o.samples.push({data:r,len:r.byteLength,dts:i,pts:i,type:St,duration:n})}})}return o},Or.demuxSampleAes=function(e,t,i){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},Or.destroy=function(){},Gr),Dr=((xr=Hr.prototype).createVideoSample=function(e,t,i,n){return{key:e,frame:!1,pts:t,dts:i,units:[],debug:n,length:0}},xr.getLastNalUnit=function(e){var t,i,n=this.VideoSample;if(n&&0!==n.units.length||(n=e[e.length-1]),null!=(t=n)&&t.units){var r=n.units;i=r[r.length-1]}return i},xr.pushAccessUnit=function(e,t){if(e.units.length&&e.frame){if(void 0===e.pts){var i=t.samples,n=i.length;if(!n)return void t.dropped++;var r=i[n-1];e.pts=r.pts,e.dts=r.dts}t.samples.push(e)}e.debug.length&&be.log(e.pts+"/"+e.dts+":"+e.debug)},Hr),Fr=((Pr=jr.prototype).loadWord=function(){var e=this.data,t=this.bytesAvailable,i=e.byteLength-t,n=new Uint8Array(4),r=Math.min(4,t);if(0===r)throw new Error("no bytes available");n.set(e.subarray(i,i+r)),this.word=new DataView(n.buffer).getUint32(0),this.bitsAvailable=8*r,this.bytesAvailable-=r},Pr.skipBits=function(e){var t;e=Math.min(e,8*this.bytesAvailable+this.bitsAvailable),this.bitsAvailable>e||(e-=this.bitsAvailable,e-=(t=e>>3)<<3,this.bytesAvailable-=t,this.loadWord()),this.word<<=e,this.bitsAvailable-=e},Pr.readBits=function(e){var t=Math.min(this.bitsAvailable,e),i=this.word>>>32-t;if(32<e&&be.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,0<this.bitsAvailable)this.word<<=t;else{if(!(0<this.bytesAvailable))throw new Error("no bits available");this.loadWord()}return 0<(t=e-t)&&this.bitsAvailable?i<<t|this.readBits(t):i},Pr.skipLZ=function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},Pr.skipUEG=function(){this.skipBits(1+this.skipLZ())},Pr.skipEG=function(){this.skipBits(1+this.skipLZ())},Pr.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},Pr.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},Pr.readBoolean=function(){return 1===this.readBits(1)},Pr.readUByte=function(){return this.readBits(8)},Pr.readUShort=function(){return this.readBits(16)},Pr.readUInt=function(){return this.readBits(32)},Pr.skipScalingList=function(e){for(var t=8,i=8,n=0;n<e;n++)0!==i&&(i=(t+this.readEG()+256)%256),t=0===i?t:i},Pr.readSPS=function(){var e,t,i,n=0,r=0,a=0,o=0,s=this.readUByte.bind(this),l=this.readBits.bind(this),d=this.readUEG.bind(this),u=this.readBoolean.bind(this),c=this.skipBits.bind(this),h=this.skipEG.bind(this),f=this.skipUEG.bind(this),p=this.skipScalingList.bind(this);s();var g=s();if(l(5),c(3),s(),f(),100===g||110===g||122===g||244===g||44===g||83===g||86===g||118===g||128===g){var v=d();if(3===v&&c(1),f(),f(),c(1),u())for(t=3!==v?8:12,i=0;i<t;i++)u()&&p(i<6?16:64)}f();var m=d();if(0===m)d();else if(1===m)for(c(1),h(),h(),e=d(),i=0;i<e;i++)h();f(),c(1);var y=d(),b=d(),w=l(1);0===w&&c(1),c(1),u()&&(n=d(),r=d(),a=d(),o=d());var E=[1,1];if(u()&&u())switch(s()){case 1:E=[1,1];break;case 2:E=[12,11];break;case 3:E=[10,11];break;case 4:E=[16,11];break;case 5:E=[40,33];break;case 6:E=[24,11];break;case 7:E=[20,11];break;case 8:E=[32,11];break;case 9:E=[80,33];break;case 10:E=[18,11];break;case 11:E=[15,11];break;case 12:E=[64,33];break;case 13:E=[160,99];break;case 14:E=[4,3];break;case 15:E=[3,2];break;case 16:E=[2,1];break;case 255:E=[s()<<8|s(),s()<<8|s()]}return{width:Math.ceil(16*(y+1)-2*n-2*r),height:(2-w)*(b+1)*16-(w?2:4)*(a+o),pixelRatio:E}},Pr.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},jr),Br=function(e){function t(){return e.apply(this,arguments)||this}s(t,e);var i=t.prototype;return i.parseAVCPES=function(p,g,v,e,m){var y,b=this,t=this.parseAVCNALu(p,v.data),w=this.VideoSample,E=!1;v.data=null,w&&t.length&&!p.audFound&&(this.pushAccessUnit(w,p),w=this.VideoSample=this.createVideoSample(!1,v.pts,v.dts,"")),t.forEach(function(e){var t;switch(e.type){case 1:var i=!1;y=!0;var n,r=e.data;if(E&&4<r.length){var a=new Fr(r).readSliceType();2!==a&&4!==a&&7!==a&&9!==a||(i=!0)}i&&null!=(n=w)&&n.frame&&!w.key&&(b.pushAccessUnit(w,p),w=b.VideoSample=null),(w=w||(b.VideoSample=b.createVideoSample(!0,v.pts,v.dts,""))).frame=!0,w.key=i;break;case 5:y=!0,null!=(t=w)&&t.frame&&!w.key&&(b.pushAccessUnit(w,p),w=b.VideoSample=null),(w=w||(b.VideoSample=b.createVideoSample(!0,v.pts,v.dts,""))).key=!0,w.frame=!0;break;case 6:y=!0,De(e.data,1,v.pts,g.samples);break;case 7:var o,s;E=y=!0;var l=e.data,d=new Fr(l).readSPS();if(!p.sps||p.width!==d.width||p.height!==d.height||(null==(o=p.pixelRatio)?void 0:o[0])!==d.pixelRatio[0]||(null==(s=p.pixelRatio)?void 0:s[1])!==d.pixelRatio[1]){p.width=d.width,p.height=d.height,p.pixelRatio=d.pixelRatio,p.sps=[l],p.duration=m;for(var u=l.subarray(1,4),c="avc1.",h=0;h<3;h++){var f=u[h].toString(16);f.length<2&&(f="0"+f),c+=f}p.codec=c}break;case 8:y=!0,p.pps=[e.data];break;case 9:y=!0,p.audFound=!0,w&&b.pushAccessUnit(w,p),w=b.VideoSample=b.createVideoSample(!1,v.pts,v.dts,"");break;case 12:y=!0;break;default:y=!1,w&&(w.debug+="unknown NAL "+e.type+" ")}w&&y&&w.units.push(e)}),e&&w&&(this.pushAccessUnit(w,p),this.VideoSample=null)},i.parseAVCNALu=function(e,t){var i,n,r=t.byteLength,a=e.naluState||0,o=a,s=[],l=0,d=-1,u=0;for(-1===a&&(u=31&t[d=0],a=0,l=1);l<r;)if(i=t[l++],a)if(1!==a)if(i)if(1===i){if(n=l-a-1,0<=d){var c={data:t.subarray(d,n),type:u};s.push(c)}else{var h=this.getLastNalUnit(e.samples);h&&(o&&l<=4-o&&h.state&&(h.data=h.data.subarray(0,h.data.byteLength-o)),0<n&&(h.data=Ie(h.data,t.subarray(0,n)),h.state=0))}a=l<r?(u=31&t[d=l],0):-1}else a=0;else a=3;else a=i?0:2;else a=i?0:1;if(0<=d&&0<=a){var f={data:t.subarray(d,r),type:u,state:a};s.push(f)}if(0===s.length){var p=this.getLastNalUnit(e.samples);p&&(p.data=Ie(p.data,t))}return e.naluState=a,s},t}(Dr),_r=((kr=Ur.prototype).decryptBuffer=function(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer)},kr.decryptAacSample=function(i,n,r){var a=this,o=i[n].unit;if(!(o.length<=16)){var e=o.subarray(16,o.length-o.length%16),t=e.buffer.slice(e.byteOffset,e.byteOffset+e.length);this.decryptBuffer(t).then(function(e){var t=new Uint8Array(e);o.set(t,16),a.decrypter.isSync()||a.decryptAacSamples(i,n+1,r)})}},kr.decryptAacSamples=function(e,t,i){for(;;t++){if(t>=e.length)return void i();if(!(e[t].unit.length<32||(this.decryptAacSample(e,t,i),this.decrypter.isSync())))return}},kr.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,i=new Int8Array(t),n=0,r=32;r<e.length-16;r+=160,n+=16)i.set(e.subarray(r,r+16),n);return i},kr.getAvcDecryptedUnit=function(e,t){for(var i=new Uint8Array(t),n=0,r=32;r<e.length-16;r+=160,n+=16)e.set(i.subarray(n,n+16),r);return e},kr.decryptAvcSample=function(t,i,n,r,a){var o=this,s=Fe(a.data),e=this.getAvcEncryptedData(s);this.decryptBuffer(e.buffer).then(function(e){a.data=o.getAvcDecryptedUnit(s,e),o.decrypter.isSync()||o.decryptAvcSamples(t,i,n+1,r)})},kr.decryptAvcSamples=function(e,t,i,n){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,i=0){if(t>=e.length)return void n();for(var r=e[t].units;!(i>=r.length);i++){var a=r[i];if(!(a.data.length<=48||1!==a.type&&5!==a.type||(this.decryptAvcSample(e,t,i,n,a),this.decrypter.isSync())))return}}},Ur),Nr=188,Vr=function(){function x(e,t,i){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=t,this.typeSupported=i,this.videoParser=new Br}x.probe=function(e){var t=x.syncOffset(e);return 0<t&&be.warn("MPEG2-TS detected but first sync word found @ offset "+t),-1!==t},x.syncOffset=function(e){for(var t=e.length,i=Math.min(940,t-Nr)+1,n=0;n<i;){for(var r=!1,a=-1,o=0,s=n;s<t;s+=Nr){if(71!==e[s]||t-s!=Nr&&71!==e[s+Nr]){if(o)return-1;break}if(o++,-1===a&&0!==(a=s)&&(i=Math.min(a+18612,e.length-Nr)+1),(r=r||0===zr(e,s))&&1<o&&(0===a&&2<o||i<s+Nr))return a}n++}return-1},x.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:ce[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===e?t:void 0}};var e=x.prototype;return e.resetInitSegment=function(e,t,i,n){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=x.createTrack("video"),this._audioTrack=x.createTrack("audio",n),this._id3Track=x.createTrack("id3"),this._txtTrack=x.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=i,this._duration=n},e.resetTimeStamp=function(){},e.resetContiguity=function(){var e=this._audioTrack,t=this._videoTrack,i=this._id3Track;e&&(e.pesData=null),t&&(t.pesData=null),i&&(i.pesData=null),this.aacOverFlow=null,this.remainderData=null},e.demux=function(e,t,i,n){var r;void 0===i&&(i=!1),void 0===n&&(n=!1),i||(this.sampleAes=null);var a=this._videoTrack,o=this._audioTrack,s=this._id3Track,l=this._txtTrack,d=a.pid,u=a.pesData,c=o.pid,h=s.pid,f=o.pesData,p=s.pesData,g=null,v=this.pmtParsed,m=this._pmtId,y=e.length;if(this.remainderData&&(y=(e=Ie(this.remainderData,e)).length,this.remainderData=null),y<Nr&&!n)return this.remainderData=e,{audioTrack:o,videoTrack:a,id3Track:s,textTrack:l};var b,w,E=Math.max(0,x.syncOffset(e));(y-=(y-E)%Nr)<e.byteLength&&!n&&(this.remainderData=new Uint8Array(e.buffer,y,e.buffer.byteLength-y));for(var S=0,A=E;A<y;A+=Nr)if(71===e[A]){var T=!!(64&e[A+1]),L=zr(e,A),C=void 0;if(1<(48&e[A+3])>>4){if((C=A+5+e[A+4])===A+Nr)continue}else C=A+4;switch(L){case d:T&&(u&&(r=Qr(u))&&this.videoParser.parseAVCPES(a,l,r,!1,this._duration),u={data:[],size:0}),u&&(u.data.push(e.subarray(C,A+Nr)),u.size+=A+Nr-C);break;case c:if(T){if(f&&(r=Qr(f)))switch(o.segmentCodec){case"aac":this.parseAACPES(o,r);break;case"mp3":this.parseMPEGPES(o,r)}f={data:[],size:0}}f&&(f.data.push(e.subarray(C,A+Nr)),f.size+=A+Nr-C);break;case h:T&&(p&&(r=Qr(p))&&this.parseID3PES(s,r),p={data:[],size:0}),p&&(p.data.push(e.subarray(C,A+Nr)),p.size+=A+Nr-C);break;case 0:T&&(C+=e[C]+1),m=this._pmtId=(31&(b=e)[(w=C)+10])<<8|b[w+11];break;case m:T&&(C+=e[C]+1);var k=Wr(e,C,this.typeSupported,i,this.observer);0<(d=k.videoPid)&&(a.pid=d,a.segmentCodec=k.segmentVideoCodec),0<(c=k.audioPid)&&(o.pid=c,o.segmentCodec=k.segmentAudioCodec),0<(h=k.id3Pid)&&(s.pid=h),null===g||v||(be.warn("MPEG-TS PMT found at "+A+" after unknown PID '"+g+"'. Backtracking to sync byte @"+E+" to parse all TS packets."),g=null,A=E-188),v=this.pmtParsed=!0;break;case 17:case 8191:break;default:g=L}}else S++;0<S&&qr(this.observer,new Error("Found "+S+" TS packet/s that do not start with 0x47")),a.pesData=u,o.pesData=f,s.pesData=p;var P={audioTrack:o,videoTrack:a,id3Track:s,textTrack:l};return n&&this.extractRemainingSamples(P),P},e.flush=function(){var e,t=this.remainderData;return this.remainderData=null,e=t?this.demux(t,-1,!1,!0):{videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(e),this.sampleAes?this.decrypt(e,this.sampleAes):e},e.extractRemainingSamples=function(e){var t,i=e.audioTrack,n=e.videoTrack,r=e.id3Track,a=e.textTrack,o=n.pesData,s=i.pesData,l=r.pesData;if(o&&(t=Qr(o))?(this.videoParser.parseAVCPES(n,a,t,!0,this._duration),n.pesData=null):n.pesData=o,s&&(t=Qr(s))){switch(i.segmentCodec){case"aac":this.parseAACPES(i,t);break;case"mp3":this.parseMPEGPES(i,t)}i.pesData=null}else null!=s&&s.size&&be.log("last AAC PES packet truncated,might overlap between fragments"),i.pesData=s;l&&(t=Qr(l))?(this.parseID3PES(r,t),r.pesData=null):r.pesData=l},e.demuxSampleAes=function(e,t,i){var n=this.demux(e,i,!0,!this.config.progressive),r=this.sampleAes=new _r(this.observer,this.config,t);return this.decrypt(n,r)},e.decrypt=function(n,r){return new Promise(function(e){var t=n.audioTrack,i=n.videoTrack;t.samples&&"aac"===t.segmentCodec?r.decryptAacSamples(t.samples,0,function(){i.samples?r.decryptAvcSamples(i.samples,0,0,function(){e(n)}):e(n)}):i.samples&&r.decryptAvcSamples(i.samples,0,0,function(){e(n)})})},e.destroy=function(){this._duration=0},e.parseAACPES=function(e,t){var i,n,r,a=0,o=this.aacOverFlow,s=t.data;if(o){this.aacOverFlow=null;var l=o.missing,d=o.sample.unit.byteLength;if(-1===l)s=Ie(o.sample.unit,s);else{var u=d-l;o.sample.unit.set(s.subarray(0,l),u),e.samples.push(o.sample),a=o.missing}}for(i=a,n=s.length;i<n-1&&!hr(s,i);i++);if(i!==a){var c,h=i<n-1;if(c=h?"AAC PES did not start with ADTS header,offset:"+i:"No ADTS header found in AAC PES",qr(this.observer,new Error(c),h),!h)return}if(pr(e,this.observer,s,i,this.audioCodec),void 0!==t.pts)r=t.pts;else{if(!o)return void be.warn("[tsdemuxer]: AAC PES unknown PTS");var f=gr(e.samplerate);r=o.sample.pts+f}for(var p,g=0;i<n;){if(i+=(p=vr(e,s,i,r,g)).length,p.missing){this.aacOverFlow=p;break}for(g++;i<n-1&&!hr(s,i);i++);}},e.parseMPEGPES=function(e,t){var i=t.data,n=i.length,r=0,a=0,o=t.pts;if(void 0!==o)for(;a<n;)if(Lr(i,a)){var s=Sr(e,i,a,o,r);if(!s)break;a+=s.length,r++}else a++;else be.warn("[tsdemuxer]: MPEG PES unknown PTS")},e.parseAC3PES=function(e,t){},e.parseID3PES=function(e,t){if(void 0!==t.pts){var i=ge({},t,{type:this._videoTrack?St:Et,duration:Number.POSITIVE_INFINITY});e.samples.push(i)}else be.warn("[tsdemuxer]: ID3 PES unknown PTS")},x}();function Ur(e,t,i){this.keyData=void 0,this.decrypter=void 0,this.keyData=i,this.decrypter=new Un(t,{removePKCS7Padding:!1})}function jr(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}function Hr(){this.VideoSample=null}function Gr(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}function zr(e,t){return((31&e[t+1])<<8)+e[t+2]}function Wr(e,t,i,n,r){var a={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},o=t+3+((15&e[t+1])<<8|e[t+2])-4;for(t+=12+((15&e[t+10])<<8|e[t+11]);t<o;){var s=zr(e,t),l=(15&e[t+3])<<8|e[t+4];switch(e[t]){case 207:if(!n){Yr("ADTS AAC");break}case 15:-1===a.audioPid&&(a.audioPid=s);break;case 21:-1===a.id3Pid&&(a.id3Pid=s);break;case 219:if(!n){Yr("H.264");break}case 27:-1===a.videoPid&&(a.videoPid=s,a.segmentVideoCodec="avc");break;case 3:case 4:i.mpeg||i.mp3?-1===a.audioPid&&(a.audioPid=s,a.segmentAudioCodec="mp3"):be.log("MPEG audio found, not supported in this browser");break;case 193:if(!n){Yr("AC-3");break}case 129:be.warn("AC-3 in M2TS support not included in build");break;case 6:if(-1===a.audioPid&&0<l)for(var d=t+5,u=l;2<u;){106===e[d]&&be.warn("AC-3 in M2TS support not included in build");var c=e[d+1]+2;d+=c,u-=c}break;case 194:case 135:return qr(r,new Error("Unsupported EC-3 in M2TS found")),a;case 36:return qr(r,new Error("Unsupported HEVC in M2TS found")),a}t+=5+l}return a}function qr(e,t,i){be.warn("parsing error: "+t.message),e.emit(ve.ERROR,ve.ERROR,{type:me.MEDIA_ERROR,details:ye.FRAG_PARSING_ERROR,fatal:!1,levelRetry:i,error:t,reason:t.message})}function Yr(e){be.log(e+" with AES-128-CBC encryption found in unencrypted stream")}function Qr(e){var t,i,n,r,a,o=0,s=e.data;if(!e||0===e.size)return null;for(;s[0].length<19&&1<s.length;)s[0]=Ie(s[0],s[1]),s.splice(1,1);if(1!==((t=s[0])[0]<<16)+(t[1]<<8)+t[2])return null;if((i=(t[4]<<8)+t[5])&&i>e.size-6)return null;var l=t[7];192&l&&(r=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,64&l?54e5<r-(a=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2)&&(be.warn(Math.round((r-a)/9e4)+"s delta between PTS and DTS, align them"),r=a):a=r);var d=(n=t[8])+9;if(e.size<=d)return null;e.size-=d;for(var u=new Uint8Array(e.size),c=0,h=s.length;c<h;c++){var f=(t=s[c]).byteLength;if(d){if(f<d){d-=f;continue}t=t.subarray(d),f-=d,d=0}u.set(t,o),o+=f}return i&&(i-=n+3),{data:u,pts:r,dts:a,len:i}}var Kr=function(r){function e(){return r.apply(this,arguments)||this}s(e,r);var t=e.prototype;return t.resetInitSegment=function(e,t,i,n){r.prototype.resetInitSegment.call(this,e,t,i,n),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:n,inputTimeScale:9e4,dropped:0}},e.probe=function(e){if(!e)return!1;var t=z(e,0),i=(null==t?void 0:t.length)||0;if(t&&11===e[i]&&119===e[i+1]&&void 0!==W(t)&&function(e,t){var i=0,n=5;t+=n;for(var r=new Uint32Array(1),a=new Uint32Array(1),o=new Uint8Array(1);0<n;){o[0]=e[t];var s=Math.min(n,8),l=8-s;a[0]=4278190080>>>24+l<<l,r[0]=(o[0]&a[0])>>l,i=i?i<<s|r[0]:r[0],t+=1,n-=s}return i}(e,i)<=16)return!1;for(var n=e.length;i<n;i++)if(Cr(e,i))return be.log("MPEG Audio sync word found !"),!0;return!1},t.canParse=function(e,t){return Tr(i=e,n=t)&&4<=i.length-n;var i,n},t.appendFrame=function(e,t,i){if(null!==this.basePTS)return Sr(e,t,i,this.basePTS,this.frameIndex)},e}(or),Xr=(ea.getSilentFrame=function(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}},ea),Zr=Math.pow(2,32)-1,Jr=($r.init=function(){var e;for(e in $r.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]})$r.types.hasOwnProperty(e)&&($r.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);$r.HDLR_TYPES={video:t,audio:i};var n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),r=new Uint8Array([0,0,0,0,0,0,0,0]);$r.STTS=$r.STSC=$r.STCO=r,$r.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),$r.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),$r.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),$r.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var a=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),s=new Uint8Array([0,0,0,1]);$r.FTYP=$r.box($r.types.ftyp,a,s,a,o),$r.DINF=$r.box($r.types.dinf,$r.box($r.types.dref,n))},$r.box=function(e){for(var t=8,i=arguments.length,n=new Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];for(var a=n.length,o=a;a--;)t+=n[a].byteLength;var s=new Uint8Array(t);for(s[0]=t>>24&255,s[1]=t>>16&255,s[2]=t>>8&255,s[3]=255&t,s.set(e,4),a=0,t=8;a<o;a++)s.set(n[a],t),t+=n[a].byteLength;return s},$r.hdlr=function(e){return $r.box($r.types.hdlr,$r.HDLR_TYPES[e])},$r.mdat=function(e){return $r.box($r.types.mdat,e)},$r.mdhd=function(e,t){t*=e;var i=Math.floor(t/(1+Zr)),n=Math.floor(t%(1+Zr));return $r.box($r.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,n>>24,n>>16&255,n>>8&255,255&n,85,196,0,0]))},$r.mdia=function(e){return $r.box($r.types.mdia,$r.mdhd(e.timescale,e.duration),$r.hdlr(e.type),$r.minf(e))},$r.mfhd=function(e){return $r.box($r.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))},$r.minf=function(e){return"audio"===e.type?$r.box($r.types.minf,$r.box($r.types.smhd,$r.SMHD),$r.DINF,$r.stbl(e)):$r.box($r.types.minf,$r.box($r.types.vmhd,$r.VMHD),$r.DINF,$r.stbl(e))},$r.moof=function(e,t,i){return $r.box($r.types.moof,$r.mfhd(e),$r.traf(i,t))},$r.moov=function(e){for(var t=e.length,i=[];t--;)i[t]=$r.trak(e[t]);return $r.box.apply(null,[$r.types.moov,$r.mvhd(e[0].timescale,e[0].duration)].concat(i).concat($r.mvex(e)))},$r.mvex=function(e){for(var t=e.length,i=[];t--;)i[t]=$r.trex(e[t]);return $r.box.apply(null,[$r.types.mvex].concat(i))},$r.mvhd=function(e,t){t*=e;var i=Math.floor(t/(1+Zr)),n=Math.floor(t%(1+Zr)),r=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,n>>24,n>>16&255,n>>8&255,255&n,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return $r.box($r.types.mvhd,r)},$r.sdtp=function(e){var t,i,n=e.samples||[],r=new Uint8Array(4+n.length);for(t=0;t<n.length;t++)i=n[t].flags,r[t+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return $r.box($r.types.sdtp,r)},$r.stbl=function(e){return $r.box($r.types.stbl,$r.stsd(e),$r.box($r.types.stts,$r.STTS),$r.box($r.types.stsc,$r.STSC),$r.box($r.types.stsz,$r.STSZ),$r.box($r.types.stco,$r.STCO))},$r.avc1=function(e){var t,i,n,r=[],a=[];for(t=0;t<e.sps.length;t++)n=(i=e.sps[t]).byteLength,r.push(n>>>8&255),r.push(255&n),r=r.concat(Array.prototype.slice.call(i));for(t=0;t<e.pps.length;t++)n=(i=e.pps[t]).byteLength,a.push(n>>>8&255),a.push(255&n),a=a.concat(Array.prototype.slice.call(i));var o=$r.box($r.types.avcC,new Uint8Array([1,r[3],r[4],r[5],255,224|e.sps.length].concat(r).concat([e.pps.length]).concat(a))),s=e.width,l=e.height,d=e.pixelRatio[0],u=e.pixelRatio[1];return $r.box($r.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,s>>8&255,255&s,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,$r.box($r.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),$r.box($r.types.pasp,new Uint8Array([d>>24,d>>16&255,d>>8&255,255&d,u>>24,u>>16&255,u>>8&255,255&u])))},$r.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},$r.audioStsd=function(e){var t=e.samplerate;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,255&t,0,0])},$r.mp4a=function(e){return $r.box($r.types.mp4a,$r.audioStsd(e),$r.box($r.types.esds,$r.esds(e)))},$r.mp3=function(e){return $r.box($r.types[".mp3"],$r.audioStsd(e))},$r.ac3=function(e){return $r.box($r.types["ac-3"],$r.audioStsd(e),$r.box($r.types.dac3,e.config))},$r.stsd=function(e){return"audio"===e.type?"mp3"===e.segmentCodec&&"mp3"===e.codec?$r.box($r.types.stsd,$r.STSD,$r.mp3(e)):"ac3"===e.segmentCodec?$r.box($r.types.stsd,$r.STSD,$r.ac3(e)):$r.box($r.types.stsd,$r.STSD,$r.mp4a(e)):$r.box($r.types.stsd,$r.STSD,$r.avc1(e))},$r.tkhd=function(e){var t=e.id,i=e.duration*e.timescale,n=e.width,r=e.height,a=Math.floor(i/(1+Zr)),o=Math.floor(i%(1+Zr));return $r.box($r.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,o>>24,o>>16&255,o>>8&255,255&o,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>8&255,255&n,0,0,r>>8&255,255&r,0,0]))},$r.traf=function(e,t){var i=$r.sdtp(e),n=e.id,r=Math.floor(t/(1+Zr)),a=Math.floor(t%(1+Zr));return $r.box($r.types.traf,$r.box($r.types.tfhd,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n])),$r.box($r.types.tfdt,new Uint8Array([1,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,a>>24,a>>16&255,a>>8&255,255&a])),$r.trun(e,i.length+16+20+8+16+8+8),i)},$r.trak=function(e){return e.duration=e.duration||4294967295,$r.box($r.types.trak,$r.tkhd(e),$r.mdia(e))},$r.trex=function(e){var t=e.id;return $r.box($r.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},$r.trun=function(e,t){var i,n,r,a,o,s,l=e.samples||[],d=l.length,u=12+16*d,c=new Uint8Array(u);for(t+=8+u,c.set(["video"===e.type?1:0,0,15,1,d>>>24&255,d>>>16&255,d>>>8&255,255&d,t>>>24&255,t>>>16&255,t>>>8&255,255&t],0),i=0;i<d;i++)r=(n=l[i]).duration,a=n.size,o=n.flags,s=n.cts,c.set([r>>>24&255,r>>>16&255,r>>>8&255,255&r,a>>>24&255,a>>>16&255,a>>>8&255,255&a,o.isLeading<<2|o.dependsOn,o.isDependedOn<<6|o.hasRedundancy<<4|o.paddingValue<<1|o.isNonSync,61440&o.degradPrio,15&o.degradPrio,s>>>24&255,s>>>16&255,s>>>8&255,255&s],12+16*i);return $r.box($r.types.trun,c)},$r.initSegment=function(e){$r.types||$r.init();var t=$r.moov(e);return Ie($r.FTYP,t)},$r);function $r(){}function ea(){}function ta(a,e){return void 0===e&&(e=!1),function(e,t,i,n){void 0===i&&(i=1),void 0===n&&(n=!1);var r=1e3*a*i;return n?Math.round(r):r}(0,0,1/9e4,e)}Jr.types=void 0,Jr.HDLR_TYPES=void 0,Jr.STTS=void 0,Jr.STSC=void 0,Jr.STCO=void 0,Jr.STSZ=void 0,Jr.VMHD=void 0,Jr.SMHD=void 0,Jr.STSD=void 0,Jr.FTYP=void 0,Jr.DINF=void 0;var ia,na=null,ra=null,aa=((ia=oa.prototype).destroy=function(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null},ia.resetTimeStamp=function(e){be.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e},ia.resetNextTimestamp=function(){be.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1},ia.resetInitSegment=function(){be.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0},ia.getVideoStartPts=function(e){var n=!1,t=e.reduce(function(e,t){var i=t.pts-e;return i<-4294967296?(n=!0,sa(e,t.pts)):0<i?e:t.pts},e[0].pts);return n&&be.debug("PTS rollover detected"),t},ia.remux=function(e,t,i,n,r,a,o,s){var l,d,u,c,h,f,p=r,g=r,v=-1<e.pid,m=-1<t.pid,y=t.samples.length,b=0<e.samples.length,w=o&&0<y||1<y;if((!v||b)&&(!m||w)||this.ISGenerated||o){if(this.ISGenerated){var E,S,A,T,L=this.videoTrackConfig;!L||t.width===L.width&&t.height===L.height&&(null==(E=t.pixelRatio)?void 0:E[0])===(null==(S=L.pixelRatio)?void 0:S[0])&&(null==(A=t.pixelRatio)?void 0:A[1])===(null==(T=L.pixelRatio)?void 0:T[1])||this.resetInitSegment()}else u=this.generateIS(e,t,r,a);var C,k=this.isVideoContiguous,P=-1;if(w&&(P=function(e){for(var t=0;t<e.length;t++)if(e[t].key)return t;return-1}(t.samples),!k&&this.config.forceKeyFrameOnDiscontinuity))if(f=!0,0<P){be.warn("[mp4-remuxer]: Dropped "+P+" out of "+y+" video samples due to a missing keyframe");var x=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(P),t.dropped+=P,C=g+=(t.samples[0].pts-x)/t.inputTimeScale}else-1===P&&(be.warn("[mp4-remuxer]: No keyframe found out of "+y+" video samples"),f=!1);if(this.ISGenerated){if(b&&w){var O=this.getVideoStartPts(t.samples),I=(sa(e.samples[0].pts,O)-O)/t.inputTimeScale;p+=Math.max(0,I),g+=Math.max(0,-I)}if(b){if(e.samplerate||(be.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),u=this.generateIS(e,t,r,a)),d=this.remuxAudio(e,p,this.isAudioContiguous,a,m||w||s===ft?g:void 0),w){var R=d?d.endPTS-d.startPTS:0;t.inputTimeScale||(be.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),u=this.generateIS(e,t,r,a)),l=this.remuxVideo(t,g,k,R)}}else w&&(l=this.remuxVideo(t,g,k,0));l&&(l.firstKeyFrame=P,l.independent=-1!==P,l.firstKeyFramePTS=C)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(i.samples.length&&(h=la(i,r,this._initPTS,this._initDTS)),n.samples.length&&(c=da(n,r,this._initPTS))),{audio:d,video:l,initSegment:u,independent:f,text:c,id3:h}},ia.generateIS=function(e,t,i,n){var r,a,o,s=e.samples,l=t.samples,d=this.typeSupported,u={},c=this._initPTS,h=!c||n,f="audio/mp4";if(h&&(r=a=1/0),e.config&&s.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":d.mpeg?(f="audio/mpeg",e.codec=""):d.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3"}u.audio={id:"audio",container:f,codec:e.codec,initSegment:"mp3"===e.segmentCodec&&d.mpeg?new Uint8Array(0):Jr.initSegment([e]),metadata:{channelCount:e.channelCount}},h&&(o=e.inputTimeScale,c&&o===c.timescale?h=!1:r=a=s[0].pts-Math.round(o*i))}if(t.sps&&t.pps&&l.length){if(t.timescale=t.inputTimeScale,u.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:Jr.initSegment([t]),metadata:{width:t.width,height:t.height}},h)if(o=t.inputTimeScale,c&&o===c.timescale)h=!1;else{var p=this.getVideoStartPts(l),g=Math.round(o*i);a=Math.min(a,sa(l[0].dts,p)-g),r=Math.min(r,p-g)}this.videoTrackConfig={width:t.width,height:t.height,pixelRatio:t.pixelRatio}}if(Object.keys(u).length)return this.ISGenerated=!0,h?(this._initPTS={baseTime:r,timescale:o},this._initDTS={baseTime:a,timescale:o}):r=o=void 0,{tracks:u,initPTS:r,timescale:o}},ia.remuxVideo=function(e,t,i,n){var r,a,o=e.inputTimeScale,s=e.samples,l=[],d=s.length,u=this._initPTS,c=this.nextAvcDts,h=8,f=this.videoSampleDuration,p=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,v=!1;if(!i||null===c){var m=t*o,y=s[0].pts-sa(s[0].dts,s[0].pts);na&&null!==c&&Math.abs(m-y-c)<15e3?i=!0:c=m-y}for(var b=u.baseTime*o/u.timescale,w=0;w<d;w++){var E=s[w];E.pts=sa(E.pts-b,c),E.dts=sa(E.dts-b,c),E.dts<s[0<w?w-1:w].dts&&(v=!0)}v&&s.sort(function(e,t){var i=e.dts-t.dts,n=e.pts-t.pts;return i||n}),r=s[0].dts;var S=s[s.length-1].dts-r,A=S?Math.round(S/(d-1)):f||e.inputTimeScale/30;if(i){var T=r-c,L=A<T,C=T<-1;if((L||C)&&(L?be.warn("AVC: "+ta(T,!0)+" ms ("+T+"dts) hole between fragments detected at "+t.toFixed(3)):be.warn("AVC: "+ta(-T,!0)+" ms ("+T+"dts) overlapping between fragments detected at "+t.toFixed(3)),!C||c>=s[0].pts||na)){r=c;var k=s[0].pts-T;if(L)s[0].dts=r,s[0].pts=k;else for(var P=0;P<s.length&&!(s[P].dts>k);P++)s[P].dts-=T,s[P].pts-=T;be.log("Video: Initial PTS/DTS adjusted: "+ta(k,!0)+"/"+ta(r,!0)+", delta: "+ta(T,!0)+" ms")}}for(var x=0,O=0,I=r=Math.max(0,r),R=0;R<d;R++){for(var M=s[R],D=M.units,F=D.length,B=0,_=0;_<F;_++)B+=D[_].data.length;O+=B,x+=F,M.length=B,M.dts<I?(M.dts=I,I+=A/4|0||1):I=M.dts,p=Math.min(M.pts,p),g=Math.max(M.pts,g)}a=s[d-1].dts;var N,V=O+4*x+8;try{N=new Uint8Array(V)}catch(e){return void this.observer.emit(ve.ERROR,ve.ERROR,{type:me.MUX_ERROR,details:ye.REMUX_ALLOC_ERROR,fatal:!1,error:e,bytes:V,reason:"fail allocating video mdat "+V})}var U=new DataView(N.buffer);U.setUint32(0,V),N.set(Jr.types.mdat,4);for(var j=!1,H=Number.POSITIVE_INFINITY,G=Number.POSITIVE_INFINITY,z=Number.NEGATIVE_INFINITY,W=Number.NEGATIVE_INFINITY,q=0;q<d;q++){for(var Y=s[q],Q=Y.units,K=0,X=0,Z=Q.length;X<Z;X++){var J=Q[X],$=J.data,ee=J.data.byteLength;U.setUint32(h,ee),h+=4,N.set($,h),h+=ee,K+=4+ee}var te=void 0;if(q<d-1)f=s[q+1].dts-Y.dts,te=s[q+1].pts-Y.pts;else{var ie=this.config,ne=0<q?Y.dts-s[q-1].dts:A;if(te=0<q?Y.pts-s[q-1].pts:A,ie.stretchShortVideoTrack&&null!==this.nextAudioPts){var re=Math.floor(ie.maxBufferHole*o),ae=(n?p+n*o:this.nextAudioPts)-Y.pts;re<ae?((f=ae-ne)<0?f=ne:j=!0,be.log("[mp4-remuxer]: It is approximately "+ae/90+" ms to the next segment; using duration "+f/90+" ms for the last video frame.")):f=ne}else f=ne}var oe=Math.round(Y.pts-Y.dts);H=Math.min(H,f),z=Math.max(z,f),G=Math.min(G,te),W=Math.max(W,te),l.push(new ca(Y.key,f,K,oe))}if(l.length)if(na){if(na<70){var se=l[0].flags;se.dependsOn=2,se.isNonSync=0}}else if(ra&&W-G<z-H&&A/z<.025&&0===l[0].cts){be.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");for(var le=r,de=0,ue=l.length;de<ue;de++){var ce=le+l[de].duration,he=le+l[de].cts;if(de<ue-1){var fe=ce+l[de+1].cts;l[de].duration=fe-he}else l[de].duration=de?l[de-1].duration:A;l[de].cts=0,le=ce}}f=j||!f?A:f,this.nextAvcDts=c=a+f,this.videoSampleDuration=f,this.isVideoContiguous=!0;var pe={data1:Jr.moof(e.sequenceNumber++,r,ge({},e,{samples:l})),data2:N,startPTS:p/o,endPTS:(g+f)/o,startDTS:r/o,endDTS:c/o,type:"video",hasAudio:!1,hasVideo:!0,nb:l.length,dropped:e.dropped};return e.samples=[],e.dropped=0,pe},ia.getSamplesPerFrame=function(e){switch(e.segmentCodec){case"mp3":return 1152;case"ac3":return 1536;default:return 1024}},ia.remuxAudio=function(e,t,i,n,r){var a=e.inputTimeScale,o=a/(e.samplerate?e.samplerate:a),s=this.getSamplesPerFrame(e),l=s*o,d=this._initPTS,u="mp3"===e.segmentCodec&&this.typeSupported.mpeg,c=[],h=void 0!==r,f=e.samples,p=u?0:8,g=this.nextAudioPts||-1,v=t*a,m=d.baseTime*a/d.timescale;if(this.isAudioContiguous=i=i||f.length&&0<g&&(n&&Math.abs(v-g)<9e3||Math.abs(sa(f[0].pts-m,v)-g)<20*l),f.forEach(function(e){e.pts=sa(e.pts-m,v)}),!i||g<0){if(!(f=f.filter(function(e){return 0<=e.pts})).length)return;g=0===r?0:n&&!h?Math.max(0,v):f[0].pts}if("aac"===e.segmentCodec)for(var y=this.config.maxAudioFramesDrift,b=0,w=g;b<f.length;b++){var E=f[b],S=E.pts,A=S-w,T=Math.abs(1e3*A/a);if(A<=-y*l&&h)0===b&&(be.warn("Audio frame @ "+(S/a).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*A/a)+" ms."),this.nextAudioPts=g=w=S);else if(y*l<=A&&T<1e4&&h){var L=Math.round(A/l);(w=S-L*l)<0&&(L--,w+=l),0===b&&(this.nextAudioPts=g=w),be.warn("[mp4-remuxer]: Injecting "+L+" audio frame @ "+(w/a).toFixed(3)+"s due to "+Math.round(1e3*A/a)+" ms gap.");for(var C=0;C<L;C++){var k=Math.max(w,0),P=Xr.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);P||(be.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),P=E.unit.subarray()),f.splice(b,0,{unit:P,pts:k}),w+=l,b++}}E.pts=w,w+=l}for(var x,O=null,I=null,R=0,M=f.length;M--;)R+=f[M].unit.byteLength;for(var D=0,F=f.length;D<F;D++){var B=f[D],_=B.unit,N=B.pts;if(null!==I)c[D-1].duration=Math.round((N-I)/o);else{if(i&&"aac"===e.segmentCodec&&(N=g),O=N,!(0<R))return;R+=p;try{x=new Uint8Array(R)}catch(e){return void this.observer.emit(ve.ERROR,ve.ERROR,{type:me.MUX_ERROR,details:ye.REMUX_ALLOC_ERROR,fatal:!1,error:e,bytes:R,reason:"fail allocating audio mdat "+R})}u||(new DataView(x.buffer).setUint32(0,R),x.set(Jr.types.mdat,4))}x.set(_,p);var V=_.byteLength;p+=V,c.push(new ca(!0,s,V,0)),I=N}var U=c.length;if(U){var j=c[c.length-1];this.nextAudioPts=g=I+o*j.duration;var H=O/a,G=g/a,z={data1:u?new Uint8Array(0):Jr.moof(e.sequenceNumber++,O/o,ge({},e,{samples:c})),data2:x,startPTS:H,endPTS:G,startDTS:H,endDTS:G,type:"audio",hasAudio:!0,hasVideo:(e.samples=[],!1),nb:U};return this.isAudioContiguous=!0,z}},ia.remuxEmptyAudio=function(e,t,i,n){var r=e.inputTimeScale,a=r/(e.samplerate?e.samplerate:r),o=this.nextAudioPts,s=this._initDTS,l=9e4*s.baseTime/s.timescale,d=(null!==o?o:n.startDTS*r)+l,u=n.endDTS*r+l,c=1024*a,h=Math.ceil((u-d)/c),f=Xr.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(be.warn("[mp4-remuxer]: remux empty Audio"),f){for(var p=[],g=0;g<h;g++){var v=d+g*c;p.push({unit:f,pts:v,dts:v})}return e.samples=p,this.remuxAudio(e,t,i,!1)}be.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec")},oa);function oa(e,t,i,n){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=t,this.typeSupported=i,this.ISGenerated=!1,null===na){var r=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);na=r?parseInt(r[1]):0}if(null===ra){var a=navigator.userAgent.match(/Safari\/(\d+)/i);ra=a?parseInt(a[1]):0}}function sa(e,t){var i;if(null===t)return e;for(i=t<e?-8589934592:8589934592;4294967296<Math.abs(e-t);)e+=i;return e}function la(e,t,i,n){var r=e.samples.length;if(r){for(var a=e.inputTimeScale,o=0;o<r;o++){var s=e.samples[o];s.pts=sa(s.pts-i.baseTime*a/i.timescale,t*a)/a,s.dts=sa(s.dts-n.baseTime*a/n.timescale,t*a)/a}var l=e.samples;return e.samples=[],{samples:l}}}function da(e,t,i){var n=e.samples.length;if(n){for(var r=e.inputTimeScale,a=0;a<n;a++){var o=e.samples[a];o.pts=sa(o.pts-i.baseTime*r/i.timescale,t*r)/r}e.samples.sort(function(e,t){return e.pts-t.pts});var s=e.samples;return e.samples=[],{samples:s}}}var ua,ca=function(e,t,i,n){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=t,this.size=i,this.cts=n,this.flags={isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:e?2:1,isNonSync:e?0:1}},ha=((ua=fa.prototype).destroy=function(){},ua.resetTimeStamp=function(e){this.initPTS=e,this.lastEndTime=null},ua.resetNextTimestamp=function(){this.lastEndTime=null},ua.resetInitSegment=function(e,t,i,n){this.audioCodec=t,this.videoCodec=i,this.generateInitSegment(function(e,t){if(!e||!t)return e;var r=t.keyId;return r&&t.isCommonEncryption&&Ae(e,["moov","trak"]).forEach(function(e){var t=Ae(e,["mdia","minf","stbl","stsd"])[0].subarray(8),i=Ae(t,["enca"]),n=0<i.length;n||(i=Ae(t,["encv"])),i.forEach(function(e){Ae(n?e.subarray(28):e.subarray(78),["sinf"]).forEach(function(e){var t=function(e){var t=Ae(e,["schm"])[0];if(t){var i=he(t.subarray(4,8));if("cbcs"===i||"cenc"===i)return Ae(e,["schi","tenc"])[0]}return be.error("[eme] missing 'schm' box"),null}(e);if(t){var i=t.subarray(8,24);i.some(function(e){return 0!==e})||(be.log("[eme] Patching keyId in 'enc"+(n?"a":"v")+">sinf>>tenc' box: "+le(i)+" -> "+le(r)),t.set(r,8))}})})}),e}(e,n)),this.emitInitSegment=!0},ua.generateInitSegment=function(e){var t=this.audioCodec,i=this.videoCodec;if(null==e||!e.byteLength)return this.initTracks=void 0,void(this.initData=void 0);var n=this.initData=Le(e);n.audio&&(t=pa(n.audio,F)),n.video&&(i=pa(n.video,R));var r={};n.audio&&n.video?r.audiovideo={container:"video/mp4",codec:t+","+i,initSegment:e,id:"main"}:n.audio?r.audio={container:"audio/mp4",codec:t,initSegment:e,id:"audio"}:n.video?r.video={container:"video/mp4",codec:i,initSegment:e,id:"main"}:be.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=r},ua.remux=function(e,t,i,n,r,a){var o,s,l=this.initPTS,d=this.lastEndTime,u={audio:void 0,video:void 0,text:n,id3:i,initSegment:void 0};J(d)||(d=this.lastEndTime=r||0);var c=t.samples;if(null==c||!c.length)return u;var h={initPTS:void 0,timescale:1},f=this.initData;if(null!=(o=f)&&o.length||(this.generateInitSegment(c),f=this.initData),null==(s=f)||!s.length)return be.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),u;this.emitInitSegment&&(h.tracks=this.initTracks,this.emitInitSegment=!1);var p,g=function(e,t){for(var i=0,n=0,r=0,a=Ae(e,["moof","traf"]),o=0;o<a.length;o++){var s=a[o],l=Ae(s,["tfhd"])[0],d=t[pe(l,4)];if(d){var u=d.default,c=pe(l,0)|(null==u?void 0:u.flags),h=null==u?void 0:u.duration;8&c&&(h=pe(l,2&c?12:8));for(var f=d.timescale||9e4,p=Ae(s,["trun"]),g=0;g<p.length;g++)!(i=Oe(p[g]))&&h&&(i=h*pe(p[g],4)),d.type===R?n+=i/f:d.type===F&&(r+=i/f)}}if(0===n&&0===r){for(var v=1/0,m=0,y=0,b=Ae(e,["sidx"]),w=0;w<b.length;w++){var E=Te(b[w]);if(null!=E&&E.references){v=Math.min(v,E.earliestPresentationTime/E.timescale);var S=E.references.reduce(function(e,t){return e+t.info.duration||0},0);y=(m=Math.max(m,S+E.earliestPresentationTime/E.timescale))-v}}if(y&&J(y))return y}return n||r}(c,f),v=(p=f,Ae(c,["moof","traf"]).reduce(function(e,t){var o=Ae(t,["tfdt"])[0],s=o[0],i=Ae(t,["tfhd"]).reduce(function(e,t){var i=pe(t,4),n=p[i];if(n){var r=pe(o,4);if(1===s){if(r===de)return be.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),e;r*=1+de,r+=pe(o,8)}var a=r/(n.timescale||9e4);if(J(a)&&(null===e||a<e))return a}return e},null);return null!==i&&J(i)&&(null===e||i<e)?i:e},null)),m=null===v?r:v;(function(e,t,i,n){if(null===e)return!0;var r=Math.max(n,1),a=t-e.baseTime/e.timescale;return Math.abs(a-i)>r}(l,m,r,g)||h.timescale!==l.timescale&&a)&&(h.initPTS=m-r,l&&1===l.timescale&&be.warn("Adjusting initPTS by "+(h.initPTS-l.baseTime)),this.initPTS=l={baseTime:h.initPTS,timescale:1});var y,b,w,E=e?m-l.baseTime/l.timescale:d,S=E+g;y=f,b=c,w=l.baseTime/l.timescale,Ae(b,["moof","traf"]).forEach(function(n){Ae(n,["tfhd"]).forEach(function(e){var t=pe(e,4),i=y[t];if(i){var o=i.timescale||9e4;Ae(n,["tfdt"]).forEach(function(e){var t=e[0],i=w*o;if(i){var n=pe(e,4);if(0===t)n-=i,Se(e,4,n=Math.max(n,0));else{n*=Math.pow(2,32),n+=pe(e,8),n-=i,n=Math.max(n,0);var r=Math.floor(n/(1+de)),a=Math.floor(n%(1+de));Se(e,4,r),Se(e,8,a)}}})}})}),0<g?this.lastEndTime=S:(be.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());var A=!!f.audio,T=!!f.video,L="";A&&(L+="audio"),T&&(L+="video");var C={data1:c,startPTS:E,startDTS:E,endPTS:S,endDTS:S,type:L,hasAudio:A,hasVideo:T,nb:1,dropped:0};return u.audio="audio"===C.type?C:void 0,u.video="audio"!==C.type?C:void 0,u.initSegment=h,u.id3=la(i,r,l,l),n.samples.length&&(u.text=da(n,r,l)),u},fa);function fa(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null}function pa(e,t){var i=null==e?void 0:e.codec;if(i&&4<i.length)return i;if(t!==F)return be.warn('Unhandled video codec "'+i+'"'),"hvc1"===i||"hev1"===i?"hvc1.1.6.L120.90":"av01"===i?"av01.0.04M.08":"avc1.42e01e";if("ec-3"===i||"ac-3"===i||"alac"===i)return i;if("fLaC"===i||"Opus"===i)return qe(i,!1);return be.info('Parsed audio codec "'+i+'" or audio object type not handled. Using "mp4a.40.5"'),"mp4a.40.5"}var ga,va="undefined"!=typeof self?self:void 0;try{ga=self.performance.now.bind(self.performance)}catch(e){be.debug("Unable to use Performance API on this environment"),ga=null==va?void 0:va.Date.now}var ma,ya=[{demux:Mr,remux:ha},{demux:Vr,remux:aa},{demux:Ir,remux:aa},{demux:Kr,remux:aa}],ba=((ma=Ea.prototype).configure=function(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()},ma.push=function(e,t,i,n){var r=this,a=i.transmuxing;a.executeStart=ga();var o=new Uint8Array(e),s=this.currentTransmuxState,l=this.transmuxConfig;n&&(this.currentTransmuxState=n);var d,u,c=n||s,h=c.contiguous,f=c.discontinuity,p=c.trackSwitch,g=c.accurateTimeOffset,v=c.timeOffset,m=c.initSegmentChange,y=l.audioCodec,b=l.videoCodec,w=l.defaultInitPts,E=l.duration,S=l.initSegmentData,A=(d=t,u=null,0<o.byteLength&&null!=(null==d?void 0:d.key)&&null!==d.iv&&null!=d.method&&(u=d),u);if(A&&"AES-128"===A.method){var T=this.getDecrypter();if(!T.isSync())return this.decryptionPromise=T.webCryptoDecrypt(o,A.key.buffer,A.iv.buffer).then(function(e){var t=r.push(e,null,i);return r.decryptionPromise=null,t}),this.decryptionPromise;var L=T.softwareDecrypt(o,A.key.buffer,A.iv.buffer);if(-1<i.part&&(L=T.flush()),!L)return a.executeEnd=ga(),wa(i);o=new Uint8Array(L)}var C=this.needsProbing(f,p);if(C){var k=this.configureTransmuxer(o);if(k)return be.warn("[transmuxer] "+k.message),this.observer.emit(ve.ERROR,ve.ERROR,{type:me.MEDIA_ERROR,details:ye.FRAG_PARSING_ERROR,fatal:!1,error:k,reason:k.message}),a.executeEnd=ga(),wa(i)}(f||p||m||C)&&this.resetInitSegment(S,y,b,E,t),(f||m||C)&&this.resetInitialTimestamp(w),h||this.resetContiguity();var P=this.transmux(o,A,v,g,i),x=this.currentTransmuxState;return x.contiguous=!0,x.discontinuity=!1,x.trackSwitch=!1,a.executeEnd=ga(),P},ma.flush=function(t){var i=this,e=t.transmuxing;e.executeStart=ga();var n=this.decrypter,r=this.currentTransmuxState,a=this.decryptionPromise;if(a)return a.then(function(){return i.flush(t)});var o=[],s=r.timeOffset;if(n){var l=n.flush();l&&o.push(this.push(l,null,t))}var d=this.demuxer,u=this.remuxer;if(!d||!u)return e.executeEnd=ga(),[wa(t)];var c=d.flush(s);return Sa(c)?c.then(function(e){return i.flushRemux(o,e,t),o}):(this.flushRemux(o,c,t),o)},ma.flushRemux=function(e,t,i){var n=t.audioTrack,r=t.videoTrack,a=t.id3Track,o=t.textTrack,s=this.currentTransmuxState,l=s.accurateTimeOffset,d=s.timeOffset;be.log("[transmuxer.ts]: Flushed fragment "+i.sn+(-1<i.part?" p: "+i.part:"")+" of level "+i.level);var u=this.remuxer.remux(n,r,a,o,d,l,!0,this.id);e.push({remuxResult:u,chunkMeta:i}),i.transmuxing.executeEnd=ga()},ma.resetInitialTimestamp=function(e){var t=this.demuxer,i=this.remuxer;t&&i&&(t.resetTimeStamp(e),i.resetTimeStamp(e))},ma.resetContiguity=function(){var e=this.demuxer,t=this.remuxer;e&&t&&(e.resetContiguity(),t.resetNextTimestamp())},ma.resetInitSegment=function(e,t,i,n,r){var a=this.demuxer,o=this.remuxer;a&&o&&(a.resetInitSegment(e,t,i,n),o.resetInitSegment(e,t,i,r))},ma.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)},ma.transmux=function(e,t,i,n,r){return t&&"SAMPLE-AES"===t.method?this.transmuxSampleAes(e,t,i,n,r):this.transmuxUnencrypted(e,i,n,r)},ma.transmuxUnencrypted=function(e,t,i,n){var r=this.demuxer.demux(e,t,!1,!this.config.progressive),a=r.audioTrack,o=r.videoTrack,s=r.id3Track,l=r.textTrack;return{remuxResult:this.remuxer.remux(a,o,s,l,t,i,!1,this.id),chunkMeta:n}},ma.transmuxSampleAes=function(e,t,i,n,r){var a=this;return this.demuxer.demuxSampleAes(e,t,i).then(function(e){return{remuxResult:a.remuxer.remux(e.audioTrack,e.videoTrack,e.id3Track,e.textTrack,i,n,!1,a.id),chunkMeta:r}})},ma.configureTransmuxer=function(e){for(var t,i=this.config,n=this.observer,r=this.typeSupported,a=this.vendor,o=0,s=ya.length;o<s;o++){var l;if(null!=(l=ya[o].demux)&&l.probe(e)){t=ya[o];break}}if(!t)return new Error("Failed to find demuxer by probing fragment data");var d=this.demuxer,u=this.remuxer,c=t.remux,h=t.demux;u&&u instanceof c||(this.remuxer=new c(n,i,r,a)),d&&d instanceof h||(this.demuxer=new h(n,i,r),this.probe=h.probe)},ma.needsProbing=function(e,t){return!this.demuxer||!this.remuxer||e||t},ma.getDecrypter=function(){var e=this.decrypter;return e=e||(this.decrypter=new Un(this.config))},Ea),wa=function(e){return{remuxResult:{},chunkMeta:e}};function Ea(e,t,i,n,r){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=i,this.vendor=n,this.id=r}function Sa(e){return"then"in e&&e.then instanceof Function}function Aa(e,t,i,n,r){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=i,this.duration=n,this.defaultInitPts=r||null}function Ta(e,t,i,n,r,a){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=i,this.trackSwitch=n,this.timeOffset=r,this.initSegmentChange=a}var La,Ca,ka,Pa={exports:{}};function xa(){}function Oa(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function Ia(e,t,i,n,r){if("function"!=typeof i)throw new TypeError("The listener must be a function");var a=new Oa(i,n||e,r),o=ka?ka+t:t;return e._events[o]?e._events[o].fn?e._events[o]=[e._events[o],a]:e._events[o].push(a):(e._events[o]=a,e._eventsCount++),e}function Ra(e,t){0==--e._eventsCount?e._events=new xa:delete e._events[t]}function Ma(){this._events=new xa,this._eventsCount=0}La=Pa,Ca=Object.prototype.hasOwnProperty,ka="~",Object.create&&(xa.prototype=Object.create(null),(new xa).__proto__||(ka=!1)),Ma.prototype.eventNames=function(){var e,t,i=[];if(0===this._eventsCount)return i;for(t in e=this._events)Ca.call(e,t)&&i.push(ka?t.slice(1):t);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},Ma.prototype.listeners=function(e){var t=ka?ka+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,r=i.length,a=new Array(r);n<r;n++)a[n]=i[n].fn;return a},Ma.prototype.listenerCount=function(e){var t=ka?ka+e:e,i=this._events[t];return i?i.fn?1:i.length:0},Ma.prototype.emit=function(e,t,i,n,r,a){var o=ka?ka+e:e;if(!this._events[o])return!1;var s,l,d=this._events[o],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,i),!0;case 4:return d.fn.call(d.context,t,i,n),!0;case 5:return d.fn.call(d.context,t,i,n,r),!0;case 6:return d.fn.call(d.context,t,i,n,r,a),!0}for(l=1,s=new Array(u-1);l<u;l++)s[l-1]=arguments[l];d.fn.apply(d.context,s)}else{var c,h=d.length;for(l=0;l<h;l++)switch(d[l].once&&this.removeListener(e,d[l].fn,void 0,!0),u){case 1:d[l].fn.call(d[l].context);break;case 2:d[l].fn.call(d[l].context,t);break;case 3:d[l].fn.call(d[l].context,t,i);break;case 4:d[l].fn.call(d[l].context,t,i,n);break;default:if(!s)for(c=1,s=new Array(u-1);c<u;c++)s[c-1]=arguments[c];d[l].fn.apply(d[l].context,s)}}return!0},Ma.prototype.on=function(e,t,i){return Ia(this,e,t,i,!1)},Ma.prototype.once=function(e,t,i){return Ia(this,e,t,i,!0)},Ma.prototype.removeListener=function(e,t,i,n){var r=ka?ka+e:e;if(!this._events[r])return this;if(!t)return Ra(this,r),this;var a=this._events[r];if(a.fn)a.fn!==t||n&&!a.once||i&&a.context!==i||Ra(this,r);else{for(var o=0,s=[],l=a.length;o<l;o++)(a[o].fn!==t||n&&!a[o].once||i&&a[o].context!==i)&&s.push(a[o]);s.length?this._events[r]=1===s.length?s[0]:s:Ra(this,r)}return this},Ma.prototype.removeAllListeners=function(e){var t;return e?(t=ka?ka+e:e,this._events[t]&&Ra(this,t)):(this._events=new xa,this._eventsCount=0),this},Ma.prototype.off=Ma.prototype.removeListener,Ma.prototype.addListener=Ma.prototype.on,Ma.prefixed=ka,Ma.EventEmitter=Ma,La.exports=Ma;var Da=e(Pa.exports);function Fa(e,t){if(!((i=t.remuxResult).audio||i.video||i.text||i.id3||i.initSegment))return!1;var i,n=[],r=t.remuxResult,a=r.audio,o=r.video;return a&&Ba(n,a),o&&Ba(n,o),e.postMessage({event:"transmuxComplete",data:t},n),!0}function Ba(e,t){t.data1&&e.push(t.data1.buffer),t.data2&&e.push(t.data2.buffer)}function _a(i,e,t){e.reduce(function(e,t){return Fa(i,t)||e},!1)||i.postMessage({event:"transmuxComplete",data:e[0]}),i.postMessage({event:"flush",data:t})}void 0!==Ya&&Ya&&function(o){function s(e,t){o.postMessage({event:e,data:t})}var l=new Da;l.on(ve.FRAG_DECRYPTED,s),l.on(ve.ERROR,s);o.addEventListener("message",function(e){var t=e.data;switch(t.cmd){case"init":var i=JSON.parse(t.config);o.transmuxer=new ba(l,t.typeSupported,i,"",t.id),k(i.debug,t.id),function(){function e(t){be[t]=function(e){s("workerLog",{logType:t,message:e})}}for(var t in be)e(t)}(),s("init",null);break;case"configure":o.transmuxer.configure(t.config);break;case"demux":var n=o.transmuxer.push(t.data,t.decryptdata,t.chunkMeta,t.state);Sa(n)?(o.transmuxer.async=!0,n.then(function(e){Fa(o,e)}).catch(function(e){s(ve.ERROR,{type:me.MEDIA_ERROR,details:ye.FRAG_PARSING_ERROR,chunkMeta:t.chunkMeta,fatal:!1,error:e,err:e,reason:"transmuxer-worker push error"})})):(o.transmuxer.async=!1,Fa(o,n));break;case"flush":var r=t.chunkMeta,a=o.transmuxer.flush(r);Sa(a)||o.transmuxer.async?(Sa(a)||(a=Promise.resolve(a)),a.then(function(e){_a(o,e,r)}).catch(function(e){s(ve.ERROR,{type:me.MEDIA_ERROR,details:ye.FRAG_PARSING_ERROR,chunkMeta:t.chunkMeta,fatal:!1,error:e,err:e,reason:"transmuxer-worker flush error"})})):_a(o,a,r)}})}(self);var Na,Va,Ua=((Va=Wa.prototype).resetWorker=function(){if(this.workerContext){var e=this.workerContext,t=e.worker,i=e.objectURL;i&&self.URL.revokeObjectURL(i),t.removeEventListener("message",this.onwmsg),t.onerror=null,t.terminate(),this.workerContext=null}},Va.destroy=function(){if(this.workerContext)this.resetWorker(),this.onwmsg=void 0;else{var e=this.transmuxer;e&&(e.destroy(),this.transmuxer=null)}var t=this.observer;t&&t.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null},Va.push=function(e,t,i,n,r,a,o,s,l,d){var u,c,h=this;l.transmuxing.start=self.performance.now();var f=this.transmuxer,p=a?a.start:r.start,g=r.decryptdata,v=this.frag,m=!(v&&r.cc===v.cc),y=!(v&&l.level===v.level),b=v?l.sn-v.sn:-1,w=this.part?l.part-this.part.index:-1,E=0==b&&1<l.id&&l.id===(null==v?void 0:v.stats.chunkCount),S=!y&&(1==b||0==b&&(1==w||E&&w<=0)),A=self.performance.now();(y||b||0===r.stats.parsing.start)&&(r.stats.parsing.start=A),!a||!w&&S||(a.stats.parsing.start=A);var T=!(v&&(null==(u=r.initSegment)?void 0:u.url)===(null==(c=v.initSegment)?void 0:c.url)),L=new Ta(m,S,s,y,p,T);if(!S||m||T){be.log("[transmuxer-interface, "+r.type+"]: Starting new transmux session for sn: "+l.sn+" p: "+l.part+" level: "+l.level+" id: "+l.id+"\n        discontinuity: "+m+"\n        trackSwitch: "+y+"\n        contiguous: "+S+"\n        accurateTimeOffset: "+s+"\n        timeOffset: "+p+"\n        initSegmentChange: "+T);var C=new Aa(i,n,t,o,d);this.configureTransmuxer(C)}if(this.frag=r,this.part=a,this.workerContext)this.workerContext.worker.postMessage({cmd:"demux",data:e,decryptdata:g,chunkMeta:l,state:L},e instanceof ArrayBuffer?[e]:[]);else if(f){var k=f.push(e,g,l,L);Sa(k)?(f.async=!0,k.then(function(e){h.handleTransmuxComplete(e)}).catch(function(e){h.transmuxerError(e,l,"transmuxer-interface push error")})):(f.async=!1,this.handleTransmuxComplete(k))}},Va.flush=function(t){var i=this;t.transmuxing.start=self.performance.now();var e=this.transmuxer;if(this.workerContext)this.workerContext.worker.postMessage({cmd:"flush",chunkMeta:t});else if(e){var n=e.flush(t);Sa(n)||e.async?(Sa(n)||(n=Promise.resolve(n)),n.then(function(e){i.handleFlushResult(e,t)}).catch(function(e){i.transmuxerError(e,t,"transmuxer-interface flush error")})):this.handleFlushResult(n,t)}},Va.transmuxerError=function(e,t,i){this.hls&&(this.error=e,this.hls.trigger(ve.ERROR,{type:me.MEDIA_ERROR,details:ye.FRAG_PARSING_ERROR,chunkMeta:t,frag:this.frag||void 0,fatal:!1,error:e,err:e,reason:i}))},Va.handleFlushResult=function(e,t){var i=this;e.forEach(function(e){i.handleTransmuxComplete(e)}),this.onFlush(t)},Va.onWorkerMessage=function(e){var t=e.data;if(null!=t&&t.event){var i=this.hls;if(this.hls)switch(t.event){case"init":var n,r=null==(n=this.workerContext)?void 0:n.objectURL;r&&self.URL.revokeObjectURL(r);break;case"transmuxComplete":this.handleTransmuxComplete(t.data);break;case"flush":this.onFlush(t.data);break;case"workerLog":be[t.data.logType]&&be[t.data.logType](t.data.message);break;default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,i.trigger(t.event,t.data)}}else be.warn("worker message received with no "+(t?"event name":"data"))},Va.configureTransmuxer=function(e){var t=this.transmuxer;this.workerContext?this.workerContext.worker.postMessage({cmd:"configure",config:e}):t&&t.configure(e)},Va.handleTransmuxComplete=function(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)},Wa),ja=((Na=za.prototype).destroy=function(){this.media=null,this.hls=this.fragmentTracker=null},Na.poll=function(e,t){var i=this.config,n=this.media,r=this.stalled;if(null!==n){var a=n.currentTime,o=n.seeking,s=this.seeking&&!o,l=!this.seeking&&o;if(this.seeking=o,a===e)if(l||s)this.stalled=null;else if(n.paused&&!o||n.ended||0===n.playbackRate||!wi.getBuffered(n).length)this.nudgeRetry=0;else{var d=wi.bufferInfo(n,a,0),u=d.nextStart||0;if(o){var c=2<d.len,h=!u||t&&t.start<=a||2<u-a&&!this.fragmentTracker.getPartialFragment(a);if(c||h)return;this.moved=!1}if(!this.moved&&null!==this.stalled){var f;if(!(0<d.len||u))return;var p=Math.max(u,d.start||0)-a,g=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,v=(null==g||null==(f=g.details)?void 0:f.live)?2*g.details.targetduration:2,m=this.fragmentTracker.getPartialFragment(a);if(0<p&&(p<=v||m))return void(n.paused||this._trySkipBufferHole(m))}var y=self.performance.now();if(null!==r){var b=y-r;if(o||!(250<=b)||(this._reportStall(d),this.media)){var w=wi.bufferInfo(n,a,i.maxBufferHole);this._tryFixBufferStall(w,b)}}else this.stalled=y}else if(this.moved=!0,o||(this.nudgeRetry=0),null!==r){if(this.stallReported){var E=self.performance.now()-r;be.warn("playback not stuck anymore @"+a+", after "+Math.round(E)+"ms"),this.stallReported=!1}this.stalled=null}}},Na._tryFixBufferStall=function(e,t){var i=this.config,n=this.fragmentTracker,r=this.media;if(null!==r){var a=r.currentTime,o=n.getPartialFragment(a);if(o&&(this._trySkipBufferHole(o)||!this.media))return;(e.len>i.maxBufferHole||e.nextStart&&e.nextStart-a<i.maxBufferHole)&&t>1e3*i.highBufferWatchdogPeriod&&(be.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}},Na._reportStall=function(e){var t=this.hls,i=this.media;if(!this.stallReported&&i){this.stallReported=!0;var n=new Error("Playback stalling at @"+i.currentTime+" due to low buffer ("+JSON.stringify(e)+")");be.warn(n.message),t.trigger(ve.ERROR,{type:me.MEDIA_ERROR,details:ye.BUFFER_STALLED_ERROR,fatal:!1,error:n,buffer:e.len})}},Na._trySkipBufferHole=function(e){var t=this.config,i=this.hls,n=this.media;if(null===n)return 0;var r=n.currentTime,a=wi.bufferInfo(n,r,0),o=r<a.start?a.start:a.nextStart;if(o){var s=a.len<=t.maxBufferHole,l=0<a.len&&a.len<1&&n.readyState<3,d=o-r;if(0<d&&(s||l)){if(d>t.maxBufferHole){var u=this.fragmentTracker,c=!1;if(0===r){var h=u.getAppendedFrag(0,ht);h&&o<h.end&&(c=!0)}if(!c){var f=e||u.getAppendedFrag(r,ht);if(f){for(var p=!1,g=f.end;g<o;){var v=u.getPartialFragment(g);if(!v){p=!0;break}g+=v.duration}if(p)return 0}}}var m=Math.max(o+.05,r+.1);if(be.warn("skipping hole, adjusting currentTime from "+r+" to "+m),this.moved=!0,this.stalled=null,n.currentTime=m,e&&!e.gap){var y=new Error("fragment loaded with buffer holes, seeking from "+r+" to "+m);i.trigger(ve.ERROR,{type:me.MEDIA_ERROR,details:ye.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:y,reason:y.message,frag:e})}return m}}return 0},Na._tryNudgeBuffer=function(){var e=this.config,t=this.hls,i=this.media,n=this.nudgeRetry;if(null!==i){var r=i.currentTime;if(this.nudgeRetry++,n<e.nudgeMaxRetry){var a=r+(n+1)*e.nudgeOffset,o=new Error("Nudging 'currentTime' from "+r+" to "+a);be.warn(o.message),i.currentTime=a,t.trigger(ve.ERROR,{type:me.MEDIA_ERROR,details:ye.BUFFER_NUDGE_ON_STALL,error:o,fatal:!1})}else{var s=new Error("Playhead still not moving while enough data buffered @"+r+" after "+e.nudgeMaxRetry+" nudges");be.error(s.message),t.trigger(ve.ERROR,{type:me.MEDIA_ERROR,details:ye.BUFFER_STALLED_ERROR,error:s,fatal:!0})}}},za),Ha=function(r){function e(e,t,i){var n;return(n=r.call(this,e,t,i,"[stream-controller]",ht)||this).audioCodecSwap=!1,n.gapController=null,n.level=-1,n._forceStartLoad=!1,n.altAudio=!1,n.audioOnly=!1,n.fragPlaying=null,n.onvplaying=null,n.onvseeked=null,n.fragLastKbps=0,n.couldBacktrack=!1,n.backtrackFragment=null,n.audioCodecSwitch=!1,n.videoBuffer=null,n._registerListeners(),n}s(e,r);var t=e.prototype;return t._registerListeners=function(){var e=this.hls;e.on(ve.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(ve.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(ve.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ve.MANIFEST_PARSED,this.onManifestParsed,this),e.on(ve.LEVEL_LOADING,this.onLevelLoading,this),e.on(ve.LEVEL_LOADED,this.onLevelLoaded,this),e.on(ve.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(ve.ERROR,this.onError,this),e.on(ve.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(ve.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(ve.BUFFER_CREATED,this.onBufferCreated,this),e.on(ve.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(ve.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(ve.FRAG_BUFFERED,this.onFragBuffered,this)},t._unregisterListeners=function(){var e=this.hls;e.off(ve.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(ve.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(ve.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ve.MANIFEST_PARSED,this.onManifestParsed,this),e.off(ve.LEVEL_LOADED,this.onLevelLoaded,this),e.off(ve.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(ve.ERROR,this.onError,this),e.off(ve.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(ve.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(ve.BUFFER_CREATED,this.onBufferCreated,this),e.off(ve.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(ve.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(ve.FRAG_BUFFERED,this.onFragBuffered,this)},t.onHandlerDestroying=function(){this._unregisterListeners(),r.prototype.onHandlerDestroying.call(this)},t.startLoad=function(e){if(this.levels){var t=this.lastCurrentTime,i=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,!this.startFragRequested){var n=i.startLevel;-1===n&&(i.config.testBandwidth&&1<this.levels.length?(n=0,this.bitrateTest=!0):n=i.firstAutoLevel),i.nextLoadLevel=n,this.level=i.loadLevel,this.loadedmetadata=!1}0<t&&-1===e&&(this.log("Override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=Hn,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this._forceStartLoad=!0,this.state=jn},t.stopLoad=function(){this._forceStartLoad=!1,r.prototype.stopLoad.call(this)},t.doTick=function(){switch(this.state){case Xn:var e=this.levels,t=this.level,i=null==e?void 0:e[t],n=null==i?void 0:i.details;if(n&&(!n.live||this.levelLastLoaded===i)){if(this.waitForCdnTuneIn(n))break;this.state=Hn;break}if(this.hls.nextLoadLevel===this.level)break;this.state=Hn;break;case Wn:var r,a=self.performance.now(),o=this.retryDate;if(!o||o<=a||null!=(r=this.media)&&r.seeking){var s=this.levels,l=this.level,d=null==s?void 0:s[l];this.resetStartWhenNotLoaded(d||null),this.state=Hn}}this.state===Hn&&this.doTickIdle(),this.onTickEnd()},t.onTickEnd=function(){r.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged()},t.doTickIdle=function(){var e=this.hls,t=this.levelLastLoaded,i=this.levels,n=this.media;if(null!==t&&(n||!this.startFragRequested&&e.config.startFragPrefetch)&&(!this.altAudio||!this.audioOnly)){var r=e.nextLoadLevel;if(null!=i&&i[r]){var a=i[r],o=this.getMainFwdBufferInfo();if(null!==o){var s=this.getLevelDetails();if(s&&this._streamEnded(o,s)){var l={};return this.altAudio&&(l.type="video"),this.hls.trigger(ve.BUFFER_EOS,l),void(this.state=Qn)}e.loadLevel!==r&&-1===e.manualLevel&&this.log("Adapting to level "+r+" from level "+this.level),this.level=e.nextLoadLevel=r;var d=a.details;if(!d||this.state===Xn||d.live&&this.levelLastLoaded!==a)return this.level=r,void(this.state=Xn);var u=o.len,c=this.getMaxBufferLength(a.maxBitrate);if(!(c<=u)){this.backtrackFragment&&this.backtrackFragment.start>o.end&&(this.backtrackFragment=null);var h=this.backtrackFragment?this.backtrackFragment.start:o.end,f=this.getNextFragment(h,d);if(this.couldBacktrack&&!this.fragPrevious&&f&&"initSegment"!==f.sn&&this.fragmentTracker.getState(f)!==cn){var p,g=(null!=(p=this.backtrackFragment)?p:f).sn-d.startSN,v=d.fragments[g-1];v&&f.cc===v.cc&&(f=v,this.fragmentTracker.removeFragment(v))}else this.backtrackFragment&&o.len&&(this.backtrackFragment=null);if(f&&this.isLoopLoading(f,h)){if(!f.gap){var m=this.audioOnly&&!this.altAudio?F:R,y=(m==R?this.videoBuffer:this.mediaBuffer)||this.media;y&&this.afterBufferFlushed(y,m,ht)}f=this.getNextFragmentLoopLoading(f,d,o,ht,c)}f&&(!f.initSegment||f.initSegment.data||this.bitrateTest||(f=f.initSegment),this.loadFragment(f,a,h))}}}}},t.loadFragment=function(e,t,i){var n=this.fragmentTracker.getState(e);this.fragCurrent=e,n===ln||n===un?"initSegment"===e.sn?this._loadInitSegment(e,t):this.bitrateTest?(this.log("Fragment "+e.sn+" of level "+e.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(e,t)):(this.startFragRequested=!0,r.prototype.loadFragment.call(this,e,t,i)):this.clearTrackerIfNeeded(e)},t.getBufferedFrag=function(e){return this.fragmentTracker.getBufferedFrag(e,ht)},t.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.end+.5):null},t.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},t.nextLevelSwitch=function(){var e=this.levels,t=this.media;if(null!=t&&t.readyState){var i,n=this.getAppendedFrag(t.currentTime);n&&1<n.start&&this.flushMainBuffer(0,n.start-1);var r=this.getLevelDetails();if(null!=r&&r.live){var a=this.getMainFwdBufferInfo();if(!a||a.len<2*r.targetduration)return}if(!t.paused&&e){var o=e[this.hls.nextLoadLevel],s=this.fragLastKbps;i=s&&this.fragCurrent?this.fragCurrent.duration*o.maxBitrate/(1e3*s)+1:0}else i=0;var l=this.getBufferedFrag(t.currentTime+i);if(l){var d=this.followingBufferedFrag(l);if(d){this.abortCurrentFrag();var u=d.maxStartPTS?d.maxStartPTS:d.start,c=d.duration,h=Math.max(l.end,u+Math.min(Math.max(c-this.config.maxFragLookUpTolerance,c*(this.couldBacktrack?.5:.125)),c*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(h,Number.POSITIVE_INFINITY)}}}},t.abortCurrentFrag=function(){var e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case Gn:case zn:case Wn:case qn:case Yn:this.state=Hn}this.nextLoadPosition=this.getLoadPosition()},t.flushMainBuffer=function(e,t){r.prototype.flushMainBuffer.call(this,e,t,this.altAudio?"video":null)},t.onMediaAttached=function(e,t){r.prototype.onMediaAttached.call(this,e,t);var i=t.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),i.addEventListener("playing",this.onvplaying),i.addEventListener("seeked",this.onvseeked),this.gapController=new ja(this.config,i,this.fragmentTracker,this.hls)},t.onMediaDetaching=function(){var e=this.media;e&&this.onvplaying&&this.onvseeked&&(e.removeEventListener("playing",this.onvplaying),e.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),r.prototype.onMediaDetaching.call(this)},t.onMediaPlaying=function(){this.tick()},t.onMediaSeeked=function(){var e=this.media,t=e?e.currentTime:null;J(t)&&this.log("Media seeked to "+t.toFixed(3));var i=this.getMainFwdBufferInfo();null!==i&&0!==i.len?this.tick():this.warn('Main forward buffer length on "seeked" event '+(i?i.len:"empty")+")")},t.onManifestLoading=function(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(ve.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=this.fragLastKbps=0,this.levels=this.fragPlaying=this.backtrackFragment=this.levelLastLoaded=null,this.altAudio=this.audioOnly=this.startFragRequested=!1},t.onManifestParsed=function(e,t){var i,n,r=!1,a=!1;t.levels.forEach(function(e){var t=e.audioCodec;t&&(r=r||-1!==t.indexOf("mp4a.40.2"),a=a||-1!==t.indexOf("mp4a.40.5"))}),this.audioCodecSwitch=r&&a&&!("function"==typeof(null==(n=ir())||null==(i=n.prototype)?void 0:i.changeType)),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1},t.onLevelLoading=function(e,t){var i=this.levels;if(i&&this.state===Hn){var n=i[t.level];(!n.details||n.details.live&&this.levelLastLoaded!==n||this.waitForCdnTuneIn(n.details))&&(this.state=Xn)}},t.onLevelLoaded=function(e,t){var i,n=this.levels,r=t.level,a=t.details,o=a.totalduration;if(n){this.log("Level "+r+" loaded ["+a.startSN+","+a.endSN+"]"+(a.lastPartSn?"[part-"+a.lastPartSn+"-"+a.lastPartIndex+"]":"")+", cc ["+a.startCC+", "+a.endCC+"] duration:"+o);var s=n[r],l=this.fragCurrent;!l||this.state!==zn&&this.state!==Wn||l.level!==t.level&&l.loader&&this.abortCurrentFrag();var d=0;if(a.live||null!=(i=s.details)&&i.live){var u;if(this.checkLiveUpdate(a),a.deltaUpdateFailed)return;d=this.alignPlaylists(a,s.details,null==(u=this.levelLastLoaded)?void 0:u.details)}if(s.details=a,this.levelLastLoaded=s,this.hls.trigger(ve.LEVEL_UPDATED,{details:a,level:r}),this.state===Xn){if(this.waitForCdnTuneIn(a))return;this.state=Hn}this.startFragRequested?a.live&&this.synchronizeToLiveEdge(a):this.setStartPosition(a,d),this.tick()}else this.warn("Levels were reset while loading level "+r)},t._handleFragmentLoadProgress=function(e){var t,i=e.frag,n=e.part,r=e.payload,a=this.levels;if(a){var o=a[i.level],s=o.details;if(!s)return this.warn("Dropping fragment "+i.sn+" of level "+i.level+" after level details were reset"),void this.fragmentTracker.removeFragment(i);var l=o.videoCodec,d=s.PTSKnown||!s.live,u=null==(t=i.initSegment)?void 0:t.data,c=this._getAudioCodec(o),h=this.transmuxer=this.transmuxer||new Ua(this.hls,ht,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),f=n?n.index:-1,p=-1!==f,g=new Sn(i.level,i.sn,i.stats.chunkCount,r.byteLength,f,p),v=this.initPTS[i.cc];h.push(r,u,c,l,i,n,s.totalduration,d,g,v)}else this.warn("Levels were reset while fragment load was in progress. Fragment "+i.sn+" of level "+i.level+" will not be buffered")},t.onAudioTrackSwitching=function(e,t){var i=this.altAudio;if(!t.url){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var n=this.fragCurrent;n&&(this.log("Switching to main audio track, cancel main fragment load"),n.abortRequests(),this.fragmentTracker.removeFragment(n)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();var r=this.hls;i&&(r.trigger(ve.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null}),this.fragmentTracker.removeAllFragments()),r.trigger(ve.AUDIO_TRACK_SWITCHED,t)}},t.onAudioTrackSwitched=function(e,t){var i=t.id,n=!!this.hls.audioTracks[i].url;if(n){var r=this.videoBuffer;r&&this.mediaBuffer!==r&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=r)}this.altAudio=n,this.tick()},t.onBufferCreated=function(e,t){var i,n,r=t.tracks,a=!1;for(var o in r){var s=r[o];if("main"===s.id){if(i=s,"video"===(n=o)){var l=r[o];l&&(this.videoBuffer=l.buffer)}}else a=!0}a&&i?(this.log("Alternate track found, use "+n+".buffered to schedule main fragment loading"),this.mediaBuffer=i.buffer):this.mediaBuffer=this.media},t.onFragBuffered=function(e,t){var i=t.frag,n=t.part;if(!i||i.type===ht){if(this.fragContextChanged(i))return this.warn("Fragment "+i.sn+(n?" p: "+n.index:"")+" of level "+i.level+" finished buffering, but was aborted. state: "+this.state),void(this.state===Yn&&(this.state=Hn));var r=n?n.stats:i.stats;this.fragLastKbps=Math.round(8*r.total/(r.buffering.end-r.loading.first)),"initSegment"!==i.sn&&(this.fragPrevious=i),this.fragBufferedComplete(i,n)}},t.onError=function(e,t){var i;if(t.fatal)this.state=Kn;else switch(t.details){case ye.FRAG_GAP:case ye.FRAG_PARSING_ERROR:case ye.FRAG_DECRYPT_ERROR:case ye.FRAG_LOAD_ERROR:case ye.FRAG_LOAD_TIMEOUT:case ye.KEY_LOAD_ERROR:case ye.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(ht,t);break;case ye.LEVEL_LOAD_ERROR:case ye.LEVEL_LOAD_TIMEOUT:case ye.LEVEL_PARSING_ERROR:t.levelRetry||this.state!==Xn||(null==(i=t.context)?void 0:i.type)!==dt||(this.state=Hn);break;case ye.BUFFER_APPEND_ERROR:case ye.BUFFER_FULL_ERROR:if(!t.parent||"main"!==t.parent)return;if(t.details===ye.BUFFER_APPEND_ERROR)return void this.resetLoadingState();this.reduceLengthAndFlushBuffer(t)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case ye.INTERNAL_EXCEPTION:this.recoverWorkerError(t)}},t.checkBuffer=function(){var e=this.media,t=this.gapController;if(e&&t&&e.readyState){if(this.loadedmetadata||!wi.getBuffered(e).length){var i=this.state!==Hn?this.fragCurrent:null;t.poll(this.lastCurrentTime,i)}this.lastCurrentTime=e.currentTime}},t.onFragLoadEmergencyAborted=function(){this.state=Hn,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()},t.onBufferFlushed=function(e,t){var i=t.type;if(i!==F||this.audioOnly&&!this.altAudio){var n=(i===R?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(n,i,ht),this.tick()}},t.onLevelsUpdated=function(e,t){-1<this.level&&this.fragCurrent&&(this.level=this.fragCurrent.level),this.levels=t.levels},t.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},t.seekToStartPos=function(){var e=this.media;if(e){var t=e.currentTime,i=this.startPosition;if(0<=i&&t<i){if(e.seeking)return void this.log("could not seek to "+i+", already seeking at "+t);var n=wi.getBuffered(e),r=(n.length?n.start(0):0)-i;0<r&&(r<this.config.maxBufferHole||r<this.config.maxFragLookUpTolerance)&&(this.log("adjusting start position by "+r+" to match buffer start"),i+=r,this.startPosition=i),this.log("seek to target start position "+i+" from current time "+t),e.currentTime=i}}},t._getAudioCodec=function(e){var t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),t},t._loadBitrateTestFrag=function(n,r){var a=this;n.bitrateTest=!0,this._doFragLoad(n,r).then(function(e){var t=a.hls;if(e&&!a.fragContextChanged(n)){r.fragmentError=0,a.state=Hn,a.startFragRequested=!1,a.bitrateTest=!1;var i=n.stats;i.parsing.start=i.parsing.end=i.buffering.start=i.buffering.end=self.performance.now(),t.trigger(ve.FRAG_LOADED,e),n.bitrateTest=!1}})},t._handleTransmuxComplete=function(e){var t,i="main",n=this.hls,r=e.remuxResult,a=e.chunkMeta,o=this.getCurrentContext(a);if(o){var s=o.frag,l=o.part,d=o.level,u=r.video,c=r.text,h=r.id3,f=r.initSegment,p=d.details,g=this.altAudio?void 0:r.audio;if(this.fragContextChanged(s))this.fragmentTracker.removeFragment(s);else{if(this.state=qn,f){if(null!=f&&f.tracks){var v=s.initSegment||s;this._bufferInitSegment(d,f.tracks,v,a),n.trigger(ve.FRAG_PARSING_INIT_SEGMENT,{frag:v,id:i,tracks:f.tracks})}var m=f.initPTS,y=f.timescale;J(m)&&(this.initPTS[s.cc]={baseTime:m,timescale:y},n.trigger(ve.INIT_PTS_FOUND,{frag:s,id:i,initPTS:m,timescale:y}))}if(u&&p&&"initSegment"!==s.sn){var b=p.fragments[s.sn-1-p.startSN],w=s.sn===p.startSN,E=!b||s.cc>b.cc;if(!1!==r.independent){var S=u.startPTS,A=u.endPTS,T=u.startDTS,L=u.endDTS;if(l)l.elementaryStreams[u.type]={startPTS:S,endPTS:A,startDTS:T,endDTS:L};else if(u.firstKeyFrame&&u.independent&&1===a.id&&!E&&(this.couldBacktrack=!0),u.dropped&&u.independent){var C=this.getMainFwdBufferInfo(),k=(C?C.end:this.getLoadPosition())+this.config.maxBufferHole,P=u.firstKeyFramePTS?u.firstKeyFramePTS:S;if(!w&&k<P-this.config.maxBufferHole&&!E)return void this.backtrack(s);E&&(s.gap=!0),s.setElementaryStreamInfo(u.type,s.start,A,s.start,L,!0)}else w&&2<S&&(s.gap=!0);s.setElementaryStreamInfo(u.type,S,A,T,L),this.backtrackFragment&&(this.backtrackFragment=s),this.bufferFragmentData(u,s,l,a,w||E)}else{if(!w&&!E)return void this.backtrack(s);s.gap=!0}}if(g){var x=g.startPTS,O=g.endPTS,I=g.startDTS,R=g.endDTS;l&&(l.elementaryStreams[F]={startPTS:x,endPTS:O,startDTS:I,endDTS:R}),s.setElementaryStreamInfo(F,x,O,I,R),this.bufferFragmentData(g,s,l,a)}if(p&&null!=h&&null!=(t=h.samples)&&t.length){var M={id:i,frag:s,details:p,samples:h.samples};n.trigger(ve.FRAG_PARSING_METADATA,M)}if(p&&c){var D={id:i,frag:s,details:p,samples:c.samples};n.trigger(ve.FRAG_PARSING_USERDATA,D)}}}else this.resetWhenMissingContext(a)},t._bufferInitSegment=function(e,i,n,r){var a=this;if(this.state===qn){this.audioOnly=!!i.audio&&!i.video,this.altAudio&&!this.audioOnly&&delete i.audio;var t=i.audio,o=i.video,s=i.audiovideo;if(t){var l=e.audioCodec,d=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){l=l&&(-1!==l.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5");var u=t.metadata;u&&"channelCount"in u&&1!==(u.channelCount||1)&&-1===d.indexOf("firefox")&&(l="mp4a.40.5")}l&&-1!==l.indexOf("mp4a.40.5")&&-1!==d.indexOf("android")&&"audio/mpeg"!==t.container&&(l="mp4a.40.2",this.log("Android: force audio codec to "+l)),e.audioCodec&&e.audioCodec!==l&&this.log('Swapping manifest audio codec "'+e.audioCodec+'" for "'+l+'"'),t.levelCodec=l,t.id="main",this.log("Init audio buffer, container:"+t.container+", codecs[selected/level/parsed]=["+(l||"")+"/"+(e.audioCodec||"")+"/"+t.codec+"]")}o&&(o.levelCodec=e.videoCodec,o.id="main",this.log("Init video buffer, container:"+o.container+", codecs[level/parsed]=["+(e.videoCodec||"")+"/"+o.codec+"]")),s&&this.log("Init audiovideo buffer, container:"+s.container+", codecs[level/parsed]=["+e.codecs+"/"+s.codec+"]"),this.hls.trigger(ve.BUFFER_CODECS,i),Object.keys(i).forEach(function(e){var t=i[e].initSegment;null!=t&&t.byteLength&&a.hls.trigger(ve.BUFFER_APPENDING,{type:e,data:t,frag:n,part:null,chunkMeta:r,parent:n.type})}),this.tickImmediate()}},t.getMainFwdBufferInfo=function(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,ht)},t.backtrack=function(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=Hn},t.checkFragmentChanged=function(){var e=this.media,t=null;if(e&&1<e.readyState&&!1===e.seeking){var i=e.currentTime;if(wi.isBuffered(e,i)?t=this.getAppendedFrag(i):wi.isBuffered(e,i+.1)&&(t=this.getAppendedFrag(i+.1)),t){this.backtrackFragment=null;var n=this.fragPlaying,r=t.level;n&&t.sn===n.sn&&n.level===r||(this.fragPlaying=t,this.hls.trigger(ve.FRAG_CHANGED,{frag:t}),n&&n.level===r||this.hls.trigger(ve.LEVEL_SWITCHED,{level:r}))}}},i(e,[{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"currentFrag",get:function(){var e=this.media;return e?this.fragPlaying||this.getAppendedFrag(e.currentTime):null}},{key:"currentProgramDateTime",get:function(){var e=this.media;if(e){var t=e.currentTime,i=this.currentFrag;if(i&&J(t)&&J(i.programDateTime)){var n=i.programDateTime+1e3*(t-i.start);return new Date(n)}}return null}},{key:"currentLevel",get:function(){var e=this.currentFrag;return e?e.level:-1}},{key:"nextBufferedFrag",get:function(){var e=this.currentFrag;return e?this.followingBufferedFrag(e):null}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}]),e}(Zn),Ga=function(){function L(e){void 0===e&&(e={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this.started=!1,this._emitter=new Da,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null,this.triggeringException=void 0,k(e.debug||!1,"Hls instance");var t=this.config=function(e,l){if((l.liveSyncDurationCount||l.liveMaxLatencyDurationCount)&&(l.liveSyncDuration||l.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==l.liveMaxLatencyDurationCount&&(void 0===l.liveSyncDurationCount||l.liveMaxLatencyDurationCount<=l.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==l.liveMaxLatencyDuration&&(void 0===l.liveSyncDuration||l.liveMaxLatencyDuration<=l.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');var d=rn(e),t=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return["manifest","level","frag"].forEach(function(r){var a=("level"===r?"playlist":r)+"LoadPolicy",o=void 0===l[a],s=[];t.forEach(function(e){var t=r+"Loading"+e,i=l[t];if(void 0!==i&&o){s.push(t);var n=d[a].default;switch(l[a]={default:n},e){case"TimeOut":n.maxLoadTimeMs=i,n.maxTimeToFirstByteMs=i;break;case"MaxRetry":n.errorRetry.maxNumRetry=i,n.timeoutRetry.maxNumRetry=i;break;case"RetryDelay":n.errorRetry.retryDelayMs=i,n.timeoutRetry.retryDelayMs=i;break;case"MaxRetryTimeout":n.errorRetry.maxRetryDelayMs=i,n.timeoutRetry.maxRetryDelayMs=i}}}),s.length&&be.warn('hls.js config: "'+s.join('", "')+'" setting(s) are deprecated, use "'+a+'": '+JSON.stringify(l[a]))}),C(C({},d),l)}(L.DefaultConfig,e);this.userConfig=e,t.progressive&&function(e){var t=e.loader;t!==Yi&&t!==zi?(be.log("[config]: Custom loader detected, cannot enable progressive streaming"),e.progressive=!1):function(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch(e){}return!1}()&&(e.loader=Yi,e.progressive=!0,e.enableSoftwareAES=!0,be.log("[config]: Progressive streaming enabled, using FetchLoader"))}(t);var i=t.abrController,n=t.bufferController,r=t.capLevelController,a=t.errorController,o=t.fpsController,s=new a(this),l=this.abrController=new i(this),d=this.bufferController=new n(this),u=this.capLevelController=new r(this),c=new o(this),h=new yt(this),f=new xt(this),p=t.contentSteeringController,g=p?new p(this):null,v=this.levelController=new an(this,g),m=new hn(this),y=new kn(this.config),b=this.streamController=new Ha(this,m,y);u.setStreamController(b),c.setStreamController(b);var w=[h,v,b];g&&w.splice(1,0,g),this.networkControllers=w;var E=[l,d,u,c,f,m];this.audioTrackController=this.createController(t.audioTrackController,w);var S=t.audioStreamController;S&&w.push(new S(this,m,y)),this.subtitleTrackController=this.createController(t.subtitleTrackController,w);var A=t.subtitleStreamController;A&&w.push(new A(this,m,y)),this.createController(t.timelineController,E),y.emeController=this.emeController=this.createController(t.emeController,E),this.cmcdController=this.createController(t.cmcdController,E),this.latencyController=this.createController(Ot,E),this.coreComponents=E,w.push(s);var T=s.onErrorOut;"function"==typeof T&&this.on(ve.ERROR,T,s)}L.isMSESupported=function(){return nr()},L.isSupported=function(){return function(){if(!nr())return!1;var t=_e();return"function"==typeof(null==t?void 0:t.isTypeSupported)&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(function(e){return t.isTypeSupported(je(e,"video"))})||["mp4a.40.2","fLaC"].some(function(e){return t.isTypeSupported(je(e,"audio"))}))}()},L.getMediaSource=function(){return _e()};var e=L.prototype;return e.createController=function(e,t){if(e){var i=new e(this);return t&&t.push(i),i}return null},e.on=function(e,t,i){void 0===i&&(i=this),this._emitter.on(e,t,i)},e.once=function(e,t,i){void 0===i&&(i=this),this._emitter.once(e,t,i)},e.removeAllListeners=function(e){this._emitter.removeAllListeners(e)},e.off=function(e,t,i,n){void 0===i&&(i=this),this._emitter.off(e,t,i,n)},e.listeners=function(e){return this._emitter.listeners(e)},e.emit=function(e,t,i){return this._emitter.emit(e,t,i)},e.trigger=function(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(t){if(be.error("An internal error happened while handling event "+e+'. Error message: "'+t.message+'". Here is a stacktrace:',t),!this.triggeringException){this.triggeringException=!0;var i=e===ve.ERROR;this.trigger(ve.ERROR,{type:me.OTHER_ERROR,details:ye.INTERNAL_EXCEPTION,fatal:i,event:e,error:t}),this.triggeringException=!1}}return!1},e.listenerCount=function(e){return this._emitter.listenerCount(e)},e.destroy=function(){be.log("destroy"),this.trigger(ve.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(function(e){return e.destroy()}),this.networkControllers.length=0,this.coreComponents.forEach(function(e){return e.destroy()}),this.coreComponents.length=0;var e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null},e.attachMedia=function(e){be.log("attachMedia"),this._media=e,this.trigger(ve.MEDIA_ATTACHING,{media:e})},e.detachMedia=function(){be.log("detachMedia"),this.trigger(ve.MEDIA_DETACHING,void 0),this._media=null},e.loadSource=function(e){this.stopLoad();var t=this.media,i=this.url,n=this.url=y.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,be.log("loadSource:"+n),t&&i&&(i!==n||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger(ve.MANIFEST_LOADING,{url:e})},e.startLoad=function(t){void 0===t&&(t=-1),be.log("startLoad("+t+")"),this.started=!0,this.networkControllers.forEach(function(e){e.startLoad(t)})},e.stopLoad=function(){be.log("stopLoad"),this.started=!1,this.networkControllers.forEach(function(e){e.stopLoad()})},e.resumeBuffering=function(){this.started&&this.networkControllers.forEach(function(e){"fragmentLoader"in e&&e.startLoad(-1)})},e.pauseBuffering=function(){this.networkControllers.forEach(function(e){"fragmentLoader"in e&&e.stopLoad()})},e.swapAudioCodec=function(){be.log("swapAudioCodec"),this.streamController.swapAudioCodec()},e.recoverMediaError=function(){be.log("recoverMediaError");var e=this._media;this.detachMedia(),e&&this.attachMedia(e)},e.removeLevel=function(e){this.levelController.removeLevel(e)},e.setAudioOption=function(e){var t;return null==(t=this.audioTrackController)?void 0:t.setAudioOption(e)},e.setSubtitleOption=function(e){var t;return null==(t=this.subtitleTrackController)||t.setSubtitleOption(e),null},i(L,[{key:"levels",get:function(){return this.levelController.levels||[]}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){be.log("set currentLevel:"+e),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){be.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){be.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){be.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){var e=this.levelController.startLevel;return-1===e&&-1<this.abrController.forcedAutoLevel?this.abrController.forcedAutoLevel:e},set:function(e){be.log("set startLevel:"+e),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}},{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:function(e){var t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){this._autoLevelCapping!==e&&(be.log("set autoLevelCapping:"+e),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}},{key:"bandwidthEstimate",get:function(){var e=this.abrController.bwEstimator;return e?e.getEstimate():NaN},set:function(e){this.abrController.resetEstimator(e)}},{key:"ttfbEstimate",get:function(){var e=this.abrController.bwEstimator;return e?e.getEstimateTTFB():NaN}},{key:"maxHdcpLevel",get:function(){return this._maxHdcpLevel},set:function(e){var t;t=e,-1<It.indexOf(t)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var e=this.levels,t=this.config.minAutoBitrate;if(!e)return 0;for(var i=e.length,n=0;n<i;n++)if(e[n].maxBitrate>=t)return n;return 0}},{key:"maxAutoLevel",get:function(){var e,t=this.levels,i=this.autoLevelCapping,n=this.maxHdcpLevel;if(e=-1===i&&null!=t&&t.length?t.length-1:i,n)for(var r=e;r--;){var a=t[r].attrs["HDCP-LEVEL"];if(a&&a<=n)return r}return e}},{key:"firstAutoLevel",get:function(){return this.abrController.firstAutoLevel}},{key:"nextAutoLevel",get:function(){return this.abrController.nextAutoLevel},set:function(e){this.abrController.nextAutoLevel=e}},{key:"playingDate",get:function(){return this.streamController.currentProgramDateTime}},{key:"mainForwardBufferInfo",get:function(){return this.streamController.getMainFwdBufferInfo()}},{key:"allAudioTracks",get:function(){var e=this.audioTrackController;return e?e.allAudioTracks:[]}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"allSubtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}},{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:function(e){this.config.lowLatencyMode=e}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}}],[{key:"version",get:function(){return"1.5.13"}},{key:"Events",get:function(){return ve}},{key:"ErrorTypes",get:function(){return me}},{key:"ErrorDetails",get:function(){return ye}},{key:"DefaultConfig",get:function(){return L.defaultConfig?L.defaultConfig:tn},set:function(e){L.defaultConfig=e}}]),L}();function za(e,t,i,n){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=e,this.media=t,this.fragmentTracker=i,this.hls=n}function Wa(e,i,t,n){var r=this;this.error=null,this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;var a=e.config;this.hls=e,this.id=i,this.useWorker=!!a.enableWorker,this.onTransmuxComplete=t,this.onFlush=n;function o(e,t){(t=t||{}).frag=r.frag,t.id=r.id,e===ve.ERROR&&(r.error=t.error),r.hls.trigger(e,t)}this.observer=new Da,this.observer.on(ve.FRAG_DECRYPTED,o),this.observer.on(ve.ERROR,o);var s,l,d,u,c=_e(a.preferManagedMediaSource)||{isTypeSupported:function(){return!1}},h={mpeg:c.isTypeSupported("audio/mpeg"),mp3:c.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:!1};if(!this.useWorker||"undefined"==typeof Worker||(a.workerPath,0))this.transmuxer=new ba(this.observer,h,a,"",i);else try{a.workerPath?(be.log("loading Web Worker "+a.workerPath+' for "'+i+'"'),this.workerContext=(d=a.workerPath,u=new self.URL(d,self.location.href).href,{worker:new self.Worker(u),scriptURL:u})):(be.log('injecting Web Worker for "'+i+'"'),this.workerContext=(s=new self.Blob(["var exports={};var module={exports:exports};function define(f){f()};define.amd=true;("+qa.toString()+")(true);"],{type:"text/javascript"}),l=self.URL.createObjectURL(s),{worker:new self.Worker(l),objectURL:l})),this.onwmsg=function(e){return r.onWorkerMessage(e)};var f=this.workerContext.worker;f.addEventListener("message",this.onwmsg),f.onerror=function(e){var t=new Error(e.message+"  ("+e.filename+":"+e.lineno+")");a.enableWorker=!1,be.warn('Error in "'+i+'" Web Worker, fallback to inline'),r.hls.trigger(ve.ERROR,{type:me.OTHER_ERROR,details:ye.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:t})},f.postMessage({cmd:"init",typeSupported:h,vendor:"",id:i,config:JSON.stringify(a)})}catch(e){be.warn('Error setting up "'+i+'" Web Worker, fallback to inline',e),this.resetWorker(),this.error=null,this.transmuxer=new ba(this.observer,h,a,"",i)}}return Ga.defaultConfig=void 0,Ga},t.exports=e()}(!1)},function(e,t,i){"use strict";i.d(t,"a",function(){return n}),i.d(t,"b",function(){return r});var n=1e3;function r(e){e=parseInt(e,10);var t=Math.floor(e/3600)%24,i=Math.floor(e/60)%60,n=Math.floor(e%60)%60;return(t<1?"":(t<10?"0":"")+t+":")+(i<10?"0":"")+i+":"+(n<10?"0":"")+n}},function(e,t,i){"use strict";i.d(t,"e",function(){return a}),i.d(t,"b",function(){return o}),i.d(t,"f",function(){return s}),i.d(t,"c",function(){return l}),i.d(t,"d",function(){return d}),i.d(t,"a",function(){return u});var k=i(1),P=i(3),x=i(14),n=i(0),O=i(5);i(4);function I(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return r(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var a="floaterOpened",o="floaterClosed",s="WidgetModeChanged",l="floaterClosedByUserRequest",d="floaterFQDecreased";function u(e,t){var i=t.enableFq,n=void 0!==i&&i,r=t.fq,a=void 0===r?0:r,o=t.showOnlyOnAds,s=void 0!==o&&o,l=t.showAfterPlayerView,d=void 0!==l&&l,u=t.openFloaterOnNextAd,c=void 0!==u&&u,h=t.width,f=void 0===h?320:h,p=t.height,g=void 0===p?180:p,v=t.padding,m=void 0===v?0:v,y=t.position,b=void 0===y?"bottom-left":y,w=t.counterToCloseFloater,E=void 0===w?0:w,S=t.closeButtonPosition,A=void 0===S?"left":S,T=t.adOnlyFollowsContent,L=void 0===T||T,C=t.useVerticalSwiper;this.player=e,this.fq=a,this.enableFq=n,this.showOnlyOnAds=s,this.openFloaterOnNextAd=c,this.playerElement=e.getPlayerElement(),this.showAfterPlayerView=!!d&&!this.isAvailableByUserPosition(),this.width=f,this.height=g,this.padding=m,this.position=b,this.isFloaterActive=!1,this.closeButtonElement=null,this.closeContainerElement=null,this.closeButtonPosition=A,this.counterToCloseFloater=E,this.floaterClosedByUser=!1,this.forcePlayingAdsOnFloaterOnly=!1,this.maxWidthToOpen=this.width,this.adOnlyFollowsContent=L,this.useVerticalSwiper=C(),e.subscribe(k.c,this.viewabilityCallback.bind(this)),e.subscribe(k.d,this.viewabilityCallbackVertical.bind(this)),e.subscribe(k.k,this.onPlayerResize.bind(this)),e.subscribe(k.r,this.onPlayerResize.bind(this)),e.subscribe(k.m,this.Hide.bind(this)),(s||c)&&(e.subscribe(P.c,this.onAdStarted.bind(this)),s&&(e.subscribe(P.a,this.onAdEnd.bind(this)),e.subscribe(x.a,this.onAdEnd.bind(this)))),this.playerContainer=this.playerElement.parentElement}u.prototype.IsFloaterOpen=function(){return this.isFloaterActive},u.prototype.onAdStarted=function(){this.adOnlyFollowsContent&&(this.showOnlyOnAds=!0),this.showOnlyOnAds||this.openFloaterOnNextAd?(this.floaterClosedByUser=!1,this.player.isPlayerInView()?this.forcePlayingAdsOnFloaterOnly&&this.Show(!0):this.Show(!0)):this.isFloaterActive&&this.resetCounter()},u.prototype.onAdEnd=function(e){if(this.isFloaterActive){var t;if(void 0!==e.detail&&void 0!==e.detail.numberOfTimesAdSkipped&&0<e.detail.numberOfTimesAdSkipped&&this.enableFq&&this.fq){this.fq=this.fq-e.detail.numberOfTimesAdSkipped;for(var i=0;i<e.detail.numberOfTimesAdSkipped;i++)this.player.dispatchEvent(d)}var n=null===(t=e.detail)||void 0===t?void 0:t.isGptOutstreamAdEnded;this.showOnlyOnAds&&this.adOnlyFollowsContent&&!n&&(this.showOnlyOnAds=!1),this.showOnlyOnAds&&(this.floaterClosedByUser=!1,this.Hide())}},u.prototype.viewabilityCallbackVertical=function(){var e=this;!this.player.getShowFloaterOnClosedModal()&&this.player.isContainerInView()?(this.isFloaterActive=!0,setTimeout(function(){e.Hide()},300)):(this.player.setShowFloaterOnClosedModal(!1),this.Show())},u.prototype.viewabilityCallback=function(e){(e=e.detail[0]).isIntersecting&&this.showAfterPlayerView?this.showAfterPlayerView=!1:e.isIntersecting?this.isFloaterActive&&(this.forcePlayingAdsOnFloaterOnly||this.Hide()):this.showOnlyOnAds&&!this.player.isAdPlaying()||e.isIntersecting||this.Show(!0)},u.prototype.getRealOffsetTop=function(e){for(var t=0;e;)t+=e.offsetTop,e=e.offsetParent;return t},u.prototype.isAvailableByUserPosition=function(){return this.getRealOffsetTop(this.player.getParentElement())<document.documentElement.scrollTop},u.prototype.isAvailableToShow=function(){return(!this.useVerticalSwiper||!top.document.querySelector(".trv-fs-modal"))&&(!this.isFloaterActive&&this.IsAvailableForAdOnly()&&(!this.showOnlyOnAds&&!this.floaterClosedByUser||this.showOnlyOnAds&&this.player.isAdPlaying()&&!this.floaterClosedByUser))},u.prototype.IsAvailableForAdOnly=function(){return(!this.enableFq||this.enableFq&&0<this.fq)&&!this.showAfterPlayerView},u.prototype.Show=function(e,t){(t||this.isAvailableToShow()&&!this.isFloaterActive)&&(this.isFloaterActive=!0,this.toggle(!0,e),this.player.isAdPlaying()||this.player.dispatchEvent(k.k),this.player.dispatchEvent(a))},u.prototype.Hide=function(e){this.isFloaterActive&&(this.toggle(!1,e),this.isFloaterActive=!1,this.player.dispatchEvent(k.k),this.player.dispatchEvent(o))},u.prototype.toggle=function(e,t,i){if(e){if(!i){var n=document.createElement("div"),r=document.createElement("div"),a=document.createElement("div");r.className="trv-close",n.id=this.playerElement.id+"_close",n.className="trv-close-container",n.style.cssText="width: "+this.width+"px;",this.closeContainerElement=n,this.closeButtonElement=r,this.closeButtonElement.appendChild(a),this.closeContainerElement.appendChild(this.closeButtonElement),this.playerElement.appendChild(this.closeContainerElement)}if(e&&this.width>document.documentElement.clientWidth&&document.documentElement.clientWidth<=this.maxWidthToOpen){var o=(this.height/this.width).toFixed(2);this.height=document.documentElement.clientWidth*o,this.width=document.documentElement.clientWidth}this.resetCounter(),this.applyStyle(e,t)}else this.applyStyle(e,t);this.player.dispatchEvent(s)},u.prototype.applyStyle=function(e,t){var i,n,r,a,o,s,l,d,u,c,h=this;if(this.player.isAdPlaying()){var f,p,g=null===(f=this.player.getAdsLib().currentBidSession)||void 0===f?void 0:null===(p=f.getCurrentTruvidAd())||void 0===p?void 0:p.getAdManager();null!=g&&g.setAdsContainerVisibility&&g.setAdsContainerVisibility(!1)}var v;if(e){switch(i="fixed",c=10,this.closeButtonElement.style.left="0px",this.position){case"top-right":a=15+this.padding+"px",o=n="auto",r=t?"-"+this.width+"px":"0px";break;case"top-left":a=15+this.padding+"px",n="auto",o=t?"-"+(this.width-30)+"px":"0px",r="auto";break;case"bottom-right":a="auto",n=this.padding+"px",o="auto",r=t?"-"+this.width+"px":"0px";break;case"bottom-left":a="auto",n=this.padding+"px",o=t?"-"+this.width+"px":"0px",r="auto";break;case"left-center":a=document.documentElement.clientHeight/2-this.height/2+"px",n="auto",o=t?"-"+this.width+"px":"0px",r="auto";break;case"right-center":a=document.documentElement.clientHeight/2-this.height/2+"px",o=n="auto",r=t?"-"+this.width+"px":"0px";break;case"middle-top":a=t?"-"+this.height+"px":this.padding+"px",n="auto",o=document.documentElement.clientWidth/2-this.width/2+"px",r="auto";break;case"middle-bottom":a="auto",n=t?"-"+this.height+"px":this.padding+"px",o=document.documentElement.clientWidth/2-this.width/2+"px",r="auto";break;default:a="auto",n=this.padding+"px",o="auto",r="0px"}this.closeButtonElement.style.position="absolute",this.closeContainerElement.style.position="absolute";var m=this.position.includes("top"),y="right"===this.closeButtonPosition;"top-left"===this.position?y=!0:"top-right"===this.position&&(y=!1),Object(O.d)(this.closeContainerElement,y?"right":"left",m?"-28px":"5px"),Object(O.d)(this.closeContainerElement,y?"left":"right","auto"),Object(O.d)(this.closeContainerElement,"top",m?"0":"".concat(-16-(v=h.closeButtonElement.clientHeight,Math.ceil(v/2)),"px")),s=this.width+"px",l=this.height+"px",d=u="0px"}else{var b;i="relative",o=a=r=n="auto",c=1,this.playerElement.style.transition="",this.playerElement.style.transition=null,this.player.isResponsive()?(l=s="100%",u="0px",i="absolute"):(s=this.player.getWidth()+"px",u="0px",l=this.player.getHeight()+"px",d="0px"),null!==(b=this.closeContainerElement)&&void 0!==b&&b.parentNode&&this.closeContainerElement.parentNode.removeChild(this.closeContainerElement)}var w=document.getElementById(this.playerElement.id+"_close");w&&(w.style.width="23px");var E=this.position.includes("left"),S=this.position.includes("right"),A=this.position.includes("middle-top"),T=this.position.includes("middle-bottom");Object(O.d)(this.playerElement,"top",e?A?"-".concat(l):a:"0px"),Object(O.d)(this.playerElement,"bottom",e?T?"-".concat(l):n:"0px"),Object(O.d)(this.playerElement,"left",e?E?"-".concat(s):o:"0px"),Object(O.d)(this.playerElement,"right",e?S?"-".concat(s):r:"0px"),this.playerElement.style.width=s,this.playerElement.style.paddingBottom=d,this.playerElement.style.paddingTop=u,Object(O.d)(this.playerElement,"height",l);var L,C,k=["trvdfloater",E?"trv-left":S?"trv-right":A?"trv-top":T?"trv-bottom":""].filter(Boolean);1<c?((L=this.playerElement.classList).add.apply(L,I(k)),this.playerElement.classList.remove("trvdinstream")):(this.playerElement.classList.add("trvdinstream"),(C=this.playerElement.classList).remove.apply(C,I(k)));this.playerContainer.style.display="block",this.playerContainer.style.width="100%",this.playerElement.style.position=i,this.useVerticalSwiper&&setTimeout(function(){h.resizeSwiper(e)},0),this.player.resizeAds()},u.prototype.resizeSwiper=function(e){var t=this.player.getPlayerElements().player.mediaPlayer,i=this.player.getSwiperVideos();null!=i&&i.length&&i.map(function(e){e.style.setProperty("width","".concat(t.offsetWidth,"px"),"important"),e.style.setProperty("height","".concat(t.offsetHeight,"px"),"important")}),this.player.recreateVerticalSwiper(t.offsetWidth,t.offsetHeight)},u.prototype.resetCounter=function(){var e=this.closeButtonElement;this.isCloseEnabled=!1,this.initializeCloseButton(e),this.counterToCloseFloater?(this.closeFloaterCurrentTime=this.counterToCloseFloater,this.closeFloaterDelayInterval||(this.closeFloaterDelayInterval=setInterval(function(){this.closeFloaterCurrentTime-=1,this.closeFloaterCurrentTime<=0&&(clearInterval(this.closeFloaterDelayInterval),this.closeFloaterDelayInterval=null,this.isCloseEnabled=!0)}.bind(this),1e3))):this.isCloseEnabled=!0},u.prototype.initializeCloseButton=function(e){e.style.display="block",e.textContent="",e.appendChild(this.getCloseButton()),e.onclick=function(){this.isCloseEnabled&&(this.player.handlePlayerInteraction(n.a.CloseFloater),this.counterToCloseFloater&&this.player.isAdPlaying()?this.closeFloaterCurrentTime<=0&&this.finalizeCloseFloater():this.finalizeCloseFloater())}.bind(this)},u.prototype.finalizeCloseFloater=function(){clearInterval(this.closeFloaterDelayInterval),this.closeFloaterDelayInterval=null,this.floaterClosedByUser=!0,this.enableFq&&this.fq&&(this.fq--,this.player.dispatchEvent(d)),this.player.dispatchEvent(l),this.Hide()},u.prototype.getCloseButton=function(){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttributeNS(null,"fill","black"),e.setAttributeNS(null,"viewBox","1 1 14 14");var t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d","M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z");var i=document.createElementNS("http://www.w3.org/2000/svg","path");return i.setAttribute("d","M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"),e.appendChild(t),e.appendChild(i),e},u.prototype.onPlayerResize=function(){var e=this.width,t=this.height;if(document.documentElement.clientWidth<=this.maxWidthToOpen){var i=(this.height/this.width).toFixed(2);this.height=document.documentElement.clientWidth*i,this.width=document.documentElement.clientWidth}if(this.isFloaterActive&&(e!==this.width||t!==this.height))switch(this.position){case"left-center":case"right-center":this.applyStyle(!0,!1);break;case"middle-bottom":case"middle-top":default:this.applyStyle(!0,!1)}},u.prototype.ForcePlayingAdsOnlyOnFloater=function(){this.forcePlayingAdsOnFloaterOnly=!0}},function(e,t,i){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(){}function s(e,t){return e?null:new Error(t)}function n(e,t,i,n){e.id=n;var r=function(e,t,i){var n=document.createElement("iframe");n.src=t||"about:blank",n.marginWidth="0",n.marginHeight="0",n.frameBorder="0",n.width="100%",n.height="100%",o(n),i&&(n.style.zIndex=i);return n.setAttribute("SCROLLING","NO"),e.innerHTML="",e.appendChild(n),n}(e,null,i.zIndex);if(function(e,t){var i=e.contentWindow&&e.contentWindow.document;return!!i&&(i.write(t),!0)}(r,function(i,n){return Object.keys(n).forEach(function(e){var t="object"===a(t)?JSON.stringify(n[e]):n[e];i=i.replace(new RegExp("{{"+e+"}}","g"),t)}),i}(t,i)))return r}function o(e){e&&(e.style.position="absolute",e.style.left="0",e.style.top="0",e.style.margin="0px",e.style.padding="0px",e.style.border="none",e.style.width="100%",e.style.height="100%")}function l(t,i){return Object.keys(i).forEach(function(e){t[e]=i[e]}),t}i.d(t,"c",function(){return W}),i.d(t,"a",function(){return q}),i.d(t,"b",function(){return Y});var d=["handshakeVersion","initAd","startAd","stopAd","skipAd","resizeAd","pauseAd","resumeAd","expandAd","collapseAd","subscribe","unsubscribe"];function u(e,t,i){}u.prototype.handshakeVersion=function(e,t){},u.prototype.initAd=function(e,t,i,n,r,a,o){},u.prototype.startAd=function(e){},u.prototype.stopAd=function(e){},u.prototype.skipAd=function(e){},u.prototype.resizeAd=function(e,t,i,n){},u.prototype.pauseAd=function(e){},u.prototype.resumeAd=function(e){},u.prototype.expandAd=function(e){},u.prototype.collapseAd=function(e){},u.prototype.subscribe=function(e,t,i){},u.prototype.unsubscribe=function(e,t){},u.prototype.getAdLinear=function(e){},u.prototype.getAdWidth=function(e){},u.prototype.getAdHeight=function(e){},u.prototype.getAdExpanded=function(e){},u.prototype.getAdSkippableState=function(e){},u.prototype.getAdRemainingTime=function(e){},u.prototype.getAdDuration=function(e){},u.prototype.getAdVolume=function(e){},u.prototype.getAdIcons=function(e){},u.prototype.setAdVolume=function(e,t){},h(u,"METHODS",d),h(u,"GETTERS",["getAdLinear","getAdWidth","getAdHeight","getAdExpanded","getAdSkippableState","getAdRemainingTime","getAdDuration","getAdVolume","getAdCompanions","getAdIcons"]),h(u,"SETTERS",["setAdVolume"]),h(u,"EVENTS",["AdLoaded","AdStarted","AdStopped","AdSkipped","AdSkippableStateChange","AdSizeChange","AdLinearChange","AdDurationChange","AdExpandedChange","AdRemainingTimeChange","AdVolumeChange","AdImpression","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdVideoComplete","AdClickThru","AdInteraction","AdUserAcceptInvitation","AdUserMinimize","AdUserClose","AdPaused","AdPlaying","AdLog","AdError"]);var c=d.filter(function(e){return-1===["skipAd"].indexOf(e)});function h(e,t,i){Object.defineProperty(e,t,{writable:!1,configurable:!1,value:i})}function f(){this._subscribers={}}h(u,"checkVPAIDInterface",function(t){return c.every(function(e){return"function"==typeof t[e]})}),f.prototype.subscribe=function(e,t,i){this.isHandlerAttached(e,t)||this.get(t).push({handler:e,context:i,eventName:t})},f.prototype.unsubscribe=function(t,e){this._subscribers[e]=this.get(e).filter(function(e){return t!==e.handler})},f.prototype.unsubscribeAll=function(){this._subscribers={}},f.prototype.trigger=function(e,t){var i=this;this.get(e).concat(this.get("*")).forEach(function(e){setTimeout(function(){i.isHandlerAttached(e.handler,e.eventName)&&e.handler.call(e.context,t)},0)})},f.prototype.triggerSync=function(e,t){this.get(e).concat(this.get("*")).forEach(function(e){e.handler.call(e.context,t)})},f.prototype.get=function(e){return this._subscribers[e]||(this._subscribers[e]=[]),this._subscribers[e]},f.prototype.isHandlerAttached=function(t,e){return this.get(e).some(function(e){return t===e.handler})};var p=u.checkVPAIDInterface,g="AdClickThru",v=u.EVENTS.filter(function(e){return e!=g});function m(e,t,i,n){this._isValid=p(e),this._isValid&&(this._creative=e,this._el=t,this._videoEl=i,this._iframe=n,this._subscribers=new f,o(t),function(){if(v.forEach(function(e){this._creative.subscribe(function(e){this._subscribers.trigger(e,Array.prototype.slice(arguments,1))}.bind(this,e),e)}.bind(this)),this._creative.subscribe(function(e,t,i){this._subscribers.triggerSync(g,{url:e,id:t,playerHandles:i})}.bind(this),g),this._videoEl){var t=this._iframe.contentDocument.documentElement,i=this._videoEl;t.addEventListener("click",function(e){e.target===t&&i.click()})}}.call(this))}function y(e,t,i,n){e?e(i,n):i&&t.trigger("AdError",i)}(m.prototype=Object.create(u.prototype)).isValidVPAIDAd=function(){return this._isValid},u.METHODS.forEach(function(r){-1===["subscribe","unsubscribe","initAd"].indexOf(r)&&(m.prototype[r]=function(){var e=u.prototype[r].length,i=Array.prototype.slice.call(arguments),n=e===i.length?i.pop():void 0;setTimeout(function(){var e,t=null;try{e=this._creative[r].apply(this._creative,i)}catch(e){t=e}y(n,this._subscribers,t,e)}.bind(this),0)})}),m.prototype.initAd=function(e,i,n,r,a,o,s){a=a||{},o=l({slot:this._el,videoSlot:this._videoEl},o||{}),setTimeout(function(){var t;try{a.AdParameters&&a.AdParameters.length&&0==a.AdParameters.indexOf("&lt;?xml")&&-1!=a.AdParameters.indexOf("&")&&(a.AdParameters=a.AdParameters.replace(/&amp;/g,"&"),a.AdParameters=a.AdParameters.replace(/&lt;/g,"<"),a.AdParameters=a.AdParameters.replace(/&gt;/g,">"),a.AdParameters=a.AdParameters.replace(/&quot;/g,'"')),this._creative.initAd(e,i,n,r,a,o)}catch(e){t=e}y(s,this._subscribers,t)}.bind(this),0)},m.prototype.subscribe=function(e,t,i){this._subscribers.subscribe(t,e,i)},m.prototype.unsubscribe=function(e,t){this._subscribers.unsubscribe(t,e)},m.prototype.on=m.prototype.subscribe,m.prototype.off=m.prototype.unsubscribe,u.GETTERS.forEach(function(n){m.prototype[n]=function(i){setTimeout(function(){var e,t=null;try{e=this._creative[n]()}catch(e){t=e}y(i,this._subscribers,t,e)}.bind(this),0)}}),m.prototype.setAdVolume=function(i,n){setTimeout(function(){var e,t=null;try{this._creative.setAdVolume(i),e=i}catch(e){t=e}t=t||s(e===i,"failed to apply volume: "+i),y(n,this._subscribers,t,e)}.bind(this),0)},m.prototype._destroy=function(){this.stopAd(),this._subscribers.unsubscribeAll()};var b,w,E=(b="vpaidIframe",w=-1,function(){return b+"_"+ ++w}),S='<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"></head><body style="margin:0;padding:0"><div class="ad-element"></div><script type="text/javascript" src="{{iframeURL_JS}}"><\/script><script type="text/javascript">window.parent.postMessage(\'{"event": "ready", "id": "{{iframeID}}"}\', \'{{origin}}\');<\/script></body></html>';function B(e,t,i,n){i=i||{},this._id=E(),this._destroyed=!1,this._frameContainer=function(e,t,i){var n=document.createElement(t);return i&&(n.id=i),e.appendChild(n),n}(e,"div"),this._videoEl=t,this._vpaidOptions=n||{timeout:1e4},this._templateConfig={template:i.template||S,extraOptions:i.extraOptions||{}}}function A(){T.call(this),function(){this._adUnit&&(this._adUnit.stopAd(),delete this._adUnit)}.call(this)}function T(){(function(e){var t=this[e];t&&t.parentNode&&(t.parentNode.removeChild(t),delete this[e])}).call(this,"_frame"),L.call(this)}function L(){this._onLoad&&(window.removeEventListener("message",this._onLoad),delete this._onLoad)}function C(){return window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}B.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,A.call(this))},B.prototype.isDestroyed=function(){return this._destroyed},B.prototype.loadAdUnit=function(e,a,t){if(!this._onLoad){(function(){if(this._destroyed)throw new Error("VPAIDHTML5Client already destroyed!")}).call(this),A.call(this);var o=this,i=n(this._frameContainer,this._templateConfig.template,l({iframeURL_JS:e,iframeID:this.getID(),origin:C()},this._templateConfig.extraOptions),t);this._frame=i,this._onLoad=function(e,t,i){var n;return n=setTimeout(function(){t=r,i()},e),function(){t.apply(this,arguments)&&clearTimeout(n)}}(this._vpaidOptions.timeout,function(e){if(e.origin!==C())return;var t,i,n;if(JSON.parse(e.data).id!==o.getID())return;i=o._frame.contentWindow?(n=o._frame.contentWindow.getVPAIDAd,s("function"==typeof n,"the ad didn't return a function to create an ad")):"the iframe is not anymore in the DOM tree";if(!i){var r=o._frame.contentWindow.document.querySelector(".ad-element");(t=new m(n(),r,o._videoEl,o._frame)).subscribe("AdStopped",function(){T.call(this),delete this._adUnit}.bind(o)),i=s(t.isValidVPAIDAd(),"the add is not fully complaint with VPAID specification")}return o._adUnit=t,L.call(o),a(i,i?null:t),!0}.bind(this),function(){a("timeout",null)}.bind(this)),window.addEventListener("message",this._onLoad)}},B.prototype.unloadAdUnit=function(){A.call(this)},B.prototype.getID=function(){return this._id};var N=i(15);function V(e,t){var i=e.tracking.events;if(i)for(var n=0,r=Object.keys(i);n<r.length;n++){var a=r[n];if(0<=a.indexOf("progress")&&i[a][0]&&i[a][0].offset){var o=i[a][0].offset.split(":");if(3==o.length){var s=60*+o[0]*60+60*+o[1]+ +o[2];t.push({eventName:a,eventTime:s})}}}}var _=i(3),U=i(0);function j(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return k(e,t)}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw a}}}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function P(i,n,e){var a,r=i,o=e,s=o.shadowDomEnabled()?o.getParentElement().shadowRoot:o.getParentElement(),l=o.getPlayerElement(),d=l.querySelector(".media-video"),t=l.querySelector(".trv-video"),u="truvid_cnt_vpaid_iframe"+Math.floor(1e5*Math.random()+1);s.querySelector("#".concat(u))||(u="truvid_cnt_vpaid_iframe"+Math.floor(1e5*Math.random()+1));var c,h=null,f=this,p=null,g=!1,v=null,m=null,y=null,b=null,w=d.volume,E=!1,S=0,A=!1,T=null,L=null,C=null,k={},P=[];function x(e,t){b=t,e?a.isStopped()||(window.playerLog("stopping ad unit - onAdUnitLoad"),F(),r.onLoadingContainerFailed(a)):(function(e){e.subscribe("AdVolumeChange",function(){e.getAdVolume(function(e,t){null!=t&&(0<w&&0==t?a.firePixels("mute"):0==w&&0<t&&a.firePixels("unmute"),w=t)})}),e.subscribe("AdUserAcceptInvitation",function(){a.firePixels("acceptInvitation")}),e.subscribe("AdUserMinimize",function(){a.firePixels("collapse")}),e.subscribe("AdUserClose",function(){a.firePixels("close")}),e.subscribe("AdLoaded",function(){window.playerLog("ad unit loaded"),a.isStopped()||(a.firePixels("available"),a.setLoaded(!0),r.onAdLoaded(),r.getStartAdOnAdLoadedEvent()&&(window.playerLog("starting ad unit"),e.startAd()))}),e.subscribe("AdStarted",function(){window.playerLog("ad unit started"),a.firePixels("creativeView")}),e.subscribe("AdVideoStart",function(){window.playerLog("ad unit video start"),a.isStopped()||(a.firePixels("start"),r.onPlayerResize())}),e.subscribe("AdImpression",function(){a.isStopped()||(clearTimeout(L),l.dispatchEvent(new CustomEvent("adImpression")),o.getApiObservable().notify("adImpression",{widgetId:o.getWidgetId(),video:d}),a.setFiredImpression(!0),s.querySelector("#".concat(u)).style.display="block",w=1==d.muted?0:d.volume,b.getAdRemainingTime(function(e,t){0<t&&(S=t)}),function(){if(!h){var e=[],t=s.querySelector("#".concat(u));t&&e.push(t);var i=null;T&&void 0!==T.as&&1==T.as&&(i={allowSkip:!0}),h=new N.a(f,e,i,o)}}(),I(500),window.playerLog("ad unit impression"),E=!0,r.onAdStarted(),a.fireImpressionPixel("impression",i),A?(window.playerLog("set ad volume 0"),b.setAdVolume(0)):d.muted?(window.playerLog("set ad volume 0"),b.setAdVolume(0)):(window.playerLog("set ad volume "+d.volume),b.setAdVolume(d.volume)),r.onPlayerResize())}),e.subscribe("AdVideoComplete",function(){window.playerLog("ad unit video complete"),a.firePixels("complete"),l.dispatchEvent(new CustomEvent("adComplete")),a.isStopped()||(F(),r.onAdStopped())}),e.subscribe("AdError",function(e){window.playerLog("ad unit error "+e),a.firePixels("error"),a.isStopped()||(F(),1==E?r.onAdStopped():r.onLoadingContainerFailed(a))}),e.subscribe("AdPaused",function(){window.playerLog("ad unit paused"),M(),a.firePixels("pause")}),e.subscribe("AdPlaying",function(){window.playerLog("ad unit playing"),g=!1,a.firePixels("resume"),h&&h.play()}),e.subscribe("AdClickThru",function(e){!0,a.firePixels("click"),o.getApiObservable().notify("adClick",{widgetId:o.getWidgetId(),video:d}),l.dispatchEvent(new CustomEvent("adClick")),e&&void 0!==e.playerHandles&&1==e.playerHandles&&(void 0!==e.url&&e.url&&""!=e.url?window.open(e.url,"_blank"):a.clickThrough&&""!=a.clickThrough&&window.open(a.clickThrough,"_blank")),g?(o.setPlayerPausedOnUserBehalf(!1),o.handlePlayerInteraction(U.a.PlayAd),R()):(o.setPlayerPausedOnUserBehalf(!0),o.handlePlayerInteraction(U.a.PauseAd),D()),h&&h.show()}),e.subscribe("AdSkipped",function(){window.playerLog("ad unit skipped"),a.firePixels("skip"),a.isStopped()||(F(),r.onAdStopped()),l.dispatchEvent(new CustomEvent(_.b))}),e.subscribe("AdStopped",function(){a.isStopped()||(window.playerLog("ad unit stopped"),F(),1==E?r.onAdStopped():r.onLoadingContainerFailed(a))}),e.subscribe("AdVideoFirstQuartile",function(){window.playerLog("ad unit first quartile"),a.firePixels("firstQuartile")}),e.subscribe("AdVideoMidpoint",function(){window.playerLog("ad unit midpoint"),a.firePixels("midpoint")}),e.subscribe("AdVideoThirdQuartile",function(){window.playerLog("ad unit third quartile"),a.firePixels("thirdQuartile"),clearInterval(c),c=I(100)})}(t),V(a,P),t.handshakeVersion("2.0",function(){if(!a.isStopped()){var e=o.isFullScreenState()?"fullscreen":"normal";t.initAd(r.getRequestWidth(),r.getRequestHeight(),e,-1,{AdParameters:n.adParameters},{videoSlotCanAutoPlay:!0},null,O),C=setInterval(function(){d.hasAttribute("data-rbc")&&(d.removeAttribute("data-rbc"),a.isStopped()||(window.playerLog("stopping ad unit - rubicon interval"),F(),r.onLoadingContainerFailed(a)))},100)}}))}function O(e){e?a.isStopped()||(window.playerLog("ad unit error callback"),F(),r.onLoadingContainerFailed(a)):window.playerLog("ad unit init")}function I(e){c=setInterval(function(){a&&!a.isStopped()?b.getAdRemainingTime(function(e,t){if(v=Math.ceil(t),P&&v){var i,n=j(P);try{for(n.s();!(i=n.n()).done;){var r=i.value;r.eventTime!=Math.round(S)-v||k[r.eventName]||(k[r.eventName]=!0,a.firePixels(r.eventName))}}catch(e){n.e(e)}finally{n.f()}}}):clearInterval(c)},e)}function R(){m||y||a.disableTimeout||(y=setInterval(function(){b.getAdRemainingTime(function(e,t){t&&0<t&&(v=Math.ceil(t)),0<v&&(clearTimeout(m),window.playerLog("ad timeout interval "+v))})},3e3)),b.resumeAd(),h&&h.pause(),l.dispatchEvent(new CustomEvent("onUserMediaPlay"))}function M(){g=!0,m&&(window.playerLog("clear ad complete timeout"),clearTimeout(m)),y&&clearInterval(y),h&&h.pause()}function D(){b.pauseAd(),window.playerLog("pause ad by our code"),M(),l.dispatchEvent(new CustomEvent("onUserMediaPause"))}function F(){if(clearInterval(C),clearInterval(L),d.removeAttribute("data-rbc"),o.useVerticalSwiper()||o.setProcessingAd(!1),!a.isStopped()){r.beforeStopHandler(),a.setStopped(),clearTimeout(m),clearInterval(y);try{p.destroy()}catch(e){}h&&h.destroy();try{var e=s.querySelector("#".concat(u));e&&e.parentNode.removeChild(e)}catch(e){}}}this.loadAd=function(e){(T=e.adObject?JSON.parse(e.adObject.linear.adParameters):null)&&void 0!==T.ct&&0<T.ct&&T.ct,window.playerLog("loading vpaid ad"),a=e,A=!1,d.muted?A=!0:0==d.volume&&(A=!0),n?(p=new B(t,d,null,{timeout:1e3*e.getLoadingContainerTimeout()}),o.useVerticalSwiper()||o.setProcessingAd(!0),p.loadAdUnit(n.mediaFile.src,x,u)):(window.playerLog("stopping ad - no media file"),a.isStopped()||(F(),r.onLoadingContainerFailed(e)))},this.getContainerId=function(){return u},this.startAd=function(){b&&!a.isStopped()&&b.startAd()},this.skipAd=function(){b.skipAd(),a.isStopped()||(F(),r.onAdStopped())},this.getAdDuration=function(){return S},this.pauseAd=function(){D(),i.pauseAdTimer()},this.resumeAd=function(){R(),i.resumeAdTimer()},this.stopAd=function(){window.playerLog("stop ad"),b&&E&&(b.stopAd(function(){}),a.isStopped()||(F(),r.onAdStopped()))},this.isCurrentAdPaused=function(){return g},this.togglePlayPause=function(){g?(e.setPlayerPausedOnUserBehalf(!1),R()):(e.setPlayerPausedOnUserBehalf(!0),D())},this.setAdVolume=function(e){b.setAdVolume(e),o.setCurrentVolume(e)},this.resizeAd=function(e,t){b&&b.resizeAd(e,t,"normal")},this.isStopped=function(){return a.isStopped()},this.getAdRemainingTime=function(){return v},this.destroy=function(){F()}}function H(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return x(e,t)}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw a}}}}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function O(e,t,i){var n,a=null,r=e,o=i,s=o.getPlayerElement(),l=s.querySelector(".media-video"),d=this,u=l.muted?0:l.volume,c=!1,h=!1,f=!1,p=!1,g=!1,v=!1,m={},y=[],b=null,w=!1;function E(){A()}function S(){window.playerLog("on video ad loaded"),w||(r.onAdLoaded(),a.setLoaded(!0),w=!0,clearInterval(b),l.removeEventListener("loadeddata",S),l.removeEventListener("loadedmetadata",S),r.getStartAdOnAdLoadedEvent()&&A())}function A(){var e=l.play();e?e.then(function(){c?n&&n.play():(c=!0,r.onAdStarted(),o.setAdPlayingOnMainVideo(!0),T())}).catch(function(e){a.setStopped(),r.onLoadingContainerFailed(a)}):c||(c=!0,r.onAdStarted(),o.setAdPlayingOnMainVideo(!0),T())}function T(){(n=n||new N.a(d,null,null,o))&&n.play()}function L(){clearInterval(b),n&&n.destroy(),l.removeEventListener("volumechange",x),l.removeEventListener("error",O,!0),l.removeEventListener("canplaythrough",I),l.removeEventListener("load",I),l.removeEventListener("ended",R),l.removeEventListener("playing",M),l.removeEventListener("pause",D),l.removeEventListener("loadedmetadata",F),l.removeEventListener("click",B),l.removeEventListener("timeupdate",_)}function C(){r.beforeStopHandler(),h=!0,o.useVerticalSwiper()||o.setProcessingAd(!1),o.setAdPlayingOnMainVideo(!1),window.playerLog("vast remove container"),L(),a&&a.setStopped(),r.onAdStopped()}function k(){l.addEventListener("volumechange",x),l.addEventListener("error",O,!0),l.addEventListener("canplaythrough",I),l.addEventListener("load",I),l.addEventListener("ended",R),s.dispatchEvent(new CustomEvent("adComplete")),l.addEventListener("playing",M),l.addEventListener("pause",D),l.addEventListener("loadedmetadata",F),l.addEventListener("click",B),l.addEventListener("timeupdate",_),V(a,y)}function P(){l.pause(),n&&n.pause()}function x(){var e=l.volume;null!=e&&(0<u&&0==e?a.firePixels("mute"):0==u&&0<e&&a.firePixels("unmute"),u=e)}function O(){L(),a.firePixels("error"),a.setStopped(),r.onLoadingContainerFailed(a)}function I(){}function R(){a.firePixels("complete"),window.playerLog("vast video ended"),l.removeEventListener("ended",R),C()}function M(){v||h?(h=!1,a.firePixels("resume")):(v=!0,o.getApiObservable().notify("adImpression",{widgetId:o.getWidgetId(),video:l}),s.dispatchEvent(new CustomEvent("adImpression")),a.setFiredImpression(!0),a.firePixels("creativeView"),a.firePixels("start"),a.fireImpressionPixel("impression",e))}function D(){h=!0,a.firePixels("pause")}function F(){l.removeEventListener("loadedmetadata",F)}function B(){o.getApiObservable().notify("adClick",{widgetId:o.getWidgetId(),video:l}),s.dispatchEvent(new CustomEvent("adClick")),l.paused?(!0,A(),s.dispatchEvent(new CustomEvent("onUserMediaPlay")),o.handlePlayerInteraction(U.a.PlayAd),n&&n.play()):(P(),s.dispatchEvent(new CustomEvent("onUserMediaPause")),o.handlePlayerInteraction(U.a.PauseAd),a.firePixels("click"),a.clickThrough&&""!=a.clickThrough&&window.open(a.clickThrough)),n&&n.show()}function _(e){var t=Math.round(l.currentTime/l.duration*100);if(t&&0<t&&(75<t&&!f?(f=!0,a.firePixels("thirdQuartile")):50<t&&!p?(p=!0,a.firePixels("midpoint")):25<t&&!g&&(g=!0,a.firePixels("firstQuartile"))),y){var i,n=H(y);try{for(n.s();!(i=n.n()).done;){var r=i.value;r.eventTime!=Math.round(l.currentTime)||m[r.eventName]||(m[r.eventName]=!0,a.firePixels(r.eventName))}}catch(e){n.e(e)}finally{n.f()}}}this.resizeAd=function(){},this.clearResources=function(){L()},this.destroy=function(){C()},this.isCurrentAdPaused=function(){return h},this.togglePlayPause=function(){h?(E(),o.setPlayerPausedOnUserBehalf(!1)):(P(),o.setPlayerPausedOnUserBehalf(!0))},this.startAd=function(){c||w&&A()},this.isStopped=function(){return a.isStopped()},this.loadAd=function(e){a=e,t?(window.playerLog("load ad"),a.firePixels("available"),k(),l.src=t.mediaFile.src,l.src="",l.addEventListener("loadeddata",S),l.addEventListener("loadedmetadata",S),l.src=t.mediaFile.src,window.playerLog("load ad "+t.mediaFile.src),k(),b=setInterval(function(){3<=l.readyState&&S()},500),o.useVerticalSwiper()||o.setProcessingAd(!0),l.load()):(a.setStopped(),r.onLoadingContainerFailed(e))},this.showAd=function(){},this.pauseAd=function(){P(),e.pauseAdTimer()},this.stopAd=function(){c&&C()},this.skipAd=function(){a.firePixels("skip"),o.handlePlayerInteraction(U.a.SkipAd),C()},this.setAdVolume=function(e){l.muted=!(0<e),l.volume=e,n.setVolume(e),o.setCurrentVolume(e)},this.getAdRemainingTime=function(){return l.duration-l.currentTime},this.getContainerId=function(){return null},this.getAdDuration=function(){return l.duration},this.resumeAd=function(){E(),e.resumeAdTimer()}}var I=i(17),R=i(18),M=i(7),D=i(2);function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e){return function(e){if(Array.isArray(e))return z(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return z(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return z(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var W="onNoAdStartedInBiddingSession",q="adError";function Y(f,e,p){this.stopped=!1,this.adOffset=e?e.adOffset:null,this.adCount=e?e.adCount:null,this.ads=e?e.ads:null,this.advertisingLib=f;var g,t,i,v=this;this.currentVastQueries=0,this.currentVast=null;var m=p;function n(e){var t=new Date;t.setTime(t.getTime()+864e5),Object(M.c)("truvid_d",e,t,m.getDomain())}function r(e){var t=new Date,i=function(){var e=Object(M.a)("truvid_d");if(e)try{return e=JSON.parse(e)}catch(e){return null}}();if(i&&"object"===F(i)&&i[e.dtid]){if((t-new Date(i[e.dtid].t))/1e3/60/60<24)return i[e.dtid].r<e.fq&&(i[e.dtid].r++,n(i),!0);i[e.dtid]=null}return i&&"object"===F(i)&&!i[e.dtid]?(i[e.dtid]={r:1,t:t},n(i),!0):i&&"object"===F(i)?void 0:((i={})[e.dtid]={r:1,t:t},n(i),!0)}this.origAds=this.ads,f.aiwa&&(this.aiwa=f.aiwa,v.aiwa.aiwaDebugMode()&&console.log("AIWA DEBUG: BS - NEW BIDDING SESSION")),this.prebidTypes=["openrtb","relevant","prebid"],this.setCurrentTruvidAd=function(e){g=e},this.resetCurrentTruvidAd=function(){g=null},this.ListenToBiddingSessionEnds=function(e){t=e},this.listenToStartLoadingContainer=function(e){i=e},this.startBiddingSession=function(e){var t;null!==(t=this.aiwa)&&void 0!==t&&t.aiwaDebugMode()&&console.log("AIWA DEBUG: BS - START"),this.stopped||(this.currentVast=e,this.currentVastQueries++,Object(I.b)(e,this.onTruvidVastFetched,this.onTruvidVastError,null,this.setLastVastResponse))},this.getCurrentTruvidAd=function(){return g},this.abort=function(){this.stopped=!0},this.destroy=function(){g&&(window.playerLog("clearing container timeout"),g.clearLoadingContainerTimeout(),g.getAdManager()&&g.getAdManager().destroy()),this.resetCurrentTruvidAd(),this.abort()},this.onAdFetch=function(e,t){var i;null!==(i=this.aiwa)&&void 0!==i&&i.isAiwaEnabled()&&this.aiwa.setAiwaIndex(t,!0),!v.stopped&&g&&(null!=e&&e.tryNextBidOnError&&g.setOnErrorCb(e.tryNextBidOnError),g.firePixels("win-response",e),window.playerLog("on ad fetched"),v.isOutstreamAd(g)&&(v.advertisingLib.killBiddingSession(),v.advertisingLib.resetImaManager(),v.advertisingLib.initializeAdManagers()),v.loadMediaFile())},this.onAdError=function(){window.playerLog("bidding-session: on ad error load"),v.loadAdByPriority(),void 0!==this&&void 0!==this.currentVast&&p.getPlayerElement().dispatchEvent(new CustomEvent(q,{detail:{tagUrl:this.currentVast}}))},this.startLoadingLastAds=function(){var e=f.getLastVastAds();e&&Object(I.a)(e,function(e){var t;v.origAds=G(e.ads),v.ads=null!==(t=v.aiwa)&&void 0!==t&&t.isAiwaEnabled()?e.ads.slice(v.aiwa.getAiwaIndex()):e.ads,v.loadAdByPriority()}.bind(this),this.onTruvidLoadingLastVastError)},this.setLastVastResponse=function(e){f.setLastVastAds(e)},this.onTruvidVastFetched=function(e){var t,i;v.stopped||(v.ads=null!==(t=v.aiwa)&&void 0!==t&&t.isAiwaEnabled()?e.ads.slice(v.aiwa.getAiwaIndex()):e.ads,v.origAds=G(e.ads),null!==(i=v.aiwa)&&void 0!==i&&i.isAiwaEnabled()&&v.aiwa.aiwaDebugMode()&&console.log("AIWA DEBUG: Total tags in waterfall: ".concat(v.origAds.length)),v.ads&&v.loadAdByPriority())},this.onBiddingSessionEnds=function(){var e;null!==(e=this.aiwa)&&void 0!==e&&e.aiwaDebugMode()&&console.log("AIWA DEBUG: BS - ENDS"),t&&t()},this.onTruvidLoadingLastVastError=function(){v.stopped||(v.stopped=!0,window.playerLog("truvid vast error"),v.onBiddingSessionEnds())},this.onTruvidVastError=function(e){v.currentVastQueries<2&&"no vasts"!=e?v.startBiddingSession(v.currentVast):"no vasts"==e&&(p.dispatchEvent(W),v.advertisingLib.setLoadVastOnNextBiddingSession(!0),v.onTruvidLoadingLastVastError())},this.onLoadingContainerFailed=function(e){e&&!e.isStopped()&&(window.playerLog("set stopping on ad"),e.getAdManager()&&e.getAdManager().destroy(),e.setStopped()),window.playerLog("on loading container failed - bidding session"),v.advertisingLib.stopUpdateCurrentContentTimeState(),e&&e.clearLoadingContainerTimeout(),g==e&&v.advertisingLib.setCurrentAdPlaying(!1),g==e&&v.loadMediaFile()},this.checkIfAdValidForCurrentSlot=function(e,t){if(!e.reqsoff&&e.reqson&&m.isMuted())return!1;if(e.reqsoff&&!e.reqson&&!m.isMuted())return!1;if(void 0===e.off||0==e.off.length||-1==e.off.indexOf(t))return!1;var i=!1;if(void 0===e.reqv||1!=e.reqv||m.isAdOnlyAvailable()||1!=m.IsPlayerViewable()||(i=!0),void 0!==e.reqvao&&1==e.reqvao&&m.isAdOnlyAvailable()&&1==m.IsPlayerViewable()&&(i=!0),void 0===e.reqov||1!=e.reqov||m.isAdOnlyAvailable()||0!=m.IsPlayerViewable()||(i=!0),void 0!==e.reqovao&&1==e.reqovao&&m.isAdOnlyAvailable()&&0==m.IsPlayerViewable()&&(i=!0),i){if(e.mrdi&&0<e.mrdi&&!function(e){var t=f.getAdSessionInterval(),i=new Date;if(t)return t[e.dtid]?!((i-t[e.dtid])/1e3<e.mrdi)&&(t[e.dtid]=i,!0):(t[e.dtid]=i,!0)}(e))return!1;if(void 0!==e.fqt&&void 0!==e.fq&&0<e.fq){if("s"==e.fqt&&!function(e){var t=f.getAdSessionFQCounter(),i=t[e.dtid];return!(!t||"object"!==F(t))&&(i?i<e.fq&&(t[e.dtid]++,!0):(t[e.dtid]=1,!0))}(e))return!1;if("d"==e.fqt&&!this.advertisingLib.advertisingConfiguration.gdpr&&!r(e))return!1}}return i},this.isPrebidAd=function(e){var t;if(null!==(t=e.linear)&&void 0!==t&&t.adParameters){var i=JSON.parse(e.getLinear().adParameters);return"prebid"===(null==i?void 0:i.dt)}return!1},this.isAdOceanAd=function(e){var t,i=null===(t=e.linear)||void 0===t?void 0:t.adParameters;return i?i=JSON.parse(e.getLinear().adParameters):e.adParameters&&(i=e.adParameters),!!i&&"adocean"===i.dt},this.isAmazonTamAd=function(e){var t,i=null===(t=e.linear)||void 0===t?void 0:t.adParameters;return i?i=JSON.parse(e.getLinear().adParameters):e.adParameters&&(i=e.adParameters),!!i&&"amazon"===i.dt},this.isOutstreamAd=function(e){var t,i=null===(t=e.linear)||void 0===t?void 0:t.adParameters;return i?i=JSON.parse(e.getLinear().adParameters):e.adParameters&&(i=e.adParameters),!!i&&"ima_outstream"===i.dt},this.restartLoadAdByPriority=function(){var e,t;null!==(e=v.origAds)&&void 0!==e&&e.length&&(null!==(t=v.aiwa)&&void 0!==t&&t.isAiwaEnabled()&&v.aiwa.setAiwaIndex(0),v.ads=v.origAds)},this.loadAdByPriority=function(){var e,t=this;if(v.stopped)return window.playerLog("loadAdByPriority onBiddingSessionEnds!"),void v.onBiddingSessionEnds();if(m.getProcessingAd())setTimeout(function(){return t.loadAdByPriority()},0);else{window.playerLog("on load ad by priority");for(var i=null,n=null!==(e=v.aiwa)&&void 0!==e&&e.isAiwaEnabled()&&v.aiwa.getAiwaIndex()||0;null==i&&0<v.ads.length;){var r;if(!(i=v.ads.shift())||void 0===i.properties||void 0===i.properties.VASTAdTagURI||""==i.properties.VASTAdTagURI||v.isPrebidAd(i)||v.isOutstreamAd(i)||v.isAdOceanAd(i)||v.isAmazonTamAd(i)){if(i&&i.linear)try{var a=JSON.parse(i.linear.adParameters);if(!this.checkIfAdValidForCurrentSlot(a,this.adOffset)){var o;n++,(i=null)!==(o=v.aiwa)&&void 0!==o&&o.isAiwaEnabled()&&(v.aiwa.setAiwaIndex(n),v.aiwa.aiwaDebugMode()&&console.log("AIWA DEBUG: Skipped invalid tag"));continue}if(i.linear.tracking.track("win"),(g=new R.a(i,null,v.advertisingLib.getAllowedContainers())).getMediaFilesFromAdResponse(i,v.advertisingLib.getRequestWidth(),v.advertisingLib.getRequestHeight()),g.mediaFiles.length||v.isPrebidAd(i)||v.isOutstreamAd(i)||v.isAdOceanAd(i)||v.isAmazonTamAd(i)){var s=g.getAdType();if(this.prebidTypes.includes(s))!function(){g.setIsPrebid(!0);var e=f.getPrebidManager(s,g);e.init().then(function(){e.LoadAd(function(e){v.onAdFetch(e,n)},v.onAdError,g)}).catch(function(e){i=null,window.playerLog("error loading prebid manager")})}();else if(v.isAdOceanAd(i))!function(){var e=f.getAdOceanManager();e.init().then(function(){e.loadAdOceanAd(function(e){v.onAdFetch(e,n)},v.onAdError,g)}).catch(function(e){i=null,window.playerLog("error loading adocean manager")})}();else if(v.isAmazonTamAd(i))!function(){var e=f.getAmazonTamManager();e.init(i.properties.VASTAdTagURI).then(function(){e.loadAmazonTamAd(function(e){v.onAdFetch(e,n)},v.onAdError,g)}).catch(function(e){i=null,window.playerLog("error loading amazon tam manager")})}();else if(v.isOutstreamAd(i)){g.setIsGptOutstream(!0),f.getOutstreamImaManager().LoadAd(function(e){v.onAdFetch(e,n)},v.onAdError,g)}else v.advertisingLib.adMacros.InjectMacros(g.mediaFiles[0].mediaFile.src,"ima"===g.type).then(function(e){g.mediaFiles[0].mediaFile.src=e,v.loadMediaFile()}).catch(function(e){Object(D.b)("errorInjectMacrosLinear",{wid:p.getWidgetId()},e),console.log("error macros"),console.log(e)})}else v.loadMediaFile()}catch(e){Object(D.b)("errorLoadingLinear",{wid:p.getWidgetId()},e)}}else{var l=JSON.parse(i.linear.adParameters);if(!this.checkIfAdValidForCurrentSlot(l,this.adOffset)){var d;n++,(i=null)!==(d=v.aiwa)&&void 0!==d&&d.isAiwaEnabled()&&(v.aiwa.setAiwaIndex(n),v.aiwa.aiwaDebugMode()&&console.log("AIWA DEBUG: Skipped invalid tag"));continue}window.playerLog("requesting "+i.properties.VASTAdTagURI);var u=i.properties.VASTAdTagURI;v.advertisingLib.adMacros.InjectMacros(u,"ima"===l.dt).then(function(e){i.linear.tracking.track("win"),window.playerLog("set current truvid ad"),(g=new R.a(i,e,v.advertisingLib.getAllowedContainers())).requestMediaFiles(v.advertisingLib.getRequestWidth(),v.advertisingLib.getRequestHeight(),function(e){v.onAdFetch(e,n)},v.onAdError),i.linear.tracking.track("request")}).catch(function(e){window.playerLog("error macros"),window.playerLog(e)})}n++,null!==(r=v.aiwa)&&void 0!==r&&r.isAiwaEnabled()&&(v.aiwa.setAiwaIndex(n),v.aiwa.aiwaDebugMode()&&console.log("AIWA DEBUG: WATERFALL SIZE: ".concat(v.ads.length)))}if(null==i){var c;if(null!==(c=v.aiwa)&&void 0!==c&&c.isAiwaEnabled()){var h=v.aiwa.aiwaStartFromMiddleOnFailure()?Math.floor(v.origAds.length/2):0;v.aiwa.setAiwaIndex(h)}v.origAds=null,p.dispatchEvent(W),v.onBiddingSessionEnds()}}},this.loadTruvidMediaFile=function(e,t){var i=this;if(e.isVAST()){var n=new O(v.advertisingLib,e,m);return window.playerLog("loading vast container "+g.getDemandTagId()),g.setAdManager(n),f.startUpdatingCurrentContentTimeState(),n.loadAd(g),!0}if(e.isVPAID()){window.playerLog("loading vpaid container "+g.getDemandTagId());var r=new P(v.advertisingLib,e,m);return g.setAdManager(r),f.startUpdatingCurrentContentTimeState(),r.loadAd(g),!0}if(e.isIMA()){var a=v.advertisingLib.getImaAdManager();return g.setAdManager(a),window.playerLog("loading ima container"+g.getDemandTagId()),f.startUpdatingCurrentContentTimeState(),a.loadAd(g,e,function(){i.isOutstreamAd(g)&&g.getVastRes()&&(a.getImaAdsContainer().initialize(),a.startOutstreamAd())}),!0}},this.startLoadingContainer=function(){if(!v.stopped){var e=g.shiftPrioritizedMediaFiles();if(e){var t=window.setTimeout(v.BeforeLoadingContainerFailed,1e3*g.getLoadingContainerTimeout(),g);return g.setLoadingContainerTimeoutId(t),i&&i(),v.loadTruvidMediaFile(e,t)}}return!1},this.BeforeLoadingContainerFailed=function(e){window.playerLog("timeout reached on loading container"),v.onLoadingContainerFailed(e)},this.loadMediaFile=function(){if(!v.stopped&&g){window.playerLog("load media file");for(var e=!1;!e&&g.mediaFiles.length;)window.playerLog("start loading container"),void 0!==g.demandTagId&&window.playerLog("demand tag id: "+g.demandTagId),e=v.startLoadingContainer();0==e&&(g.mediaFiles.length?v.loadMediaFile():(window.playerLog("reset current truvid ad - going to load ad by priority"),g=null,v.loadAdByPriority()))}else window.playerLog("reset current truvid ad - going to load ad by priority"),g=null,v.loadAdByPriority()}}},function(e,t,i){"use strict";i.d(t,"a",function(){return n});var f=i(0),p=i(1);i(19);function n(e,t,i,n){this.playerObj=n,this.shadowRoot=this.playerObj.shadowDomEnabled()?this.playerObj.getParentElement().shadowRoot:this.playerObj.getParentElement(),this.playerElement=this.playerObj.getPlayerElement(),this.controllerId="truvid_ad_controller"+Math.floor(1e6*Math.random()),this.adControllerTimerInterval=null,this.adContainer=e,this.containers=[],this.showFunc=this.show.bind(this),this.hideFunc=this.hide.bind(this),this.allowSkip=i&&void 0!==i.allowSkip&&1==i.allowSkip;var r=document.createElement("div"),a=document.createElement("style"),o="opacity 0.2s ease-in-out";r.id=this.controllerId,r.innerHTML+='<div class="controller-playPause trv-control" title="play">Play</div><div class="controller-volume trv-control" title="volume">Volume</div>',this.allowSkip&&(r.innerHTML+='<button class="controller-skip brpBtn" type="button" title="skip">Skip</button>'),r.innerHTML+='<div class="controller-title trv-control" style="user-select: none !important; text-indent: 0 !important;">Ad</div>';var s="#"+this.playerElement.id+" #"+r.id+" { display: flex; flex-direction: row; align-items: center; justify-content: flex-start; overflow:hidden;position: absolute; display: none;bottom:0; z-index: "+(n.getIsFSModalOpened()?"2147483647":"50000")+"; color: #FCFCFC; font-size: 10pt !important; text-align: left; height: 38px; background: linear-gradient(180deg, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.8) 100%);";n.isMobile()&&(s+="-webkit-transition: "+o+"; -moz-transition: "+o+"; -o-transition; "+o+"; transition: "+o+"; -ms-transition: "+o+";"),s+="}#"+this.playerElement.id+" #"+r.id+" .controller-playPause {  }#"+this.playerElement.id+" #"+r.id+" .controller-volume {  }",s+="#"+this.playerElement.id+" #"+r.id+">span { float: right; line-height: 22px; font-size: 10pt !important; color: #FCFCFC; font-family: arial; margin-top: 10px; }#"+this.playerElement.id+" #"+r.id+" .controller-title { margin-right: 12px; white-space: nowrap; text-overflow: ellipsis; overflow: hidden; vertical-align: inherit; cursor: default; }#"+this.playerElement.id+" #"+r.id+" .controller-skip { text-indent: 0;width:25px;color:#fff;}",a.innerHTML=s,r.appendChild(a),top.document.querySelector(".truvid_ima_container").after(r);var l=r.querySelector(".controller-playPause");l&&(l.innerHTML=this.playerObj.getIconsMap().getIcon("pause"));var d,u=r.querySelector(".controller-volume");if(u&&(u.innerHTML=0==this.playerObj.getCurrentVolume()?this.playerObj.getIconsMap().getIcon("mute"):this.playerObj.getIconsMap().getIcon("unmute")),this.containers.push(r),!this.adContainer.getContainerId()||null!=i&&i.isOutstream?this.containers.push(this.playerElement):this.containers.push(this.shadowRoot.querySelector("#".concat(this.adContainer.getContainerId()))),t)for(var c=0;c<t.length;c++)this.containers.push(t[c]);if(this.allowSkip&&(this.shadowRoot.querySelector("#".concat(this.controllerId)).style.width="142px"),n.isMobile())this.show();else for(d=0;d<this.containers.length;d++)this.containers[d]&&(this.containers[d].addEventListener("mousemove",this.showFunc),this.containers[d].addEventListener("mouseenter",this.showFunc),n.isMobile()||this.containers[d].addEventListener("mouseleave",this.hideFunc));r.querySelector(".controller-playPause").addEventListener("click",function(){this.adContainer.isCurrentAdPaused()?(this.playerObj.handlePlayerInteraction(f.a.PlayAd),this.playerElement.dispatchEvent(new CustomEvent("onUserMediaPlay"))):(this.playerObj.handlePlayerInteraction(f.a.PauseAd),this.playerElement.dispatchEvent(new CustomEvent("onUserMediaPause"))),this.adContainer.togglePlayPause()}.bind(this)),r.querySelector(".controller-volume").addEventListener("click",function(){var e=0==n.getCurrentVolume()?n.getVolume()||n.getDefaultVolume():0;this.playerObj.setMutedByUser(!e),e?this.playerObj.handlePlayerInteraction(f.a.SoundOnAd):this.playerObj.handlePlayerInteraction(f.a.SoundOffAd),this.adContainer.setAdVolume(e),0==e&&this.playerElement.dispatchEvent(new CustomEvent(p.n))}.bind(this)),this.allowSkip&&r.querySelector(".controller-skip").addEventListener("click",function(){this.playerObj.handlePlayerInteraction(f.a.SkipAd),this.adContainer.skipAd()}.bind(this));var h=this.playerElement.querySelector(".volume-container");h&&(h.style.display="none")}n.prototype.hide=function(){(this.playerObj.useVerticalSwiper()?top.document:this.shadowRoot).querySelector("#".concat(this.controllerId)).style.display="none"},n.prototype.show=function(){(this.playerObj.useVerticalSwiper()?top.document:this.shadowRoot).querySelector("#".concat(this.controllerId)).style.display="flex"},n.prototype.pause=function(){var e=this.playerElement.querySelector(".controller-playPause");e&&(e.innerHTML=this.playerObj.getIconsMap().getIcon("play"))},n.prototype.play=function(){var e=this.playerElement.querySelector(".controller-playPause");e&&(e.innerHTML=this.playerObj.getIconsMap().getIcon("pause"))},n.prototype.setVolume=function(e){this.playerElement.querySelector(".controller-volume").innerHTML=0==e?this.playerObj.getIconsMap().getIcon("mute"):this.playerObj.getIconsMap().getIcon("unmute")},n.prototype.destroy=function(){for(var e=0;e<this.containers.length;e++)this.containers[e]&&(this.containers[e].removeEventListener("mousemove",this.showFunc),this.containers[e].removeEventListener("mouseenter",this.showFunc),this.playerObj.isMobile()||this.containers[e].removeEventListener("mouseleave",this.hideFunc));var t=(this.playerObj.useVerticalSwiper()?top.document:this.shadowRoot).querySelector("#".concat(this.controllerId));t&&t.parentNode.removeChild(t),clearInterval(this.adControllerTimerInterval)}},function(e,t,i){"use strict";function n(e){return"string"!=typeof e?e:""==e?e:0==e.indexOf("//")?e=window.location.protocol+e:0==e.indexOf("http://")||0==e.indexOf("https://")?e:e=window.location.protocol+"//"+e}function r(e){return e.length<4e3?e:e.split("?")[0]}i.d(t,"a",function(){return n}),i.d(t,"b",function(){return r})},function(e,t,i){"use strict";i.d(t,"b",function(){return m}),i.d(t,"a",function(){return u});var n=i(16);function r(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function y(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach(function(e){a(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==i)return;var n,r,a=[],o=!0,s=!1;try{for(i=i.call(e);!(o=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==i.return||i.return()}finally{if(s)throw r}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l,p={XMLHttpRequest:(l=function(){return new XMLHttpRequest},d.toString=function(){return l.toString()},d),onBeforeSend:function(e,t,i){},defaultVASTAbortLimit:-1};function d(){return l.apply(this,arguments)}function m(e,r,a,o,s){var t="Reached abort limit of ("+p.defaultVASTAbortLimit+") wrappers.";a=a||function(){},(!o&&0===p.defaultVASTAbortLimit||o&&0===o.abortLimit)&&(a(new Error(t))||!0)||function e(t,i,n,r,a){var o=p.XMLHttpRequest();o.onreadystatechange=function(){4===o.readyState&&(200===o.status?null!==o.responseXML?n(o.responseXML,i):r(o,i):a?r(o,i):e(t,i,n,r,!0))},o.open("GET",t,!0),a||(o.withCredentials=!0),p.onBeforeSend(t,i,o),o.send(null)}(e,null,function(e){try{s&&"function"==typeof s&&s(e),new h(e,r,a,o)}catch(e){for(var t=e.stack.split(/\n/),i=0;i<t.length;i++){var n=t[i];n=(n=n.replace("[arguments not available]","")).replace(/http:\/\/.*?resources\//,""),window.playerLog("\t"+n)}a()}},function(e){a(e)})}function u(e,t,i,n){try{new h(e,t,i,n)}catch(e){i()}}function c(e,t){if(this.events={},this.ad=t,null!==e){if("TrackingEvents"!==e.tagName){if(1!==(e=e.getElementsByTagName("TrackingEvents")).length)return;e=e.item(0)}for(var i=e.getElementsByTagName("Tracking"),n=0;n<i.length;n++){var r=i[n].getAttribute("event");if(r){var a=null;"progress"===r&&(r+="-"+(a=i[n].getAttribute("offset"))),this.events[r]=this.events[r]||[];var o={url:i[n].textContent.replace(/\s/g,""),offset:a,event:r};this.events[r].push(o)}}}}function h(e,t,i,n){this.ads=[],this.onAdsAvailable=t,this.onAdsError=i,this.onReceivedErrorCounter=0;var r=e.getElementsByTagNameNS("*","Ad"),a=this;if(0!==r.length){var o=function(e){a.onReceivedErrorCounter++,a.onReceivedErrorCounter!==r.length||i(e)};if(0==e.getElementsByTagName("VASTS").length)for(var s=0;s<r.length;s++){if((f=new w(this,r.item(s),n||null)).isEmpty())o();else if(this.ads.push(f),!f.hasData()||f.hasSequence()&&!f.isNumber(1)){var l,d=r.item(s).getElementsByTagName("Wrapper").item(0),u=d.getElementsByTagName("VASTAdTagURI");if(0===u.length){o();continue}u=u.item(0).textContent.replace(/\s/g,""),function(i,n,r){l=function(e){if(i.onLoaded(e,n),r.onAdsAvailable){var t=r.onAdsAvailable;r.onAdsAvailable=null,t.call(r,e)}}}(f,"true"===d.getAttribute("allowMultipleAds"),a),m(u,l,o,f)}else if(t){var c=this.onAdsAvailable;this.onAdsAvailable=null,c.call(this,this)}}else{var h=e.getElementsByTagName("VASTS")[0].getElementsByTagName("VAST");for(s=0;s<h.length;s++){var f;(f=new w(this,r.item(s),n||null)).isEmpty()?o():this.ads.push(f)}if(a.onAdsAvailable){c=a.onAdsAvailable;a.onAdsAvailable=null,c.call(a,a)}}}else{var p=[],g=e.getElementsByTagNameNS("*","Error");if(g&&0<g.length)for(var v=0;v<g.length;v++)p[v]=g[v].textContent;i("no vasts",p)}}function w(e,t,i,n){var r,a;if(this.vast=e,this.pod=e,this.parentAd=i,this.onAdAvailable=n,this.abortLimit=i?0<i.abortLimit?i.abortLimit-1:i.abortLimit:p.defaultVASTAbortLimit,this.sequence=null,this.hasContent=!0,this.loaded=!0,this.linear=null,this.impressions=[],this.errors=[],(this.currentPodAd=this).sentImpression=!1,this.properties={},null!==this.parentAd){var o=this.parentAd;for(a in o.properties)o.properties.hasOwnProperty(a)&&(this.properties[a]=o.properties[a])}t.hasAttribute("sequence")&&(this.sequence=parseInt(t.getAttribute("sequence"),10));var s=t.getElementsByTagName("InLine");if(0!==s.length||(this.loaded=!1,0!==(s=t.getElementsByTagName("Wrapper")).length)){for(var l=(s=s.item(0)).firstChild;null!==l;){if(1===l.nodeType)switch(l.tagName){case"Creatives":case"InLine":case"Wrapper":case"Impression":case"Error":break;default:this.properties[l.tagName]=l.textContent.replace(/^\s*|\s*$/g,"")}l=l.nextSibling}var d=s.getElementsByTagName("Impression");for(r=0;r<d.length;r++)this.impressions.push(d.item(r).textContent.replace(/\s/g,""));var u=s.getElementsByTagName("Error");for(r=0;r<u.length;r++)this.errors.push(u.item(r).textContent.replace(/\s/g,""));var c=s.getElementsByTagName("Creatives");if(0!==c.length)for(c=c.item(0).getElementsByTagName("Creative"),r=0;r<c.length;r++){for(var h=c.item(r).firstChild;null!==h&&"Linear"!=h.tagName;)h=h.nextSibling;if(null!==h&&"Linear"==h.tagName){var f=new g(this,h);if(this.linear)this.linear.augment(f);else if(this.linear=f,i)for(;i;)this.linear&&this.linear.tracking&&void 0!==this.linear.tracking&&i&&i.linear&&void 0!==i.linear&&void 0!==i.linear.tracking&&this.linear.tracking.augment(i.linear.tracking),i=i.parentAd}}}else this.hasContent=!1}function f(e,t){this.root=t,this.clickThrough=null,this.tracking=new c(t,e)}function g(e,t){var i;f.call(this,e,t),this.mediaFiles=[],this.clickThrough=null,this.duration=null,this.adParameters=null;var n=t.getElementsByTagName("VideoClicks");if(n.length){var r=(n=n.item(0)).getElementsByTagName("ClickThrough");for(r.length&&(this.clickThrough=r.item(0).textContent.replace(/\s/g,"")),r=n.getElementsByTagName("ClickTracking"),i=0;i<r.length;i++)this.tracking.addClickTracking(r.item(i).textContent.replace(/\s/g,""))}var a=t.getElementsByTagName("Duration");a.length&&(this.duration=this.timecodeFromString(a.item(0).textContent.replace(/\s/g,"")));var o=t.getElementsByTagName("AdParameters");o.length&&(this.adParameters=o.item(0).textContent);var s=t.getElementsByTagName("MediaFiles");if(s.length)for(s=s.item(0).getElementsByTagName("MediaFile"),i=0;i<s.length;i++){for(var l=s.item(i),d={},u=0;u<l.attributes.length;u++)d[l.attributes[u].name]=l.attributes[u].value;d.src=s.item(i).textContent.replace(/\s/g,""),this.mediaFiles.push(d)}}c.prototype.copy=function(e){var t=Object.create(c.prototype);for(var i in t.events={},this.events)this.events.hasOwnProperty(i)&&(t.events[i]=[].concat(this.events[i]));return t.ad=e,t},c.prototype.finger=function(e){if(e=Object(n.a)(e),"object"!==("undefined"==typeof window?"undefined":s(window))||"undefined"==typeof Image||"undefined"!=typeof buster){var t=p.XMLHttpRequest();t.open("get",e,!0),p.onBeforeSend(e,"tracking-pixel",t),t.send()}else{(new Image).src=e}},c.prototype.augment=function(e){for(var t in e.events)e.events.hasOwnProperty(t)&&(this.events[t]?this.events[t]=this.events[t].concat(e.events[t]):this.events[t]=e.events[t])},c.prototype.addClickTracking=function(e){var t={url:e,event:"click",offset:null};this.events.click?this.events.click.push(t):this.events.click=[t]},c.prototype.getEventsOfTypes=function(e){var t=[],i=-1<e.indexOf("progress");for(var n in this.events)this.events.hasOwnProperty(n)&&(-1<e.indexOf(n)||i&&0===n.indexOf("progress-"))&&(t=t.concat(this.events[n]));return t},c.prototype.track=function(e,t){if(this.events[e]&&0!==this.events[e].length){var i,n=[].concat(this.events[e]),r="BIDDERNAME",a={};for(var o in t)if(t.hasOwnProperty(o))if("bidders"!==o)a["["+o+"]"]=encodeURIComponent(t[o]);else{var s=n.findIndex(function(e){return e.url.includes(r)});if(-1!==s)for(var l=b(n.splice(s,1),1)[0],d=0;d<t[o].length;d++){var u,c=t[o][d];if(n.push(y(y({},l),{},{url:l.url.replace("["+r+"]",c).replace("[CPM]",null!==(u=t.cpm)&&void 0!==u&&u.length?t.cpm[d]:"")})),["impression","available","click","complete","viewability"].includes(e))break}}if("impression"==e){var h,f=this.ad;for(null!=t&&null!==(h=t.imps)&&void 0!==h&&h.length?f.impressions=t.imps.map(function(e){return{url:e.replace("["+r+"]",t.bidders[0]).replace("[CPM]",t.cpm[0])}}):f.impressions=f.impressions.map(function(e){var t;return null!==(t=e.url)&&void 0!==t?t:e});null!==f&&(null===(p=f)||void 0===p||!p.hasSentImpression());){var p,g;if(f.impressionSent(),null!=t&&null!==(g=t.imps)&&void 0!==g&&g.length)n=f.impressions;else for(i=0;i<f.impressions.length;i++)n.push({url:f.impressions[i]});f=f.parentAd}}if("error"==e)for(i=0;i<f.errors.length;i++)n.push({url:f.errors[i]});for(i=0;i<n.length;i++){for(var v=n[i].url,m=""+parseInt(99999999*Math.random(),10);8!==m.length;)m="0"+m;for(o in a["[CACHEBUSTING]"]=m,a)a.hasOwnProperty(o)&&(v=v.replace(o,a[o]));this.finger(v)}}},h.prototype.getAd=function(e){var t=null;if(e&&(t=this.getAdWithSequence(1))&&!t.current().isEmpty())return t.current();for(var i=0;i<this.ads.length;i++)if(!this.ads[i].hasSequence()&&!this.ads[i].current().isEmpty())return this.ads[i].current()},h.prototype.getAdWithSequence=function(e){for(var t=0;t<this.ads.length;t++)if(this.ads[t].isNumber(e))return this.ads[t];return null},w.prototype.getTag=function(e,t){return this.properties.hasOwnProperty(e)?this.properties[e]:t},w.prototype.onLoaded=function(e,t){this.pod=e,this.currentPodAd=e.getAd(t),this.currentPodAd.isEmpty()||(this.loaded=!0,this.onAdAvailable&&this.onAdAvailable.call(this,this))},w.prototype.hasSentImpression=function(){return this.sentImpression},w.prototype.impressionSent=function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];this.sentImpression=e},w.prototype.current=function(){return this.currentPodAd},w.prototype.isNumber=function(e){return this.sequence===e},w.prototype.hasSequence=function(){return null!==this.sequence},w.prototype.isEmpty=function(){return!this.hasContent},w.prototype.hasData=function(){return this.loaded},w.prototype.getNextAd=function(){return this.vast!==this.pod&&(this.currentPodAd=this.currentPodAd.getNextAd(),null!==this.currentPod)?this.currentPodAd.current():this.hasSequence()?this.vast.getAdWithSequence(this.sequence+1).current():null},w.prototype.getLinear=function(){return this.linear},f.prototype.track=function(e,t,i){this.tracking.track(e,{CONTENTPLAYHEAD:this.timecodeToString(t),ASSETURI:i})},f.prototype.timecodeToString=function(e){return("0"+parseInt(e/3600,10)+":"+("0"+parseInt(e%3600/60,10))+":"+("0"+e%60)).replace(/(^|:|\.)0(\d{2})/g,"$1$2")},f.prototype.timecodeFromString=function(e){return-1===e.indexOf(":")?e:3600*parseInt(e.substr(0,2),10)+60*parseInt(e.substr(3,2),10)+parseInt(e.substr(6,2),10)},f.prototype.getClickThrough=function(){return this.clickThrough},f.prototype.attribute=function(e,t){if(!this.root.hasAttribute(e))return t;var i=this.root.getAttribute(e);switch(e){case"skipoffset":case"duration":case"offset":case"minSuggestedDuration":i=this.timecodeFromString(i)}return i},(g.prototype=Object.create(f.prototype)).getDuration=function(){return this.duration},g.prototype.getAdParameters=function(){return this.adParameters},g.prototype.copy=function(e){return new g(e,this.root)},g.prototype.augment=function(e){this.adParameters=e.adParameters||this.adParameters,this.duration=e.duration||this.duration,this.mediaFiles=e.mediaFiles.slice(0)||this.mediaFiles.slice(0),this.tracking.augment(e.tracking),this.clickThrough=e.clickThrough||this.clickThrough},g.prototype.getAllMedias=function(){return this.mediaFiles},g.prototype.getBestMedia=function(e,t){for(var i=Number.POSITIVE_INFINITY,n=-1,r=0;r<this.mediaFiles.length;r++)if(this.mediaFiles[r].type==t){var a=this.mediaFiles[r],o=Math.sqrt(Math.pow(e.width-a.width,2)+Math.pow(e.height-a.height,2));if(o<i)i=o,n=r;else if(o===i){var s=this.mediaFiles[n],l=s.bitrate||s.maxBitrate,d=a.bitrate||a.maxBitrate;d&&!l?n=r:e.bitrate&&l&&d?Math.abs(d-e.bitrate)<Math.abs(l-e.bitrate)&&(n=r):l<d&&(n=r)}}if(-1!==n)return this.mediaFiles[n];for(r=0;r<this.mediaFiles.length;r++)if(this.mediaFiles[r].type==t)return this.mediaFiles[r];return null};var v=["start","firstQuartile","midpoint","thirdQuartile","complete","progress","skip"];g.prototype.getTrackingPoints=function(){var e=this.tracking.getEventsOfTypes(v),t=[],i=null;void 0!==this.duration&&this.duration&&(i=this.duration);for(var n=0;n<e.length;n++){var r,a={event:e[n].event,offset:null,percentOffset:null};switch(e[n].event){case"start":a.percentOffset="0%",a.offset=0;break;case"firstQuartile":a.percentOffset="25%",i&&(a.offset=.25*i);break;case"midpoint":a.percentOffset="50%",i&&(a.offset=.5*i);break;case"thirdQuartile":a.percentOffset="75%",i&&(a.offset=.75*i);break;case"complete":a.percentOffset="100%",i&&(a.offset=i);break;case"skip":-1===(r=this.attribute("skipoffset",0)).indexOf("%")?(a.offset=f.prototype.timecodeFromString(r),i&&(a.percentOffset=a.offset/i*100+"%")):(a.percentOffset=r,i&&(a.offset=i*parseInt(a.percentOffset,10)/100));break;default:if(!(r=e[n].offset))continue;"start"===r&&(r="0%"),"end"===r&&(r="100%"),-1===r.indexOf("%")?(a.offset=f.prototype.timecodeFromString(r),i&&(a.percentOffset=a.offset/i*100+"%")):(a.percentOffset=r,i&&(a.offset=i*parseInt(a.percentOffset,10)/100))}t.push(a)}return t.sort(function(e,t){return e.offset&&t.offset?e.offset-t.offset:e.percentOffset&&t.percentOffset?parseInt(e.percentOffset,10)-parseInt(t.percentOffset,10):0}),t}},function(e,t,i){"use strict";i.d(t,"a",function(){return d});var l=i(8),r=i(17),n=i(2);function c(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function o(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function h(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?o(Object(i),!0).forEach(function(e){s(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function d(e,t,s){var i,o=this;this.adObject=e,this.tagUrl=t,e&&(i=JSON.parse(e.getLinear().adParameters)),this.demandTagId=i?i.dtid:null,this.type=i?i.dt:null,this.priority=i?i.priority:null,this.disableTimeout=!!i&&(void 0!==i.dist&&1==i.dist),this.mediaFiles=[],this.loadingContainerTimeout=i?i.t:8,this.loadingContainerTimeoutId=null,this.adParameters=i,this.adManager=null,this.stopped=!1,this.tracking=null,this.clickThrough=null,this.isLoaded=!1,this.isPrebid=!1,this.isGptOutstream=!1,this.firedImpression=!1,this.numberOfTimesAdSkipped=0,this.firedRequestPixel=!1,this.StoppedTrackingViewability=!1,this.vastRes=void 0,this.adPixelMacros={},this.adPlayingTime=0,s&&(this.allowedContainers=s.slice(0)),this.isAdOnly=function(){return void 0!==this.adParameters.reqvao&&1==this.adParameters.reqvao||void 0!==this.adParameters.reqovao&&1==this.adParameters.reqovao},this.setStoppedTrackingViewability=function(){this.StoppedTrackingViewability=!0},this.getStoppedTrackingViewability=function(){return this.StoppedTrackingViewability},this.getNumberOfTimesAdSkipped=function(){return this.numberOfTimesAdSkipped},this.increaseSkipped=function(){this.numberOfTimesAdSkipped++},this.setVastRes=function(e){this.vastRes=e},this.getVastRes=function(){return this.vastRes},this.setLoaded=function(e){this.isLoaded=e},this.setIsPrebid=function(e){this.isPrebid=e},this.setIsGptOutstream=function(e){this.isGptOutstream=e},this.getIsGptOutstream=function(){return this.isGptOutstream},this.getIsLoaded=function(){return this.isLoaded},this.requestMediaFiles=function(e,t,i,n){this.tracking=this.adObject?this.adObject.linear.tracking:null,this.playerWidthOnRequest=e,this.playerHeightOnRequest=t,this.onTagFetched=i,this.onTagError=n,window.playerLog("fetch "+this.tagUrl),Object(r.b)(this.tagUrl,this.onTagVastFetch,this.onTagVastError,this.adObject)},this.firePixels=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.adPixelMacros=this.isPrebid?h(h({},this.adPixelMacros),t):{},this.tracking.track(e,this.adPixelMacros),window.playerLog("notifyPixelsFire",e)},this.setAdPlayingTime=function(e){this.adPlayingTime=e},this.getAdPlayingTime=function(){return this.adPlayingTime},this.setOnErrorCb=function(e){this.onErrorCb=e},this.getOnErrorCb=function(){return this.onErrorCb},this.fireImpressionPixel=function(e,t,i){var n=i||{};if(n.slotNumber=t.getCurrentSlotNumberMacro(),this.adPixelMacros=h(h({},this.adPixelMacros),n),this.isPrebid){var r,a,o,s,l;null!==(r=this.adPixelMacros.bidders)&&void 0!==r&&r.length&&(l=this.adPixelMacros.bidders[0]);var d=null===(a=this.tracking)||void 0===a?void 0:null===(o=a.events)||void 0===o?void 0:o.impression;if(null!==(s=d)&&void 0!==s&&s.length){var u=(d=d.map(function(e){return e.url}))[0].split("&pbsplt=s");u.length&&(u=u.filter(function(e){return e.includes(l)&&e.includes("i.gif")||e.includes("pr.gif")}),d.shift()),d=[].concat(c(d),c(u)),this.adPixelMacros.imps=d}}this.tracking.track(e,this.adPixelMacros),window.playerLog("notifyPixelsFire",e)},this.resetHasSentImpression=function(){this.tracking.ad.impressionSent(!1)},this.fireViewability=function(e){this.firedViewabilityPixel||(this.firedViewabilityPixel=!0,this.firePixels("viewability",e))},this.fireRequestPixel=function(e){this.firedRequestPixel||(this.firedRequestPixel=!0,this.firePixels("request",e))},this.onTagVastFetch=function(e){try{if(e.ads.length)for(var t=0;t<e.ads.length;t++){var i=e.ads[t];o.getMediaFilesFromAdResponse(i,o.playerWidthOnRequest,o.playerHeightOnRequest)}o.onTagFetched&&"function"==typeof o.onTagFetched&&o.onTagFetched(this)}catch(e){o.onTagVastError()}},this.getMediaFilesFromAdResponse=function(e,t,i){var n=e.getLinear();if(void 0!==n.tracking?o.tracking=n.tracking:o.tracking=null,void 0!==n.clickThrough?o.clickThrough=n.clickThrough:o.clickThrough=null,n)for(var r=function(e,t,i){var n=s,r=[];for(;n.length;){var a=n.shift(),o=e.getBestMedia({width:t,height:i},a);o&&r.push(new l.a(a,o,e.adParameters))}return r}(n,t,i),a=0;a<r.length;a++)o.mediaFiles.push(r[a])},this.onTagVastError=function(e,t){if(o.onTagError&&"function"==typeof o.onTagError){if(t&&Array.isArray(t)&&0<t.length)for(var i=0;i<t.length;i++)Object(n.c)(t[i]);o.onTagError(this)}},this.getDemandTagId=function(){return this.demandTagId},this.getLoadingContainerTimeout=function(){return this.loadingContainerTimeout},this.clearLoadingContainerTimeout=function(){0<this.loadingContainerTimeoutId&&(window.playerLog("clearing loading container timeout "+this.loadingContainerTimeoutId),clearTimeout(this.loadingContainerTimeoutId))},this.setDuration=function(e){this.duration=e},this.getDuration=function(){var e;return null!==(e=this.duration)&&void 0!==e?e:0},this.setSlotType=function(e){this.slotType=e},this.getSlotType=function(){return this.slotType},this.isStopped=function(){return this.stopped},this.setStopped=function(){this.stopped=!0},this.setFiredImpression=function(e){this.firedImpression=e},this.hasFiredImpression=function(){return this.firedImpression},this.shiftPrioritizedMediaFiles=function(){return this.mediaFiles.shift()},this.setLoadingContainerTimeoutId=function(e){this.loadingContainerTimeoutId=e},this.setAdManager=function(e){this.adManager=e},this.getAdManager=function(){return this.adManager},this.getAdType=function(){return this.type}}},function(e,t,i){"use strict";var n=i(22),r=i.n(n),a=i(23),o=i.n(a),s=i(24),l=i.n(s),d=i(25),u=i.n(d),c=i(26),h=i.n(c),f=i(27),p=i.n(f),g=i(28),v=i.n(g),m=i(29),y=i.n(m),b=i(30),w=i.n(b),E=i(31),S=i.n(E),A=i(32),T=i.n(A);function L(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var C=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.icons={maximize:r.a,minimize:o.a,mute:l.a,unmute:u.a,play:h.a,pause:p.a,back:v.a,soundOn:y.a,soundActionMute:S.a,soundActionUnmute:w.a,rightArrow:T.a}}return function(e,t,i){t&&L(e.prototype,t),i&&L(e,i),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"getIcon",value:function(e){return this.icons[e]||""}}]),e}();t.a=C},function(e,t,i){"use strict";i.d(t,"a",function(){return v});var d=i(2);var u=i(1),c=i(4);var h=i(3),f=i(14);function p(e,t,i,n){var r=n.lengthInSeconds,a=void 0===r?null:r,o=n.adSlots,s=void 0===o?null:o,l=n.passbackAfterFirstBiddingWithNoAds,d=void 0!==l&&l;this.widget=e,this.passbackCallback=i,this.lengthInSeconds=a,this.passbackCode=t,this.adSlots=s,null!=this.passbackCode&&null!=this.lengthInSeconds&&0!=this.lengthInSeconds&&null!=this.adSlots&&0!=this.adSlots&&(this.passbackTimeout=null,this.adSlotsCounter=0,this.passbackAfterFirstBiddingWithNoAds=d,0<this.lengthInSeconds&&this.widget.player.subscribe(u.f,function(){clearTimeout(this.passbackTimeout),this.passbackTimeout=setTimeout(function(){this.renderPassback()}.bind(this),1e3*this.lengthInSeconds)}.bind(this)),this.widget.player.subscribe(h.c,function(){clearTimeout(this.passbackTimeout),this.adSlotsCounter=0,this.passbackAfterFirstBiddingWithNoAds=!1}.bind(this)),this.widget.player.subscribe(f.c,function(){this.adSlotsCounter++,(this.adSlots&&this.adSlotsCounter>=this.adSlots||this.passbackAfterFirstBiddingWithNoAds)&&this.renderPassback()}.bind(this)))}p.prototype.renderPassback=function(){clearTimeout(this.passbackTimeout),this.widget.player.DestroyPlayer(),this.passbackCallback()};var n=i(34),r=i(7),a=i(6);function g(e){var t,i,n,r,a,o,s,l;this.isMuted=!(0<e.volume),this.soundOffWidget=this.isMuted,this.initialVolume=(null!==(t=e.volume)&&void 0!==t?t:0)/100,this.includeCountries=null!==(i=e.includeCountries)&&void 0!==i?i:[],this.excludeCountries=null!==(n=e.excludeCountries)&&void 0!==n?n:[],this.hourlyFQ=null!==(r=e.hourlyFQ)&&void 0!==r?r:0,this.dailyFQ=null!==(a=e.dailyFQ)&&void 0!==a?a:0,this.currentCountry=null!==(o=e.currentCountry)&&void 0!==o?o:"",this.cookieDomain=null!==(s=e.cookieDomain)&&void 0!==s?s:top.location.host,this.changeFQOnSoundOff=!1,this.isMP4=null!==(l=e.isMP4)&&void 0!==l&&l}function o(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function s(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?o(Object(i),!0).forEach(function(e){l(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function v(e,t,i,n,r,a){var o,s;if(this.onPassbackCallback=null,this.floaterOOVTimesShown=0,this.floaterOOVTimesShownHourly=0,this.shown=!1,this.loadPlayer=!0,this.startHidden=!1,this.playInitMethod=null,this.pauseOnHiddenTab=!1,this.autoSkipTimeToAutoSkip=null,this.widgetMacros=null!==(o=e.wm)&&void 0!==o?o:{},this.startAdOnAdLoadedEvent=!0,this.windowToListenToEvents=window,this.serverResponse=e,this.prebidVastParameters=null,this.widgetStaticConfig=t,this.playerRequest=i,this.inFriendlyIframe=i.fiframe,this.isMobile=Object(c.b)(e.m),this.playerElement=a,this.isResponsive=c.c.call(this,t.ir,t.irm),c.d.call(this,t.w,t.wm,t.h,t.hm),function(e,t){this.playInitMethod=this.isMobile?t||"autoplay":e||"autoplay"}.call(this,t.pim,t.pimm),c.e.call(this,e.geo),this.apiObservable=r,this.playerScript=n,this.dynamicPixelPath="https://x.trvdp.com/p.gif",this.pixelPath="https://x.trvdp.com/pixel.gif",this.vastPath=i.host+"v"+e.v+"/v.php",this.version=e.v,this.subUserId=i.sid,this.widgetType=t.wt,this.widgetId=i.wid,this.shown=!1,this.pageUrl=i.purl,this.adId=e.cid,this.domain=e.d,this.isLoop=null==t.lp||t.lp,this.repeatCounter=t.rpc,this.browser=e.b,this.isMobile=e.m,this.floaterCloseButtonPosition=null!=t.cbp?t.cbp:"left",this.debugMessages=t.d,this.ip=e.ip||"",this.userAgent=navigator.userAgent||"",this.pixels=e.p,this.opportunityPixel=Object(d.d)(this.pixels,"op",this.pixelPath),this.playerLoadPixel=Object(d.d)(this.pixels,"pl",this.pixelPath),this.isResponsive=c.c.call(this,t.ir,t.irm),this.geoLocation={},this.geoLocation.lat=e.lat,this.geoLocation.long=e.lng,this.geoLocation.country=e.geo,this.osFamily=e.osf,this.osVersion=e.osv,this.isNativeClickOpensNewWindow=t.nnw,this.isABTestingActive=e.isab,this.useCustomCSS=t.ccss,this.isFullscreen=t.f,this.playlistData=e.c,this.vastParameters=e.vt,this.fia=t.fia,this.playOnlyMp4=t.pomp4,this.isPreroll=!1,this.numberOfPrerolls=null!==(s=t.apc)&&void 0!==s?s:1,this.midrollCount=0,this.midrollType=null,this.midrollInterval=0,this.isPostroll=!1,this.autoplay=!0,this.floaterSettings=null,this.continuePlayingAdOnFloaterClose=t.cpaofc,this.allowBiddingOnVideoChangeEvent=!0,this.startContentAfterBiddingSessionEnds=!0,this.soundInitiator=new g(this.createSoundObj()),this.customConfigs=e.ac,this.contentDelayTimeout=0<e.cdt?e.cdt:void 0,this.sellersJsonId=void 0!==e.sj&&void 0!==e.sj.id?e.sj.id:"",this.isMobile?c.f.call(this,t.pcm,t.pwm,t.phm,t.plm,t.pasm,t.pofbm):c.f.call(this,t.pc,t.pw,t.ph,t.pl,t.pas,t.pofb),void 0!==t.aa&&1==t.aa||void 0===t.aa){this.passback=new p(this,this.onPassbackCallback,this.passbackCode,{lengthInSeconds:this.passbackLength,adSlots:this.passbackAdSlots,passbackAfterFirstBiddingWithNoAdsassbackAfterFirstBidding:this.passbackOnFirstBidding}),t.aid?(this.isPreroll=!0,this.midrollCount=1,this.midrollType="c"):(this.isPreroll=1==t.aip,this.midrollType=t.amt,"d"==this.midrollType?this.midrollInterval=t.amd:(this.midrollCount=t.am||0,this.midrollType="c"),this.isPostroll=1==t.aipr);var l={isPreroll:this.isPreroll,midrollType:this.midrollType,midrollInterval:this.midrollInterval,midrollCount:this.midrollCount,isPostroll:this.isPostroll,gdpr:e.g,isClickToPlay:"click_to_play"===this.playInitMethod,usPrivacy:e.ccpam,version:this.version};this.prebidVastParameters&&(l.prebidVastParameters=this.prebidVastParameters),this.ads=l}else this.ads=null;this.player=new u.b}g.prototype.setPlayer=function(e){this.changeFQOnSoundOff&&e.subscribe(u.n,function(){this.isSoundAllowed()}.bind(this))},g.prototype.getIsMuted=function(){return this.isMuted},g.prototype.checkSound=function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return new Promise(function(e){Object(n.a)(this.isMuted&&!t,this.isMP4).then(function(e){e&&this.isSoundAllowed()?(this.isMuted=!1,(this.hourlyFQ||this.dailyFQ)&&(this.changeFQOnSoundOff=!0)):this.isMuted=!0}.bind(this)).catch(function(){this.isMuted=!0}.bind(this)).finally(function(){return e()})}.bind(this))},g.prototype.autoUnmute=function(e){if(!this.soundOffWidget&&!Object(c.a)()){var t,i,n=!1,r=function(){return n=!0},a=function(e){n=!1},o=function(){n||(e.unsubscribe("BlockAutoUnmuteInterval",r),top.document.removeEventListener("click",a),clearInterval(i),e.getPlayerElement().dispatchEvent(new CustomEvent("onAutoUnmuted")),e.unmutePlayerUponInteraction(!1,!0),e.tryTriggerNewOpportunity())};e.subscribe("BlockAutoUnmuteInterval",r),t=setInterval(function(){this.checkSound(!0).finally(function(){this.isMuted||(clearInterval(t),top.document.addEventListener("click",a),i=setInterval(o,400))}.bind(this))}.bind(this),400)}},g.prototype.getInitialVolume=function(){return this.initialVolume},g.prototype.isSoundAllowed=function(){var e,t;if(this.getPreviousValuesFromCookie(),null!==(e=this.includeCountries)&&void 0!==e&&e.length&&Array.isArray(this.includeCountries)){if(!this.includeCountries.includes(this.currentCountry))return!1}else if(null!==(t=this.excludeCountries)&&void 0!==t&&t.length&&Array.isArray(this.excludeCountries)&&this.excludeCountries.includes(this.currentCountry))return!1;return this.allowedByFQ()},g.prototype.getPreviousValuesFromCookie=function(){var e=Object(r.a)(a.h);e=e?JSON.parse(e):{},this.timesSoundOnHourly=e.timesSoundOnHourly,this.soundOnHourlyTimestamp=e.soundOnHourlyTimestamp,this.timesSoundOnDaily=e.timesSoundOnDaily,this.soundOnDailyTimestamp=e.soundOnDailyTimestamp},g.prototype.allowedByFQ=function(){var e=this.hourlyFQ||this.dailyFQ?{}:null,t=0,i=0;if(this.hourlyFQ&&(this.soundOnHourlyTimestamp&&(new Date-new Date(this.soundOnHourlyTimestamp))/a.a<1?(t=this.timesSoundOnHourly,e.soundOnHourlyTimestamp=this.soundOnHourlyTimestamp):(e.timesSoundOnHourly=0,e.soundOnHourlyTimestamp=Date.now()),t>=this.hourlyFQ))return!1;if(this.dailyFQ&&(this.soundOnDailyTimestamp&&(new Date-new Date(this.soundOnDailyTimestamp))/a.a<24?(i=this.timesSoundOnDaily,e.soundOnDailyTimestamp=this.soundOnDailyTimestamp):(e.timesSoundOnDaily=0,e.soundOnDailyTimestamp=Date.now()),i>=this.dailyFQ))return!1;if(null!==e&&(this.dailyFQ&&(e.timesSoundOnDaily=++i),this.hourlyFQ&&(e.timesSoundOnHourly=++t),e)){var n=new Date;n.setTime(n.getTime()+24*a.a),Object(r.c)(a.h,e,n,this.cookieDomain)}return!0},v.prototype.loadVideoPlayer=function(){this.onVideoPlayerReady&&this.onVideoPlayerReady()},v.prototype.getVastPath=function(e){var t="[videoUrl]",i="[videoId]",n=this.vastPath+e+"&ver="+this.version+"&adid="+this.adId+"&videoUrl="+t+"&height=[height]&width=[width]&pageHref="+encodeURIComponent(this.pageUrl)+"&videoId="+i+"&d="+this.domain+"&wid="+this.widgetId+"&suid="+this.subUserId+"&env_browser="+this.browser;return this.isMobile&&(n+="&mobile=true"),this.isABTestingActive&&(n+="&isab=true"),this.debugMessages&&(n+="&dm=true"),n},v.prototype.createSoundObj=function(){var e;return s(s({},{volume:this.isMobile?void 0!==this.widgetStaticConfig.vm?this.widgetStaticConfig.vm:0:void 0!==this.widgetStaticConfig.vd?this.widgetStaticConfig.vd:0,includeCountries:this.isMobile?this.widgetStaticConfig.socim:this.widgetStaticConfig.soci,excludeCountries:this.isMobile?this.widgetStaticConfig.socem:this.widgetStaticConfig.soce,hourlyFQ:this.isMobile?this.widgetStaticConfig.sofqhm:this.widgetStaticConfig.sofqh,dailyFQ:this.isMobile?this.widgetStaticConfig.sofqdm:this.widgetStaticConfig.sofqd,isMP4:null!==(e=this.widgetStaticConfig.pomp4)&&void 0!==e&&e}),{},{currentCountry:this.serverResponse.geo,cookieDomain:this.domain})},v.prototype.renderVideoPlayer=function(){if(!this.shown){this.shown=!0;var e={playerId:"br_video_player_"+this.adId,width:this.width,height:this.height,isVertical:this.width<this.height,autoplay:this.autoplay,vastPath:this.getVastPath(this.vastParameters),debugMessages:this.debugMessages,repeat:this.isLoop,repeatCounter:this.repeatCounter,opportunityPixel:this.opportunityPixel,pixelPath:this.pixelPath,playerLoadPixel:this.playerLoadPixel,widgetId:this.widgetId,userFailResponseHistory:this.userFailResponseHistory,domain:this.domain,widgetType:this.widgetType,isResponsive:this.isResponsive,ads:this.ads,isNativeClickOpensNewWindow:this.isNativeClickOpensNewWindow,isFullscreen:this.isFullscreen,pageUrl:this.pageUrl,ip:this.ip,geoLocation:this.geoLocation,apiObservable:this.apiObservable,hideOnPlaylistComplete:this.hideOnPlaylistComplete,autoSkipDuration:this.autoSkipTimeToAutoSkip,autoSkipTimeToStopPlayer:this.autoSkipTimeToStopPlayer,playerElement:this.playerElement,startHidden:this.startHidden,osVersion:this.osVersion,osFamily:this.osFamily,clickPixel:this.pixels.cl,clickPixelPath:"https://x.trvdp.com/c.gif",turnOnSoundWhenSkipAdOOV:!this.isAdOnlyOOVMethod,autoUnmute:this.soundInitiator.autoUnmute.bind(this.soundInitiator),widgetMacros:this.widgetMacros,customConfigs:this.customConfigs,contentDelayTimeout:this.contentDelayTimeout,continuePlayingAdOnFloaterClose:this.continuePlayingAdOnFloaterClose,playlistContent:null};if(e.sellersJsonId=this.sellersJsonId,this.playlistData&&this.playlistData.pl&&0<this.playlistData.pl.length&&"in_read"!=this.widgetType){for(var t=0;t<this.playlistData.pl.length;t++){for(var i=0;i<this.playlistData.pl[t].f.length;i++)this.playlistData.pl[t].f[i].p="https://"+this.playlistData.bu+this.playlistData.pl[t].f[i].p;this.playlistData.pl[t].p="https://src.trvdp.com"+this.playlistData.pl[t].p}e.playlistContent=this.playlistData.pl}if(this.floaterSettings&&(e.floaterSettings=this.floaterSettings),e.subUserId=this.subUserId,e.playOnlyMp4=this.playOnlyMp4,this.pauseOnHiddenTab&&(e.pauseOnHiddenTab=this.pauseOnHiddenTab),e.ads&&void 0!==this.startAdOnAdLoadedEvent&&(e.ads.startAdOnAdLoadedEvent=this.startAdOnAdLoadedEvent),e.fia=this.fia,null!=this.setupParameters&&(e=function(e,t){var i,n={};for(i in e)n[i]=e[i];for(i in t)n[i]=t[i];return n}(e,this.setupParameters)),this.useCustomCSS){var n="https://src.trvdp.com/css/"+this.subUserId+"/"+this.widgetId+".css";!function(e){var t=document.createElement("link");t.rel="stylesheet",t.href=e,document.head.appendChild(t)}(n),e.cssLink=n}try{this.soundInitiator.checkSound().then(function(){e.volume=this.soundInitiator.getInitialVolume(),e.mute=this.soundInitiator.getIsMuted(),this.soundInitiator.setPlayer(this.player),this.player.setup(e,null)}.bind(this))}catch(e){Object(d.b)("thisplayersetupErr",this.playerRequest,e)}}},v.prototype.getDynamicPixel=function(e,t,i){return this.dynamicPixelPath+"?e="+this.pixels[e]+"&"+t+"="+i}},function(e,t,i){"use strict";i.d(t,"a",function(){return n});var a=i(4);function n(e,t,i,n){var r;if(null==document.createElement("video").canPlayType||!(0<document.createElement("video").canPlayType("video/mp4").length))throw"html5 and video is not supported";this.serverResponse=e,this.widgetStaticConfig=t,this.playerRequest=i,this.playerScript=n,this.widgetId=t.id,this.pageDocument=document,this.insideFriendlyIframe=!1,this.adId=e.cid,this.subUserId=e.sid,this.passbackRendered=!1,this.domain=null,this.pageUrl=null,this.playerLoaded=!1,this.isMobile=Object(a.b)(e.m),this.insideFriendlyIframe=i.fiframe,this.apiObservable=null,this.playerScript=n,this.passbackCode=null,this.passbackWidth=null,this.passbackHeight=null,this.passbackAdSlots=null,this.passbackLength=null,this.width=null,this.height=null,this.parentElement=null,this.loadOnlyOnce=null==e?void 0:null===(r=e.w)||void 0===r?void 0:r.loo,this.isResponsive=a.c.call(this,t.ir,t.irm),a.d.call(this,t.w,t.wm,t.h,t.hm),this.isMobile?a.f.call(this,t.pcm,t.pwm,t.phm,t.plm,t.pasm,t.pofbm):a.f.call(this,t.pc,t.pw,t.ph,t.pl,t.pas,t.pofb)}n.prototype.SetPlacementPromise=function(){var a=this;return new Promise(function(e,t){var i,n=!1;if("HEAD"===(null===(i=a.playerScript.parentNode)||void 0===i?void 0:i.nodeName))if("complete"===document.readyState)a.SetPlacement(),e();else var r=setInterval(function(){"complete"===document.readyState&&(n||(n=!0,clearInterval(r),a.SetPlacement(),e()))},100);else a.SetPlacement(),e()})},n.prototype.SetPlacement=function(){var e=null;if("function"==typeof this.setPlacementForWidgetType&&(e=this.setPlacementForWidgetType()),!e){for(var t=document.getElementsByClassName("truvid_placeholder_"+this.widgetId),i=0;i<t.length;i++){var n=t[i].getAttribute("data-used");if(""==t[i].innerHTML&&null==n){t[i].setAttribute("data-used","true"),e=t[i];break}}if(!e)if("HEAD"!=this.playerScript.parentElement.nodeName){var r=document.createElement("div");this.playerScript.parentElement.insertBefore(r,this.playerScript.nextSibling),e=r}else e=e||document.getElementsByTagName("body")[0]}this.parentElement=e},n.prototype.renderFallbacks=function(){return!(this.passbackOnFirstBidding||!this.passbackCode||null!=this.passbackAdSlots||null!=this.passbackLength)&&(this.renderPassback(),!0)},n.prototype.renderPassback=function(){var e=this.parentElement,t=document.createElement("iframe");e.style.height=this.passbackHeight+"px",t.id="passback_truvid_"+this.adId,t.width=this.passbackWidth,t.height=this.passbackHeight,t.style.cssText="width: "+this.passbackWidth+"px; height: "+this.passbackHeight+"px; border: none;",e.style.display="flex",e.style.flexDirection="row",e.style.justifyContent="center",e.appendChild(t),t.contentWindow.document.open(),t.contentWindow.document.write('<body style="margin: 0;">'+decodeURIComponent(this.passbackCode)+"</body>"),t.contentWindow.document.close();try{if(this.insideFriendlyIframe){var i=window.frameElement;i.style.cssText="height: "+this.passbackHeight+"px; width: "+this.passbackWidth+"px; border: none; margin-left: "+(i.parentNode.getBoundingClientRect().width-parseFloat(i.style.width))/2+"px; margin-top: "+(i.parentNode.getBoundingClientRect().height-parseFloat(i.style.height))/2+"px",t.style.marginLeft="0px"}}catch(e){}this.passbackRendered=!0},n.prototype.switchToPassback=function(){if(!this.passbackRendered){var e=this.parentElement;if(e)for(;0<e.childNodes.length;)e.removeChild(e.childNodes[0]);else this.SetPlacement();e.style.width=this.width+"px",e.style.height=this.height+"px",this.renderPassback()}},n.prototype.checkLoadOnlyOnce=function(){if(window.trv_widgets_loaded_once||(window.trv_widgets_loaded_once={}),window.trv_widgets_loaded_once[this.widgetId])throw new Error('Load only Once" flag prevents a second instance of this widget Id');window.trv_widgets_loaded_once[this.widgetId]=!0},n.prototype.loadPlayer=function(i){var n=this;return new Promise(function(e,t){this.playerLoaded||(this.playerLoaded=!0,this.apiObservable=i,this.loadOnlyOnce&&this.checkLoadOnlyOnce(),this.SetPlacementPromise().then(function(){this.renderFallbacks()||(this.renderWidget(),e())}.bind(n)).catch(function(e){t(e)}))}.bind(this))},n.prototype.getWidget=function(){return this.widgetObject}},function(e,t){e.exports='<svg viewBox="0 0 28 28" fill="ffffff" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 24.5V17.5H5.83333V22.1667H10.5V24.5H3.5ZM17.5 24.5V22.1667H22.1667V17.5H24.5V24.5H17.5ZM3.5 10.5V3.5H10.5V5.83333H5.83333V10.5H3.5ZM22.1667 10.5V5.83333H17.5V3.5H24.5V10.5H22.1667Z" fill="#ffffff"></path></svg>'},function(e,t){e.exports='<svg viewBox="0 0 28 28" fill="ffffff" xmlns="http://www.w3.org/2000/svg"><path d="M22.5 16.5L22.5 18.8333L17.8333 18.8333L17.8333 23.5L15.5 23.5L15.5 16.5L22.5 16.5Z" fill="#ffffff"></path><path d="M12.5 12.5L12.5 5.5L10.1667 5.5L10.1667 10.1667L5.5 10.1667L5.5 12.5L12.5 12.5Z" fill="#ffffff"></path><path d="M17.8333 10.1667L17.8333 5.5L15.5 5.5L15.5 12.5L22.5 12.5L22.5 10.1667L17.8333 10.1667Z" fill="#ffffff"></path><path d="M12.5 23.5L12.5 16.5L5.5 16.5L5.5 18.8333L10.1667 18.8333L10.1667 23.5L12.5 23.5Z" fill="#ffffff"></path></svg>'},function(e,t){e.exports='<svg viewBox="0 0 28 28" fill="ffffff" xmlns="http://www.w3.org/2000/svg"><path d="M19.5708 22.8375C19.3569 22.9736 19.143 23.1 18.9292 23.2167C18.7153 23.3333 18.4917 23.4403 18.2583 23.5375C17.9667 23.6736 17.6701 23.6736 17.3687 23.5375C17.0673 23.4014 16.8583 23.1778 16.7417 22.8667C16.625 22.575 16.6396 22.2882 16.7854 22.0062C16.9312 21.7243 17.15 21.5153 17.4417 21.3792C17.5778 21.3208 17.7042 21.2576 17.8208 21.1896C17.9375 21.1215 18.0542 21.0486 18.1708 20.9708L14 17.2667V20.5042C14 21.0292 13.7618 21.3937 13.2854 21.5979C12.809 21.8021 12.3861 21.7194 12.0167 21.35L8.16665 17.5H4.66665C4.3361 17.5 4.05901 17.3882 3.8354 17.1646C3.61179 16.941 3.49998 16.6639 3.49998 16.3333V11.6667C3.49998 11.3361 3.61179 11.059 3.8354 10.8354C4.05901 10.6118 4.3361 10.5 4.66665 10.5H7.23332L2.44998 5.71666C2.23609 5.50277 2.12915 5.23055 2.12915 4.9C2.12915 4.56944 2.23609 4.29722 2.44998 4.08333C2.66387 3.86944 2.93609 3.7625 3.26665 3.7625C3.59721 3.7625 3.86943 3.86944 4.08332 4.08333L23.9167 23.9167C24.1305 24.1306 24.2375 24.4028 24.2375 24.7333C24.2375 25.0639 24.1305 25.3361 23.9167 25.55C23.7028 25.7639 23.4305 25.8708 23.1 25.8708C22.7694 25.8708 22.4972 25.7639 22.2833 25.55L19.5708 22.8375ZM22.8667 19.6L21.175 17.9083C21.5055 17.3056 21.7535 16.6736 21.9187 16.0125C22.084 15.3514 22.1667 14.6708 22.1667 13.9708C22.1667 12.3569 21.7389 10.884 20.8833 9.55208C20.0278 8.22014 18.8805 7.22361 17.4417 6.5625C17.15 6.42639 16.9361 6.21736 16.8 5.93541C16.6639 5.65347 16.6444 5.36666 16.7417 5.075C16.8583 4.76389 17.0673 4.54027 17.3687 4.40416C17.6701 4.26805 17.9764 4.26805 18.2875 4.40416C20.1736 5.24027 21.6805 6.51389 22.8083 8.225C23.9361 9.93611 24.5 11.8514 24.5 13.9708C24.5 15.0014 24.359 15.9931 24.0771 16.9458C23.7951 17.8986 23.3917 18.7833 22.8667 19.6ZM18.9583 15.6917L16.3333 13.0667V10.325C16.3333 10.0917 16.4354 9.92152 16.6396 9.81458C16.8437 9.70764 17.043 9.7125 17.2375 9.82916C17.8792 10.2375 18.375 10.85 18.725 11.6667C19.075 12.4833 19.25 13.2611 19.25 14C19.25 14.2917 19.2257 14.5785 19.1771 14.8604C19.1285 15.1424 19.0555 15.4194 18.9583 15.6917ZM14 10.7333L10.9667 7.7L12.0167 6.65C12.3861 6.28055 12.809 6.19791 13.2854 6.40208C13.7618 6.60625 14 6.97083 14 7.49583V10.7333Z" fill="#ffffff"></path></svg>'},function(e,t){e.exports='<svg viewBox="0 0 28 28" fill="ffffff" xmlns="http://www.w3.org/2000/svg"><path d="M22.1667 13.9708C22.1667 12.3569 21.7389 10.884 20.8833 9.55208C20.0278 8.22013 18.8806 7.22361 17.4417 6.56249C17.15 6.42638 16.9361 6.21736 16.8 5.93541C16.6639 5.65347 16.6444 5.36666 16.7417 5.07499C16.8583 4.76388 17.0674 4.54027 17.3687 4.40416C17.6701 4.26805 17.9764 4.26805 18.2875 4.40416C20.1736 5.24027 21.6806 6.51874 22.8083 8.23958C23.9361 9.96041 24.5 11.8708 24.5 13.9708C24.5 16.0708 23.9361 17.9812 22.8083 19.7021C21.6806 21.4229 20.1736 22.7014 18.2875 23.5375C17.9764 23.6736 17.6701 23.6736 17.3687 23.5375C17.0674 23.4014 16.8583 23.1778 16.7417 22.8667C16.6444 22.575 16.6639 22.2882 16.8 22.0062C16.9361 21.7243 17.15 21.5153 17.4417 21.3792C18.8806 20.7181 20.0278 19.7215 20.8833 18.3896C21.7389 17.0576 22.1667 15.5847 22.1667 13.9708ZM8.16667 17.5H4.66667C4.33611 17.5 4.05903 17.3882 3.83542 17.1646C3.61181 16.941 3.5 16.6639 3.5 16.3333V11.6667C3.5 11.3361 3.61181 11.059 3.83542 10.8354C4.05903 10.6118 4.33611 10.5 4.66667 10.5H8.16667L12.0167 6.65C12.3861 6.28055 12.809 6.19791 13.2854 6.40208C13.7618 6.60625 14 6.97083 14 7.49583V20.5042C14 21.0292 13.7618 21.3937 13.2854 21.5979C12.809 21.8021 12.3861 21.7194 12.0167 21.35L8.16667 17.5ZM19.25 14C19.25 14.8167 19.0653 15.5896 18.6958 16.3187C18.3264 17.0479 17.8403 17.6458 17.2375 18.1125C17.0431 18.2292 16.8438 18.234 16.6396 18.1271C16.4354 18.0201 16.3333 17.85 16.3333 17.6167V10.325C16.3333 10.0917 16.4354 9.92152 16.6396 9.81458C16.8438 9.70763 17.0431 9.7125 17.2375 9.82916C17.8403 10.3153 18.3264 10.9278 18.6958 11.6667C19.0653 12.4056 19.25 13.1833 19.25 14Z" fill="#ffffff"></path></svg>'},function(e,t){e.exports='<svg viewBox="0 0 28 28" fill="ffffff" xmlns="http://www.w3.org/2000/svg"><path d="M9.33337 20.0375V7.9625C9.33337 7.63195 9.45004 7.35487 9.68337 7.13125C9.91671 6.90764 10.1889 6.79584 10.5 6.79584C10.5973 6.79584 10.6993 6.81042 10.8063 6.83959C10.9132 6.86875 11.0153 6.9125 11.1125 6.97084L20.6209 13.0083C20.7959 13.125 20.9271 13.2708 21.0146 13.4458C21.1021 13.6208 21.1459 13.8056 21.1459 14C21.1459 14.1944 21.1021 14.3792 21.0146 14.5542C20.9271 14.7292 20.7959 14.875 20.6209 14.9917L11.1125 21.0292C11.0153 21.0875 10.9132 21.1313 10.8063 21.1604C10.6993 21.1896 10.5973 21.2042 10.5 21.2042C10.1889 21.2042 9.91671 21.0924 9.68337 20.8688C9.45004 20.6451 9.33337 20.3681 9.33337 20.0375Z" fill="#ffffff"></path></svg>'},function(e,t){e.exports='<svg viewBox="0 0 28 28" fill="ffffff" xmlns="http://www.w3.org/2000/svg"><path d="M18.0834 21.5833C17.6062 21.5833 17.1953 21.4109 16.8505 21.0661C16.5058 20.7214 16.3334 20.3105 16.3334 19.8333V8.16666C16.3334 7.68953 16.5058 7.27859 16.8505 6.93384C17.1953 6.58907 17.6062 6.41669 18.0834 6.41669H18.9584C19.4355 6.41669 19.8465 6.58907 20.1912 6.93384C20.536 7.27859 20.7084 7.68953 20.7084 8.16666V19.8333C20.7084 20.3105 20.536 20.7214 20.1912 21.0661C19.8465 21.4109 19.4355 21.5833 18.9584 21.5833H18.0834ZM9.04169 21.5833C8.56456 21.5833 8.15362 21.4109 7.80887 21.0661C7.46412 20.7214 7.29175 20.3105 7.29175 19.8333V8.16666C7.29175 7.68953 7.46412 7.27859 7.80887 6.93384C8.15362 6.58907 8.56456 6.41669 9.04169 6.41669H9.91675C10.3939 6.41669 10.8048 6.58907 11.1496 6.93384C11.4943 7.27859 11.6667 7.68953 11.6667 8.16666V19.8333C11.6667 20.3105 11.4943 20.7214 11.1496 21.0661C10.8048 21.4109 10.3939 21.5833 9.91675 21.5833H9.04169Z" fill="#ffffff"></path></svg>'},function(e,t){e.exports='<svg viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.57206 10.6252L7.32848 13.3816C7.45241 13.5055 7.51572 13.654 7.5184 13.8271C7.52106 14.0002 7.45776 14.1487 7.32848 14.2726C7.20456 14.388 7.0574 14.4457 6.887 14.4457C6.7166 14.4457 6.5737 14.388 6.45831 14.2726L2.71313 10.5274C2.63514 10.4494 2.58012 10.3668 2.54806 10.2796C2.51602 10.1923 2.5 10.0988 2.5 9.99912C2.5 9.8994 2.51602 9.80628 2.54806 9.71975C2.58012 9.63321 2.63514 9.55094 2.71313 9.47296L6.45031 5.72777C6.56391 5.61238 6.70849 5.55469 6.88406 5.55469C7.05962 5.55469 7.20463 5.61192 7.31908 5.72637C7.44395 5.85122 7.50557 5.99885 7.50396 6.16925C7.50236 6.33965 7.44387 6.48255 7.32848 6.59794L4.58006 9.37521H14.3173C14.4944 9.37521 14.6428 9.43512 14.7626 9.55496C14.8824 9.67481 14.9423 9.82331 14.9423 10.0005C14.9423 10.1776 14.8824 10.326 14.7626 10.4457C14.6428 10.5653 14.4944 10.6252 14.3173 10.6252H4.57206Z" fill="#fff"></path></svg>'},function(e,t){e.exports='<svg viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.3316 3.11133C14.8512 3.11327 14.384 3.27227 13.9985 3.56503L7.48378 8.55577H4.22198C3.51483 8.55577 2.83664 8.84258 2.33661 9.35309C1.83658 9.86361 1.55566 10.556 1.55566 11.278V16.7224C1.55566 17.4444 1.83658 18.1368 2.33661 18.6473C2.83664 19.1579 3.51483 19.4447 4.22198 19.4447H7.48378L13.9985 24.4354C14.384 24.7282 14.8512 24.8872 15.3316 24.8891C15.9209 24.8891 16.4861 24.6501 16.9028 24.2247C17.3195 23.7992 17.5536 23.2222 17.5536 22.6206V5.37985C17.5536 4.7782 17.3195 4.20119 16.9028 3.77576C16.4861 3.35033 15.9209 3.11133 15.3316 3.11133Z" fill="#E0E2E6"></path><path d="M23.5795 6.94059C23.4966 6.85598 23.3982 6.78887 23.2899 6.74308C23.1817 6.69729 23.0656 6.67373 22.9484 6.67373C22.8312 6.67373 22.7152 6.69729 22.6069 6.74308C22.4986 6.78887 22.4003 6.85598 22.3174 6.94059C22.2345 7.02519 22.1688 7.12563 22.1239 7.23618C22.0791 7.34672 22.056 7.4652 22.056 7.58485C22.056 7.7045 22.0791 7.82298 22.1239 7.93352C22.1688 8.04406 22.2345 8.1445 22.3174 8.22911C23.8153 9.76036 24.6567 11.836 24.6567 14.0002C24.6567 16.1644 23.8153 18.2401 22.3174 19.7713C22.2341 19.8557 22.168 19.956 22.1229 20.0666C22.0777 20.1772 22.0545 20.2958 22.0545 20.4156C22.0545 20.5354 22.0777 20.654 22.1229 20.7646C22.168 20.8751 22.2341 20.9755 22.3174 21.0598C22.4 21.1449 22.4983 21.2124 22.6066 21.2585C22.7149 21.3045 22.8311 21.3283 22.9484 21.3283C23.0658 21.3283 23.1819 21.3045 23.2902 21.2585C23.3985 21.2124 23.4968 21.1449 23.5795 21.0598C24.4878 20.1329 25.2083 19.0324 25.6999 17.821C26.1915 16.6097 26.4446 15.3114 26.4446 14.0002C26.4446 12.689 26.1915 11.3907 25.6999 10.1794C25.2083 8.96807 24.4878 7.86752 23.5795 6.94059Z" fill="#E0E2E6"></path><path d="M21.0553 9.50855C20.975 9.41419 20.8764 9.33779 20.7658 9.28417C20.6551 9.23054 20.5349 9.20083 20.4124 9.19691C20.29 9.19299 20.1682 9.21495 20.0545 9.26139C19.9407 9.30784 19.8377 9.37777 19.7517 9.46681C19.6657 9.55585 19.5987 9.66207 19.5548 9.7788C19.5109 9.89554 19.4912 10.0203 19.4967 10.1452C19.5023 10.2701 19.5331 10.3925 19.5872 10.5046C19.6413 10.6168 19.7175 10.7164 19.8111 10.7971C20.6414 11.6475 21.1077 12.7994 21.1077 14.0002C21.1077 15.2011 20.6414 16.3529 19.8111 17.2034C19.6863 17.3297 19.601 17.4911 19.566 17.6669C19.531 17.8428 19.5478 18.0253 19.6144 18.1914C19.681 18.3575 19.7943 18.4997 19.9401 18.6C20.0858 18.7003 20.2574 18.7543 20.4332 18.755C20.6664 18.754 20.8898 18.6595 21.0553 18.4919C21.6331 17.9021 22.0914 17.2018 22.4041 16.4311C22.7168 15.6604 22.8778 14.8344 22.8778 14.0002C22.8778 13.166 22.7168 12.34 22.4041 11.5693C22.0914 10.7986 21.6331 10.0984 21.0553 9.50855Z" fill="#E0E2E6"></path></svg>'},function(e,t){e.exports='<svg viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="36" height="36" rx="12" fill="black" fill-opacity="0.5"></rect><path d="M18.9511 10.2227C18.6079 10.224 18.2742 10.3376 17.9988 10.5467L13.3455 14.1115H11.0156C10.5105 14.1115 10.0261 14.3164 9.6689 14.6811C9.31174 15.0457 9.11108 15.5403 9.11108 16.056V19.9449C9.11108 20.4606 9.31174 20.9552 9.6689 21.3198C10.0261 21.6845 10.5105 21.8893 11.0156 21.8893H13.3455L17.9988 25.4541C18.2742 25.6633 18.6079 25.7768 18.9511 25.7782C19.372 25.7782 19.7757 25.6075 20.0733 25.3036C20.371 24.9997 20.5382 24.5876 20.5382 24.1578V11.843C20.5382 11.4133 20.371 11.0011 20.0733 10.6973C19.7757 10.3934 19.372 10.2227 18.9511 10.2227Z" fill="#E0E2E6"></path><path d="M24.8424 12.9578C24.7832 12.8974 24.7129 12.8495 24.6356 12.8168C24.5582 12.7841 24.4753 12.7672 24.3916 12.7672C24.3079 12.7672 24.225 12.7841 24.1477 12.8168C24.0704 12.8495 24.0001 12.8974 23.9409 12.9578C23.8817 13.0183 23.8348 13.09 23.8027 13.169C23.7707 13.2479 23.7542 13.3326 23.7542 13.418C23.7542 13.5035 23.7707 13.5881 23.8027 13.6671C23.8348 13.746 23.8817 13.8178 23.9409 13.8782C25.0109 14.972 25.6118 16.4546 25.6118 18.0004C25.6118 19.5463 25.0109 21.0289 23.9409 22.1227C23.8814 22.1829 23.8342 22.2546 23.8019 22.3336C23.7697 22.4126 23.7531 22.4973 23.7531 22.5828C23.7531 22.6684 23.7697 22.7531 23.8019 22.8321C23.8342 22.9111 23.8814 22.9828 23.9409 23.043C23.9999 23.1038 24.0701 23.152 24.1475 23.1849C24.2248 23.2178 24.3078 23.2347 24.3916 23.2347C24.4754 23.2347 24.5584 23.2178 24.6358 23.1849C24.7131 23.152 24.7834 23.1038 24.8424 23.043C25.4912 22.3809 26.0058 21.5948 26.357 20.7296C26.7081 19.8644 26.8889 18.937 26.8889 18.0004C26.8889 17.0639 26.7081 16.1365 26.357 15.2713C26.0058 14.406 25.4912 13.6199 24.8424 12.9578Z" fill="#E0E2E6"></path><path d="M23.0394 14.7921C22.982 14.7247 22.9116 14.6701 22.8326 14.6318C22.7536 14.5935 22.6677 14.5723 22.5802 14.5695C22.4928 14.5667 22.4057 14.5824 22.3245 14.6156C22.2433 14.6487 22.1697 14.6987 22.1082 14.7623C22.0468 14.8259 21.999 14.9018 21.9676 14.9851C21.9363 15.0685 21.9222 15.1576 21.9261 15.2468C21.9301 15.3361 21.9521 15.4235 21.9908 15.5036C22.0294 15.5837 22.0838 15.6548 22.1507 15.7125C22.7438 16.3199 23.0768 17.1427 23.0768 18.0004C23.0768 18.8582 22.7438 19.6809 22.1507 20.2884C22.0615 20.3787 22.0006 20.4939 21.9756 20.6195C21.9506 20.7451 21.9626 20.8755 22.0102 20.9941C22.0577 21.1128 22.1387 21.2143 22.2428 21.286C22.3469 21.3577 22.4695 21.3962 22.595 21.3967C22.7616 21.396 22.9212 21.3285 23.0394 21.2088C23.4521 20.7875 23.7795 20.2873 24.0029 19.7368C24.2262 19.1863 24.3412 18.5963 24.3412 18.0004C24.3412 17.4046 24.2262 16.8146 24.0029 16.2641C23.7795 15.7136 23.4521 15.2134 23.0394 14.7921Z" fill="#E0E2E6"></path></svg>'},function(e,t){e.exports='<svg viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="36" height="36" rx="12" fill="black" fill-opacity="0.5"></rect><path d="M23.7142 11.8431C23.7142 11.4133 23.547 11.0012 23.2493 10.6973C22.9516 10.3934 22.5479 10.2227 22.1269 10.2227C21.7837 10.2241 21.4499 10.3376 21.1746 10.5468L17.0031 13.7421L23.7142 19.5754V11.8431Z" fill="#E0E2E6"></path><path d="M26.6666 24.6375L10.1587 10.3782C10.0308 10.2665 9.86454 10.2113 9.69665 10.2246C9.52876 10.238 9.37295 10.3189 9.2635 10.4495C9.15404 10.5802 9.09991 10.7499 9.11301 10.9213C9.12611 11.0926 9.20536 11.2517 9.33334 11.3634L13.0095 14.5393C12.785 14.7204 12.6034 14.9508 12.4781 15.2134C12.3528 15.4759 12.287 15.7639 12.2857 16.056V19.9449C12.2857 20.4606 12.4864 20.9552 12.8436 21.3198C13.2008 21.6845 13.6853 21.8893 14.1905 21.8893H16.5206L21.1746 25.4541C21.4499 25.6633 21.7837 25.7768 22.1269 25.7782C22.5479 25.7782 22.9516 25.6075 23.2493 25.3036C23.547 24.9997 23.7142 24.5876 23.7142 24.1578V23.7884L25.8412 25.6227C25.9562 25.7231 26.1026 25.7782 26.2539 25.7782C26.3837 25.7782 26.5104 25.7376 26.6169 25.6619C26.7234 25.5861 26.8046 25.4789 26.8495 25.3546C26.8945 25.2303 26.9011 25.0949 26.8684 24.9667C26.8357 24.8385 26.7652 24.7236 26.6666 24.6375Z" fill="#E0E2E6"></path></svg>'},function(e,t){e.exports='<svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_66_3112)"><g filter="url(#filter0_d_66_3112)"><path d="M27.2664 24.0063L15.4023 12.745C14.999 12.3622 14.7927 11.881 14.7833 11.3015C14.774 10.722 14.9803 10.232 15.4023 9.83144C15.8243 9.43087 16.3359 9.23058 16.9371 9.23058C17.5383 9.23058 18.0499 9.43087 18.4718 9.83144L31.5627 22.2571C31.8354 22.5159 32.0277 22.7888 32.1397 23.0759C32.2517 23.363 32.3077 23.6731 32.3077 24.0063C32.3077 24.3395 32.2517 24.6497 32.1397 24.9368C32.0277 25.2239 31.8354 25.4968 31.5627 25.7556L18.4718 38.1812C18.0686 38.5641 17.5616 38.7599 16.9511 38.7688C16.3405 38.7776 15.8243 38.5818 15.4023 38.1812C14.9803 37.7807 14.7693 37.2951 14.7693 36.7245C14.7693 36.1538 14.9803 35.6682 15.4023 35.2677L27.2664 24.0063Z" fill="white"></path></g></g><defs><filter id="filter0_d_66_3112" x="2.76929" y="-2.76953" width="41.5385" height="53.5386" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset></feOffset><feGaussianBlur stdDeviation="6"></feGaussianBlur><feComposite in2="hardAlpha" operator="out"></feComposite><feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0"></feColorMatrix><feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_66_3112"></feBlend><feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_66_3112" result="shape"></feBlend></filter><clipPath id="clip0_66_3112"><rect width="48" height="48" fill="white"></rect></clipPath></defs></svg>'},function(r,a,e){(function(e){var t,i;function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/*!
 * Swipe 2.3.1
 *
 * Brad Birdsall
 * Copyright 2013, MIT License
 *
*/i=(i=this)||{},void 0===(t=function(){return i.Swipe=function(){var U="object"==("undefined"==typeof self?"undefined":n(self))&&self.self===self&&self||"object"==(void 0===e?"undefined":n(e))&&e.global===e&&e||this,j=U.document;function i(u,c){"use strict";var a,e,o={},s={},l=(c=c||{},c.auto||0),t=!1,i=function(){},d=function(e){setTimeout(e||i,0)},n=function(e){return!!e&&("boolean"!=typeof e.cancelable||e.cancelable)};Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),i=t.length;0<=--i&&t.item(i)!==this;);return-1<i});var h={addEventListener:!!U.addEventListener,passiveEvents:function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});U.addEventListener("testEvent",null,e),U.removeEventListener("testEvent",null,e)}catch(e){t=!1}return t}(),touch:"ontouchstart"in U||U.DocumentTouch&&j instanceof DocumentTouch,transitions:function(e){var t=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(var i in t)if(void 0!==e.style[t[i]])return!0;return!1}(j.createElement("swipe"))};if(u){var f,p,g,v,m,y=c.playerObj,b=u.children[0],w=parseInt(c.startSlide,10)||0,E=!!c.vertical,S=c.speed||300;c.continuous=void 0===c.continuous||c.continuous;var A=function(e,t,i){return e.currentStyle?i=e.currentStyle.direction:U.getComputedStyle&&(i=U.getComputedStyle(e,null).getPropertyValue("direction")),E?"top":"rtl"===i?"right":"left"}(u);c.autoRestart=void 0!==c.autoRestart&&c.autoRestart;var T=function(i,n){n=n||100;var r=null;function a(){if(r)clearTimeout(r)}function e(){var e=this;var t=arguments;a();r=setTimeout(function(){r=null;i.apply(e,t)},n)}return e.cancel=a,e}(r),L={handleEvent:function(e){if(!t||"resize"===e.type){switch(e.type){case"mousedown":case"touchstart":this.start(e);break;case"mousemove":case"touchmove":this.move(e);break;case"mouseup":case"mouseleave":case"touchend":this.end(e);break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":this.transitionEnd(e);break;case"resize":T()}c.stopPropagation&&e.stopPropagation()}},start:function(e){var t;t=V(e)?e:e.touches[0],c.ignore&&t.target.matches(c.ignore)||(V(e)&&e.preventDefault(),o={x:t.pageX,y:t.pageY,time:+new Date},a=void 0,s={},V(e)?(b.addEventListener("mousemove",this,!1),b.addEventListener("mouseup",this,!1),b.addEventListener("mouseleave",this,!1)):(b.addEventListener("touchmove",this,!!h.passiveEvents&&{passive:!1}),b.addEventListener("touchend",this,!1)),function(e,t){c.dragStart&&c.dragStart(e,t)}(R(),f[w]))},move:function(e){var t;if(V(e))t=e;else{if(1<e.touches.length||e.scale&&1!==e.scale)return;c.disableScroll&&n(e)&&e.preventDefault(),t=e.touches[0]}s={x:t.pageX-o.x,y:t.pageY-o.y},void 0===a&&(a=!!(E&&Math.abs(s.x)>2*Math.abs(s.y)||!E&&2*Math.abs(s.x)<Math.abs(s.y))),E&&(a=!1),a||(n(e)&&e.preventDefault(),_(),c.continuous?(F(I(w-1),(E?s.y:s.x)+p[I(w-1)],0),F(w,(E?s.y:s.x)+p[w],0),F(I(w+1),(E?s.y:s.x)+p[I(w+1)],0)):(E?s.y=s.y/(!w&&0<s.y||w===f.length-1&&s.y<0?Math.abs(s.y)/v+1:1):s.x=s.x/(!w&&0<s.x||w===f.length-1&&s.x<0?Math.abs(s.x)/g+1:1),F(w-1,(E?s.y:s.x)+p[w-1],0),F(w,(E?s.y:s.x)+p[w],0),F(w+1,(E?s.y:s.x)+p[w+1],0)))},end:function(e){var t=+new Date-o.time,i=Number(t)<250&&20<Math.abs(E?s.y:s.x)||Math.abs(E?s.y:s.x)>(E?v:g)/2,n=!w&&0<(E?s.y:s.x)||w===f.length-1&&(E?s.y:s.x)<0;c.continuous&&(n=!1);var r=E?Math.abs(s.y)/s.y:Math.abs(s.x)/s.x;a&&!E||(i&&!n?(w=r<0?(c.continuous?(D(I(w-1),-(E?v:g),0),D(I(w+2),E?v:g,0)):D(w-1,-(E?v:g),0),D(w,p[w]-(E?v:g),S),D(I(w+1),p[I(w+1)]-(E?v:g),S),I(w+1)):(c.continuous?(D(I(w+1),E?v:g,0),D(I(w-2),-(E?v:g),0)):D(w+1,E?v:g,0),D(w,p[w]+(E?v:g),S),D(I(w-1),p[I(w-1)]+(E?v:g),S),I(w-1)),!y.isAdPlaying()&&y.getIsFSModalOpened()&&o.x<30&&r<0||o.x>g-30&&0<r?y.setIsFSModalOpened(!1):x(R(),f[w],r)):c.continuous?(D(I(w-1),-(E?v:g),S),D(w,0,S),D(I(w+1),E?v:g,S)):(D(w-1,-(E?v:g),S),D(w,0,S),D(w+1,E?v:g,S))),V(e)?(b.removeEventListener("mousemove",L,!1),b.removeEventListener("mouseup",L,!1),b.removeEventListener("mouseleave",L,!1)):(b.removeEventListener("touchmove",L,!!h.passiveEvents&&{passive:!1}),b.removeEventListener("touchend",L,!1)),function(e,t){c.dragEnd&&c.dragEnd(e,t)}(R(),f[w])},transitionEnd:function(e){var t=parseInt(e.target.getAttribute("data-index"),10);t===w&&((l||c.autoRestart)&&N(),O(R(),f[w]))}};return r(),B(),{setup:r,slide:function(e,t){_(),M(e,t)},prev:function(){_(),function(){if(t)return;c.continuous?M(w-1):w&&M(w-1)}()},next:function(){_(),P()},restart:N,stop:_,getPos:R,disable:function(){_(),t=!0},enable:function(){t=!1,N()},getNumSlides:function(){return m},kill:function(){_(),u.style.visibility="",E?b.style.height="":b.style.width="";b.style[A]="";var e=f.length;for(;e--;){h.transitions&&F(e,0,0);var t=f[e];if(t.getAttribute("data-cloned"))t.parentElement.removeChild(t);E?t.style.height="":t.style.width="",t.style[A]="",t.style.webkitTransitionDuration=t.style.MozTransitionDuration=t.style.msTransitionDuration=t.style.OTransitionDuration=t.style.transitionDuration="",t.style.webkitTransform=t.style.msTransform=t.style.MozTransform=t.style.OTransform=""}C(),T.cancel()}}}function C(){h.addEventListener?(b.removeEventListener("touchstart",L,!!h.passiveEvents&&{passive:!0}),b.removeEventListener("mousedown",L,!1),b.removeEventListener("webkitTransitionEnd",L,!1),b.removeEventListener("msTransitionEnd",L,!1),b.removeEventListener("oTransitionEnd",L,!1),b.removeEventListener("otransitionend",L,!1),b.removeEventListener("transitionend",L,!1),U.removeEventListener("resize",L,!1)):U.onresize=null}function k(e){var t=e.cloneNode(!0);b.appendChild(t),t.setAttribute("data-cloned",!0),t.removeAttribute("id")}function r(e){var t,i,n,r;if(null!=e)for(var a in e)c[a]=e[a];f=b.children,m=f.length;for(var o=0;o<f.length;o++)f[o].getAttribute("data-cloned")&&m--;if(f.length<2&&(c.continuous=!1),h.transitions&&c.continuous&&f.length<3&&(k(f[0]),k(f[1]),f=b.children),"right"===A)for(var s=0;s<f.length;s++)f[s].style.float="right";p=new Array(f.length),g=null!==(t=null===(i=c.dimensions)||void 0===i?void 0:i.width)&&void 0!==t?t:u.getBoundingClientRect().width||u.offsetWidth,v=null!==(n=null===(r=c.dimensions)||void 0===r?void 0:r.height)&&void 0!==n?n:u.getBoundingClientRect().width*(16/9)||u.offsetWidth*(16/9),E?b.style.height=f.length*v*2+"px":b.style.width=f.length*g*2+"px";for(var l=f.length;l--;){var d=f[l];d.style.height=v+"px",d.style.width=g+"px",d.setAttribute("data-index",l),h.transitions&&(d.style[A]=l*-(E?v:g)+"px",D(l,l<w?-(E?v:g):w<l?E?v:g:0,0))}c.continuous&&h.transitions&&(D(I(w-1),-(E?v:g),0),D(I(w+1),E?v:g,0)),h.transitions||(b.style[A]=w*-(E?v:g)+"px"),u.style.visibility="visible",C(),h.addEventListener?(h.touch&&b.addEventListener("touchstart",L,!!h.passiveEvents&&{passive:!0}),c.draggable&&b.addEventListener("mousedown",L,!1),h.transitions&&(b.addEventListener("webkitTransitionEnd",L,!1),b.addEventListener("msTransitionEnd",L,!1),b.addEventListener("oTransitionEnd",L,!1),b.addEventListener("otransitionend",L,!1),b.addEventListener("transitionend",L,!1)),U.addEventListener("resize",L,!1)):U.onresize=T}function P(){t||(c.continuous?M(w+1):w<f.length-1&&M(w+1))}function x(e,t,i){c.callback&&c.callback(e,t,i)}function O(e,t){c.transitionEnd&&c.transitionEnd(e,t)}function I(e){return(f.length+e%f.length)%f.length}function R(){var e=w;return m<=e&&(e-=m),e}function M(e,t){if(e="number"!=typeof e?parseInt(e,10):e,w!==e){if(h.transitions){var i=Math.abs(w-e)/(w-e);if(c.continuous){var n=i;(i=-p[I(e)]/(E?v:g))!==n&&(e=-i*f.length+e)}for(var r=Math.abs(w-e)-1;r--;)D(I((w<e?e:w)-r-1),(E?v:g)*i,0);e=I(e),D(w,(E?v:g)*i,t||S),D(e,0,t||S),c.continuous&&D(I(e-i),-(E?v:g)*i,0)}else e=I(e),function(t,i,n){if(!n)return b.style[A]=i+"px";var r=+new Date,a=setInterval(function(){var e=+new Date-r;if(n<e)return b.style[A]=i+"px",(l||c.autoRestart)&&N(),O(R(),f[w]),void clearInterval(a);b.style[A]=(i-t)*(Math.floor(e/n*100)/100)+t+"px"},4)}(w*-(E?v:g),e*-(E?v:g),t||S);w=e,d(function(){x(R(),f[w],i)})}}function D(e,t,i){F(e,t,i),p[e]=t}function F(e,t,i){var n=f[e],r=n&&n.style;r&&(r.webkitTransitionDuration=r.MozTransitionDuration=r.msTransitionDuration=r.OTransitionDuration=r.transitionDuration=i+"ms",r.webkitTransform=r.msTransform=r.MozTransform=r.OTransform=r.transform=E?"translateY("+t+"px)":"translateX("+t+"px)")}function B(){(l=c.auto||0)&&(e=setTimeout(P,l))}function _(){l=0,clearTimeout(e)}function N(){_(),B()}function V(e){return/^mouse/.test(e.type)}}return(U.jQuery||U.Zepto)&&function(t){t.fn.Swipe=function(e){return this.each(function(){t(this).data("Swipe",new i(t(this)[0],e))})}}(U.jQuery||U.Zepto),i}(),i.Swipe}.apply(a,[]))||(r.exports=t)}).call(this,e(35))},function(e,t,i){"use strict";function n(s){var l=1<arguments.length&&void 0!==arguments[1]&&arguments[1],d=null;return new Promise(function(e,t){if(s)e(!1);else{var i=function(){r.play().then(function(){o(),e(!0)}).catch(function(){o(),t(!1)})},n=new Blob([new Uint8Array([0,0,0,28,102,116,121,112,105,115,111,109,0,0,2,0,105,115,111,109,105,115,111,50,109,112,52,49,0,0,0,8,102,114,101,101,0,0,2,239,109,100,97,116,33,16,5,32,164,27,255,192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,167,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,33,16,5,32,164,27,255,192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,167,128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,0,0,2,194,109,111,111,118,0,0,0,108,109,118,104,100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,232,0,0,0,47,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,1,236,116,114,97,107,0,0,0,92,116,107,104,100,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,47,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,101,100,116,115,0,0,0,28,101,108,115,116,0,0,0,0,0,0,0,1,0,0,0,47,0,0,0,0,0,1,0,0,0,0,1,100,109,100,105,97,0,0,0,32,109,100,104,100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,172,68,0,0,8,0,85,196,0,0,0,0,0,45,104,100,108,114,0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0,0,0,1,15,109,105,110,102,0,0,0,16,115,109,104,100,0,0,0,0,0,0,0,0,0,0,0,36,100,105,110,102,0,0,0,28,100,114,101,102,0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1,0,0,0,211,115,116,98,108,0,0,0,103,115,116,115,100,0,0,0,0,0,0,0,1,0,0,0,87,109,112,52,97,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,2,0,16,0,0,0,0,172,68,0,0,0,0,0,51,101,115,100,115,0,0,0,0,3,128,128,128,34,0,2,0,4,128,128,128,20,64,21,0,0,0,0,1,244,0,0,1,243,249,5,128,128,128,2,18,16,6,128,128,128,1,2,0,0,0,24,115,116,116,115,0,0,0,0,0,0,0,1,0,0,0,2,0,0,4,0,0,0,0,28,115,116,115,99,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,2,0,0,0,1,0,0,0,28,115,116,115,122,0,0,0,0,0,0,0,0,0,0,0,2,0,0,1,115,0,0,1,116,0,0,0,20,115,116,99,111,0,0,0,0,0,0,0,1,0,0,0,44,0,0,0,98,117,100,116,97,0,0,0,90,109,101,116,97,0,0,0,0,0,0,0,33,104,100,108,114,0,0,0,0,0,0,0,0,109,100,105,114,97,112,112,108,0,0,0,0,0,0,0,0,0,0,0,0,45,105,108,115,116,0,0,0,37,169,116,111,111,0,0,0,29,100,97,116,97,0,0,0,1,0,0,0,0,76,97,118,102,53,54,46,52,48,46,49,48,49])],{type:"video/mp4"}),r=document.createElement("video");r.style.position="absolute",r.style.height="0px",r.style.width="0px",r.setAttribute("controls","controls"),r.autoplay=!0,r.preload="auto",r.setAttribute("webkit-playsinline","webkit-playsinline"),r.setAttribute("playsinline","playsinline");var a=function(){(0<r.currentTime||1==r.ended)&&(o(),e(!0))},o=function(){clearTimeout(d),r.removeEventListener("playing",a),r.removeEventListener("timeupdate",a),r.removeEventListener("loadeddata",i)};r.addEventListener("playing",a),r.addEventListener("timeupdate",a),r.addEventListener("loadeddata",i),r.src=l?"https://universal.trvdp.com/blank_320.mp4":URL.createObjectURL(n),r.load(),d=setTimeout(function(){o(),e(!1)},3e3)}})}i.d(t,"a",function(){return n})},function(e,t){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"==typeof window&&(i=window)}e.exports=i},function(e,t,i){"use strict";i.d(t,"a",function(){return r});var a=i(6),n=i(13),o=i(7);function r(e){this.widget=e,this.isDailyOrSessionFqEnabled=!1,this.isHourFQEnabled=!1,this.shouldWriteToCookie=!1,this.isDailyFQEnabled=!1,e.outofviewMethod==a.d||e.outofviewMethod==a.c?this.SetFQ(e.outofviewAdOnlyFQ,e.outofviewAdOnlyFQDaily,e.outofviewAdOnlyFQHourly):e.outofviewMethod==a.e&&this.SetFQ(e.outofviewFloaterFQ,e.outofviewFloaterFQDaily,e.outofviewFloaterFQHourly),this.shouldWriteToCookie&&(this.isDailyOrSessionFqEnabled||this.isHourFQEnabled)&&this.widget.player.subscribe(n.d,this.onFloaterFQDecreased.bind(this))}r.prototype.SetFQ=function(e,t,i){this.isDailyOrSessionFqEnabled=e,this.numberOfTimesFloaterIsAllowedToBeOpened=e,t&&(this.isDailyFQEnabled=!0,this.numberOfTimesFloaterIsAllowedToBeOpened=e-this.widget.floaterOOVTimesShown),i&&(this.isHourFQEnabled=!0,this.numberOfTimesFloaterIsAllowedToBeOpened=i-this.widget.floaterOOVTimesShownHourly),this.shouldWriteToCookie=t||i},r.prototype.onFloaterFQDecreased=function(){this.widget.floaterOOVTimesShown++,this.widget.floaterOOVTimesShownHourly++;var e=Object(o.a)(a.b);e=e&&JSON.parse(e);var t=null;if(this.isHourFQEnabled){t={};var i=0;e&&e.hourlyFQTimestamp&&(new Date-new Date(e.hourlyFQTimestamp))/1e3/60/60<1?(i=e.timesShownHourly,t.hourlyFQTimestamp=e.hourlyFQTimestamp):t.hourlyFQTimestamp=Date.now(),i++,t.timesShownHourly=i}else if(this.isDailyFQEnabled){t={};var n=0;e&&e.dailyFQTimestamp&&(new Date-new Date(e.dailyFQTimestamp))/1e3/60/60<24?(n=e.timesShown,t.dailyFQTimestamp=e.dailyFQTimestamp):t.dailyFQTimestamp=Date.now(),n++,t.timesShown=n}if(t){var r=new Date;r.setTime(r.getTime()+a.g),Object(o.c)(a.b,t,r,this.widget.playerRequest.dcookie)}},r.prototype.IsFQEnabled=function(){return this.isDailyOrSessionFqEnabled||this.isHourFQEnabled},r.prototype.GetNumberOfTimesFloaterIsAllowedToBeOpened=function(){return this.numberOfTimesFloaterIsAllowedToBeOpened}},function(e,t,i){"use strict";i.d(t,"a",function(){return o});var n=i(1),r=i(3),a=i(10);function o(e){this.widget=e,this.widget.autoplay=!1,this.isBidding=!1,this.onBiddingSessionEndsHandler=this.onBiddingSessionEnds.bind(this),this.onAdStartedHandler=this.onAdStarted.bind(this),this.widget.player.subscribe(n.f,function(t){return new Promise(function(e){void 0!==t.detail.switchToCTP&&t.detail.switchToCTP&&(this.widget.allowBiddingOnVideoChangeEvent=!1),!this.widget.player.useVerticalSwiper()&&this.widget.adSlots.IsPreroll()&&(window.playerLog("setting click to play because preroll exist"),this.widget.player.setPlayerContentStatus(n.g)),e()}.bind(this))}.bind(this)),this.widget.player.subscribe(a.e,function(){!this.IsBidding()&&this.widget.allowBiddingOnVideoChangeEvent&&this.StartBidding()}.bind(this)),this.widget.player.subscribe(a.f,function(){this.widget.player.isBiddingSessionRunning()||this.widget.player.isAdPlaying()||this.StartPrerollBidding()}.bind(this))}o.prototype.IsBidding=function(){return this.isBidding},o.prototype.IsBiddingFinished=function(){return!this.isBidding&&!this.widget.adSlots.IsSlotAvailable(0)},o.prototype.StartPrerollBidding=function(){var e=this.widget.player.getVerticalAdSlots().filter(function(e){return e.type===a.d});null!=e&&e.length&&(this.isBidding=!0,console.log("verticalplayer_preroll"),this.widget.player.StartBiddingSession(e[0]))},o.prototype.StartBidding=function(){var e=this.widget.adSlots.IsSlotAvailable(0);e&&(this.isBidding=!0,this.RegisterToPrerollEvents(),this.widget.adSlots.RemoveSlot(e.offset),this.widget.player.StartBiddingSession(e))},o.prototype.onBiddingSessionEnds=function(){this.isBidding=!1,this.widget.player.getPlayerContentStatus()==n.g&&this.widget.allowToStartContentAfterPreroll&&(this.widget.player.SetAllowStartingContentOnPlayRequest(!0),this.widget.player.play()),this.widget.player.unsubscribe(r.g,this.onBiddingSessionEndsHandler),this.widget.player.unsubscribe(r.c,this.onAdStartedHandler)},o.prototype.RegisterToPrerollEvents=function(){this.widget.player.subscribe(r.g,this.onBiddingSessionEndsHandler),this.widget.player.subscribe(r.c,this.onAdStartedHandler)},o.prototype.onAdStarted=function(){this.isBidding=!1,this.widget.player.setPlayerContentStatus(n.i),this.widget.player.SetAllowStartingContentOnPlayRequest(!0),this.widget.player.unsubscribe(r.c,this.onAdStartedHandler),this.widget.player.unsubscribe(r.g,this.onBiddingSessionEndsHandler)}},function(e,t,i){"use strict";function g(e){this.api=e}function v(){this.subscribers=[],this.allowedEvents=["loaded","ready","click","adImpression","adClick"]}i.d(t,"a",function(){return n}),g.prototype.notify=function(e,t){this.api.fire(e,t)},v.prototype.on=function(e,t,i){if("function"!=typeof t)throw"callback is not a function";if(!(-1<this.allowedEvents.indexOf(e)))throw"event registration is not allowed";void 0===this.subscribers[e]&&(this.subscribers[e]=[]),this.subscribers[e].push({callback:t,context:i||this})},v.prototype.off=function(e,t){for(var i=this.subscribers[e],n=i?i.length:0,r=0;r<n;r++)i[r].callback==t&&i.splice(r,1)},v.prototype.fire=function(e,t){for(var i=this.subscribers[e],n=i?i.length:0,r=0;r<n;r++)i[r].callback.call(i[r].context,t)};var m=i(7),b=i(9);function y(r,a,o,s,l,d,u,c,h,f,p,g,v,m,y){return new Promise(function(i,n){void 0===window.truvid_protected&&(window.truvid_protected={result:null,fraud:null});var e=function(e,t,i,n){if(e){if(!i)return!0;try{var r;return!(r=n||A())||(r.geo!=t||(void 0===r.val||void 0===r.timestamp?1==parseInt(r.level):Math.round((new Date).getTime()/1e3)-r.timestamp<600?"t"==r.val||"c"!=r.val&&null:"t"==r.val||("c"==r.val&&1==parseInt(r.level)||("c"!=r.val||2!=parseInt(r.level)))))}catch(e){return!0}}return!1}(r,s,o,m);if(null===e)n();else if(!1===e)i(!0);else if(null==window.truvid_protected.result)(function(t,a,o,s,l,d,u,c,h,f,p,g){return new Promise(function(i,n){var r=w(t,a,o,s,f);l&&T(r[0],r[1],d,u,c,h,f);var e="https://rt.ad-score.com/score/cors?s=1".concat("&pid=",r[0],"&tid=truvidTraffic&",r[1],"&cb=",Math.random().toString());Object(b.a)(e,!0,2500).then(function(e){if("error"===e)S("ex",r[0],r[1]),i(null);else if("timeout"==e)S("t",r[0],r[1]),E(o,"t",d,p,f,g),i(null);else{var t=JSON.parse(e.toString());t&&"undefined"!=t.score&&void 0!==t.score.black?i(t):(S("ex",r[0],r[1]),n("error from protected"))}}).catch(function(e){console.log(e),n("error protected code")})})})(l,c,s,u,h,d,f,p,g,v,m,y).then(function(e){if(e){var t=100==e.score.black;if(window.truvid_protected.fraud=t,window.truvid_protected.result=!0,o)E(s,1==t?"f":"c",d,m,v,y);a&&t?n("protected error"):i(!0)}else i(!0)}).catch(function(e){console.log("error fetching protected"),console.log(e),i(!0)});else{if(h){var t=w(l,c,s,u,v);T(t[0],t[1],d,f,p,g,v)}0==window.truvid_protected.fraud?i(!0):a&&n("protected error")}})}function w(e,t,i,n,r){var a="pub_domain="+window.location.hostname+"&l1="+e;return a+="&l2="+t,a+="&l3="+i,a+=n?"&l4=mobile":"&l4=desktop",["1000032",a+="&l5="+r]}function E(e,t,i,n,r,a){var o,s=0;(o=n||A())&&o.level?(0==(s=parseInt(o.level))||1==s&&e==o.geo)&&(void 0!==o.fraud?0==o.fraud&&"c"==t&&(s+=1):void 0!==o.val&&("t"!=o.val&&"c"!=o.val||"c"!=t?"f"==t&&(s=0):s+=1)):"c"==t&&(s+=1);var l=Math.round((new Date).getTime()/1e3),d={val:t,level:s,geo:e,timestamp:l};o&&o.jsdt&&(d.jsdt=o.jsdt);var u=h();Object(m.c)("truvid_protected",d,u,i),c(t,e,l,s,r,a)}function c(e,t,i,n,r,a){var o=document.createElement("div");o.innerHTML='<iframe class="truvid-protected-c" height="0" width="0" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="'+a+"v"+r+"/prtct.php?val="+e+"&geo="+t+"&timestamp="+i+"&level="+n+'" style="border: 0; display: none;"></iframe>',document.body.appendChild(o)}function h(){var e=new Date;return e.setTime(e.getTime()+5184e6),e}function S(e,t,i){document.createElement("img").src="https://rt.ad-score.com/score/img?s="+e+"&r="+Math.random()+"&pid="+t+"&tid=truvidTraffic&"+i}function A(){try{var e=Object(m.a)("truvid_protected");if((e=JSON.parse(e))&&((void 0!==e.fraud||void 0!==e.val)&&void 0!==e.level&&void 0!==e.geo||void 0!==e.jsdt))return e}catch(e){}return null}function T(e,t,i,n,r,a,o){var s=A();if(s&&s.jsdt&&(Date.now()-s.jsdt)/1e3/60/60<24)return!1;var l="&ref="+a+"&cid="+n+"&uip="+r+"&pub_ua="+navigator.userAgent,d=document.createElement("script");d.type="text/javascript",d.async=!0,d.src="https://js.ad-score.com/score.min.js?pid="+e+"&tt=g#tid=videoJS&"+t+l+"&cb="+Math.random().toString(),document.head.appendChild(d),(s=s||{}).jsdt=(new Date).getTime();var u=h();Object(m.c)("truvid_protected",s,u,i),c(s.val,s.geo,s.timestamp,s.level,o)}var L=i(5),C=i(2);function n(c,h,f,p){return new Promise(function(e,t){h.fiframe=Object(L.c)();var i=new v;if(void 0!==window.truvid_callback)try{window.truvid_callback(i)}catch(e){}var n=new g(i);n.notify("loaded",{widgetId:h.wid});var r=c.w,a=Object(m.b)(c.d);h.dcookie=a;var o=null==r.pra||r.pra,s=null==r.prb||r.prb,l=null==r.prc||r.prc;l&&(c.g||c.ou)&&(l=!1);var d=l&&c.pjs,u=c.v+(void 0!==c.isab&&c.isab?"B":"");y(o,s,l,c.geo,h.wid,a,c.m,c.d,d,c.cid,c.ip,h.purl,u,c.prtct).then(function(){new p(c,r,h,f).loadPlayer(n).then(function(){e()}).catch(function(e){Object(C.b)("initcatchEx",h,e),console.log("error on loading player"),console.log(e),t(e)})}).catch(function(e){t(e)})})}},,,,function(e,t,i){"use strict";i.r(t);var r=i(21),o=i(20),n=i(1),a=i(3),s=i(10),l=(i(13),i(12));function d(e){this.widget=e,this.playerReady=!1,this.lastBidDate=null,this.biddingInterval=null,this.interval=30*l.a,this.biddingIntervalFunctionBinding=null,this.pauseOnNextOutOfView=!1,this.switchedToC2P=!1,this.onBiddingSessionEndsBinding=this.onBiddingSessionEnds.bind(this),this.onAdStartedBinding=this.onAdStarted.bind(this),this.onBeforeBiddingSessionStartBinding=this.onBeforeBiddingSessionStart.bind(this)}d.prototype.Init=function(){return new Promise(function(e){this.setAdInitiation(),e()}.bind(this))},d.prototype.onPlayerViewabilityChange=function(){this.slotsReady&&(this.widget.player.IsPlayerViewable()?(this.widget.player.isAdPlaying()||(this.pauseOnNextOutOfView=!0),this.widget.allowBiddingOnVideoChangeEvent=!0,this.widget.player.SetAllowRestoringContent(!0),this.playerReady&&this.widget.player.SetAllowStartingContentOnPlayRequest(!0),this.widget.player.isAdPlaying()||this.stop()):!this.pauseOnNextOutOfView&&!this.widget.player.getPlayerStoppedOnPageVisibilityEvent()||this.widget.player.isAdPlaying()||this.widget.player.isBiddingSessionRunning()||(this.pauseOnNextOutOfView=!1,this.widget.player.SetAllowStartingContentOnPlayRequest(!1),this.widget.player.SetAllowRestoringContent(!1),this.widget.player.pause(!1),this.start()))},d.prototype.setAdInitiation=function(){this.biddingIntervalFunctionBinding=this.biddingIntervalFunction.bind(this),this.widget.allowBiddingOnVideoChangeEvent=!1,this.widget.player.subscribe(a.f,function(){this.lastBidDate=new Date}.bind(this)),this.widget.player.subscribe(n.l,function(e){var t=e.detail.isPlayerViewable;this.onPlayerViewabilityChange(t)}.bind(this)),this.widget.player.subscribe(a.c,function(){this.clearBiddingTimeout(),this.pauseOnNextOutOfView=!1,this.widget.player.SetAllowRestoringContent(!0),this.widget.player.SetAllowStartingContentOnPlayRequest(!0),this.widget.player.setPlayerContentStatus(n.i)}.bind(this)),this.widget.player.subscribe(n.a,function(){this.widget.player.SetLoadVideoOnPlaylistChange(!0),this.widget.player.IsPlayerViewable()||(this.clearBiddingTimeout(),this.start())}.bind(this)),this.widget.player.subscribe(a.h,function(e){var t=e.detail;this.clearBiddingTimeout(),null!=t&&t.oovBiddingIntervalSec&&(this.interval=t.oovBiddingIntervalSec*l.a),this.start()}.bind(this)),this.widget.player.subscribe(n.j,function(){this.widget.player.useVerticalSwiper()||(this.playerReady=!0,this.widget.player.IsPlayerViewable()?this.widget.Play():(this.widget.player.SetAllowStartingContentOnPlayRequest(!1),this.widget.player.SetAllowRestoringContent(!1),this.start(),this.biddingIntervalFunction()))}.bind(this)),this.widget.player.subscribe(n.f,this.onNewVideoBeforeVideoChanged.bind(this)),this.widget.player.subscribe(s.e,this.onSetSlotsEvents.bind(this)),this.widget.player.subscribe(a.e,this.onBeforeBiddingSessionStartBinding)},d.prototype.onSetSlotsEvents=function(){this.slotsReady=!0,this.widget.player.IsPlayerViewable()?(this.pauseOnNextOutOfView=!0,this.widget.allowBiddingOnVideoChangeEvent=!0,this.widget.player.SetAllowRestoringContent(!0),this.playerReady&&this.widget.player.SetAllowStartingContentOnPlayRequest(!0),this.stop()):this.pauseOnNextOutOfView&&(this.pauseOnNextOutOfView=!1,this.widget.player.SetAllowStartingContentOnPlayRequest(!1),this.widget.player.SetAllowRestoringContent(!1),this.widget.player.pause(!1),this.start()),this.switchedToC2P=!1},d.prototype.start=function(){this.widget.player.unsubscribe(a.g,this.onBiddingSessionEndsBinding),this.widget.player.unsubscribe(a.c,this.onAdStartedBinding),null==this.biddingInterval&&(window.playerLog("setting interval bidding"),this.biddingInterval=setInterval(this.biddingIntervalFunctionBinding,this.interval))},d.prototype.biddingIntervalFunction=function(){if(this.widget.player.canStartBiddingSession()){var e=this.widget.player.getVideo().currentTime,t=this.widget.adSlots.getLastSlotByOffset(e);t?this.widget.player.StartBiddingSession(t):window.playerLog("no ad slot")}else window.playerLog("can not start bidding session")},d.prototype.clearBiddingTimeout=function(){clearInterval(this.biddingInterval),this.biddingInterval=null},d.prototype.stop=function(){this.clearBiddingTimeout(),this.switchedToC2P||0!=this.widget.player.getCurrentContentTime()||null==this.widget.preroll||!this.widget.preroll.IsBiddingFinished()?this.switchedToC2P||(this.widget.Play(),this.widget.preroll&&!this.widget.preroll.IsBiddingFinished()&&this.widget.preroll.IsBidding()&&(this.widget.player.subscribe(a.g,this.onBiddingSessionEndsBinding),this.widget.player.subscribe(a.c,this.onAdStartedBinding))):this.widget.preroll.IsBidding()||this.widget.Play()},d.prototype.onNewVideoBeforeVideoChanged=function(e){this.widget.player.useVerticalSwiper()||(this.slotsReady=!1,this.widget.player.IsPlayerViewable()?this.widget.allowToStartContentAfterPreroll=!0:(window.playerLog("dont load video on next video"),this.widget.player.SetAllowStartingContentOnPlayRequest(!1),this.widget.allowToStartContentAfterPreroll=!1),this.widget.isPreroll&&this.widget.player.SetLoadVideoOnPlaylistChange(!1),this.switchedToC2P=e.detail.switchToCTP)},d.prototype.onBiddingSessionEnds=function(){this.widget.player.unsubscribe(a.c,this.onAdStartedBinding),this.widget.player.unsubscribe(a.g,this.onBiddingSessionEndsBinding),this.widget.player.IsPlayerViewable()&&(window.playerLog("play from bidding session ends"),this.widget.Play())},d.prototype.onAdStarted=function(){this.widget.player.unsubscribe(a.g,this.onBiddingSessionEndsBinding),this.widget.player.unsubscribe(a.c,this.onAdStartedBinding)},d.prototype.onBeforeBiddingSessionStart=function(){return new Promise(function(e,t){this.widget.player.getPlayerDimension().height<=50?setTimeout(function(){this.widget.player.getPlayerDimension().height<=50?setTimeout(function(){this.widget.player.getPlayerDimension().height<=50?this.widget.player.isAdOnlyAvailable()?e():t():e()}.bind(this),2e3):e()}.bind(this),2e3):e()}.bind(this))};var u=i(34);function c(e){this.widget=e}function h(e){this.widget=e}c.prototype.Init=function(){return new Promise(function(e){var t,i;Object(u.a)(this.widget.mute,null!==(t=null===(i=this.widget)||void 0===i?void 0:i.playOnlyMp4)&&void 0!==t&&t).then(function(){this.setAutoplay(),e()}.bind(this)).catch(function(){this.widget.autoplay=!1,this.widget.allowBiddingOnVideoChangeEvent=!1,e()}.bind(this))}.bind(this))},c.prototype.setAutoplay=function(){this.widget.adSlots&&this.widget.adSlots.IsPreroll()&&(this.widget.autoplay=!1,this.widget.player.subscribe(n.j,function(){this.widget.adSlots.IsSlotAvailable(0)&&this.widget.preroll.StartBidding()}.bind(this)))},h.prototype.Init=function(){return new Promise(function(e){this.widget.autoplay=!1,this.widget.allowBiddingOnVideoChangeEvent=!1,e()}.bind(this))};var f=i(36),p=i(37);function g(e){this.widget=e,this.savingModeForContentTimeout=null,this.widget.player.subscribe(n.j,function(){this.initSavingModeTracking()}.bind(this))}function v(e){this.widget=e,this.sessionTotalTime=0,this.viewabilityTotalTime=0,this.widget.player.subscribe(n.j,function(){this.viewabilityInterval=window.setInterval(function(){this.widget.player.isAdPlaying()||(this.sessionTotalTime+=250,this.widget.player.IsPlayerViewable()&&(this.viewabilityTotalTime+=250))}.bind(this),250),window.addEventListener("unload",function(){var e=this.widget.getDynamicPixel("dvw","vw",(this.viewabilityTotalTime/this.sessionTotalTime*100).toFixed(0));navigator.sendBeacon(e,null)}.bind(this))}.bind(this))}g.prototype.initSavingModeTracking=function(){var e=new IntersectionObserver(this.onSavingModeViewabilityCallback.bind(this),{root:null,rootMargin:"0px",threshold:.25}),t=this.widget.player.getPlayerElement();t&&e.observe(t)},g.prototype.onSavingModeViewabilityCallback=function(e){e[0].intersectionRatio<.25?this.savingModeForContentTimeout||(this.savingModeForContentTimeout=setTimeout(function(){this.savingModeForContentTimeout=null,this.widget.player.EnableSavingModeForContent()}.bind(this),2e3)):(clearTimeout(this.savingModeForContentTimeout),this.savingModeForContentTimeout=null,this.widget.player.isAdPlaying()&&"adonly"==this.widget.outofviewMethod||this.widget.player.DisableSavingModeForContent())};var m=i(6);function y(e){this.widget=e,this.pausedByOutOfView=!1,this.widget.player.subscribe(n.l,function(e){e.detail.isPlayerViewable||this.widget.player.getPlayerContentStatus()!=n.i?this.pausedByOutOfView&&this.widget.player.play():(this.pausedByOutOfView=!0,this.widget.player.pause())}.bind(this))}var b=i(2);function w(e,t,i,n,r,a){this.playerRequest=i,o.a.call(this,e,t,i,n,r,a),this.setInstreamConfig(),void 0!==t.aa&&0==t.aa?this.renderWidget():this.setAdvertising().then(function(){this.renderWidget()}.bind(this)).catch(function(e){Object(b.b)("setAdvertisingError",this.playerRequest,e)}.bind(this))}function E(e,t,i,n){r.a.call(this,e,t,i,n)}(w.prototype=Object.create(o.a.prototype)).constructor=o.a,w.prototype.setInstreamConfig=function(){if(this.playerRequest.adblock&&(this.playInitMethod="click_to_play"),this.inFriendlyIframe&&(this.windowToListenToEvents=window.top),this.autoSkipTimeToStopPlayer=this.widgetStaticConfig.asstsc,this.autoSkipTimeToAutoSkip=this.widgetStaticConfig.asct,this.pauseOnHiddenTab=this.widgetStaticConfig.poht||!1,this.isPrebidActive=this.widgetStaticConfig.hba||!1,this.floateFq=new f.a(this),[m.c,m.d,m.e].includes(this.outofviewMethod)){var e=!1;[m.e].includes(this.outofviewMethod)&&(e=!this.outofviewFloaterStartWithFloater),[m.d,m.c].includes(this.outofviewMethod)&&(e=this.isMobile?this.widgetStaticConfig.oovaoavm||!1:this.widgetStaticConfig.oovaoav||!1),this.floaterSettings={enableFq:this.floateFq.IsFQEnabled(),fq:this.floateFq.GetNumberOfTimesFloaterIsAllowedToBeOpened(),showOnlyOnAds:[m.d,m.c].includes(this.outofviewMethod),openFloaterOnNextAd:this.outofviewMethod==m.e,showAfterPlayerView:e,width:this.floaterWidthOnOutofview,height:this.floaterHeightOnOutofview,padding:this.floaterPadding,position:this.floaterPositionOutOfView,closeButtonPosition:this.floaterCloseButtonPosition,counterToCloseFloater:this.closeFloaterDelay,adOnlyFollowsContent:this.outofviewMethod===m.c}}this.isAdOnlyOOVMethod=this.outofviewMethod===m.d,this.savingMode=new g(this),this.viewabilityCounter=new v(this),this.outofviewMethod==m.f&&(this.outofviewMethodPause=new y(this))},w.prototype.setPlayInitMethod=function(){return new Promise(function(t){switch(this.playInitMethod){case"autoplay":this.SetAutoplayMethod();break;case"click_to_play":this.SetClickToPlay();break;default:this.playInitMethodObj=new d(this)}this.playInitMethodObj?this.playInitMethodObj.Init().then(function(){t()}.bind(this)).catch(function(e){Object(b.b)("playinitmehtod.initEx",this.playerRequest,e),t()}.bind(this)):t()}.bind(this))},w.prototype.Play=function(){this.player.getPlayerPausedOnUserBehalf()||(this.preroll&&!this.preroll.IsBiddingFinished()?this.preroll.IsBidding()||this.preroll.StartBidding():this.preroll&&this.preroll.IsBidding()||this.player.play())},w.prototype.SetClickToPlay=function(){this.playInitMethodObj=new h(this)},w.prototype.SetAutoplayMethod=function(){this.playInitMethodObj=new c(this)},w.prototype.renderWidget=function(){this.loadPlayer&&(this.renderVideoPlayer(),this.initStyle())},w.prototype.afterPlaylistChange=function(){this.adSlots.IsSlotAvailable(0)&&(window.playerLog("setting click to play because afterplaylistchange"),this.player.setPlayerContentStatus(n.g))},w.prototype.initStyle=function(){},w.prototype.SetOnPassbackCallback=function(e){this.onPassbackCallback=e},w.prototype.listenToPlayerEvents=function(){this.player.subscribe(n.q,function(e){if(!this.player.useVerticalSwiper()&&void 0!==e.detail.currentTime){var t=this.adSlots.IsSlotAvailable(e.detail.currentTime);if(t)this.player.canStartBiddingSession()&&(this.adSlots.RemoveSlot(t.offset),this.player.StartBiddingSession(t))}}.bind(this)),this.player.subscribe(n.p,function(){this.allowBiddingOnVideoChangeEvent=!0}.bind(this))},w.prototype.setAdvertising=function(){return new Promise(function(t){this.adSlots=new s.a(this),this.allowToStartContentAfterPreroll=!0,this.adSlots.isPreroll&&(this.preroll=new p.a(this)),this.setPlayInitMethod().then(function(){this.listenToPlayerEvents(),t()}.bind(this)).catch(function(e){Object(b.b)("setPlayerinitMethodListenEx",this.playerRequest,e),t()}.bind(this))}.bind(this))},(E.prototype=Object.create(r.a.prototype)).constructor=r.a,E.prototype.renderWidget=function(){try{this.widgetObject=new w(this.serverResponse,this.widgetStaticConfig,this.playerRequest,this.playerScript,this.apiObservable,this.parentElement),this.widgetObject.SetOnPassbackCallback(this.switchToPassback.bind(this))}catch(e){console.log("error loading player",e),Object(b.b)("renderWidgetEx",this.playerRequest,e)}},E.prototype.setPlacementForWidgetType=function(e){var t=this.serverResponse.pl,i=this.widgetStaticConfig.ppnpf,n=null,r=null,a="";if(null!=t&&t.length)for(var o=0;o<t.length;o++)try{var s=t[o].s,l=document.querySelector(s);if(null!=l&&l.parentElement&&!"BODY".includes(l.parentElement.nodeName)){r=l,a=t[o].i;break}}catch(e){continue}if(!r){var d;if(null!=t&&t.length&&i&&e)return e(),null;var u=null===(d=localStorage)||void 0===d?void 0:d.getItem("truvid_place_selector");u&&(r=document.querySelector(u))}return r&&(n=document.createElement("div"),"before"===a?r.parentElement.insertBefore(n,r):"after"===a?r.after(n):r.appendChild(n)),n};var S=i(38);window.brWidgetInit={init:function(e,t,i){Object(S.a)(e,t,i,E).catch(function(e){console.log("error construct widget"),console.log(e)})}}}]);